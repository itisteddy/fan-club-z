{"version":3,"file":"ReferralRedirectPage-e651ea2a.js","sources":["../../src/pages/ReferralRedirectPage.tsx"],"sourcesContent":["/**\n * ReferralRedirectPage\n * \n * Handles incoming referral links (/r/:code)\n * Stores the referral code and redirects to the main app\n * Feature flag: VITE_REFERRALS_ENABLE=1\n */\n\nimport React, { useEffect } from 'react';\nimport { useParams, useNavigate, useSearchParams } from 'react-router-dom';\nimport { setRefCode, isReferralEnabled } from '@/lib/referral';\nimport { Gift, Loader2 } from 'lucide-react';\n\nconst ReferralRedirectPage: React.FC = () => {\n  const { code } = useParams<{ code: string }>();\n  const [searchParams] = useSearchParams();\n  const navigate = useNavigate();\n  \n  useEffect(() => {\n    if (!code) {\n      navigate('/', { replace: true });\n      return;\n    }\n    \n    // Store the referral code if feature is enabled\n    if (isReferralEnabled()) {\n      setRefCode(code);\n      console.log('[Referral] Code captured:', code);\n    }\n    \n    // Determine redirect destination\n    const nextPath = searchParams.get('next') || '/';\n    \n    // Preserve UTM parameters for analytics\n    const utmSource = searchParams.get('utm_source');\n    const utmMedium = searchParams.get('utm_medium');\n    const utmCampaign = searchParams.get('utm_campaign');\n    \n    const redirectUrl = new URL(nextPath, window.location.origin);\n    \n    // Add UTM params to redirect URL if present\n    if (utmSource) redirectUrl.searchParams.set('utm_source', utmSource);\n    if (utmMedium) redirectUrl.searchParams.set('utm_medium', utmMedium);\n    if (utmCampaign) redirectUrl.searchParams.set('utm_campaign', utmCampaign);\n    \n    // Small delay for visual feedback, then redirect\n    const timer = setTimeout(() => {\n      navigate(redirectUrl.pathname + redirectUrl.search, { replace: true });\n    }, 500);\n    \n    return () => clearTimeout(timer);\n  }, [code, searchParams, navigate]);\n  \n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-emerald-50 via-white to-teal-50 flex items-center justify-center\">\n      <div className=\"text-center px-4\">\n        {/* Animated gift icon */}\n        <div className=\"relative mx-auto w-20 h-20 mb-6\">\n          <div className=\"absolute inset-0 bg-emerald-100 rounded-full animate-ping opacity-20\" />\n          <div className=\"relative w-20 h-20 bg-gradient-to-br from-emerald-400 to-teal-500 rounded-full flex items-center justify-center shadow-lg\">\n            <Gift className=\"w-10 h-10 text-white\" />\n          </div>\n        </div>\n        \n        {/* Loading text */}\n        <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">\n          Welcome to FanClubZ!\n        </h1>\n        <p className=\"text-gray-600 mb-6 max-w-sm mx-auto\">\n          You've been invited by a friend. Redirecting you to the app...\n        </p>\n        \n        {/* Loading spinner */}\n        <div className=\"flex items-center justify-center gap-2 text-emerald-600\">\n          <Loader2 className=\"w-5 h-5 animate-spin\" />\n          <span className=\"text-sm font-medium\">Loading...</span>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ReferralRedirectPage;\n"],"names":["ReferralRedirectPage","code","useParams","searchParams","useSearchParams","navigate","useNavigate","useEffect","setRefCode","nextPath","utmSource","utmMedium","utmCampaign","redirectUrl","timer","jsxs","jsx","Gift","Loader2"],"mappings":"oPAaA,MAAMA,EAAiC,IAAM,CACrC,KAAA,CAAE,KAAAC,GAASC,IACX,CAACC,CAAY,EAAIC,IACjBC,EAAWC,IAEjBC,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAACN,EAAM,CACTI,EAAS,IAAK,CAAE,QAAS,EAAM,CAAA,EAC/B,MACF,CAIEG,EAAWP,CAAI,EAKjB,MAAMQ,EAAWN,EAAa,IAAI,MAAM,GAAK,IAGvCO,EAAYP,EAAa,IAAI,YAAY,EACzCQ,EAAYR,EAAa,IAAI,YAAY,EACzCS,EAAcT,EAAa,IAAI,cAAc,EAE7CU,EAAc,IAAI,IAAIJ,EAAU,OAAO,SAAS,MAAM,EAGxDC,GAAuBG,EAAA,aAAa,IAAI,aAAcH,CAAS,EAC/DC,GAAuBE,EAAA,aAAa,IAAI,aAAcF,CAAS,EAC/DC,GAAyBC,EAAA,aAAa,IAAI,eAAgBD,CAAW,EAGnE,MAAAE,EAAQ,WAAW,IAAM,CAC7BT,EAASQ,EAAY,SAAWA,EAAY,OAAQ,CAAE,QAAS,GAAM,GACpE,GAAG,EAEC,MAAA,IAAM,aAAaC,CAAK,CAC9B,EAAA,CAACb,EAAME,EAAcE,CAAQ,CAAC,QAG9B,MAAI,CAAA,UAAU,uGACb,SAACU,EAAA,KAAA,MAAA,CAAI,UAAU,mBAEb,SAAA,CAACA,EAAAA,KAAA,MAAA,CAAI,UAAU,kCACb,SAAA,CAACC,EAAAA,IAAA,MAAA,CAAI,UAAU,sEAAuE,CAAA,EACtFA,EAAAA,IAAC,OAAI,UAAU,4HACb,eAACC,EAAK,CAAA,UAAU,uBAAuB,CACzC,CAAA,CAAA,EACF,EAGCD,EAAA,IAAA,KAAA,CAAG,UAAU,wCAAwC,SAEtD,uBAAA,EACCA,EAAA,IAAA,IAAA,CAAE,UAAU,sCAAsC,SAEnD,iEAAA,EAGAD,EAAAA,KAAC,MAAI,CAAA,UAAU,0DACb,SAAA,CAACC,EAAAA,IAAAE,EAAA,CAAQ,UAAU,sBAAuB,CAAA,EACzCF,EAAA,IAAA,OAAA,CAAK,UAAU,sBAAsB,SAAU,aAAA,CAAA,EAClD,CAAA,CACF,CAAA,CACF,CAAA,CAEJ"}