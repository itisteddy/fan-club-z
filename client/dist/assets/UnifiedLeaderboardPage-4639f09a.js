import{j as e,A as R,m as o}from"./ui-78f6af00.js";import{R as L,r as n}from"./vendor-2237fdcd.js";import{e as w,k as l,u as M,x as _,j as A,T as D,g as p}from"./index-2f27d801.js";import{U as z}from"./UserAvatar-fb600359.js";import{A as H}from"./AppHeader-577aa711.js";import{g as I}from"./index-51e43f4f.js";import{c as B,f as q,a as F}from"./format-42e48058.js";import"./utils-228faac7.js";import"./utils-15af1a25.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=w("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=w("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=w("Medal",[["path",{d:"M7.21 15 2.66 7.14a2 2 0 0 1 .13-2.2L4.4 2.8A2 2 0 0 1 6 2h12a2 2 0 0 1 1.6.8l1.6 2.14a2 2 0 0 1 .14 2.2L16.79 15",key:"143lza"}],["path",{d:"M11 12 5.12 2.2",key:"qhuxz6"}],["path",{d:"m13 12 5.88-9.8",key:"hbye0f"}],["path",{d:"M8 7h8",key:"i86dvs"}],["circle",{cx:"12",cy:"17",r:"5",key:"qbz8iq"}],["path",{d:"M12 18v-2h-.5",key:"fawc4q"}]]);function C({icon:c,title:r,description:h,primaryAction:d,secondaryAction:m,className:b}){return e.jsxs("div",{className:l("flex flex-col items-center justify-center text-center py-12 px-4",b),children:[c&&e.jsx("div",{className:"mb-4 text-gray-300",children:L.cloneElement(c,{className:l("w-6 h-6 md:w-8 md:h-8",c.props.className)})}),e.jsx("h3",{className:"text-base md:text-lg font-semibold text-gray-900 mb-2",children:r}),h&&e.jsx("p",{className:"text-sm md:text-base text-gray-600 mb-6 max-w-sm leading-relaxed",children:h}),(d||m)&&e.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-3",children:[d,m]})]})}const ae=()=>{const{user:c}=M(),[r,h]=n.useState("predictions"),[d,m]=n.useState([]),[b,j]=n.useState(!0),[v,N]=n.useState(null),[O,T]=n.useState(!1),y=n.useRef(null),k=async a=>{try{j(!0),N(null);const t=I(),s=await fetch(`${t}/api/v2/users/leaderboard?type=${a==="winrate"?"accuracy":a}&limit=50`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!s.ok)throw new Error(`Failed to fetch leaderboard: ${s.status}`);const i=await s.json();if(i.error)throw new Error(i.message||"Failed to fetch leaderboard");const u=(i.data||[]).map((x,f)=>({...x,rank:f+1}));m(u)}catch(t){console.error("Error fetching leaderboard:",t),N(t instanceof Error?t.message:"Failed to load leaderboard"),m([])}finally{j(!1)}};n.useEffect(()=>{k(r);const a=g().find(t=>t.id===r);a&&_.announce(`Switched to ${a.label} leaderboard`)},[r]),n.useEffect(()=>{const a=new IntersectionObserver(([t])=>{T(t.intersectionRatio<1)},{threshold:[1]});return y.current&&a.observe(y.current),()=>{y.current&&a.unobserve(y.current)}},[]);const S=a=>{switch(a){case 1:return{icon:W,emoji:"🏆",color:"text-yellow-600 bg-gradient-to-br from-yellow-50 to-yellow-100 border-yellow-200",textColor:"text-yellow-700"};case 2:return{icon:G,emoji:"🥈",color:"text-gray-600 bg-gradient-to-br from-gray-50 to-gray-100 border-gray-200",textColor:"text-gray-700"};case 3:return{icon:P,emoji:"🥉",color:"text-amber-600 bg-gradient-to-br from-amber-50 to-amber-100 border-amber-200",textColor:"text-amber-700"};default:return{icon:p,emoji:`#${a}`,color:"text-gray-500 bg-gray-50 border-gray-100",textColor:"text-gray-600"}}},E=(a,t)=>{switch(t){case"predictions":return{primary:F(a.predictions_count),color:a.predictions_count>10?"text-blue-600":"text-gray-600"};case"profit":const s=a.total_profit||0;return{primary:q(s),color:s>0?"text-emerald-600":s<0?"text-red-600":"text-gray-600"};case"winrate":const i=a.win_rate||0;return{primary:B(i/100),color:i>70?"text-emerald-600":i>50?"text-blue-600":"text-gray-600"}}},g=()=>[{id:"predictions",label:"Top Creators",icon:A,description:"Most predictions created"},{id:"profit",label:"Big Winners",icon:D,description:"Highest profits earned"},{id:"winrate",label:"Best Accuracy",icon:p,description:"Highest win rates"}],$=g();return e.jsxs(e.Fragment,{children:[e.jsx(H,{title:"Leaderboard"}),e.jsx("div",{className:"bg-white border-b border-gray-200",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex space-x-4 py-3",children:$.map((a,t)=>{const s=a.icon;return e.jsxs("button",{onClick:()=>h(a.id),className:l("px-3 py-1 rounded-lg text-sm font-medium transition-colors",r===a.id?"bg-emerald-100 text-emerald-700":"text-gray-600 hover:text-gray-900"),children:[e.jsx(s,{className:"w-4 h-4 inline mr-1"}),e.jsx("span",{className:"hidden sm:inline",children:a.label}),e.jsx("span",{className:"sm:hidden",children:a.id==="predictions"?"Creators":a.id==="profit"?"Winners":"Accuracy"})]},a.id)})})})}),e.jsx("div",{className:"min-h-screen bg-gray-50 pb-[calc(5rem+env(safe-area-inset-bottom))]",children:e.jsx("div",{className:"px-4 py-6",children:e.jsx("div",{role:"tabpanel",id:`tabpanel-${r}`,"aria-labelledby":`tab-${r}`,children:e.jsx(R,{mode:"wait",children:b?e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-4",children:[...Array(5)].map((a,t)=>e.jsxs("div",{className:"bg-white rounded-2xl p-4 flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),e.jsx("div",{className:"w-10 h-10 bg-gray-200 rounded-full animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 animate-pulse"})]}),e.jsxs("div",{className:"text-right space-y-2",children:[e.jsx("div",{className:"h-5 bg-gray-200 rounded w-16 animate-pulse"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-20 animate-pulse"})]})]},t))},"loading"):v?e.jsx(o.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:e.jsx(C,{icon:e.jsx(p,{className:"w-8 h-8"}),title:"Unable to load leaderboard",description:v,primaryAction:e.jsxs(o.button,{onClick:()=>k(r),className:"px-6 py-3 bg-emerald-600 text-white rounded-xl font-medium hover:bg-emerald-700 transition-colors flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(p,{className:"w-4 h-4"}),"Try Again"]})})},"error"):d.length>0?e.jsx(o.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"space-y-3",role:"list","aria-label":`${g().find(a=>a.id===r)?.label} leaderboard`,children:d.map((a,t)=>{const s=S(a.rank||0),i=E(a,r),u=c?.id===a.id,x=(a.rank||0)<=3,f=s.icon;return e.jsx(o.div,{className:l("bg-white rounded-2xl p-4 transition-all duration-200","hover:shadow-md hover:scale-[1.01] border",u?"bg-emerald-50 border-emerald-200 shadow-sm":x?"bg-gradient-to-r from-yellow-50 to-orange-50 border-yellow-200 shadow-sm":"bg-white border-gray-100"),initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:t*.05},whileHover:{scale:1.01},role:"listitem","aria-label":`${a.full_name||a.username}, rank ${a.rank}, ${i.primary} ${r==="predictions"?"predictions":r==="profit"?"profit":"win rate"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4 flex-1 min-w-0",children:[e.jsxs("div",{className:l("relative w-10 h-10 rounded-full flex items-center justify-center text-sm font-bold border-2",s.color),children:[x?e.jsx(f,{className:"w-5 h-5"}):e.jsx("span",{className:"text-xs",children:a.rank}),x&&e.jsx(o.div,{className:"absolute -top-1 -right-1 w-4 h-4 bg-yellow-400 rounded-full flex items-center justify-center",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:e.jsx("span",{className:"text-xs",children:"✨"})})]}),e.jsx(z,{email:a.username,username:a.username,avatarUrl:a.avatar_url,size:"md"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900 truncate",children:a.full_name||a.username}),u&&e.jsx(o.span,{className:"px-2 py-0.5 bg-emerald-100 text-emerald-700 text-xs font-medium rounded-full",initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:400,damping:25},children:"You"})]}),e.jsxs("p",{className:"text-sm text-gray-600 truncate",children:["@",a.username]})]})]}),e.jsx("div",{className:"text-right",children:e.jsx("div",{className:l("text-lg font-bold font-mono",i.color),children:i.primary})})]})},a.id)})},"data"):e.jsx(o.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},children:e.jsx(C,{icon:e.jsx(p,{className:"w-8 h-8"}),title:"No leaders yet",description:"Be the first to appear on the leaderboard by creating predictions and placing bets!",primaryAction:e.jsxs(o.button,{onClick:()=>window.location.href="/",className:"px-6 py-3 bg-gradient-to-r from-emerald-500 to-emerald-600 text-white rounded-xl font-semibold hover:shadow-lg transition-all flex items-center gap-2",whileHover:{scale:1.05},whileTap:{scale:.95},children:[e.jsx(A,{className:"w-4 h-4"}),"Start Predicting"]})})},"empty")})})})})]})};export{ae as default};
