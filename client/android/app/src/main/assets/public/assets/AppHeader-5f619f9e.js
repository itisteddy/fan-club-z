import{j as e}from"./ui-c369d1f3.js";import{j as f,ax as h,I as p,M as g}from"./index-78beacc5.js";import{R as j}from"./vendor-c36eaa8e.js";import{u as w}from"./useNotifications-29ac0910.js";const v=({className:r=""})=>{const i=f(),{unreadCount:t,refreshUnreadCount:n,syncReminders:a}=w({autoRefresh:!0,refreshInterval:3e4});j.useEffect(()=>{n();const s="fcz:reminders:last_sync",o=localStorage.getItem(s),d=Date.now(),u=5*60*1e3;(!o||d-parseInt(o,10)>u)&&a().then(()=>{localStorage.setItem(s,String(d))}).catch(()=>{});const m=()=>{n();const x=localStorage.getItem(s);(!x||d-parseInt(x,10)>u)&&a().then(()=>{localStorage.setItem(s,String(Date.now()))}).catch(()=>{})};return window.addEventListener("focus",m),()=>window.removeEventListener("focus",m)},[n,a]);const c=()=>{i("/notifications")},l=t>99?"9+":t;return e.jsxs("button",{onClick:c,className:`relative p-2 rounded-full hover:bg-gray-100 transition-colors ${r}`,"aria-label":`Notifications${t>0?` (${t} unread)`:""}`,children:[e.jsx(h,{className:`w-6 h-6 text-gray-600 transition-transform ${t>0?"animate-pulse":""}`}),t>0&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center font-medium px-1",children:l})]})};function I({title:r,subtitle:i,left:t,right:n,action:a,sticky:c=!0,showNotifications:l=!1}){const{user:s}=p(),o=n??a??null;return e.jsxs("header",{className:g("w-full z-20 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60",c&&"sticky top-0"),children:[e.jsx("div",{className:"safe-px mx-auto max-w-screen-md",children:e.jsxs("div",{className:"h-12 flex items-center justify-between gap-2 px-4",children:[e.jsx("div",{className:"min-w-[40px] flex items-center",children:t??null}),e.jsxs("div",{className:"flex-1 text-center",children:[r&&e.jsx("h1",{className:"text-base font-semibold leading-none truncate",children:r}),i&&e.jsx("p",{className:"text-xs text-gray-500 truncate",children:i})]}),e.jsxs("div",{className:"min-w-[40px] flex items-center justify-end gap-1",children:[l&&s?e.jsx(v,{}):null,o]})]})}),e.jsx("div",{className:"border-b border-gray-200"})]})}export{I as A};
