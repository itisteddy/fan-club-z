import{j as e}from"./ui-c369d1f3.js";import{r as i}from"./vendor-c36eaa8e.js";import{u as A}from"./useNotifications-29ac0910.js";import{P as L}from"./Page-e098f488.js";import{a4 as S,j as D,R as d,k as c,B as o,ao as _,ax as N,M as m,D as x,H as q,x as z}from"./index-78beacc5.js";import{M as E}from"./message-circle-051707de.js";import{f as G}from"./utils-617af415.js";import"./wagmi-c444efa6.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=S("CheckCheck",[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]]),J=()=>{const r=D(),{notifications:l,unreadCount:y,loading:n,error:h,hasMore:w,fetchNotifications:v,markRead:f,markAllRead:u,loadMore:k}=A({limit:20,autoRefresh:!1}),[g,b]=i.useState([]),[p,j]=i.useState(!1),C=s=>{switch(s){case"win":return e.jsx(z,{className:"w-5 h-5 text-emerald-500"});case"loss":return e.jsx(o,{className:"w-5 h-5 text-amber-500"});case"payout":case"claim":return e.jsx(x,{className:"w-5 h-5 text-teal-500"});case"comment":return e.jsx(E,{className:"w-5 h-5 text-blue-500"});case"reminder":return e.jsx(q,{className:"w-5 h-5 text-purple-500"});case"refund":return e.jsx(x,{className:"w-5 h-5 text-slate-500"});case"dispute":return e.jsx(o,{className:"w-5 h-5 text-red-500"});case"demo_credit":return e.jsx(x,{className:"w-5 h-5 text-indigo-500"});default:return e.jsx(N,{className:"w-5 h-5 text-gray-500"})}},M=i.useCallback(async s=>{if(!s.readAt){b(a=>[...a,s.id]);try{await f([s.id])}catch{}finally{b(a=>a.filter(t=>t!==s.id))}}if(s.href){const[a,t]=s.href.split("?");a&&r(t?`${a}?${t}`:a)}},[f,r]),R=i.useCallback(async()=>{j(!0);try{await u()}catch{}finally{j(!1)}},[u]);return n&&l.length===0?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("header",{className:"w-full z-20 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0",children:[e.jsx("div",{className:"safe-px mx-auto max-w-screen-md",children:e.jsxs("div",{className:"h-12 flex items-center justify-between gap-2 px-4",children:[e.jsx("div",{className:"min-w-[40px] flex items-center",children:e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2","aria-label":"Go back",children:e.jsx(d,{className:"w-5 h-5"})})}),e.jsx("div",{className:"flex-1 text-center",children:e.jsx("h1",{className:"text-base font-semibold leading-none truncate",children:"Notifications"})}),e.jsx("div",{className:"min-w-[40px]"})]})}),e.jsx("div",{className:"border-b border-gray-200"})]}),e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx(c,{className:"w-8 h-8 text-emerald-500 animate-spin"})})]}):h&&l.length===0?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("header",{className:"w-full z-20 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0",children:[e.jsx("div",{className:"safe-px mx-auto max-w-screen-md",children:e.jsxs("div",{className:"h-12 flex items-center justify-between gap-2 px-4",children:[e.jsx("div",{className:"min-w-[40px] flex items-center",children:e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2","aria-label":"Go back",children:e.jsx(d,{className:"w-5 h-5"})})}),e.jsx("div",{className:"flex-1 text-center",children:e.jsx("h1",{className:"text-base font-semibold leading-none truncate",children:"Notifications"})}),e.jsx("div",{className:"min-w-[40px]"})]})}),e.jsx("div",{className:"border-b border-gray-200"})]}),e.jsx("div",{className:"flex items-center justify-center p-4 py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx(o,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-900 font-medium mb-2",children:"Failed to load notifications"}),e.jsx("p",{className:"text-gray-600 text-sm mb-4",children:h.message}),e.jsx("button",{onClick:()=>v(),className:"px-4 py-2 bg-emerald-600 text-white rounded-xl font-medium hover:bg-emerald-700 transition-colors",children:"Retry"})]})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsxs("header",{className:"w-full z-20 bg-white/80 backdrop-blur supports-[backdrop-filter]:bg-white/60 sticky top-0",children:[e.jsx("div",{className:"safe-px mx-auto max-w-screen-md",children:e.jsxs("div",{className:"h-12 flex items-center justify-between gap-2 px-4",children:[e.jsx("div",{className:"min-w-[40px] flex items-center",children:e.jsx("button",{onClick:()=>r(-1),className:"p-2 -ml-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2","aria-label":"Go back",children:e.jsx(d,{className:"w-5 h-5"})})}),e.jsx("div",{className:"flex-1 text-center",children:e.jsx("h1",{className:"text-base font-semibold leading-none truncate",children:"Notifications"})}),e.jsx("div",{className:"min-w-[40px] flex items-center justify-end",children:y>0&&e.jsx("button",{onClick:R,disabled:p||g.length>0,className:"p-2 text-gray-600 hover:text-emerald-700 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2 disabled:opacity-50","aria-label":"Mark all as read",title:"Mark all as read",children:p?e.jsx(c,{className:"w-5 h-5 animate-spin"}):e.jsx(P,{className:"w-5 h-5"})})})]})}),e.jsx("div",{className:"border-b border-gray-200"})]}),e.jsxs(L,{className:"pb-[calc(5rem+env(safe-area-inset-bottom))]",children:[l.length===0?e.jsx(_,{icon:e.jsx(N,{}),title:"No notifications yet",description:"You'll see notifications here when you win, receive payouts, or get updates."}):e.jsx("div",{className:"space-y-3",children:l.map(s=>{const a=!s.readAt,t=g.includes(s.id);return e.jsx("button",{onClick:()=>M(s),disabled:t,className:m("w-full text-left bg-white rounded-2xl border border-black/[0.06] p-4 md:p-5","transition-colors active:scale-[0.99]",a?"bg-emerald-50/40":"hover:bg-gray-50",t&&"opacity-60"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:m("mt-0.5 flex h-9 w-9 items-center justify-center rounded-xl border border-black/[0.06] bg-white",a?"shadow-[0_1px_0_rgba(0,0,0,0.02)]":""),children:C(s.type)}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:m("text-sm md:text-base font-semibold leading-tight",a?"text-gray-900":"text-gray-800"),children:s.title}),s.body&&e.jsx("p",{className:"text-sm text-gray-600 mt-1 line-clamp-2",children:s.body}),e.jsx("p",{className:"text-xs text-gray-500 mt-2 font-medium",children:G(new Date(s.createdAt),{addSuffix:!0})})]}),a?e.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:e.jsx("span",{className:"inline-flex items-center rounded-full bg-emerald-100 px-2 py-0.5 text-xs font-semibold text-emerald-800",children:"New"})}):null,t&&e.jsx("div",{className:"flex-shrink-0",children:e.jsx(c,{className:"w-4 h-4 text-emerald-500 animate-spin"})})]})})]})},s.id)})}),w&&e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:k,disabled:n,className:"inline-flex items-center justify-center rounded-xl border border-black/[0.06] bg-white px-4 py-2.5 text-sm font-semibold text-gray-900 hover:bg-gray-50 disabled:opacity-50 transition-colors",children:n?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(c,{className:"w-4 h-4 animate-spin"}),"Loading..."]}):"Load more"})})]})]})};export{J as NotificationsPage,J as default};
