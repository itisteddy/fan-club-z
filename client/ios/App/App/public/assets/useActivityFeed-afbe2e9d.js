import{a4 as x,l as U}from"./index-78beacc5.js";import{r as e}from"./vendor-c36eaa8e.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T=x("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);function $({predictionId:s,userId:r,limit:l=25,autoLoad:m=!0}){const[k,f]=e.useState([]),[n,b]=e.useState(!1),[E,d]=e.useState(null),[h,p]=e.useState(),[v,y]=e.useState(!0),c=e.useRef(!1),g=e.useCallback(i=>{const a=`${U()}/api/v2/activity`,t=new URLSearchParams;if(l&&t.set("limit",l.toString()),i&&t.set("cursor",i),s)return`${a}/predictions/${s}?${t.toString()}`;if(r)return`${a}/user/${r}?${t.toString()}`;throw new Error("Either predictionId or userId must be provided")},[s,r,l]),o=e.useCallback(async(i,w=!1)=>{if(!n){b(!0),d(null);try{const a=g(i),t=await fetch(a);if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);const u=await t.json();f(w?M=>[...M,...u.items]:u.items),p(u.nextCursor),y(u.hasMore)}catch(a){const t=a instanceof Error?a.message:"Failed to fetch activity feed";d(t)}finally{b(!1)}}},[n,g]),C=e.useCallback(async()=>{!v||n||!h||await o(h,!0)},[v,n,h,o]),A=e.useCallback(async()=>{p(void 0),y(!0),c.current=!1,await o(void 0,!1)},[o]),S=e.useCallback(()=>{f([]),p(void 0),y(!0),d(null),c.current=!1},[]);return e.useEffect(()=>{m&&(s||r)&&!c.current&&(c.current=!0,S(),o(void 0,!1))},[s,r,m,S]),{items:k,loading:n,error:E,hasMore:v,loadMore:C,refresh:A,clear:S}}function q(s,r){return $({predictionId:s,...r})}function B(s,r){return $({userId:s,...r})}export{T as S,q as a,B as b,$ as u};
