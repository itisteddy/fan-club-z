{"version":3,"file":"format-14414da9.js","sources":["../../src/lib/format.ts"],"sourcesContent":["type FormatCurrencyOptions = {\n  compact?: boolean;\n  showSign?: boolean;\n  currency?: string;\n};\n\nexport function formatCurrency(n: number | string, opts?: FormatCurrencyOptions): string;\nexport function formatCurrency(n: number | string, currency?: string, showSign?: boolean): string;\nexport function formatCurrency(\n  n: number | string,\n  optsOrCurrency?: FormatCurrencyOptions | string,\n  legacyShowSign?: boolean\n): string {\n  const num = typeof n === 'string' ? Number(n) : n;\n  const resolvedOptions: FormatCurrencyOptions =\n    typeof optsOrCurrency === 'string'\n      ? { currency: optsOrCurrency, showSign: legacyShowSign }\n      : optsOrCurrency || {};\n  const { compact = true, showSign = false, currency = 'USD' } = resolvedOptions;\n  \n  if (compact) {\n    const formatter = new Intl.NumberFormat(undefined, {\n      style: \"currency\",\n      currency,\n      notation: \"compact\",\n      minimumFractionDigits: 2,\n      maximumFractionDigits: 2,\n    });\n    const formatted = formatter.format(num || 0);\n    return showSign && num > 0 ? `+${formatted}` : formatted;\n  }\n  \n  const formatter = new Intl.NumberFormat(undefined, {\n    style: \"currency\",\n    currency,\n    minimumFractionDigits: 2,\n    maximumFractionDigits: 2,\n  });\n  const formatted = formatter.format(num || 0);\n  return showSign && num > 0 ? `+${formatted}` : formatted;\n};\n\nexport const formatNumber = (n: number | string, opts?: Intl.NumberFormatOptions) => {\n  const num = typeof n === \"string\" ? Number(n) : n;\n  return new Intl.NumberFormat(undefined, {\n    notation: \"compact\",\n    maximumFractionDigits: 1,\n    ...opts,\n  }).format(num || 0);\n};\n\nexport const formatPercent = (ratio: number, digits = 0) =>\n  `${(ratio * 100).toFixed(digits)}%`;\n\n// simple duration pretty printer (2d 6h, 17d 7h, etc.)\nexport const formatDuration = (ms: number) => {\n  const s = Math.max(0, Math.floor(ms / 1000));\n  const mins = Math.floor(s / 60);\n  const hrs = Math.floor(mins / 60);\n  const days = Math.floor(hrs / 24);\n  if (days) return `${days}d ${hrs % 24}h`;\n  if (hrs) return `${hrs}h ${mins % 60}m`;\n  return `${mins}m`;\n};\n\n// Relative time formatter (e.g., 5m ago, 2h ago)\nexport const formatTimeAgo = (date: string | Date) => {\n  const d = typeof date === 'string' ? new Date(date) : date;\n  const diffMs = Date.now() - d.getTime();\n  const sec = Math.floor(diffMs / 1000);\n  if (sec < 30) return 'now';\n  if (sec < 60) return `${sec}s ago`;\n  const min = Math.floor(sec / 60);\n  if (min < 60) return `${min}m ago`;\n  const hr = Math.floor(min / 60);\n  if (hr < 24) return `${hr}h ago`;\n  const day = Math.floor(hr / 24);\n  if (day < 7) return `${day}d ago`;\n  return d.toLocaleString();\n};\n\n// Absolute display with fallback (local time)\nexport const formatDateTime = (date: string | Date) => {\n  const d = typeof date === 'string' ? new Date(date) : date;\n  return d.toLocaleString();\n};\n\n// Additional formatters for backward compatibility\nexport const formatLargeNumber = formatNumber;\nexport const formatPercentage = formatPercent;\nexport const formatNumberShort = formatNumber;\nexport const formatDurationShort = formatDuration;\nexport const formatTimeUntil = formatDuration;\nexport const formatTimeLeft = formatDuration;\nexport const formatCompactNumber = formatNumber;\nexport const formatCurrencyShort = formatCurrency;\nexport const formatUSDCompact = formatCurrency;\nexport const formatInt = (n: number | string) => {\n  const num = typeof n === \"string\" ? Number(n) : n;\n  return new Intl.NumberFormat(undefined, { maximumFractionDigits: 0 }).format(num || 0);\n};\nexport const formatBalance = formatCurrency;\nexport const formatNumberCompact = formatNumber;\nexport const truncateText = (text: string, maxLength: number) => {\n  if (text.length <= maxLength) return text;\n  return text.substring(0, maxLength) + '...';\n};\n"],"names":["formatCurrency","n","optsOrCurrency","legacyShowSign","num","resolvedOptions","compact","showSign","currency","formatted","formatNumber","opts","formatPercent","ratio","digits","formatDuration","ms","s","mins","hrs","days","formatTimeAgo","date","d","diffMs","sec","min","hr","day","formatLargeNumber","formatPercentage","formatNumberShort","formatDurationShort","formatUSDCompact"],"mappings":"AAQgB,SAAAA,EACdC,EACAC,EACAC,EACQ,CACR,MAAMC,EAAM,OAAOH,GAAM,SAAW,OAAOA,CAAC,EAAIA,EAC1CI,EACJ,OAAOH,GAAmB,SACtB,CAAE,SAAUA,EAAgB,SAAUC,GACtCD,GAAkB,CAAA,EAClB,CAAE,QAAAI,EAAU,GAAM,SAAAC,EAAW,GAAO,SAAAC,EAAW,KAAU,EAAAH,EAE/D,GAAIC,EAAS,CAQX,MAAMG,EAPY,IAAI,KAAK,aAAa,OAAW,CACjD,MAAO,WACP,SAAAD,EACA,SAAU,UACV,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAC2B,OAAOJ,GAAO,CAAC,EAC3C,OAAOG,GAAYH,EAAM,EAAI,IAAIK,CAAS,GAAKA,CACjD,CAQA,MAAMA,EANY,IAAI,KAAK,aAAa,OAAW,CACjD,MAAO,WACP,SAAAD,EACA,sBAAuB,EACvB,sBAAuB,CAAA,CACxB,EAC2B,OAAOJ,GAAO,CAAC,EAC3C,OAAOG,GAAYH,EAAM,EAAI,IAAIK,CAAS,GAAKA,CACjD,CAEa,MAAAC,EAAe,CAACT,EAAoBU,IAAoC,CACnF,MAAMP,EAAM,OAAOH,GAAM,SAAW,OAAOA,CAAC,EAAIA,EACzC,OAAA,IAAI,KAAK,aAAa,OAAW,CACtC,SAAU,UACV,sBAAuB,EACvB,GAAGU,CACJ,CAAA,EAAE,OAAOP,GAAO,CAAC,CACpB,EAEaQ,EAAgB,CAACC,EAAeC,EAAS,IACpD,IAAID,EAAQ,KAAK,QAAQC,CAAM,CAAC,IAGrBC,EAAkBC,GAAe,CACtC,MAAAC,EAAI,KAAK,IAAI,EAAG,KAAK,MAAMD,EAAK,GAAI,CAAC,EACrCE,EAAO,KAAK,MAAMD,EAAI,EAAE,EACxBE,EAAM,KAAK,MAAMD,EAAO,EAAE,EAC1BE,EAAO,KAAK,MAAMD,EAAM,EAAE,EAC5B,OAAAC,EAAa,GAAGA,CAAI,KAAKD,EAAM,EAAE,IACjCA,EAAY,GAAGA,CAAG,KAAKD,EAAO,EAAE,IAC7B,GAAGA,CAAI,GAChB,EAGaG,EAAiBC,GAAwB,CACpD,MAAMC,EAAI,OAAOD,GAAS,SAAW,IAAI,KAAKA,CAAI,EAAIA,EAChDE,EAAS,KAAK,IAAI,EAAID,EAAE,QAAQ,EAChCE,EAAM,KAAK,MAAMD,EAAS,GAAI,EACpC,GAAIC,EAAM,GAAW,MAAA,MACrB,GAAIA,EAAM,GAAI,MAAO,GAAGA,CAAG,QAC3B,MAAMC,EAAM,KAAK,MAAMD,EAAM,EAAE,EAC/B,GAAIC,EAAM,GAAI,MAAO,GAAGA,CAAG,QAC3B,MAAMC,EAAK,KAAK,MAAMD,EAAM,EAAE,EAC9B,GAAIC,EAAK,GAAI,MAAO,GAAGA,CAAE,QACzB,MAAMC,EAAM,KAAK,MAAMD,EAAK,EAAE,EAC9B,OAAIC,EAAM,EAAU,GAAGA,CAAG,QACnBL,EAAE,gBACX,EASaM,EAAoBnB,EACpBoB,EAAmBlB,EACnBmB,EAAoBrB,EACpBsB,EAAsBjB,EAKtBkB,EAAmBjC"}