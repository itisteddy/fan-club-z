{"version":3,"file":"runtime-1fefd008.js","sources":["../../src/config/runtime.ts"],"sourcesContent":["/**\n * Runtime configuration for Fan Club Z\n * Single source of truth for build mode and capabilities\n * \n * MODE resolution:\n * - WEB: default for web deployments\n * - STORE_SAFE: default for native builds (Capacitor)\n * - INTERNAL_FULL: native builds with VITE_INTERNAL_FULL=true (for internal testing)\n */\n\nimport { Capacitor } from '@capacitor/core';\n\nexport type RuntimeMode = 'WEB' | 'STORE_SAFE' | 'INTERNAL_FULL';\n\nexport interface RuntimeCapabilities {\n  allowDemo: boolean;\n  allowFiat: boolean;\n  allowCrypto: boolean;\n}\n\nclass RuntimeConfig {\n  private _isNative: boolean;\n  private _mode: RuntimeMode;\n  private _capabilities: RuntimeCapabilities;\n\n  constructor() {\n    // Detect native platform\n    this._isNative = Capacitor.isNativePlatform();\n\n    // Resolve MODE\n    const internalFull = import.meta.env.VITE_INTERNAL_FULL === 'true' || import.meta.env.VITE_INTERNAL_FULL === '1';\n    const storeSafeOverride = import.meta.env.VITE_STORE_SAFE_MODE === 'true' || import.meta.env.VITE_STORE_SAFE_MODE === '1';\n    \n    if (this._isNative && internalFull) {\n      this._mode = 'INTERNAL_FULL';\n    } else if (this._isNative || storeSafeOverride) {\n      this._mode = 'STORE_SAFE';\n    } else {\n      this._mode = 'WEB';\n    }\n\n    // Resolve capabilities based on MODE\n    const fiatEnabled = import.meta.env.VITE_FIAT_ENABLED === 'true' || import.meta.env.VITE_FIAT_ENABLED === '1';\n    const cryptoEnabled = import.meta.env.VITE_CRYPTO_ENABLED === 'true' || import.meta.env.VITE_CRYPTO_ENABLED === '1';\n\n    this._capabilities = {\n      allowDemo: true, // Always enabled\n      allowFiat: this._mode === 'INTERNAL_FULL' && fiatEnabled,\n      allowCrypto: this._mode === 'INTERNAL_FULL' && cryptoEnabled,\n    };\n  }\n\n  get isNative(): boolean {\n    return this._isNative;\n  }\n\n  get mode(): RuntimeMode {\n    return this._mode;\n  }\n\n  get capabilities(): RuntimeCapabilities {\n    return { ...this._capabilities };\n  }\n\n  get storeSafeMode(): boolean {\n    return this._mode === 'STORE_SAFE';\n  }\n}\n\n// Singleton instance\nexport const Runtime = new RuntimeConfig();\n\n// Convenience exports\nexport const isNative = () => Runtime.isNative;\nexport const getRuntimeMode = () => Runtime.mode;\nexport const getCapabilities = () => Runtime.capabilities;\nexport const isStoreSafeMode = () => Runtime.storeSafeMode;\n"],"names":["RuntimeConfig","__publicField","Capacitor","internalFull","storeSafeOverride","fiatEnabled","cryptoEnabled","Runtime"],"mappings":"iNAoBA,MAAMA,CAAc,CAKlB,aAAc,CAJNC,EAAA,kBACAA,EAAA,cACAA,EAAA,sBAID,KAAA,UAAYC,EAAU,mBAG3B,MAAMC,EAA+B,CAAA,EAAA,qBAAuB,QAA0B,CAAA,EAAA,qBAAuB,IACvGC,EAAoC,CAAA,EAAA,uBAAyB,QAA0B,CAAA,EAAA,uBAAyB,IAElH,KAAK,WAAaD,EACpB,KAAK,MAAQ,gBACJ,KAAK,WAAaC,EAC3B,KAAK,MAAQ,aAEb,KAAK,MAAQ,MAIf,MAAMC,EAA8B,CAAA,EAAA,oBAAsB,QAA0B,CAAA,EAAA,oBAAsB,IACpGC,EAAgC,CAAA,EAAA,sBAAwB,QAA0B,CAAA,EAAA,sBAAwB,IAEhH,KAAK,cAAgB,CACnB,UAAW,GACX,UAAW,KAAK,QAAU,iBAAmBD,EAC7C,YAAa,KAAK,QAAU,iBAAmBC,CAAA,CAEnD,CAEA,IAAI,UAAoB,CACtB,OAAO,KAAK,SACd,CAEA,IAAI,MAAoB,CACtB,OAAO,KAAK,KACd,CAEA,IAAI,cAAoC,CAC/B,MAAA,CAAE,GAAG,KAAK,cACnB,CAEA,IAAI,eAAyB,CAC3B,OAAO,KAAK,QAAU,YACxB,CACF,CAGa,MAAAC,EAAU,IAAIP"}