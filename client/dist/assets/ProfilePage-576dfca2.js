import{j as e}from"./ui-7ef4368a.js";import{r as o}from"./vendor-2237fdcd.js";import{a as P,U as m,o as A}from"./index-9e31fc92.js";import{u as k}from"./predictionStore-f02705f1.js";import{U as E}from"./UserAvatar-ff7f887a.js";import{A as h}from"./AppHeader-1e74d6d2.js";import{A as U}from"./activity-b9455ce2.js";import{D as S}from"./dollar-sign-39be1c43.js";import{P as D}from"./pen-line-845b2e8a.js";import"./utils-ac284782.js";import"./index-57f953c6.js";import"./utils-6f98344a.js";const I=({onNavigateBack:_,userId:c})=>{const{user:r,isAuthenticated:l}=P(),{getUserPredictionEntries:g,getUserCreatedPredictions:p}=k(),[u,j]=o.useState(!l),f=!c||c===r?.id,t=r;o.useEffect(()=>{l&&r?.id&&j(!1)},[l,r?.id]);const i=g(r?.id||"")||[],b=p(r?.id||"")||[],n=i.filter(s=>s?.status==="won"||s?.status==="lost"),d=i.filter(s=>s?.status==="won"),N=i.reduce((s,a)=>s+(a?.amount||0),0),v=d.reduce((s,a)=>s+(a?.actual_payout||0),0),y=n.length>0?Math.round(d.length/n.length*100):0,w=v-N,x=[...i,...b].sort((s,a)=>new Date(a.created_at||0).getTime()-new Date(s.created_at||0).getTime()).slice(0,5);return l?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(h,{title:"Profile"}),e.jsx("div",{className:"mx-auto w-full max-w-[720px] lg:max-w-[960px] px-4 py-4",children:e.jsx("div",{className:"space-y-4",children:u?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-2/3"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-2/3"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-2/3"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"})]})]})}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(U,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Predictions"})]}),e.jsx("div",{className:"text-xl font-semibold text-gray-900 font-mono",children:i.length})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(m,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Win Rate"})]}),e.jsxs("div",{className:"text-xl font-semibold text-gray-900 font-mono",children:[y,"%"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(S,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Balance"})]}),e.jsxs("div",{className:"text-xl font-semibold text-gray-900 font-mono",children:["$",w.toLocaleString()]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Overview"}),f&&e.jsx("button",{className:"p-1.5 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:e.jsx(D,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(E,{email:t?.email,username:t?.firstName||t?.email?.split("@")[0],avatarUrl:t?.avatar,size:"lg"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t?.firstName&&t?.lastName?`${t.firstName} ${t.lastName}`:t?.email?.split("@")[0]||"User"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["@",t?.email?.split("@")[0]||"user"]}),e.jsxs("div",{className:"flex space-x-4 mt-2 text-xs text-gray-500",children:[e.jsxs("span",{children:[n.length," completed"]}),e.jsxs("span",{children:[i.filter(s=>s.status==="active").length," active"]})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Recent Activity"}),x.length>0?e.jsx("div",{className:"space-y-3",children:x.map((s,a)=>e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:"question"in s?s.question:"Prediction Entry"}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.created_at||0).toLocaleDateString()})]}),e.jsx("div",{className:"text-right",children:"status"in s&&e.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${s.status==="won"?"bg-green-100 text-green-800":s.status==="lost"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:s.status})})]},a))}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No recent activity"}),e.jsx("p",{className:"text-sm",children:"Your prediction activity will appear here."})]})]})]})})})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(h,{title:"Profile"}),e.jsx("div",{className:"mx-auto w-full max-w-[720px] lg:max-w-[960px] px-4 py-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-12 px-4",children:[e.jsx("div",{className:"mb-4 text-gray-300",children:e.jsx(m,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign in to view your profile"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6 max-w-sm",children:"Customize your handle, avatar, and preferences."}),e.jsx("button",{onClick:async()=>{try{await A({intent:"edit_profile"})}catch(s){console.error("Auth gate error:",s)}},className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Sign In"})]})})]})};export{I as default};
