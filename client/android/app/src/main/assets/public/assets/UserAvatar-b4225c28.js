import{j as d,u as F,d as g}from"./ui-6244b3df.js";import{r as u}from"./vendor-499a370b.js";import{a as T,c as S}from"./utils-a40dfe8b.js";import{s as H}from"./utils-17ec81d9.js";function U(e,t=[]){let a=[];function o(r,c){const s=u.createContext(c);s.displayName=r+"Context";const i=a.length;a=[...a,c];const l=f=>{const{scope:v,children:x,...m}=f,k=v?.[e]?.[i]||s,M=u.useMemo(()=>m,Object.values(m));return d.jsx(k.Provider,{value:M,children:x})};l.displayName=r+"Provider";function p(f,v){const x=v?.[e]?.[i]||s,m=u.useContext(x);if(m)return m;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${r}\``)}return[l,p]}const n=()=>{const r=a.map(c=>u.createContext(c));return function(s){const i=s?.[e]||r;return u.useMemo(()=>({[`__scope${e}`]:{...s,[e]:i}}),[s,i])}};return n.scopeName=e,[o,B(n,...t)]}function B(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const o=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(r){const c=o.reduce((s,{useScope:i,scopeName:l})=>{const f=i(r)[`__scope${l}`];return{...s,...f}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return a.scopeName=t.scopeName,a}var q=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],h=q.reduce((e,t)=>{const a=T(`Primitive.${t}`),o=u.forwardRef((n,r)=>{const{asChild:c,...s}=n,i=c?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(i,{...s,ref:r})});return o.displayName=`Primitive.${t}`,{...e,[t]:o}},{});function z(){return H.useSyncExternalStore(D,()=>!0,()=>!1)}function D(){return()=>{}}var w="Avatar",[G,Y]=U(w),[K,C]=G(w),b=u.forwardRef((e,t)=>{const{__scopeAvatar:a,...o}=e,[n,r]=u.useState("idle");return d.jsx(K,{scope:a,imageLoadingStatus:n,onImageLoadingStatusChange:r,children:d.jsx(h.span,{...o,ref:t})})});b.displayName=w;var N="AvatarImage",y=u.forwardRef((e,t)=>{const{__scopeAvatar:a,src:o,onLoadingStatusChange:n=()=>{},...r}=e,c=C(N,a),s=O(o,r),i=F(l=>{n(l),c.onImageLoadingStatusChange(l)});return g(()=>{s!=="idle"&&i(s)},[s,i]),s==="loaded"?d.jsx(h.img,{...r,ref:t,src:o}):null});y.displayName=N;var L="AvatarFallback",j=u.forwardRef((e,t)=>{const{__scopeAvatar:a,delayMs:o,...n}=e,r=C(L,a),[c,s]=u.useState(o===void 0);return u.useEffect(()=>{if(o!==void 0){const i=window.setTimeout(()=>s(!0),o);return()=>window.clearTimeout(i)}},[o]),c&&r.imageLoadingStatus!=="loaded"?d.jsx(h.span,{...n,ref:t}):null});j.displayName=L;function A(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function O(e,{referrerPolicy:t,crossOrigin:a}){const o=z(),n=u.useRef(null),r=(()=>o?(n.current||(n.current=new window.Image),n.current):null)(),[c,s]=u.useState(()=>A(r,e));return g(()=>{s(A(r,e))},[r,e]),g(()=>{const i=f=>()=>{s(f)};if(!r)return;const l=i("loaded"),p=i("error");return r.addEventListener("load",l),r.addEventListener("error",p),t&&(r.referrerPolicy=t),typeof a=="string"&&(r.crossOrigin=a),()=>{r.removeEventListener("load",l),r.removeEventListener("error",p)}},[r,a,t]),c}var E=b,R=y,_=j;const I=u.forwardRef(({className:e,...t},a)=>d.jsx(E,{ref:a,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full border border-border",e),...t}));I.displayName=E.displayName;const P=u.forwardRef(({className:e,...t},a)=>d.jsx(R,{ref:a,className:S("aspect-square h-full w-full object-cover",e),...t}));P.displayName=R.displayName;const $=u.forwardRef(({className:e,...t},a)=>d.jsx(_,{ref:a,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted text-sm font-medium text-muted-foreground",e),...t}));$.displayName=_.displayName;const V={sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-16 w-16 text-xl",xl:"h-20 w-20 text-2xl"},Z=({email:e,username:t,avatarUrl:a,className:o,size:n="md"})=>{const r=`${V[n]} ${o||""}`.trim(),s=(()=>t&&t.trim()?t.trim().split(" ").map(i=>i.charAt(0)).join("").toUpperCase().slice(0,2):e&&e.trim()?(e.trim().split("@")[0]||e.trim()).slice(0,2).toUpperCase():"FC")();return d.jsxs(I,{className:r,children:[a&&a.trim()?d.jsx(P,{src:a,alt:t||e||"User avatar"}):null,d.jsx($,{className:"bg-gradient-to-r from-purple-400 to-purple-600 text-white font-bold",children:s})]})};export{Z as U};
