{"version":3,"file":"DepositUSDCModal-4620608e.js","sources":["../../src/hooks/useUSDCBalance.ts","../../src/components/wallet/DepositUSDCModal.tsx"],"sourcesContent":["import { useReadContract } from 'wagmi';\nimport { useAccount } from 'wagmi';\nimport { baseSepolia } from 'wagmi/chains';\nimport { formatUnits, getAddress } from 'viem';\n\n// USDC ABI for balanceOf\nconst ERC20_BALANCE_ABI = [\n  {\n    type: 'function',\n    name: 'balanceOf',\n    stateMutability: 'view',\n    inputs: [{ name: 'account', type: 'address' }],\n    outputs: [{ type: 'uint256' }],\n  },\n  {\n    type: 'function',\n    name: 'decimals',\n    stateMutability: 'view',\n    inputs: [],\n    outputs: [{ type: 'uint8' }],\n  },\n] as const;\n\n// Ensure proper checksumming of USDC address\nfunction getChecksummedAddress(address: string | undefined): `0x${string}` {\n  if (!address) {\n    throw new Error('USDC address not configured');\n  }\n  // Trim whitespace and ensure it's a valid hex string\n  const trimmed = address.trim();\n  if (!trimmed.startsWith('0x') || trimmed.length !== 42) {\n    throw new Error(`Invalid address format: ${trimmed}`);\n  }\n  // getAddress() will validate checksum and return properly checksummed address\n  return getAddress(trimmed as `0x${string}`);\n}\n\nconst USDC_ADDRESS_RAW = import.meta.env.VITE_USDC_ADDRESS_BASE_SEPOLIA || \n                          import.meta.env.VITE_BASE_USDC_ADDRESS || \n                          '0x036CbD53842c5426634e7929541eC2318f3dCF7e';\nconst USDC_ADDRESS = getChecksummedAddress(USDC_ADDRESS_RAW);\nconst USDC_DECIMALS = Number(import.meta.env.VITE_USDC_DECIMALS || 6);\n\nexport function useUSDCBalance() {\n  const { address, chainId, isConnected } = useAccount();\n\n  const isEnabled = !!address && isConnected && chainId === baseSepolia.id;\n\n  const { data: balance, isLoading, error, refetch } = useReadContract({\n    address: USDC_ADDRESS,\n    abi: ERC20_BALANCE_ABI,\n    functionName: 'balanceOf',\n    args: address ? [getAddress(address)] : undefined,\n    query: {\n      enabled: isEnabled,\n      // PERFORMANCE FIX: Increased intervals to reduce network calls\n      refetchInterval: 30_000, // Refetch every 30 seconds (was 15s)\n      staleTime: 20_000, // Data considered fresh for 20 seconds (was 10s)\n      gcTime: 60_000, // Keep in cache for 1 minute\n      retry: 2,\n      // Don't refetch on window focus - reduces unnecessary calls\n      refetchOnWindowFocus: false,\n      // Don't refetch on mount if data is fresh\n      refetchOnMount: false,\n    },\n  });\n\n  // Convert from wei/smallest unit to USDC (6 decimals)\n  const balanceUSD = balance ? Number(formatUnits(balance, USDC_DECIMALS)) : 0;\n\n  return {\n    balance: balanceUSD,\n    isLoading,\n    error,\n    refetch,\n    hasBalance: balanceUSD > 0,\n    isWrongNetwork: isConnected && chainId !== baseSepolia.id,\n    usdcAddress: USDC_ADDRESS,\n  };\n}\n","import * as React from 'react';\nimport { useAccount, useWriteContract, usePublicClient, useSwitchChain } from 'wagmi';\nimport { baseSepolia } from 'wagmi/chains';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { waitForTransactionReceipt, simulateContract } from 'viem/actions';\nimport { getAddress, type Hash, formatUnits } from 'viem';\nimport toast from 'react-hot-toast';\nimport { useAuthStore } from '../../store/authStore';\nimport { invalidateAfterDeposit } from '@/utils/queryInvalidation';\nimport { \n  parseOnchainError, \n  logTransaction, \n  broadcastBalanceRefresh,\n  isUserRejection,\n  cleanupWalletConnectStorage,\n  isSessionError,\n} from '@/services/onchainTransactionService';\nimport { getApiUrl } from '@/utils/environment';\nimport { useWeb3Recovery } from '@/providers/Web3Provider';\nimport { useWalletConnectSession } from '@/hooks/useWalletConnectSession';\n\n// USDC Contract Address - ensure proper checksumming\nfunction getChecksummedAddress(address: string | undefined): `0x${string}` {\n  if (!address) {\n    throw new Error('USDC address not configured');\n  }\n  // Trim whitespace and ensure it's a valid hex string\n  const trimmed = address.trim();\n  if (!trimmed.startsWith('0x') || trimmed.length !== 42) {\n    throw new Error(`Invalid address format: ${trimmed}`);\n  }\n  // getAddress() will validate checksum and return properly checksummed address\n  return getAddress(trimmed as `0x${string}`);\n}\n\nconst USDC_ADDRESS_RAW = import.meta.env.VITE_USDC_ADDRESS_BASE_SEPOLIA || \n                          import.meta.env.VITE_BASE_USDC_ADDRESS || \n                          '0x036CbD53842c5426634e7929541eC2318f3dCF7e';\nconst USDC_ADDRESS = getChecksummedAddress(USDC_ADDRESS_RAW);\n\nconst ESCROW_ADDR_ENV: `0x${string}` | undefined = (() => {\n  const primary = import.meta.env.VITE_BASE_ESCROW_ADDRESS;\n  const legacy = import.meta.env.VITE_ESCROW_ADDRESS_BASE_SEPOLIA;\n  if (primary && legacy && primary.trim().toLowerCase() !== legacy.trim().toLowerCase()) {\n    // Hard guard: refuse to silently choose between two different escrow addresses.\n    throw new Error(\n      `[FCZ-PAY] Escrow address mismatch. VITE_BASE_ESCROW_ADDRESS (${primary}) !== VITE_ESCROW_ADDRESS_BASE_SEPOLIA (${legacy}). Fix env to a single canonical escrow.`\n    );\n  }\n  const resolved = primary ?? legacy;\n  return resolved ? getChecksummedAddress(resolved) : undefined;\n})();\n\nconst ERC20_ABI = [\n  {\n    type: 'function',\n    name: 'approve',\n    stateMutability: 'nonpayable',\n    inputs: [\n      { name: 'spender', type: 'address' },\n      { name: 'amount', type: 'uint256' }\n    ],\n    outputs: [{ type: 'bool' }],\n  },\n  {\n    type: 'function',\n    name: 'allowance',\n    stateMutability: 'view',\n    inputs: [\n      { name: 'owner', type: 'address' },\n      { name: 'spender', type: 'address' }\n    ],\n    outputs: [{ type: 'uint256' }],\n  },\n  {\n    type: 'function',\n    name: 'balanceOf',\n    stateMutability: 'view',\n    inputs: [{ name: 'account', type: 'address' }],\n    outputs: [{ type: 'uint256' }],\n  },\n] as const;\n\nconst ESCROW_ABI_MIN = [\n  { type: 'function', name: 'deposit', stateMutability: 'nonpayable', inputs: [{ name: 'amount', type: 'uint256' }], outputs: [] },\n] as const;\n\n// Minimum deposit amount (matches contract MIN_DEPOSIT = 1_000_000 = 1 USDC)\nconst MIN_DEPOSIT_USD = 1.0;\n\nfunction usdToUsdcUnits(n: number): bigint {\n  return BigInt(Math.round(n * 1_000_000));\n}\nfunction clamp2dp(v: number) { return Math.max(0, Math.floor(v * 100) / 100); }\nfunction fmtUSD(n: number) { return `$${n.toLocaleString(undefined, { maximumFractionDigits: 2 })}`; }\n\ntype DepositStep = 'input' | 'approving' | 'depositing';\n\ntype DepositUSDCModalProps = {\n  open?: boolean;\n  isOpen?: boolean;\n  onClose: () => void;\n  availableUSDC?: number;\n  userId?: string;\n  escrowAddress?: `0x${string}`;\n  escrowAbi?: any;\n  title?: string;\n  onSuccess?: () => void;\n};\n\nexport default function DepositUSDCModal({\n  open,\n  isOpen: controlledOpen,\n  onClose,\n  availableUSDC = 0,\n  userId = '',\n  escrowAddress = ESCROW_ADDR_ENV,\n  escrowAbi = ESCROW_ABI_MIN,\n  title = 'Add Funds',\n  onSuccess,\n}: DepositUSDCModalProps) {\n  const queryClient = useQueryClient();\n  const { address, chainId, isConnected } = useAccount();\n  const publicClient = usePublicClient();\n  const { switchChainAsync } = useSwitchChain();\n  const { writeContractAsync, reset: resetWrite } = useWriteContract();\n  const { sessionHealthy } = useWeb3Recovery();\n  const { withSessionRecovery, isSessionError: checkSessionError } = useWalletConnectSession();\n\n  const [amount, setAmount] = React.useState<number>(0);\n  const [submitting, setSubmitting] = React.useState(false);\n  const [step, setStep] = React.useState<DepositStep>('input');\n  const [error, setError] = React.useState<string | null>(null);\n  const [statusMessage, setStatusMessage] = React.useState<string>('');\n  const cancelledRef = React.useRef(false);\n  const mountedRef = React.useRef(true);\n\n  React.useEffect(() => {\n    mountedRef.current = true;\n    return () => { mountedRef.current = false; };\n  }, []);\n\n  const isModalOpen = open ?? controlledOpen ?? false;\n  const isOnBase = chainId === baseSepolia.id;\n  const walletReady = isConnected && address && isOnBase && sessionHealthy !== false;\n\n  // Reset state when modal closes\n  React.useEffect(() => {\n    if (!isModalOpen) {\n      setAmount(0);\n      setStep('input');\n      setError(null);\n      setStatusMessage('');\n      cancelledRef.current = false;\n      resetWrite();\n    }\n  }, [isModalOpen, resetWrite]);\n\n  // Handle escape key\n  React.useEffect(() => {\n    if (!isModalOpen) return;\n    const onKey = (e: KeyboardEvent) => e.key === 'Escape' && !submitting && handleClose();\n    window.addEventListener('keydown', onKey);\n    return () => window.removeEventListener('keydown', onKey);\n  }, [isModalOpen, submitting]);\n\n  const handleClose = React.useCallback(() => {\n    if (submitting) {\n      cancelledRef.current = true;\n    }\n    onClose();\n  }, [submitting, onClose]);\n\n  if (!isModalOpen) return null;\n\n  if (!escrowAddress) {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\" onClick={handleClose}>\n        <div className=\"bg-white rounded-lg p-6 max-w-md mx-4\" onClick={(e) => e.stopPropagation()}>\n          <h2 className=\"text-lg font-semibold mb-2 text-red-600\">Configuration Error</h2>\n          <p className=\"text-gray-600 mb-4\">Escrow contract not configured.</p>\n          <button onClick={handleClose} className=\"w-full px-4 py-2 bg-gray-200 rounded-lg\">Close</button>\n        </div>\n      </div>\n    );\n  }\n\n  const cleanAmount = clamp2dp(amount || 0);\n  const isBelowMinimum = cleanAmount > 0 && cleanAmount < MIN_DEPOSIT_USD;\n  const disabled = !walletReady || submitting || cleanAmount <= 0 || cleanAmount > clamp2dp(availableUSDC) || isBelowMinimum;\n\n  async function readAllowance(): Promise<bigint> {\n    if (!publicClient || !address || !escrowAddress) return BigInt(0);\n    try {\n      const result = await publicClient.readContract({\n        address: USDC_ADDRESS,\n        abi: ERC20_ABI,\n        functionName: 'allowance',\n        args: [address, escrowAddress],\n      });\n      return result as bigint;\n    } catch {\n      return BigInt(0);\n    }\n  }\n\n  async function handleDeposit() {\n    if (!address || !escrowAddress || !publicClient) {\n      toast.error('Wallet not connected');\n      return;\n    }\n\n    // Validate minimum deposit amount\n    if (cleanAmount < MIN_DEPOSIT_USD) {\n      setError(`Minimum deposit is ${MIN_DEPOSIT_USD} USDC`);\n      toast.error(`Minimum deposit is ${MIN_DEPOSIT_USD} USDC`);\n      return;\n    }\n\n    const currentUserId = useAuthStore.getState().user?.id || userId;\n    const units = usdToUsdcUnits(cleanAmount);\n\n    try {\n      setSubmitting(true);\n      setError(null);\n      setStatusMessage('');\n      resetWrite();\n\n      // Ensure correct network\n      if (chainId !== baseSepolia.id) {\n        await switchChainAsync({ chainId: baseSepolia.id });\n      }\n\n      // Check current allowance\n      const currentAllowance = await readAllowance();\n      console.log('[Deposit] Current allowance:', formatUnits(currentAllowance, 6));\n\n      // Step 1: Approve if needed\n      if (currentAllowance < units) {\n        setStep('approving');\n        setStatusMessage('Approve USDC in your wallet...');\n        \n        console.log('[Deposit] Requesting approval:', {\n          usdcAddress: USDC_ADDRESS,\n          escrowAddress,\n          amount: formatUnits(units, 6),\n          currentAllowance: formatUnits(currentAllowance, 6),\n        });\n        \n        let approveTxHash: Hash;\n        try {\n          approveTxHash = await withSessionRecovery(async () => {\n            console.log('[Deposit] Calling writeContractAsync for approval...');\n            const result = await writeContractAsync({\n              address: USDC_ADDRESS,\n              abi: ERC20_ABI,\n              functionName: 'approve',\n              args: [escrowAddress, units],\n            });\n            console.log('[Deposit] writeContractAsync returned:', result);\n            return result as Hash;\n          }, { maxRetries: 1, operationTimeoutMs: 20000 });\n        } catch (approveErr) {\n          if (isUserRejection(approveErr)) {\n            throw new Error('Approval cancelled');\n          }\n          if (checkSessionError(approveErr)) {\n            throw new Error('Wallet session expired. Please reconnect and try again.');\n          }\n          const parsed = parseOnchainError(approveErr);\n          throw new Error(`Approval failed: ${parsed.message}`);\n        }\n\n        console.log('[Deposit] Approval tx:', approveTxHash);\n        setStatusMessage('Waiting for approval confirmation...');\n\n        // Wait for receipt\n        const receipt = await waitForTransactionReceipt(publicClient as any, { \n          hash: approveTxHash as Hash,\n          confirmations: 1,\n          timeout: 120_000,\n        });\n\n        if (receipt.status === 'reverted') {\n          throw new Error('Approval transaction failed');\n        }\n\n        // Log approval (async, non-blocking)\n        logTransaction({\n          userId: currentUserId,\n          walletAddress: address,\n          txHash: approveTxHash,\n          type: 'approval',\n          status: 'completed',\n          amount: cleanAmount,\n        }).catch(() => {});\n\n        // Wait for propagation - simple 4 second wait\n        setStatusMessage('Confirming approval...');\n        await new Promise(r => setTimeout(r, 4000));\n\n        toast.success('USDC approved!', { id: 'approve' });\n      }\n\n      if (cancelledRef.current) return;\n\n      // Step 2: Deposit\n      setStep('depositing');\n      setStatusMessage('Confirm deposit in your wallet...');\n\n      // Simulate first\n      try {\n        await simulateContract(publicClient as any, {\n          address: escrowAddress,\n          abi: escrowAbi,\n          functionName: 'deposit',\n          args: [units],\n          account: address,\n        } as any);\n      } catch (simErr) {\n        const parsed = parseOnchainError(simErr);\n        if (parsed.code === 'INSUFFICIENT_ALLOWANCE') {\n          // Allowance not propagated yet, wait and retry\n          setStatusMessage('Waiting for approval to propagate...');\n          await new Promise(r => setTimeout(r, 3000));\n          // Try simulation again\n          await simulateContract(publicClient as any, {\n            address: escrowAddress,\n            abi: escrowAbi,\n            functionName: 'deposit',\n            args: [units],\n            account: address,\n          } as any);\n        } else {\n          throw simErr;\n        }\n      }\n\n      let depositTxHash: Hash;\n      try {\n        depositTxHash = await withSessionRecovery(async () => {\n          return await writeContractAsync({\n            address: escrowAddress,\n            abi: escrowAbi,\n            functionName: 'deposit',\n            args: [units],\n          } as any) as Hash;\n        }, { maxRetries: 1, operationTimeoutMs: 20000 });\n      } catch (depositErr) {\n        if (isUserRejection(depositErr)) {\n          throw new Error('Deposit cancelled');\n        }\n        if (checkSessionError(depositErr)) {\n          throw new Error('Wallet session expired. Please reconnect and try again.');\n        }\n        const parsed = parseOnchainError(depositErr);\n        throw new Error(`Deposit failed: ${parsed.message}`);\n      }\n\n      console.log('[Deposit] Deposit tx:', depositTxHash);\n      setStatusMessage('Waiting for deposit confirmation...');\n\n      // Log deposit pending (async)\n      logTransaction({\n        userId: currentUserId,\n        walletAddress: address,\n        txHash: depositTxHash,\n        type: 'deposit',\n        status: 'pending',\n        amount: cleanAmount,\n      }).catch(() => {});\n\n      const depositReceipt = await waitForTransactionReceipt(publicClient as any, { \n        hash: depositTxHash as Hash,\n        confirmations: 1,\n        timeout: 120_000,\n      });\n\n      if (depositReceipt.status === 'reverted') {\n        throw new Error('Deposit transaction failed');\n      }\n\n      // Log deposit completed (async)\n      logTransaction({\n        userId: currentUserId,\n        walletAddress: address,\n        txHash: depositTxHash,\n        type: 'deposit',\n        status: 'completed',\n        amount: cleanAmount,\n      }).catch(() => {});\n\n      // Reconcile with backend (async)\n      const apiBase = getApiUrl();\n      fetch(`${apiBase}/api/wallet/reconcile`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ userId: currentUserId, walletAddress: address, txHash: depositTxHash, txType: 'deposit', amountUSD: cleanAmount }),\n      }).catch(() => {});\n\n      toast.success(\n        <div className=\"flex flex-col\">\n          <span>Deposited {fmtUSD(cleanAmount)}!</span>\n          <a \n            href={`https://sepolia.basescan.org/tx/${depositTxHash}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-xs text-blue-600 underline\"\n          >\n            View on BaseScan\n          </a>\n        </div>,\n        { duration: 5000 }\n      );\n\n      invalidateAfterDeposit(queryClient, { userId: currentUserId, txHash: depositTxHash });\n      \n      // CRITICAL FIX: Wait for transaction to be indexed, then force balance refresh\n      // Base Sepolia typically indexes within 2-3 seconds\n      setTimeout(() => {\n        console.log('[FCZ-PAY] Deposited, forcing balance refresh after confirmation delay');\n        broadcastBalanceRefresh();\n        // Force immediate refetch of escrow balance\n        queryClient.invalidateQueries({ queryKey: ['readContract'], exact: false });\n      }, 3000);\n\n      // Also broadcast immediately for faster UI update\n      broadcastBalanceRefresh();\n\n      if (mountedRef.current) {\n        handleClose();\n        onSuccess?.();\n      }\n    } catch (err: unknown) {\n      console.error('[Deposit] Error:', err);\n\n      if (isUserRejection(err)) {\n        toast.dismiss();\n        setError('Transaction cancelled');\n      } else if (isSessionError(err)) {\n        cleanupWalletConnectStorage();\n        setError('Wallet session expired. Please reconnect.');\n      } else {\n        const parsed = parseOnchainError(err);\n        setError(parsed.message);\n        toast.error(parsed.message);\n      }\n    } finally {\n      cancelledRef.current = false;\n      if (mountedRef.current) {\n        setSubmitting(false);\n        setStep('input');\n        setStatusMessage('');\n      }\n    }\n  }\n\n  const getButtonText = () => {\n    if (!isConnected) return 'Connect wallet';\n    if (!isOnBase) return 'Switch to Base';\n    if (step === 'approving') return 'Approving...';\n    if (step === 'depositing') return 'Depositing...';\n    return 'Deposit';\n  };\n\n  return (\n    <div className=\"fixed inset-0 z-modal\">\n      <div className=\"absolute inset-0 bg-black/40\" onClick={submitting ? undefined : handleClose} />\n      <div className=\"z-modal fixed inset-x-0 mx-auto w-full max-w-md rounded-t-2xl bg-white shadow-xl bottom-[calc(64px+env(safe-area-inset-bottom,0px))] max-h-[calc(100vh-env(safe-area-inset-top,0px)-64px-env(safe-area-inset-bottom,0px))] focus:outline-none\">\n        <div className=\"mx-auto mt-2 mb-3 h-1.5 w-16 rounded-full bg-gray-200\" />\n        <div className=\"px-4 pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold\">{title}</h2>\n            <button aria-label=\"Close\" onClick={handleClose} className=\"rounded-full p-2 hover:bg-gray-100\" disabled={submitting}>✕</button>\n          </div>\n          <div className=\"mt-1 text-xs text-gray-500\">\n            Wallet: {address ? `${address.slice(0, 6)}…${address.slice(-4)}` : 'Not connected'}\n          </div>\n        </div>\n\n        <div className=\"overflow-y-auto pb-safe px-4 pt-3\">\n          {error && step === 'input' && (\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n              <p className=\"text-sm text-red-800\">{error}</p>\n              <button onClick={() => setError(null)} className=\"text-xs text-red-600 underline mt-1\">Dismiss</button>\n            </div>\n          )}\n\n          {submitting && statusMessage && (\n            <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent\"></div>\n                <p className=\"text-sm text-blue-900 font-medium\">{statusMessage}</p>\n              </div>\n            </div>\n          )}\n\n          <label className=\"mb-1 block text-sm font-medium\">Amount (USDC)</label>\n          <div className=\"mb-2 flex items-center gap-2\">\n            <div className=\"relative flex-1 min-w-0\">\n              <input\n                inputMode=\"decimal\"\n                pattern=\"[0-9]*\"\n                value={amount ? String(amount) : ''}\n                onChange={(e) => {\n                  const v = Number(e.target.value.replace(/[^\\d.]/g, ''));\n                  setAmount(Number.isFinite(v) ? v : 0);\n                }}\n                placeholder=\"0.00\"\n                disabled={submitting}\n                className=\"w-full rounded-lg border border-gray-200 bg-white pl-3 pr-12 py-2 text-base outline-none ring-emerald-500 focus:ring-2 disabled:opacity-50 tabular-nums\"\n              />\n              <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500\">USDC</span>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => setAmount(clamp2dp(availableUSDC))}\n              disabled={submitting}\n              className=\"rounded-lg border border-gray-200 px-3 py-2 text-xs font-semibold hover:bg-gray-50 disabled:opacity-50\"\n            >\n              MAX\n            </button>\n          </div>\n\n          <div className=\"mb-4 text-xs text-gray-500\">\n            <div className=\"flex items-center justify-between\">\n              <span>Available in wallet</span>\n              <span className=\"font-medium text-gray-700\">{fmtUSD(availableUSDC)}</span>\n            </div>\n            {isBelowMinimum && (\n              <div className=\"mt-2 text-amber-700 bg-amber-50 border border-amber-200 p-2 rounded-lg\">\n                Minimum deposit is {MIN_DEPOSIT_USD} USDC\n              </div>\n            )}\n            <div className=\"mt-2 text-slate-600 bg-slate-50 border border-slate-100 p-2 rounded-lg\">\n              Deposits USDC into escrow on Base Sepolia. May require 2 transactions.\n            </div>\n          </div>\n        </div>\n\n        <div className=\"sticky bottom-0 bg-white px-4 pt-3 pb-4 shadow-[0_-8px_24px_rgba(0,0,0,0.06)]\">\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={handleClose}\n              className=\"h-11 flex-1 rounded-xl border border-gray-200 font-medium hover:bg-gray-50 disabled:opacity-50\"\n              disabled={submitting}\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleDeposit}\n              className=\"h-11 flex-1 rounded-xl bg-emerald-600 font-semibold text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-50\"\n              disabled={disabled}\n            >\n              {getButtonText()}\n            </button>\n          </div>\n          <div className=\"pb-safe\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["ERC20_BALANCE_ABI","getChecksummedAddress","address","trimmed","getAddress","USDC_ADDRESS_RAW","USDC_ADDRESS","USDC_DECIMALS","useUSDCBalance","chainId","isConnected","useAccount","isEnabled","baseSepolia","balance","isLoading","error","refetch","useReadContract","balanceUSD","formatUnits","ESCROW_ADDR_ENV","primary","legacy","resolved","ERC20_ABI","ESCROW_ABI_MIN","MIN_DEPOSIT_USD","usdToUsdcUnits","n","clamp2dp","v","fmtUSD","DepositUSDCModal","open","controlledOpen","onClose","availableUSDC","userId","escrowAddress","escrowAbi","title","onSuccess","queryClient","useQueryClient","publicClient","usePublicClient","switchChainAsync","useSwitchChain","writeContractAsync","resetWrite","useWriteContract","sessionHealthy","useWeb3Recovery","withSessionRecovery","checkSessionError","useWalletConnectSession","amount","setAmount","React.useState","submitting","setSubmitting","step","setStep","setError","statusMessage","setStatusMessage","cancelledRef","React.useRef","mountedRef","React.useEffect","isModalOpen","isOnBase","walletReady","onKey","e","handleClose","React.useCallback","jsx","jsxs","cleanAmount","isBelowMinimum","disabled","readAllowance","handleDeposit","toast","currentUserId","useAuthStore","units","approveTxHash","approveErr","isUserRejection","parsed","parseOnchainError","waitForTransactionReceipt","logTransaction","r","simulateContract","simErr","depositTxHash","depositErr","apiBase","getApiUrl","invalidateAfterDeposit","broadcastBalanceRefresh","err","isSessionError","cleanupWalletConnectStorage","getButtonText"],"mappings":"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"}