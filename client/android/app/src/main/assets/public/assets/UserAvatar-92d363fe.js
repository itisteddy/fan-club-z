import{j as d,u as F,d as g}from"./ui-c369d1f3.js";import{r as u}from"./vendor-c36eaa8e.js";import{c as T}from"./index-cca8fa81.js";import{s as U}from"./utils-617af415.js";import{c as S}from"./utils-ae6b997d.js";function H(e,t=[]){let a=[];function s(r,c){const o=u.createContext(c);o.displayName=r+"Context";const i=a.length;a=[...a,c];const l=f=>{const{scope:v,children:x,...m}=f,k=v?.[e]?.[i]||o,M=u.useMemo(()=>m,Object.values(m));return d.jsx(k.Provider,{value:M,children:x})};l.displayName=r+"Provider";function p(f,v){const x=v?.[e]?.[i]||o,m=u.useContext(x);if(m)return m;if(c!==void 0)return c;throw new Error(`\`${f}\` must be used within \`${r}\``)}return[l,p]}const n=()=>{const r=a.map(c=>u.createContext(c));return function(o){const i=o?.[e]||r;return u.useMemo(()=>({[`__scope${e}`]:{...o,[e]:i}}),[o,i])}};return n.scopeName=e,[s,B(n,...t)]}function B(...e){const t=e[0];if(e.length===1)return t;const a=()=>{const s=e.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(r){const c=s.reduce((o,{useScope:i,scopeName:l})=>{const f=i(r)[`__scope${l}`];return{...o,...f}},{});return u.useMemo(()=>({[`__scope${t.scopeName}`]:c}),[c])}};return a.scopeName=t.scopeName,a}var q=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],h=q.reduce((e,t)=>{const a=T(`Primitive.${t}`),s=u.forwardRef((n,r)=>{const{asChild:c,...o}=n,i=c?a:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(i,{...o,ref:r})});return s.displayName=`Primitive.${t}`,{...e,[t]:s}},{});function z(){return U.useSyncExternalStore(D,()=>!0,()=>!1)}function D(){return()=>{}}var w="Avatar",[G,ee]=H(w),[K,C]=G(w),b=u.forwardRef((e,t)=>{const{__scopeAvatar:a,...s}=e,[n,r]=u.useState("idle");return d.jsx(K,{scope:a,imageLoadingStatus:n,onImageLoadingStatusChange:r,children:d.jsx(h.span,{...s,ref:t})})});b.displayName=w;var N="AvatarImage",y=u.forwardRef((e,t)=>{const{__scopeAvatar:a,src:s,onLoadingStatusChange:n=()=>{},...r}=e,c=C(N,a),o=O(s,r),i=F(l=>{n(l),c.onImageLoadingStatusChange(l)});return g(()=>{o!=="idle"&&i(o)},[o,i]),o==="loaded"?d.jsx(h.img,{...r,ref:t,src:s}):null});y.displayName=N;var L="AvatarFallback",j=u.forwardRef((e,t)=>{const{__scopeAvatar:a,delayMs:s,...n}=e,r=C(L,a),[c,o]=u.useState(s===void 0);return u.useEffect(()=>{if(s!==void 0){const i=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(i)}},[s]),c&&r.imageLoadingStatus!=="loaded"?d.jsx(h.span,{...n,ref:t}):null});j.displayName=L;function A(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function O(e,{referrerPolicy:t,crossOrigin:a}){const s=z(),n=u.useRef(null),r=(()=>s?(n.current||(n.current=new window.Image),n.current):null)(),[c,o]=u.useState(()=>A(r,e));return g(()=>{o(A(r,e))},[r,e]),g(()=>{const i=f=>()=>{o(f)};if(!r)return;const l=i("loaded"),p=i("error");return r.addEventListener("load",l),r.addEventListener("error",p),t&&(r.referrerPolicy=t),typeof a=="string"&&(r.crossOrigin=a),()=>{r.removeEventListener("load",l),r.removeEventListener("error",p)}},[r,a,t]),c}var E=b,R=y,_=j;const I=u.forwardRef(({className:e,...t},a)=>d.jsx(E,{ref:a,className:S("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full border border-border",e),...t}));I.displayName=E.displayName;const $=u.forwardRef(({className:e,...t},a)=>d.jsx(R,{ref:a,className:S("aspect-square h-full w-full object-cover",e),...t}));$.displayName=R.displayName;const P=u.forwardRef(({className:e,...t},a)=>d.jsx(_,{ref:a,className:S("flex h-full w-full items-center justify-center rounded-full bg-muted text-sm font-medium text-muted-foreground",e),...t}));P.displayName=_.displayName;const V={sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-16 w-16 text-xl",xl:"h-20 w-20 text-2xl"},W=({email:e,username:t,avatarUrl:a,className:s,size:n="md"})=>{const r=`${V[n]} ${s||""}`.trim(),o=(()=>t&&t.trim()?t.trim().split(" ").map(i=>i.charAt(0)).join("").toUpperCase().slice(0,2):e&&e.trim()?(e.trim().split("@")[0]||e.trim()).slice(0,2).toUpperCase():"FC")();return d.jsxs(I,{className:r,children:[a&&a.trim()?d.jsx($,{src:a,alt:t||e||"User avatar"}):null,d.jsx(P,{className:"bg-gradient-to-r from-purple-400 to-purple-600 text-white font-bold",children:o})]})},te=W;export{te as U};
