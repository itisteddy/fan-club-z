import{c as _,j as l,P as m,u as k,a as f}from"./ui-78f6af00.js";import{r as i}from"./vendor-2237fdcd.js";import{s as F}from"./utils-228faac7.js";import{c as p}from"./utils-52e726de.js";function M(){return F.useSyncExternalStore(P,()=>!0,()=>!1)}function P(){return()=>{}}var v="Avatar",[$,K]=_(v),[T,A]=$(v),h=i.forwardRef((e,t)=>{const{__scopeAvatar:r,...s}=e,[n,a]=i.useState("idle");return l.jsx(T,{scope:r,imageLoadingStatus:n,onImageLoadingStatusChange:a,children:l.jsx(m.span,{...s,ref:t})})});h.displayName=v;var w="AvatarImage",S=i.forwardRef((e,t)=>{const{__scopeAvatar:r,src:s,onLoadingStatusChange:n=()=>{},...a}=e,u=A(w,r),o=U(s,a),d=k(c=>{n(c),u.onImageLoadingStatusChange(c)});return f(()=>{o!=="idle"&&d(o)},[o,d]),o==="loaded"?l.jsx(m.img,{...a,ref:t,src:s}):null});S.displayName=w;var L="AvatarFallback",N=i.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:s,...n}=e,a=A(L,r),[u,o]=i.useState(s===void 0);return i.useEffect(()=>{if(s!==void 0){const d=window.setTimeout(()=>o(!0),s);return()=>window.clearTimeout(d)}},[s]),u&&a.imageLoadingStatus!=="loaded"?l.jsx(m.span,{...n,ref:t}):null});N.displayName=L;function x(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function U(e,{referrerPolicy:t,crossOrigin:r}){const s=M(),n=i.useRef(null),a=(()=>s?(n.current||(n.current=new window.Image),n.current):null)(),[u,o]=i.useState(()=>x(a,e));return f(()=>{o(x(a,e))},[a,e]),f(()=>{const d=R=>()=>{o(R)};if(!a)return;const c=d("loaded"),g=d("error");return a.addEventListener("load",c),a.addEventListener("error",g),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",c),a.removeEventListener("error",g)}},[a,r,t]),u}var b=h,j=S,y=N;const E=i.forwardRef(({className:e,...t},r)=>l.jsx(b,{ref:r,className:p("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full border border-border",e),...t}));E.displayName=b.displayName;const C=i.forwardRef(({className:e,...t},r)=>l.jsx(j,{ref:r,className:p("aspect-square h-full w-full object-cover",e),...t}));C.displayName=j.displayName;const I=i.forwardRef(({className:e,...t},r)=>l.jsx(y,{ref:r,className:p("flex h-full w-full items-center justify-center rounded-full bg-muted text-sm font-medium text-muted-foreground",e),...t}));I.displayName=y.displayName;const H={sm:"h-8 w-8 text-xs",md:"h-10 w-10 text-sm",lg:"h-16 w-16 text-xl",xl:"h-20 w-20 text-2xl"},V=({email:e,username:t,avatarUrl:r,className:s,size:n="md"})=>{const a=`${H[n]} ${s||""}`.trim(),o=(()=>t&&t.trim()?t.trim().split(" ").map(d=>d.charAt(0)).join("").toUpperCase().slice(0,2):e&&e.trim()?e.trim().split("@")[0].slice(0,2).toUpperCase():"FC")();return l.jsxs(E,{className:a,children:[r&&r.trim()?l.jsx(C,{src:r,alt:t||e||"User avatar"}):null,l.jsx(I,{className:"bg-gradient-to-r from-purple-400 to-purple-600 text-white font-bold",children:o})]})};export{V as U};
