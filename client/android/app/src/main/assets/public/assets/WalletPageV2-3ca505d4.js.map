{"version":3,"file":"WalletPageV2-3ca505d4.js","sources":["../../node_modules/lucide-react/dist/esm/icons/unlock.js","../../src/hooks/useStableWalletConnection.ts","../../node_modules/zustand/esm/react/shallow.mjs","../../src/hooks/useOnchainActivity.ts","../../src/pages/WalletPageV2.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Unlock = createLucideIcon(\"Unlock\", [\n  [\"rect\", { width: \"18\", height: \"11\", x: \"3\", y: \"11\", rx: \"2\", ry: \"2\", key: \"1w4ew1\" }],\n  [\"path\", { d: \"M7 11V7a5 5 0 0 1 9.9-1\", key: \"1mm8w8\" }]\n]);\n\nexport { Unlock as default };\n//# sourceMappingURL=unlock.js.map\n","import { useAccount, useReconnect } from 'wagmi';\nimport { useState, useEffect, useRef, useCallback } from 'react';\n\n/**\n * A stabilized version of useAccount that prevents UI flicker during \n * page navigation and wagmi hydration.\n * \n * Problem: During React route changes and page reloads, wagmi briefly shows \n * isConnected: false before reconnecting from persisted state. This causes \n * \"Connect Wallet\" buttons to flash momentarily.\n * \n * Solution: This hook adds a grace period and considers 'reconnecting' status\n * as \"connected enough\" to prevent UI flicker.\n * \n * v4 FIXES:\n * - Extended grace period to 12 seconds for slow WalletConnect reconnections\n * - Added explicit wagmi reconnect trigger when grace period expires\n * - Better handling of WalletConnect reconnection delays\n * - Reduced logging to improve performance\n * - Fixed issue where wallet disconnects on page reload\n */\n\ninterface StableConnectionState {\n  /** True if wallet is connected or reconnecting (stable for UI) */\n  isEffectivelyConnected: boolean;\n  /** True if in transition state (connecting/reconnecting) */\n  isTransitioning: boolean;\n  /** The actual address (may be undefined during transitions) */\n  address: `0x${string}` | undefined;\n  /** The actual chainId */\n  chainId: number | undefined;\n  /** The raw wagmi status */\n  status: ReturnType<typeof useAccount>['status'];\n  /** The raw isConnected value (use isEffectivelyConnected for UI) */\n  rawIsConnected: boolean;\n  /** True if we had a previous connection (helps with persistence) */\n  hadPreviousConnection: boolean;\n}\n\n// Extended grace period to allow wagmi to restore WalletConnect sessions\n// WC sessions can take up to 10-15 seconds to fully restore on page reload\nconst DISCONNECTION_GRACE_PERIOD_MS = 12000;\n\n/**\n * Synchronously check if wagmi has a persisted connection in localStorage\n * This is called on every render to avoid stale ref issues during page navigation\n */\nfunction checkPersistedConnection(): { hasPersisted: boolean; lastAddress: `0x${string}` | undefined; connectorId: string | undefined } {\n  try {\n    const wagmiStore = localStorage.getItem('wagmi.store');\n    if (wagmiStore) {\n      const parsed = JSON.parse(wagmiStore);\n      // Check for connection in wagmi's persisted state\n      // Structure: { state: { connections: { __type: 'Map', value: [[key, {accounts: [...]}]] }, current: 'key' } }\n      const connections = parsed?.state?.connections;\n      const current = parsed?.state?.current;\n      \n      if (current && connections?.value?.length > 0) {\n        // Find the current connection\n        const currentConnection = connections.value.find(\n          (entry: any) => Array.isArray(entry) && entry[0] === current\n        );\n        \n        if (currentConnection && currentConnection[1]?.accounts?.length > 0) {\n          const lastAddress = currentConnection[1].accounts[0] as `0x${string}`;\n          const connectorId = currentConnection[1]?.connector?.id || current;\n          return { hasPersisted: true, lastAddress, connectorId };\n        }\n        \n        // Fallback: just check if there's any connection with accounts\n        for (const entry of connections.value) {\n          if (Array.isArray(entry) && entry[1]?.accounts?.length > 0) {\n            return { \n              hasPersisted: true, \n              lastAddress: entry[1].accounts[0] as `0x${string}`,\n              connectorId: entry[1]?.connector?.id || entry[0]\n            };\n          }\n        }\n      }\n    }\n  } catch {\n    // Ignore parse errors\n  }\n  return { hasPersisted: false, lastAddress: undefined, connectorId: undefined };\n}\n\nfunction safeCheckPersistedConnection() {\n  if (typeof window === 'undefined') {\n    return { hasPersisted: false, lastAddress: undefined as `0x${string}` | undefined, connectorId: undefined as string | undefined };\n  }\n  return checkPersistedConnection();\n}\n\nexport function useStableWalletConnection(): StableConnectionState {\n  const { address, isConnected, isConnecting, isReconnecting, status, chainId } = useAccount();\n  const { reconnect, isPending: isReconnectPending } = useReconnect();\n  const statusValue = status as string;\n\n  // Read persisted connection info synchronously on every render\n  const { hasPersisted, lastAddress: persistedAddress, connectorId } = safeCheckPersistedConnection();\n  \n  const [isInGracePeriod, setIsInGracePeriod] = useState(\n    () => (!isConnected && hasPersisted) || false\n  );\n  const gracePeriodTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n  const reconnectAttemptedRef = useRef(false);\n  \n  // Track the last known good address during transitions\n  const lastKnownAddressRef = useRef<`0x${string}` | undefined>(undefined);\n  \n  // Update last known address when we have one\n  useEffect(() => {\n    if (address) {\n      lastKnownAddressRef.current = address;\n    }\n  }, [address]);\n  \n  // Determine if we're in a transition state\n  const isTransitioning = isConnecting || isReconnecting || isReconnectPending || \n                          statusValue === 'reconnecting' || statusValue === 'connecting';\n  \n  // Trigger reconnect when we have persisted data but aren't connected\n  const triggerReconnect = useCallback(() => {\n    if (!isConnected && !isTransitioning && hasPersisted && !reconnectAttemptedRef.current) {\n      reconnectAttemptedRef.current = true;\n      if (import.meta.env.DEV) {\n        console.log('[StableWallet] Triggering reconnect for persisted connection');\n      }\n      try {\n        reconnect();\n      } catch (e) {\n        // Reconnect might fail if no connectors are available\n        if (import.meta.env.DEV) {\n          console.log('[StableWallet] Reconnect failed:', e);\n        }\n      }\n    }\n  }, [isConnected, isTransitioning, hasPersisted, reconnect]);\n  \n  // Handle grace period for disconnection\n  useEffect(() => {\n    // Reset reconnect attempt flag when connection state changes significantly\n    if (isConnected) {\n      reconnectAttemptedRef.current = false;\n    }\n    \n    // If currently showing disconnected but we have a persisted connection,\n    // start grace period to prevent flash and allow wagmi to restore\n    if (!isConnected && !isTransitioning && hasPersisted) {\n      // Start grace period - don't immediately show disconnected\n      if (!isInGracePeriod) {\n        setIsInGracePeriod(true);\n      }\n      \n      if (gracePeriodTimeoutRef.current) {\n        clearTimeout(gracePeriodTimeoutRef.current);\n      }\n      \n      // Try to trigger reconnect after a short delay\n      const reconnectDelay = setTimeout(() => {\n        triggerReconnect();\n      }, 500);\n      \n      gracePeriodTimeoutRef.current = setTimeout(() => {\n        // Re-check persisted connection before expiring grace period\n        // Connection might have been restored during the grace period\n        const { hasPersisted: stillPersisted } = safeCheckPersistedConnection();\n        \n        if (stillPersisted && !isConnected) {\n          // Still have persisted connection but wagmi hasn't restored yet\n          // Try one more reconnect attempt\n          if (!reconnectAttemptedRef.current) {\n            triggerReconnect();\n          }\n          \n          if (import.meta.env.DEV) {\n            console.log('[StableWallet] Grace period expiring - persisted connection exists but not reconnected');\n          }\n        }\n        \n        // Grace period expired - now show actual disconnected state\n        setIsInGracePeriod(false);\n        gracePeriodTimeoutRef.current = null;\n      }, DISCONNECTION_GRACE_PERIOD_MS);\n      \n      return () => {\n        clearTimeout(reconnectDelay);\n      };\n    }\n    \n    // If we're now connected or reconnecting, cancel grace period immediately\n    if (isConnected || isTransitioning) {\n      if (isInGracePeriod) {\n        setIsInGracePeriod(false);\n      }\n      if (gracePeriodTimeoutRef.current) {\n        clearTimeout(gracePeriodTimeoutRef.current);\n        gracePeriodTimeoutRef.current = null;\n      }\n    }\n    \n    return () => {\n      if (gracePeriodTimeoutRef.current) {\n        clearTimeout(gracePeriodTimeoutRef.current);\n      }\n    };\n  }, [isConnected, isTransitioning, hasPersisted, isInGracePeriod, triggerReconnect]);\n  \n  // Calculate effective connection state\n  // Consider connected if:\n  // 1. Actually connected, OR\n  // 2. In transition state (connecting/reconnecting), OR\n  // 3. In grace period after disconnection (giving wagmi time to restore)\n  const isEffectivelyConnected = isConnected || isTransitioning || isInGracePeriod;\n  \n  // Use last known address during transitions, falling back to persisted address\n  const effectiveAddress = address || \n    (isTransitioning || isInGracePeriod ? (lastKnownAddressRef.current || persistedAddress) : undefined);\n  \n  return {\n    isEffectivelyConnected,\n    isTransitioning: isTransitioning || isInGracePeriod,\n    address: effectiveAddress,\n    chainId,\n    status,\n    rawIsConnected: isConnected,\n    hadPreviousConnection: hasPersisted,\n  };\n}\n","import ReactExports from 'react';\n\nfunction shallow(objA, objB) {\n  if (Object.is(objA, objB)) {\n    return true;\n  }\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  if (objA instanceof Map && objB instanceof Map) {\n    if (objA.size !== objB.size) return false;\n    for (const [key, value] of objA) {\n      if (!Object.is(value, objB.get(key))) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (objA instanceof Set && objB instanceof Set) {\n    if (objA.size !== objB.size) return false;\n    for (const value of objA) {\n      if (!objB.has(value)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  const keysA = Object.keys(objA);\n  if (keysA.length !== Object.keys(objB).length) {\n    return false;\n  }\n  for (const keyA of keysA) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keyA) || !Object.is(objA[keyA], objB[keyA])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nconst { useRef } = ReactExports;\nfunction useShallow(selector) {\n  const prev = useRef();\n  return (state) => {\n    const next = selector(state);\n    return shallow(prev.current, next) ? prev.current : prev.current = next;\n  };\n}\n\nexport { useShallow };\n","import { useQuery } from '@tanstack/react-query';\nimport { useAuthStore } from '@/store/authStore';\nimport { useAccount } from 'wagmi';\nimport { getApiUrl } from '@/utils/environment';\n\nexport interface ChainActivityItem {\n  id: string;\n  kind: string;\n  amount: number;\n  token: string;\n  chainId: number;\n  txHash?: string;\n  createdAt: string;\n  channel?: string | null;\n  direction?: string | null;\n  description?: string | null;\n  feeUSD?: number | null;\n  meta?: Record<string, any> | null;\n  status?: 'pending' | 'completed' | 'failed' | string;\n}\n\ninterface ActivityResponse {\n  items: ChainActivityItem[];\n}\n\nasync function fetchActivity(userId: string, limit: number): Promise<ActivityResponse> {\n  const params = new URLSearchParams({\n    userId,\n    limit: String(limit),\n  });\n\n  const apiBase = getApiUrl();\n  const response = await fetch(`${apiBase}/api/chain/activity?${params}`);\n  \n  if (!response.ok) {\n    console.error('[FCZ-PAY] ui: Failed to fetch activity:', response.statusText);\n    return { items: [] };\n  }\n\n  const data = await response.json();\n  // Removed excessive logging - only log errors\n  return data;\n}\n\nexport function useOnchainActivity(limit = 20) {\n  const user = useAuthStore((state) => state.user);\n  const { address, isConnected } = useAccount();\n\n  return useQuery<ActivityResponse>({\n    queryKey: ['onchain-activity', address, limit],\n    queryFn: () => fetchActivity(user?.id || '', limit),\n    enabled: !!address && isConnected && !!user?.id,\n    refetchInterval: 60_000, // Reduced from 10s to 60s to prevent excessive refetching\n    staleTime: 45_000, // Consider data fresh for 45 seconds\n    refetchOnWindowFocus: true,\n  });\n}\n\n// Helper to format activity kind for display\nexport function formatActivityKind(kind: string): string {\n  const kindMap: Record<string, string> = {\n    deposit: 'Deposit',\n    withdraw: 'Withdrawal',\n    lock: 'Locked for bet',\n    unlock: 'Unlocked',\n    win: 'Win payout',\n    transaction: 'Transaction',\n    transfer: 'Transfer',\n    fee: 'Fee',\n  };\n\n  return kindMap[kind.toLowerCase()] || kind;\n}\n\n// Helper to get icon name for activity kind\nexport function getActivityIcon(kind: string): string {\n  const iconMap: Record<string, string> = {\n    deposit: 'arrow-down-circle',\n    withdraw: 'arrow-up-circle',\n    lock: 'lock',\n    unlock: 'unlock',\n    win: 'trophy',\n    transaction: 'activity',\n    transfer: 'arrow-right-left',\n  };\n\n  return iconMap[kind.toLowerCase()] || 'circle';\n}\n","import React, { useState, useEffect, useCallback, useMemo, useRef } from 'react';\nimport { Plus, Download, DollarSign, TrendingUp, CreditCard, User, Wallet, ArrowRightLeft, Copy, ExternalLink, X, Target, Clock, Receipt, Lock, Unlock, ArrowUpRight, XCircle, Trophy, Gift, HelpCircle, Banknote } from 'lucide-react';\nimport { useAccount, useDisconnect, useSwitchChain } from 'wagmi';\nimport { useStableWalletConnection } from '@/hooks/useStableWalletConnection';\nimport { baseSepolia } from 'wagmi/chains';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { formatTimeAgo } from '@/lib/format';\nimport { useAuthStore } from '../store/authStore';\nimport { useShallow } from 'zustand/react/shallow';\nimport { useAuthSession } from '../providers/AuthSessionProvider';\nimport { openAuthGate } from '../auth/authGateAdapter';\nimport AppHeader from '../components/layout/AppHeader';\nimport toast from 'react-hot-toast';\nimport { formatCurrency, formatLargeNumber, formatPercentage } from '@/lib/format';\nimport { formatTxAmount, toneClass } from '@/lib/txFormat';\nimport { useClaimableClaims, type ClaimableItem } from '@/hooks/useClaimableClaims';\nimport { useMerkleClaim } from '@/hooks/useMerkleClaim';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport SignedOutGateCard from '../components/auth/SignedOutGateCard';\nimport DepositUSDCModal from '../components/wallet/DepositUSDCModal';\nimport WithdrawUSDCModal from '../components/wallet/WithdrawUSDCModal';\nimport FiatDepositSheet from '../components/wallet/FiatDepositSheet';\nimport FiatWithdrawalSheet from '../components/wallet/FiatWithdrawalSheet';\nimport { useOnchainActivity, formatActivityKind } from '../hooks/useOnchainActivity';\nimport { useUnifiedBalance } from '../hooks/useUnifiedBalance';\nimport { useEscrowBalance } from '../hooks/useEscrowBalance';\nimport { useWalletActivity, type WalletActivityItem, type WalletActivityResponse } from '../hooks/useWalletActivity';\nimport { useFiatSummary, usePaystackStatus } from '../hooks/useFiatWallet';\nimport { useAutoNetworkSwitch } from '../hooks/useAutoNetworkSwitch';\nimport { QK } from '@/lib/queryKeys';\nimport { t } from '@/lib/lexicon';\nimport { useWeb3Recovery } from '@/providers/Web3Provider';\nimport { computeWalletStatus } from '@/utils/walletStatus';\n\ninterface WalletPageV2Props {\n  onNavigateBack?: () => void;\n}\n\nconst WalletPageV2: React.FC<WalletPageV2Props> = ({ onNavigateBack }) => {\n  const { user: sessionUser } = useAuthSession();\n  const { user: storeUser, isAuthenticated: storeAuth } = useAuthStore(\n    useShallow((state) => ({\n      user: state.user,\n      isAuthenticated: state.isAuthenticated,\n    })),\n  );\n  const [loading, setLoading] = useState(true);\n  \n  // Auto-switch to Base Sepolia when connected on wrong network\n  useAutoNetworkSwitch();\n  \n  // Determine user context - prioritize session user\n  const user = sessionUser || storeUser;\n  const authenticated = !!sessionUser || storeAuth;\n  \n  // Wallet connection - use stable hook to prevent flicker during page transitions\n  const queryClient = useQueryClient();\n  const { address: rawAddress, isConnected: rawIsConnected, chainId: rawChainId, status: rawStatus } = useAccount();\n  const { \n    isEffectivelyConnected, \n    isTransitioning, \n    address: stableAddress, \n    chainId: stableChainId,\n    status: stableStatus \n  } = useStableWalletConnection();\n  \n  // Use stable values for UI, raw values for actions\n  const address = stableAddress;\n  const isConnected = isEffectivelyConnected;\n  const chainId = stableChainId;\n  const status = stableStatus;\n  \n  const { disconnect } = useDisconnect();\n  const { switchChain } = useSwitchChain();\n  const { sessionHealthy, triggerRecovery } = useWeb3Recovery();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const fromPath = `${location.pathname}${location.search}${location.hash}`;\n  \n  // Debug: Track connection state changes (only in development with explicit flag)\n  useEffect(() => {\n    if (import.meta.env.DEV && import.meta.env.VITE_DEBUG_WALLET === 'true') {\n      console.log('[FCZ-PAY] Wallet:', { isConnected, address: address?.slice(0, 10), status });\n    }\n  }, [isConnected, address, status]);\n  \n  // Crypto wallet modal state\n  const [showDeposit, setShowDeposit] = useState(false);\n  const [showWithdraw, setShowWithdraw] = useState(false);\n  const [showClaims, setShowClaims] = useState(false);\n  \n  // Fiat wallet modal state (Phase 7)\n  const [showFiatDeposit, setShowFiatDeposit] = useState(false);\n  const [showFiatWithdraw, setShowFiatWithdraw] = useState(false);\n  const [claimingId, setClaimingId] = useState<string | null>(null);\n  const [bulkClaiming, setBulkClaiming] = useState(false);\n  const [bulkTotal, setBulkTotal] = useState(0);\n  const [bulkDone, setBulkDone] = useState(0);\n  const { claim, isClaiming } = useMerkleClaim();\n  const [txNotice, setTxNotice] = useState<{ hash: string; kind: string; predictionId?: string } | null>(null);\n  const [selectedActivity, setSelectedActivity] = useState<WalletActivityItem | null>(null);\n  const [needsReconnect, setNeedsReconnect] = useState(false);\n  const effectiveSessionHealthy = sessionHealthy && !needsReconnect;\n  const walletStatus = computeWalletStatus({\n    isConnected,\n    address,\n    chainId,\n    expectedChainId: baseSepolia.id,\n    sessionHealthy: effectiveSessionHealthy,\n    status,\n    isTransitioning,\n  });\n  const effectiveWalletStatus = needsReconnect ? 'session_unhealthy' : walletStatus.code;\n  \n  // Unified balance hook - SINGLE SOURCE OF TRUTH\n  const { \n    wallet: walletUSDC,\n    available: escrowAvailableUSD,\n    locked: escrowReservedUSD,\n    total: escrowTotalUSD,\n    isLoading: isLoadingBalance,\n    error: balanceError,\n    refetch: refetchBalances\n  } = useUnifiedBalance();\n\n  // Guard: if balances stay \"loading\" for too long, surface recovery actions instead of infinite spinners.\n  const [balanceStuck, setBalanceStuck] = useState(false);\n  useEffect(() => {\n    if (!authenticated) {\n      setBalanceStuck(false);\n      return;\n    }\n    if (!isLoadingBalance) {\n      setBalanceStuck(false);\n      return;\n    }\n    const t = setTimeout(() => setBalanceStuck(true), 15_000);\n    return () => clearTimeout(t);\n  }, [authenticated, isLoadingBalance]);\n  \n  // On-chain escrow balance - for withdrawals (what user can actually withdraw from contract)\n  const { availableUSD: onchainEscrowBalance } = useEscrowBalance();\n  const [lastReadyBalances, setLastReadyBalances] = useState({\n    wallet: walletUSDC ?? 0,\n    available: escrowAvailableUSD ?? 0,\n    reserved: escrowReservedUSD ?? 0,\n    total: escrowTotalUSD ?? 0,\n  });\n  useEffect(() => {\n    if (walletStatus.code !== 'ready') {\n      return;\n    }\n    setLastReadyBalances(prev => {\n      const next = {\n        wallet: typeof walletUSDC === 'number' ? walletUSDC : prev.wallet,\n        available: typeof escrowAvailableUSD === 'number' ? escrowAvailableUSD : prev.available,\n        reserved: typeof escrowReservedUSD === 'number' ? escrowReservedUSD : prev.reserved,\n        total: typeof escrowTotalUSD === 'number' ? escrowTotalUSD : prev.total,\n      };\n\n      if (\n        next.wallet === prev.wallet &&\n        next.available === prev.available &&\n        next.reserved === prev.reserved &&\n        next.total === prev.total\n      ) {\n        return prev;\n      }\n\n      return next;\n    });\n  }, [walletStatus.code, walletUSDC, escrowAvailableUSD, escrowReservedUSD, escrowTotalUSD]);\n  \n  // Wallet activity (from database - transaction history only)\n  // Show first 20 in main view, all transactions in modal\n  const walletActivityQuery = useWalletActivity(user?.id, 20);\n  const allWalletActivityQuery = useWalletActivity(user?.id, 1000);\n  const walletActivity = walletActivityQuery.data as WalletActivityResponse | undefined;\n  const isLoadingActivity = walletActivityQuery.isLoading;\n  const allWalletActivity = allWalletActivityQuery.data as WalletActivityResponse | undefined;\n  const isLoadingAllActivity = allWalletActivityQuery.isLoading;\n  const { data: claimables } = useClaimableClaims(address, 100);\n  const [showAllTransactions, setShowAllTransactions] = useState(false);\n  \n  // Fiat wallet hooks (Phase 7)\n  const { data: paystackStatus } = usePaystackStatus();\n  const { data: fiatSummaryData } = useFiatSummary(user?.id);\n  const fiatEnabled = paystackStatus?.enabled || false;\n  const fiatSummary = fiatSummaryData?.summary || null;\n  \n  // Connection helpers\n  const openConnectSheet = useCallback(() => {\n    window.dispatchEvent(new CustomEvent('fcz:wallet:connect'));\n  }, []);\n\n  // Listen for transaction submission events to surface tx hash to the user\n  useEffect(() => {\n    function onTx(e: any) {\n      if (!e || !e.detail) return;\n      const { txHash, kind, predictionId } = e.detail || {};\n      if (txHash) {\n        setTxNotice({ hash: String(txHash), kind: String(kind || 'tx'), predictionId });\n      }\n    }\n    window.addEventListener('fcz:tx', onTx as any);\n    return () => window.removeEventListener('fcz:tx', onTx as any);\n  }, []);\n\n  useEffect(() => {\n    const onReconnectRequired = () => {\n      // Only set needsReconnect if wallet is NOT already connected\n      // Stale WC errors can fire even when wallet is healthy\n      if (!isConnected || !address) {\n        setNeedsReconnect(true);\n      }\n      // Silently ignore reconnect events when wallet is already connected\n    };\n\n    window.addEventListener('fcz:wallet:reconnect-required', onReconnectRequired);\n    return () => window.removeEventListener('fcz:wallet:reconnect-required', onReconnectRequired);\n  }, [isConnected, address]);\n\n  // Reset needsReconnect when wallet becomes connected and healthy\n  useEffect(() => {\n    if (isConnected && address && chainId === baseSepolia.id && sessionHealthy) {\n      setNeedsReconnect(false);\n    }\n  }, [isConnected, address, chainId, sessionHealthy]);\n\n  // Fallback: if an event was missed (e.g., user posted root on another route),\n  // read the last stored tx from localStorage on mount and show the banner once.\n  useEffect(() => {\n    try {\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i) || '';\n        if (!key.startsWith('fcz:lastTx:')) continue;\n        const hash = localStorage.getItem(key) || '';\n        if (!hash) continue;\n        if (sessionStorage.getItem(`fcz:tx:dismissed:${hash}`) === 'true') {\n          continue;\n        }\n        const parts = key.split(':'); // fcz:lastTx:<kind>:<predictionId>[:address]\n        const kind = parts[2] || 'tx';\n        const predictionId = parts[3];\n        setTxNotice({ hash, kind, predictionId });\n        break;\n      }\n    } catch {\n      // ignore\n    }\n  }, []);\n\n  const handleSwitchToBase = useCallback(() => {\n    try {\n      switchChain({ chainId: baseSepolia.id });\n      toast.success('Check your wallet to confirm the network switch.');\n    } catch (error) {\n      console.warn('[FCZ-PAY] switchChain failed; prompting manual switch', error);\n      toast.error('Please switch to Base Sepolia in your wallet.');\n      openConnectSheet();\n    }\n  }, [openConnectSheet, switchChain]);\n\n  const handleReconnectNow = useCallback(() => {\n    triggerRecovery();\n    openConnectSheet();\n  }, [openConnectSheet, triggerRecovery]);\n\n  const walletCalloutActions = useMemo(() => {\n    const buttons: React.ReactNode[] = [];\n    const baseBtn =\n      'inline-flex items-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50 transition-colors';\n\n    // Don't show any action buttons while reconnecting - wagmi is handling it\n    if (effectiveWalletStatus === 'reconnecting') {\n      return null;\n    }\n\n    if (effectiveWalletStatus === 'disconnected') {\n      buttons.push(\n        <button\n          key=\"connect\"\n          onClick={openConnectSheet}\n          className=\"inline-flex items-center gap-2 rounded-lg bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-emerald-700 transition-colors\"\n        >\n          <Wallet className=\"w-4 h-4\" /> Connect wallet\n        </button>,\n      );\n    }\n\n    if (effectiveWalletStatus === 'wrong_network') {\n      buttons.push(\n        <button\n          key=\"switch\"\n          onClick={handleSwitchToBase}\n          className={baseBtn}\n        >\n          <ArrowRightLeft className=\"w-4 h-4\" /> Switch network\n        </button>,\n      );\n    }\n\n    if (effectiveWalletStatus === 'session_unhealthy') {\n      buttons.push(\n        <button\n          key=\"reconnect\"\n          onClick={handleReconnectNow}\n          className=\"inline-flex items-center gap-2 rounded-lg bg-amber-500 px-3 py-1.5 text-xs font-semibold text-white hover:bg-amber-600 transition-colors\"\n        >\n          <XCircle className=\"w-4 h-4\" /> Reconnect wallet\n        </button>,\n      );\n    }\n\n    return buttons.length ? <div className=\"flex flex-wrap gap-2\">{buttons}</div> : null;\n  }, [handleReconnectNow, handleSwitchToBase, openConnectSheet, effectiveWalletStatus]);\n\n  const ensureWalletReady = useCallback(() => {\n    switch (walletStatus.code) {\n      case 'ready':\n        return true;\n      case 'reconnecting':\n        // Wallet is reconnecting - wait for it to complete\n        toast('Wallet is reconnecting, please wait...');\n        return false;\n      case 'disconnected':\n        toast.error('Connect your wallet to continue.');\n        openConnectSheet();\n        return false;\n      case 'wrong_network':\n        toast.error('Switch to Base Sepolia to continue.');\n        handleSwitchToBase();\n        return false;\n      case 'session_unhealthy':\n        toast.error('Wallet session expired. Please reconnect.');\n        handleReconnectNow();\n        return false;\n      default:\n        return false;\n    }\n  }, [walletStatus.code, openConnectSheet, handleReconnectNow, handleSwitchToBase]);\n\n  const handleDeposit = useCallback(() => {\n    if (!ensureWalletReady()) return;\n    setShowDeposit(true);\n  }, [ensureWalletReady]);\n\n  const handleWithdraw = useCallback(() => {\n    if (!ensureWalletReady()) return;\n    setShowWithdraw(true);\n  }, [ensureWalletReady]);\n\n  const actionButtons = useMemo(() => {\n    const disabledSecondary =\n      <button\n        disabled\n        className=\"h-11 rounded-xl border-2 border-gray-300 text-gray-400 font-semibold cursor-not-allowed\"\n      >\n        Withdraw\n      </button>;\n\n    switch (effectiveWalletStatus) {\n      case 'reconnecting':\n        return (\n          <>\n            <button\n              disabled\n              className=\"h-11 rounded-xl bg-gray-200 text-gray-500 font-semibold cursor-wait flex items-center justify-center gap-2\"\n            >\n              <span className=\"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin\" />\n              Reconnecting…\n            </button>\n            {disabledSecondary}\n          </>\n        );\n      case 'disconnected':\n        return (\n          <>\n            <button\n              onClick={openConnectSheet}\n              className=\"h-11 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-colors\"\n            >\n              Connect Wallet\n            </button>\n            {disabledSecondary}\n          </>\n        );\n      case 'wrong_network':\n        return (\n          <>\n            <button\n              onClick={handleSwitchToBase}\n              className=\"h-11 rounded-xl bg-amber-500 text-white font-semibold hover:bg-amber-600 transition-colors\"\n            >\n              Switch Network\n            </button>\n            <button\n              disabled\n              className=\"h-11 rounded-xl border-2 border-gray-300 text-gray-400 font-semibold cursor-not-allowed\"\n            >\n              + Deposit\n            </button>\n          </>\n        );\n      case 'session_unhealthy':\n        return (\n          <>\n            <button\n              onClick={handleReconnectNow}\n              className=\"h-11 rounded-xl bg-amber-500 text-white font-semibold hover:bg-amber-600 transition-colors\"\n            >\n              Reconnect Wallet\n            </button>\n            {disabledSecondary}\n          </>\n        );\n      default:\n        return (\n          <>\n            <button\n              onClick={handleDeposit}\n              className=\"h-11 rounded-xl bg-emerald-600 text-white font-semibold hover:bg-emerald-700 transition-colors\"\n            >\n              + Deposit\n            </button>\n            <button\n              onClick={handleWithdraw}\n              className=\"h-11 rounded-xl border-2 border-gray-300 text-gray-700 font-semibold hover:border-gray-400 transition-colors disabled:opacity-50\"\n              disabled={!escrowAvailableUSD || escrowAvailableUSD === 0}\n            >\n              Withdraw\n            </button>\n          </>\n        );\n    }\n  }, [effectiveWalletStatus, handleReconnectNow, handleSwitchToBase, handleDeposit, handleWithdraw, openConnectSheet, escrowAvailableUSD]);\n\n  // Handle balance refresh after transactions\n  const handleRefresh = useCallback(() => {\n    // Force clear React Query cache for contract reads\n    queryClient.removeQueries({ queryKey: ['readContract'] });\n    \n    // Wait a moment for cache clear, then refetch\n    setTimeout(() => {\n      refetchBalances();\n    }, 500);\n  }, [refetchBalances, queryClient]);\n\n  // Listen for balance refresh events from deposit/withdraw modals\n  useEffect(() => {\n    window.addEventListener('fcz:balance:refresh', handleRefresh);\n    return () => window.removeEventListener('fcz:balance:refresh', handleRefresh);\n  }, [handleRefresh]);\n  \n  // Display balances using last confirmed values during reconnects to avoid UI flicker\n  const resolveValue = (current: number | undefined, fallback: number) =>\n    typeof current === 'number' ? current : fallback;\n  const resolvedWalletUSDC =\n    walletStatus.code === 'ready'\n      ? resolveValue(walletUSDC, lastReadyBalances.wallet)\n      : lastReadyBalances.wallet;\n  const resolvedEscrowAvailable =\n    walletStatus.code === 'ready'\n      ? resolveValue(escrowAvailableUSD, lastReadyBalances.available)\n      : lastReadyBalances.available;\n  const resolvedEscrowReserved =\n    walletStatus.code === 'ready'\n      ? resolveValue(escrowReservedUSD, lastReadyBalances.reserved)\n      : lastReadyBalances.reserved;\n  const resolvedEscrowTotal =\n    walletStatus.code === 'ready'\n      ? resolveValue(escrowTotalUSD, lastReadyBalances.total)\n      : lastReadyBalances.total;\n  \n  // Debug log - disabled to reduce console spam\n  // Enable with VITE_DEBUG_WALLET=true in .env\n\n  // Auto-refresh after wallet connect or chain change\n  const lastConnectionRef = useRef<{ address: string | null; chainId: number | null }>({\n    address: null,\n    chainId: null,\n  });\n  useEffect(() => {\n    if (!isConnected || !address || typeof chainId !== 'number') {\n      return;\n    }\n\n    const prev = lastConnectionRef.current;\n    if (prev.address === address && prev.chainId === chainId) {\n      return;\n    }\n\n    lastConnectionRef.current = { address, chainId };\n\n    // Ensure all wallet-related data refresh immediately after connect or chain change\n    void queryClient.invalidateQueries({ queryKey: ['wallet'] });\n    void queryClient.invalidateQueries({ queryKey: ['escrow-balance'] });\n    void queryClient.invalidateQueries({ queryKey: ['onchain-activity'] });\n    void queryClient.invalidateQueries({ queryKey: ['readContract'] });\n    if (user?.id) {\n      void queryClient.invalidateQueries({ queryKey: QK.walletActivity(user.id) });\n    }\n  }, [isConnected, address, chainId, queryClient, user?.id]);\n\n  useEffect(() => {\n    if (authenticated && user?.id) {\n      setLoading(false);\n    } else if (!authenticated) {\n      setLoading(false);\n    }\n  }, [authenticated, user?.id]);\n\n  // Helper function to format activity kind\n  const prettyKind = (k: string) => {\n    const normalized = (k || '').toLowerCase();\n    const map: Record<string, string> = {\n      deposit: 'Deposit',\n      withdraw: 'Withdrawal',\n      lock: 'Funds locked',\n      release: 'Funds released',\n      unlock: 'Funds released',\n      entry: 'Stake placed',\n      bet_placed: 'Stake placed',\n      claim: 'Claimed',\n      payout: 'Settlement payout',\n      win: 'Won prediction',\n      loss: 'Lost prediction',\n      creator_fee: 'Creator fee',\n      platform_fee: 'Platform fee',\n      settlement: 'Settlement posted',\n      bet_refund: 'Bet refunded',\n    };\n    if (map[normalized]) return map[normalized];\n    return formatActivityKind(normalized);\n  };\n\n  const formatTxHash = (hash?: string | null) => {\n    if (!hash) return null;\n    const clean = hash.split(':')[0] ?? '';\n    if (!clean.startsWith('0x')) return null;\n    return `${clean.slice(0, 6)}…${clean.slice(-4)}`;\n  };\n\n  const buildExplorerTxUrl = (hash?: string | null) => {\n    if (!hash) return null;\n    const clean = hash.split(':')[0] ?? '';\n    if (!clean.startsWith('0x')) return null;\n    return `https://sepolia.basescan.org/tx/${clean}`;\n  };\n\n  const dismissTxBanner = useCallback((hash?: string) => {\n    setTxNotice(null);\n    if (!hash) return;\n    try {\n      sessionStorage.setItem(`fcz:tx:dismissed:${hash}`, 'true');\n      for (let i = 0; i < localStorage.length; i++) {\n        const key = localStorage.key(i) || '';\n        if (!key.startsWith('fcz:lastTx:')) continue;\n        if (localStorage.getItem(key) === hash) {\n          localStorage.removeItem(key);\n        }\n      }\n    } catch {\n      // ignore\n    }\n  }, []);\n\n  // Handle authentication required - NO UPSELL, clean experience\n  if (!authenticated) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 pb-[calc(5rem+env(safe-area-inset-bottom))]\">\n        <AppHeader title=\"Wallet\" />\n        <div className=\"mx-auto w-full max-w-[720px] lg:max-w-[960px] px-4 py-4\">\n          <div className=\"space-y-4\">\n            {/* Overview Card - Clean signed-out state */}\n            <div className=\"bg-white rounded-2xl border border-black/[0.06] p-6\">\n              <div className=\"text-center py-8\">\n                <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n                  <Wallet className=\"w-8 h-8 text-gray-400\" />\n                </div>\n                <h4 className=\"text-lg font-semibold text-gray-900 mb-2\">Sign in to view wallet</h4>\n                <p className=\"text-sm text-gray-600 mb-4 max-w-sm mx-auto\">\n                  Track your balance, deposits, and transaction history.\n                </p>\n                <button\n                  onClick={async () => {\n                    try {\n                      await openAuthGate({ intent: 'view_wallet' });\n                    } catch (error) {\n                      console.error('Auth gate error:', error);\n                    }\n                  }}\n                  className=\"px-6 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors\"\n                >\n                  Sign In\n                </button>\n              </div>\n            </div>\n\n            {/* Recent Activity Card - Empty state */}\n            <div className=\"bg-white rounded-2xl border border-black/[0.06] p-4\">\n              <h3 className=\"text-sm font-semibold text-gray-900 mb-4\">Recent Activity</h3>\n              <div className=\"text-center py-6 text-gray-500\">\n                <p className=\"text-sm\">Your transaction history will appear here</p>\n              </div>\n              {/* Funding Guide Link */}\n              <div className=\"mt-4 pt-4 border-t border-gray-100 text-center\">\n                <p className=\"text-sm text-gray-500 mb-2\">New to crypto wallets?</p>\n                <a\n                  href=\"https://fanclubz.app/docs/funding-guide\"\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  className=\"inline-flex items-center space-x-1 text-sm font-medium text-emerald-600 hover:text-emerald-700 transition-colors\"\n                >\n                  <HelpCircle className=\"w-4 h-4\" />\n                  <span>Learn how to fund your wallet</span>\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Add a handler to claim a single item\n  const handleClaimOne = useCallback(\n    async (item: ClaimableItem) => {\n      try {\n        setClaimingId(item.predictionId);\n        const ok = await claim({\n          predictionId: item.predictionId,\n          amountUnits: BigInt(item.amountUnits),\n          proof: item.proof as any,\n        });\n        if (ok) {\n          await queryClient.invalidateQueries({ queryKey: ['wallet', 'claimable'] });\n          try { window.dispatchEvent(new CustomEvent('fcz:balance:refresh')); } catch {}\n          return true;\n        }\n        return false;\n      } catch (e: any) {\n        // Check if already claimed or just rejected\n        const msg = String(e?.message || '').toLowerCase();\n        if (msg.includes('already claimed')) {\n          // Mark as claimed locally even if failed\n          await queryClient.invalidateQueries({ queryKey: ['wallet', 'claimable'] });\n          try { window.dispatchEvent(new CustomEvent('fcz:balance:refresh')); } catch {}\n          return true;\n        }\n        // User rejection or other error - continue with next claim\n        console.warn(`Claim failed for ${item.predictionId}:`, e?.message || e);\n        return false;\n      } finally {\n        setClaimingId(null);\n      }\n    },\n    [claim, queryClient]\n  );\n\n  // Add a handler to claim all\n  const handleClaimAll = useCallback(async () => {\n    if (!claimables || claimables.length === 0) return;\n    setBulkClaiming(true);\n    setBulkTotal(claimables.length);\n    setBulkDone(0);\n    \n    let successCount = 0;\n    for (const item of claimables) {\n      const success = await handleClaimOne(item as ClaimableItem);\n      if (success) {\n        successCount++;\n        setBulkDone(successCount);\n      }\n      // Continue to next claim even if this one failed\n    }\n    \n    setBulkClaiming(false);\n    if (successCount === claimables.length) {\n      toast.success(`Successfully claimed all ${successCount} ${t('winnings').toLowerCase()}!`);\n    } else if (successCount > 0) {\n      toast.success(`Successfully claimed ${successCount} of ${claimables.length} ${t('winnings').toLowerCase()}`);\n    } else {\n      toast.error(`No claims were processed`);\n    }\n  }, [claimables, handleClaimOne]);\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 pb-[calc(5rem+env(safe-area-inset-bottom))]\">\n      <AppHeader title=\"Wallet\" />\n      \n      <div className=\"mx-auto w-full max-w-[720px] lg:max-w-[960px] px-4 py-4\">\n        <div className=\"space-y-4\">\n          {loading ? (\n            <>\n              {/* Professional Loading Skeleton */}\n              <div className=\"grid grid-cols-2 gap-3\">\n                {[...Array(2)].map((_, i) => (\n                  <div key={i} className=\"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] animate-pulse\">\n                    <div className=\"h-3 bg-gray-200 rounded mb-2 w-16\"></div>\n                    <div className=\"h-6 bg-gray-200 rounded w-20\"></div>\n                  </div>\n                ))}\n              </div>\n              <div className=\"bg-white rounded-2xl border border-black/[0.06] p-4 animate-pulse\">\n                <div className=\"h-4 bg-gray-200 rounded w-20 mb-4\"></div>\n                <div className=\"text-center py-6\">\n                  <div className=\"h-8 bg-gray-200 rounded w-32 mx-auto mb-2\"></div>\n                  <div className=\"h-3 bg-gray-200 rounded w-24 mx-auto mb-4\"></div>\n                  <div className=\"flex space-x-3\">\n                    <div className=\"flex-1 h-12 bg-gray-200 rounded-lg\"></div>\n                    <div className=\"flex-1 h-12 bg-gray-200 rounded-lg\"></div>\n                  </div>\n                </div>\n              </div>\n            </>\n          ) : (\n            <>\n              {/* SIMPLIFIED: Only 2 balance cards - Wallet USDC and Escrow Total */}\n              <div className=\"grid grid-cols-2 gap-3\">\n                {/* 1. Wallet USDC - ERC20 balance in user's crypto wallet */}\n                <div className=\"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center\">\n                  <div className=\"flex items-center space-x-1 mb-2\">\n                    <Wallet className=\"w-4 h-4 text-blue-500\" />\n                    <div className=\"text-xs text-gray-600 font-medium tracking-wide\">Wallet</div>\n                  </div>\n                  <div className=\"text-lg font-bold text-gray-900 font-mono truncate\">\n                    {isLoadingBalance\n                      ? '...' \n                      : formatCurrency(resolvedWalletUSDC ?? 0, { compact: true })}\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1\">\n                    USDC on Base\n                  </div>\n                </div>\n                \n                {/* 2. Escrow Total - Total USDC in escrow contract (available + reserved) */}\n                <div className=\"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center\">\n                  <div className=\"flex items-center space-x-1 mb-2\">\n                    <Download className=\"w-4 h-4 text-emerald-500\" />\n                    <div className=\"text-xs text-gray-600 font-medium tracking-wide\">Escrow</div>\n                  </div>\n                  <div className=\"text-lg font-bold text-gray-900 font-mono truncate\">\n                    {isLoadingBalance\n                      ? '...' \n                      : formatCurrency(resolvedEscrowTotal ?? 0, { compact: true })}\n                  </div>\n                  <div className=\"text-xs text-gray-500 mt-1 flex items-center gap-2\">\n                    <span className=\"text-emerald-600 font-medium\">\n                      {formatCurrency(resolvedEscrowAvailable ?? 0, { compact: true })} free\n                    </span>\n                    {resolvedEscrowReserved > 0 && (\n                      <>\n                        <span className=\"text-gray-400\">·</span>\n                        <span className=\"text-amber-600 font-medium\">\n                          {formatCurrency(resolvedEscrowReserved, { compact: true })} locked\n                        </span>\n                      </>\n                    )}\n                  </div>\n                </div>\n              </div>\n\n              {/* On-chain Balance Card - Detailed breakdown */}\n              <div className=\"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-2xl border border-blue-100 p-4\">\n                <div className=\"flex items-center justify-between mb-4 gap-2\">\n                  <div className=\"flex items-center gap-2 min-w-0\">\n                    <span className=\"text-xs font-medium text-blue-600 bg-blue-100 px-2 py-1 rounded-full whitespace-nowrap\">Base Sepolia</span>\n                    {isConnected && address && (\n                    <span className=\"inline-flex items-center rounded-md bg-gray-100 px-2 py-1 text-xs font-mono text-gray-700 truncate max-w-[100px]\">\n                        {address.slice(0,4)}…{address.slice(-3)}\n                      </span>\n                    )}\n                  </div>\n                  {isTransitioning ? (\n                    <span className=\"inline-flex items-center gap-2 rounded-lg border border-gray-200 bg-gray-50 px-3 py-1 text-xs font-medium text-gray-500\">\n                      <span className=\"w-2 h-2 border border-gray-400 border-t-transparent rounded-full animate-spin\" />\n                      Reconnecting...\n                    </span>\n                  ) : isConnected && address ? (\n                    <button\n                      type=\"button\"\n                      onClick={() => {\n                        disconnect();\n                        toast.success('Wallet disconnected');\n                      }}\n                      className=\"inline-flex items-center gap-2 rounded-lg border border-gray-300 bg-white px-3 py-1 text-xs font-medium text-gray-700 hover:bg-gray-100 transition-colors\"\n                    >\n                      <span className=\"w-2 h-2 rounded-full bg-emerald-500\" />\n                      Disconnect\n                    </button>\n                  ) : (\n                    <button\n                      type=\"button\"\n                      onClick={openConnectSheet}\n                      className=\"inline-flex items-center gap-2 rounded-lg border border-emerald-300 bg-emerald-50 px-3 py-1 text-xs font-medium text-emerald-700 hover:bg-emerald-100 transition-colors\"\n                    >\n                      <span className=\"w-2 h-2 rounded-full bg-emerald-500\" />\n                      Connect Wallet\n                    </button>\n                  )}\n                </div>\n                \n                {/* Claimable banner */}\n                {!!claimables && claimables.length > 0 && (\n                  <div className=\"mt-3\">\n                    <div className=\"rounded-xl border border-emerald-200 bg-emerald-50 p-3\">\n                      <div className=\"flex items-center justify-between gap-2\">\n                        <div className=\"text-sm text-emerald-900\">\n                          You have {claimables.length} claim{claimables.length > 1 ? 's' : ''} pending\n                        </div>\n                        <button\n                          type=\"button\"\n                          className=\"text-xs font-semibold text-emerald-700 hover:text-emerald-800 underline\"\n                          onClick={() => setShowClaims(true)}\n                        >\n                          View & claim\n                        </button>\n                      </div>\n                    </div>\n                  </div>\n                )}\n                \n                <div className=\"mt-3 space-y-2\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-gray-600 whitespace-nowrap\">\n                      Wallet USDC <span className=\"ml-1 text-[10px] px-1 py-0.5 rounded bg-gray-100\">ERC20</span>\n                    </span>\n                    <span className=\"font-mono font-medium tabular-nums whitespace-nowrap\">\n                      {resolvedWalletUSDC !== undefined \n                        ? `${resolvedWalletUSDC.toFixed(2)}`\n                        : isLoadingBalance \n                          ? 'Loading...' \n                          : balanceError \n                            ? 'Error' \n                            : '$0.00'}\n                    </span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-gray-700 flex items-center gap-2 whitespace-nowrap\">\n                      <span className=\"inline-block h-1.5 w-3 rounded bg-green-500\" />Available\n                    </span>\n                    <span className=\"font-mono font-semibold text-green-600 tabular-nums whitespace-nowrap\">\n                      {isLoadingBalance ? 'Loading...' : `${(resolvedEscrowAvailable ?? 0).toFixed(2)}`}\n                    </span>\n                  </div>\n                  {resolvedEscrowReserved > 0 && (\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-gray-700 flex items-center gap-2 whitespace-nowrap\">\n                        <span className=\"inline-block h-1.5 w-3 rounded bg-amber-500\" />In active {t('bets')}\n                      </span>\n                      <span className=\"font-mono font-medium text-amber-600 tabular-nums whitespace-nowrap\">\n                        {isLoadingBalance ? 'Loading...' : `${(resolvedEscrowReserved ?? 0).toFixed(2)}`}\n                      </span>\n                    </div>\n                  )}\n                </div>\n                \n                {needsReconnect && (\n                  <div className=\"mt-4 rounded-xl border border-amber-200 bg-amber-50 text-amber-800 text-xs p-3\">\n                    Wallet session expired. Please reconnect your wallet before making deposits, withdrawals, or bets.\n                  </div>\n                )}\n\n                {balanceStuck && (\n                  <div className=\"mt-3 rounded-xl border border-rose-200 bg-rose-50 p-3\">\n                    <div className=\"text-xs font-semibold text-rose-900\">Wallet is taking too long to load</div>\n                    <div className=\"mt-1 text-xs text-rose-800\">\n                      This can happen if your wallet session is stale or your network is unstable.\n                    </div>\n                    <div className=\"mt-2 flex flex-wrap gap-2\">\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          try {\n                            refetchBalances();\n                            toast('Refreshing balances…');\n                          } catch {}\n                        }}\n                        className=\"inline-flex items-center gap-2 rounded-lg bg-white px-3 py-1.5 text-xs font-semibold text-rose-900 border border-rose-200 hover:bg-rose-100 transition-colors\"\n                      >\n                        Refresh\n                      </button>\n                      <button\n                        type=\"button\"\n                        onClick={() => {\n                          triggerRecovery();\n                          openConnectSheet();\n                        }}\n                        className=\"inline-flex items-center gap-2 rounded-lg bg-rose-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-rose-700 transition-colors\"\n                      >\n                        Reconnect wallet\n                      </button>\n                    </div>\n                  </div>\n                )}\n                \n                <div className=\"grid grid-cols-2 gap-3 mt-6\">\n                  {actionButtons}\n                </div>\n                \n                {/* Recent Activity */}\n                {walletActivity?.items && walletActivity.items.length > 0 ? (\n                  <div className=\"mt-6 pt-4 border-t border-blue-100\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <h4 className=\"text-xs font-semibold text-gray-700\">Recent Activity</h4>\n                      {(walletActivity.items.length >= 20 || (allWalletActivity?.items && allWalletActivity.items.length > 20)) && (\n                        <button\n                          onClick={() => setShowAllTransactions(true)}\n                          className=\"text-xs text-emerald-600 hover:text-emerald-700 font-medium\"\n                        >\n                          View All\n                        </button>\n                      )}\n                    </div>\n                    <div className=\"space-y-2\">\n                      {walletActivity.items.slice(0, 20).map((item) => {\n                        const iconMap: Record<string, any> = {\n                          deposit: Download,\n                          withdraw: ArrowUpRight,\n                          lock: Lock,\n                          release: Unlock,\n                          unlock: Unlock,\n                          entry: Target,\n                          bet_placed: Target,\n                          claim: Receipt,\n                          payout: DollarSign,\n                          win: Trophy,\n                          loss: XCircle,\n                          creator_fee: DollarSign,\n                          platform_fee: DollarSign,\n                          settlement: Receipt,\n                          bet_refund: Unlock,\n                        };\n                        const IconComponent = iconMap[item.kind] || Wallet;\n                        const description = (() => {\n                          if (item.kind === 'entry' && item.meta?.option_label) {\n                            return `on ${item.meta.option_label}`;\n                          }\n                          if (item.kind === 'payout' && item.meta?.prediction_title) {\n                            return `for ${item.meta.prediction_title}`;\n                          }\n                          if (item.kind === 'claim' && item.meta?.prediction_title) {\n                            return `from ${item.meta.prediction_title}`;\n                          }\n                          if (item.kind === 'win' && item.meta?.prediction_title) {\n                            return item.meta.prediction_title;\n                          }\n                          if (item.kind === 'loss' && item.meta?.prediction_title) {\n                            return item.meta.prediction_title;\n                          }\n                          if (item.kind === 'creator_fee' && item.meta?.prediction_title) {\n                            return item.meta.prediction_title;\n                          }\n                          if (item.kind === 'settlement' && item.meta?.prediction_title) {\n                            return item.meta.prediction_title;\n                          }\n                          return '';\n                        })();\n\n                        return (\n                          <div \n                            key={item.id} \n                            className=\"flex items-center justify-between text-sm gap-2 hover:bg-gray-50 rounded-lg p-2 -mx-2 cursor-pointer transition-colors\"\n                            onClick={() => setSelectedActivity(item)}\n                          >\n                            <div className=\"flex items-center gap-2 min-w-0 flex-1\">\n                              {IconComponent && <IconComponent className=\"w-4 h-4 text-gray-500 flex-shrink-0\" />}\n                              <div className=\"flex flex-col min-w-0\">\n                                <span className=\"text-gray-700 text-xs font-medium truncate\">{prettyKind(item.kind)}</span>\n                                {description && (\n                                  <span className=\"text-[11px] text-gray-500 truncate\">{description}</span>\n                                )}\n                              </div>\n                            </div>\n                            <div className=\"flex items-center gap-2 flex-shrink-0\">\n                              <span className=\"text-[11px] text-gray-500 whitespace-nowrap\">\n                                {item.createdAt ? formatTimeAgo(item.createdAt) : ''}\n                              </span>\n                              {(() => {\n                                const tx = formatTxAmount({ amount: item.amountUSD, kind: item.kind, compact: false, currency: (item as any)?.meta?.currency || 'USD' });\n                                return (\n                                  <span className={`font-mono text-xs font-medium whitespace-nowrap ${toneClass(tx.tone)}`}>\n                                    {tx.display}\n                                  </span>\n                                );\n                              })()}\n                            </div>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </div>\n                ) : !isLoadingActivity ? (\n                  <div className=\"mt-6 pt-4 border-t border-blue-100\">\n                    <div className=\"text-center py-3\">\n                      <p className=\"text-xs text-gray-500 mb-3\">No transactions yet</p>\n                      <a\n                        href=\"https://fanclubz.app/docs/funding-guide\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"inline-flex items-center space-x-1 text-xs font-medium text-emerald-600 hover:text-emerald-700 transition-colors\"\n                      >\n                        <HelpCircle className=\"w-3.5 h-3.5\" />\n                        <span>Learn how to fund your wallet</span>\n                      </a>\n                    </div>\n                  </div>\n                ) : null}\n              </div>\n              \n              {/* Fiat Wallet Section (Phase 7) */}\n              {fiatEnabled && (\n                <div className=\"bg-gradient-to-br from-green-50 to-emerald-50 rounded-2xl border border-green-100 p-4\">\n                  <div className=\"flex items-center justify-between mb-4\">\n                    <div className=\"flex items-center gap-2\">\n                      <span className=\"text-xs font-medium text-green-600 bg-green-100 px-2 py-1 rounded-full\">NGN Fiat</span>\n                      <Banknote className=\"w-4 h-4 text-green-600\" />\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-2 mb-4\">\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-gray-600\">Total Balance</span>\n                      <span className=\"font-mono font-semibold text-gray-900\">\n                        ₦{fiatSummary ? fiatSummary.totalNgn.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : '0.00'}\n                      </span>\n                    </div>\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-gray-700 flex items-center gap-2\">\n                        <span className=\"inline-block h-1.5 w-3 rounded bg-green-500\" />Available\n                      </span>\n                      <span className=\"font-mono font-semibold text-green-600\">\n                        ₦{fiatSummary ? fiatSummary.availableNgn.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 }) : '0.00'}\n                      </span>\n                    </div>\n                    {fiatSummary && fiatSummary.lockedNgn > 0 && (\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-gray-700 flex items-center gap-2\">\n                          <span className=\"inline-block h-1.5 w-3 rounded bg-amber-500\" />In active {t('bets')}\n                        </span>\n                        <span className=\"font-mono font-medium text-amber-600\">\n                          ₦{fiatSummary.lockedNgn.toLocaleString(undefined, { minimumFractionDigits: 2, maximumFractionDigits: 2 })}\n                        </span>\n                      </div>\n                    )}\n                  </div>\n                  \n                  <div className=\"grid grid-cols-2 gap-3 mt-4\">\n                    <button\n                      onClick={() => setShowFiatDeposit(true)}\n                      className=\"h-11 rounded-xl bg-green-600 text-white font-semibold hover:bg-green-700 transition-colors flex items-center justify-center gap-2\"\n                    >\n                      <Plus className=\"w-4 h-4\" />\n                      Deposit\n                    </button>\n                    <button\n                      onClick={() => setShowFiatWithdraw(true)}\n                      disabled={!fiatSummary || fiatSummary.availableNgn < 200}\n                      className=\"h-11 rounded-xl border-2 border-gray-300 text-gray-700 font-semibold hover:border-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2\"\n                    >\n                      <ArrowUpRight className=\"w-4 h-4\" />\n                      Withdraw\n                    </button>\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </div>\n      </div>\n      \n      {/* Crypto Wallet Modals */}\n      {user?.id && (\n        <>\n          {showDeposit && (\n            <DepositUSDCModal\n              open={showDeposit}\n              onClose={() => setShowDeposit(false)}\n              onSuccess={() => {\n                setShowDeposit(false);\n                handleRefresh();\n              }}\n              availableUSDC={walletUSDC}\n              userId={user.id}\n            />\n          )}\n          {showWithdraw && (\n            <WithdrawUSDCModal\n              open={showWithdraw}\n              onClose={() => setShowWithdraw(false)}\n              onSuccess={() => {\n                setShowWithdraw(false);\n                handleRefresh();\n              }}\n              availableUSDC={onchainEscrowBalance}\n              userId={user.id}\n            />\n          )}\n        </>\n      )}\n\n      {/* Fiat Wallet Modals (Phase 7) */}\n      {user?.id && fiatEnabled && (\n        <>\n          {showFiatDeposit && (\n            <FiatDepositSheet\n              open={showFiatDeposit}\n              onClose={() => setShowFiatDeposit(false)}\n              userId={user.id}\n              userEmail={user.email}\n              onSuccess={() => {\n                setShowFiatDeposit(false);\n                handleRefresh();\n                queryClient.invalidateQueries({ queryKey: ['fiat'] });\n              }}\n            />\n          )}\n          {showFiatWithdraw && (\n            <FiatWithdrawalSheet\n              open={showFiatWithdraw}\n              onClose={() => setShowFiatWithdraw(false)}\n              userId={user.id}\n              fiatSummary={fiatSummary}\n              onSuccess={() => {\n                setShowFiatWithdraw(false);\n                handleRefresh();\n                queryClient.invalidateQueries({ queryKey: ['fiat'] });\n              }}\n            />\n          )}\n        </>\n      )}\n\n      {/* Activity detail sheet */}\n      {selectedActivity && (\n        <div className=\"fixed inset-0 z-modal flex items-end md:items-center justify-center\">\n          <div className=\"absolute inset-0 bg-black/60\" onClick={() => setSelectedActivity(null)} />\n          <div className=\"relative w-full md:max-w-md bg-white rounded-t-3xl md:rounded-2xl shadow-2xl p-6 z-[1] mb-[calc(72px+env(safe-area-inset-bottom,0px))] pb-[calc(16px+env(safe-area-inset-bottom,0px))] max-h-[85vh] overflow-y-auto\">\n            <div className=\"flex items-start justify-between mb-4\">\n              <div>\n                <p className=\"text-xs uppercase tracking-wide text-gray-500\">Activity</p>\n                <h3 className=\"text-lg font-semibold text-gray-900\">{prettyKind(selectedActivity.kind)}</h3>\n              </div>\n              <button\n                className=\"p-2 rounded-full hover:bg-gray-100\"\n                aria-label=\"Close details\"\n                onClick={() => setSelectedActivity(null)}\n              >\n                <X className=\"w-4 h-4 text-gray-600\" />\n              </button>\n            </div>\n\n            <div className=\"bg-gray-50 rounded-2xl p-4 mb-4\">\n              <p className=\"text-xs text-gray-500 mb-1\">Amount</p>\n              {(() => {\n                const tx = formatTxAmount({ amount: selectedActivity.amountUSD, kind: selectedActivity.kind, compact: false, currency: (selectedActivity as any)?.meta?.currency || 'USD' });\n                return (\n                  <p className={`text-2xl font-semibold ${toneClass(tx.tone)}`}>\n                    {tx.display}\n                  </p>\n                );\n              })()}\n              <div className=\"flex items-center gap-2 text-xs text-gray-500 mt-3\">\n                <Clock className=\"w-3.5 h-3.5\" />\n                <span>{selectedActivity.createdAt ? formatTimeAgo(selectedActivity.createdAt) : 'Just now'}</span>\n              </div>\n            </div>\n\n            {selectedActivity.meta?.prediction_title && (\n              <div className=\"mb-4\">\n                <p className=\"text-xs text-gray-500 mb-1\">Prediction</p>\n                <p className=\"text-sm font-medium text-gray-900\">\n                  {selectedActivity.meta.prediction_title}\n                </p>\n                {selectedActivity.meta.option_label && (\n                  <p className=\"text-xs text-gray-500 mt-0.5\">Position: {selectedActivity.meta.option_label}</p>\n                )}\n              </div>\n            )}\n\n            {selectedActivity.txHash ? (\n              <div className=\"border border-gray-200 rounded-2xl p-4 space-y-3\">\n                <div className=\"flex items-center justify-between\">\n                  <span className=\"text-xs font-semibold text-gray-600 uppercase tracking-wide\">Transaction hash</span>\n                  <span className=\"font-mono text-xs text-gray-900 truncate max-w-[140px]\">\n                    {selectedActivity.txHash.slice(0, 10)}…{selectedActivity.txHash.slice(-6)}\n                  </span>\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <button\n                    className=\"flex-1 flex items-center justify-center gap-2 text-sm font-medium text-gray-700 border border-gray-200 rounded-xl py-2 hover:bg-gray-50\"\n                    onClick={async () => {\n                      try {\n                        await navigator.clipboard.writeText(selectedActivity.txHash || '');\n                        toast.success('Copied transaction hash');\n                      } catch {\n                        toast.error('Unable to copy hash');\n                      }\n                    }}\n                  >\n                    <Copy className=\"w-4 h-4\" />\n                    Copy\n                  </button>\n                  <button\n                    className=\"flex-1 flex items-center justify-center gap-2 text-sm font-medium text-gray-700 border border-gray-200 rounded-xl py-2 hover:bg-gray-50\"\n                    onClick={() => {\n                      const url = `https://sepolia.basescan.org/tx/${selectedActivity.txHash}`;\n                      window.open(url, '_blank');\n                    }}\n                  >\n                    <ExternalLink className=\"w-4 h-4\" />\n                    View\n                  </button>\n                </div>\n              </div>\n            ) : (\n              <div className=\"border border-dashed border-gray-200 rounded-2xl p-4 text-sm text-gray-600 bg-gray-50\">\n                This entry was recorded off-chain, so a transaction hash isn’t available.\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* Transaction details banner */}\n      {txNotice && (\n        <div className=\"fixed left-1/2 -translate-x-1/2 bottom-[calc(88px+env(safe-area-inset-bottom,0px))] z-modal\">\n          <div className=\"mx-auto flex items-center gap-3 rounded-2xl bg-white shadow-lg border border-black/[0.06] px-4 py-2\">\n            <div className=\"flex items-center gap-2\">\n              <span className=\"text-[11px] text-gray-600\">\n                {txNotice.kind === 'claim' ? 'Claim' : txNotice.kind === 'settlement' ? 'Settlement' : prettyKind(txNotice.kind)}\n              </span>\n              <span className=\"font-mono text-[11px] text-gray-500\">\n                {txNotice.hash.slice(0, 10)}…{txNotice.hash.slice(-6)}\n              </span>\n            </div>\n            <div className=\"flex items-center gap-1\">\n              <button\n                className=\"p-1.5 rounded-lg hover:bg-gray-100\"\n                aria-label=\"View transaction\"\n                title=\"View transaction\"\n                onClick={() => {\n                  const url = `https://sepolia.basescan.org/tx/${txNotice.hash}`;\n                  window.open(url, '_blank');\n                }}\n              >\n                <ExternalLink className=\"w-4 h-4 text-gray-700\" />\n              </button>\n              <button\n                className=\"p-1.5 rounded-lg hover:bg-gray-100\"\n                aria-label=\"Copy hash\"\n                title=\"Copy hash\"\n                onClick={async () => {\n                  try {\n                    await navigator.clipboard.writeText(txNotice.hash);\n                    toast.success('Copied transaction hash');\n                  } catch { /* ignore */ }\n                }}\n              >\n                <Copy className=\"w-4 h-4 text-gray-700\" />\n              </button>\n              <button\n                className=\"p-1.5 rounded-lg hover:bg-gray-100\"\n                aria-label=\"Dismiss\"\n                title=\"Dismiss\"\n                onClick={() => dismissTxBanner(txNotice.hash)}\n              >\n                <X className=\"w-4 h-4 text-gray-700\" />\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Claims Sheet */}\n      {showClaims && (\n        <div className=\"fixed inset-0 z-modal flex items-end md:items-center justify-center\">\n          <div className=\"absolute inset-0 bg-black/40\" onClick={() => setShowClaims(false)} />\n          {/* Push sheet above bottom nav (approx 72px) and safe-area */}\n          <div className=\"relative w-full md:max-w-lg bg-white rounded-t-2xl md:rounded-2xl shadow-xl p-4 pb-[calc(16px+env(safe-area-inset-bottom,0px))] mb-[calc(72px+env(safe-area-inset-bottom,0px))] max-h-[80vh] md:max-h-[75vh] overflow-y-auto\">\n            <div className=\"sticky top-0 bg-white/90 backdrop-blur px-4 pt-2 pb-3 -mx-4 border-b border-gray-100 flex items-center justify-between\">\n              <h3 className=\"text-base font-semibold text-gray-900\">Your claimable {t('winnings').toLowerCase()}</h3>\n              <div className=\"flex items-center gap-2\">\n                {Array.isArray(claimables) && claimables.length > 1 && (\n                  <button\n                    disabled={bulkClaiming || isClaiming}\n                    className=\"h-9 px-3 rounded-lg bg-emerald-100 text-emerald-800 text-sm font-semibold hover:bg-emerald-200 disabled:opacity-50\"\n                    onClick={handleClaimAll}\n                  >\n                    {bulkClaiming ? `Claiming ${bulkDone}/${bulkTotal}…` : `Claim all (${claimables.length})`}\n                  </button>\n                )}\n                <button\n                  className=\"p-1.5 rounded-lg hover:bg-gray-100\"\n                  aria-label=\"Dismiss\"\n                  title=\"Dismiss\"\n                  onClick={() => setShowClaims(false)}\n                >\n                  <X className=\"w-4 h-4 text-gray-700\" />\n                </button>\n              </div>\n            </div>\n            {!claimables || claimables.length === 0 ? (\n              <div className=\"text-sm text-gray-600 py-6 text-center\">No claimable items.</div>\n            ) : (\n              <div className=\"space-y-3\">\n                {claimables.map((c) => (\n                  <div key={`${c.predictionId}:${c.amountUnits}`} className=\"flex items-center justify-between p-3 border rounded-xl\">\n                    <div className=\"min-w-0\">\n                      <div className=\"font-medium text-gray-900 truncate\">{c.title || 'Settled prediction'}</div>\n                      <div className=\"text-xs text-gray-500\">Claim {formatCurrency(c.amountUSD, { compact: false })}</div>\n                    </div>\n                    <div className=\"flex items-center gap-2 flex-shrink-0\">\n                      <button\n                        className=\"h-9 px-3 rounded-lg border text-sm text-gray-700 hover:bg-gray-50\"\n                        onClick={() => navigate(`/predictions/${c.predictionId}`, {\n                          state: { from: fromPath }\n                        })}\n                      >\n                        View\n                      </button>\n                      <button\n                        className=\"h-9 px-3 rounded-lg bg-emerald-600 text-white text-sm font-semibold hover:bg-emerald-700 disabled:opacity-50\"\n                        disabled={isClaiming && claimingId !== c.predictionId}\n                        onClick={async () => {\n                          try {\n                            setClaimingId(c.predictionId);\n                            const tx = await claim({\n                              predictionId: c.predictionId,\n                              amountUnits: BigInt(c.amountUnits),\n                              proof: c.proof,\n                            });\n                            if (tx) {\n                              await queryClient.invalidateQueries({ queryKey: ['wallet', 'claimable'] });\n                              // trigger a balance refresh for USDC + escrow\n                              window.dispatchEvent(new CustomEvent('fcz:balance:refresh'));\n                            }\n                          } finally {\n                            setClaimingId(null);\n                          }\n                        }}\n                      >\n                        {isClaiming && claimingId === c.predictionId ? 'Claiming…' : 'Claim'}\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        </div>\n      )}\n\n      {/* View All Transactions Modal */}\n      {showAllTransactions && (\n        <div className=\"fixed inset-0 z-50 bg-black/40 backdrop-blur-sm flex items-end md:items-center justify-center p-4\">\n          <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-xl max-h-[80vh] overflow-hidden\">\n            <div className=\"flex items-center justify-between px-4 py-3 border-b border-gray-100\">\n              <h2 className=\"text-sm font-semibold text-gray-900\">All Transactions</h2>\n              <button\n                onClick={() => setShowAllTransactions(false)}\n                className=\"text-xs text-gray-500 hover:text-gray-700\"\n              >\n                Close\n              </button>\n            </div>\n            <div className=\"overflow-y-auto divide-y divide-gray-100 max-h-[calc(80vh-3.5rem)] sm:max-h-[calc(80vh-3rem)] pr-1\">\n              {isLoadingAllActivity && (!allWalletActivity?.items || allWalletActivity.items.length === 0) ? (\n                <div className=\"p-6 text-sm text-gray-500\">Loading transactions…</div>\n              ) : !allWalletActivity?.items || allWalletActivity.items.length === 0 ? (\n                <div className=\"p-6 text-sm text-gray-500\">No transactions yet.</div>\n              ) : (\n                allWalletActivity.items.map((item) => {\n                  const iconMap: Record<string, any> = {\n                    deposit: Download,\n                    withdraw: ArrowUpRight,\n                    lock: Lock,\n                    release: Unlock,\n                    unlock: Unlock,\n                    entry: Target,\n                    bet_placed: Target,\n                    claim: Receipt,\n                    payout: DollarSign,\n                    win: Trophy,\n                    loss: XCircle,\n                    creator_fee: DollarSign,\n                    platform_fee: DollarSign,\n                    settlement: Receipt,\n                    bet_refund: Unlock,\n                  };\n                  const IconComponent = iconMap[item.kind] || Wallet;\n                  const description = (() => {\n                    if (item.kind === 'entry' && item.meta?.option_label) {\n                      return `on ${item.meta.option_label}`;\n                    }\n                    if (item.kind === 'payout' && item.meta?.prediction_title) {\n                      return `for ${item.meta.prediction_title}`;\n                    }\n                    if (item.kind === 'claim' && item.meta?.prediction_title) {\n                      return `from ${item.meta.prediction_title}`;\n                    }\n                    if (item.kind === 'win' && item.meta?.prediction_title) {\n                      return item.meta.prediction_title;\n                    }\n                    if (item.kind === 'loss' && item.meta?.prediction_title) {\n                      return item.meta.prediction_title;\n                    }\n                    if (item.kind === 'creator_fee' && item.meta?.prediction_title) {\n                      return item.meta.prediction_title;\n                    }\n                    if (item.kind === 'settlement' && item.meta?.prediction_title) {\n                      return item.meta.prediction_title;\n                    }\n                    return '';\n                  })();\n\n                  return (\n                    <div\n                      key={item.id}\n                      className=\"flex items-center justify-between gap-4 px-4 py-3 hover:bg-gray-50 cursor-pointer transition-colors\"\n                      onClick={() => {\n                        setSelectedActivity(item);\n                        setShowAllTransactions(false);\n                      }}\n                    >\n                      <div className=\"flex items-center gap-3 min-w-0\">\n                        <div className=\"w-9 h-9 rounded-full flex items-center justify-center bg-gray-100 flex-shrink-0\">\n                          {IconComponent && <IconComponent className=\"w-4 h-4 text-gray-500\" />}\n                        </div>\n                        <div className=\"min-w-0\">\n                          <p className=\"text-sm font-medium text-gray-900 truncate\">{prettyKind(item.kind)}</p>\n                          {description && (\n                            <p className=\"text-xs text-gray-500 truncate\">{description}</p>\n                          )}\n                          <p className=\"text-[11px] text-gray-400\">\n                            {item.createdAt ? formatTimeAgo(item.createdAt) : 'Recently'}\n                          </p>\n                        </div>\n                      </div>\n                      <div className=\"text-right flex-shrink-0 min-w-[80px]\">\n                        {(() => {\n                          const tx = formatTxAmount({ amount: item.amountUSD, kind: item.kind, compact: false, currency: (item as any)?.meta?.currency || 'USD' });\n                          return (\n                            <div className={`text-sm font-mono font-medium ${toneClass(tx.tone)}`}>\n                              {tx.display}\n                            </div>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                  );\n                })\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default WalletPageV2;\n"],"names":["Unlock","createLucideIcon","DISCONNECTION_GRACE_PERIOD_MS","checkPersistedConnection","wagmiStore","parsed","connections","current","currentConnection","entry","lastAddress","connectorId","safeCheckPersistedConnection","useStableWalletConnection","address","isConnected","isConnecting","isReconnecting","status","chainId","useAccount","reconnect","isReconnectPending","useReconnect","statusValue","hasPersisted","persistedAddress","isInGracePeriod","setIsInGracePeriod","useState","gracePeriodTimeoutRef","useRef","reconnectAttemptedRef","lastKnownAddressRef","useEffect","isTransitioning","triggerReconnect","useCallback","reconnectDelay","stillPersisted","isEffectivelyConnected","effectiveAddress","shallow","objA","objB","key","value","keysA","keyA","ReactExports","useShallow","selector","prev","state","next","formatActivityKind","kind","WalletPageV2","onNavigateBack","sessionUser","useAuthSession","storeUser","storeAuth","useAuthStore","loading","setLoading","useAutoNetworkSwitch","user","authenticated","queryClient","useQueryClient","stableAddress","stableChainId","stableStatus","disconnect","useDisconnect","switchChain","useSwitchChain","sessionHealthy","triggerRecovery","useWeb3Recovery","navigate","useNavigate","location","useLocation","fromPath","showDeposit","setShowDeposit","showWithdraw","setShowWithdraw","showClaims","setShowClaims","showFiatDeposit","setShowFiatDeposit","showFiatWithdraw","setShowFiatWithdraw","claimingId","setClaimingId","bulkClaiming","setBulkClaiming","bulkTotal","setBulkTotal","bulkDone","setBulkDone","claim","isClaiming","useMerkleClaim","txNotice","setTxNotice","selectedActivity","setSelectedActivity","needsReconnect","setNeedsReconnect","effectiveSessionHealthy","walletStatus","computeWalletStatus","baseSepolia","effectiveWalletStatus","walletUSDC","escrowAvailableUSD","escrowReservedUSD","escrowTotalUSD","isLoadingBalance","balanceError","refetchBalances","useUnifiedBalance","balanceStuck","setBalanceStuck","t","onchainEscrowBalance","useEscrowBalance","lastReadyBalances","setLastReadyBalances","walletActivityQuery","useWalletActivity","allWalletActivityQuery","walletActivity","isLoadingActivity","allWalletActivity","isLoadingAllActivity","claimables","useClaimableClaims","showAllTransactions","setShowAllTransactions","paystackStatus","usePaystackStatus","fiatSummaryData","useFiatSummary","fiatEnabled","fiatSummary","openConnectSheet","onTx","e","txHash","predictionId","onReconnectRequired","i","hash","parts","handleSwitchToBase","toast","handleReconnectNow","useMemo","buttons","baseBtn","jsxs","jsx","Wallet","ArrowRightLeft","XCircle","ensureWalletReady","handleDeposit","handleWithdraw","actionButtons","disabledSecondary","Fragment","handleRefresh","resolveValue","fallback","resolvedWalletUSDC","resolvedEscrowAvailable","resolvedEscrowReserved","resolvedEscrowTotal","lastConnectionRef","QK","prettyKind","k","normalized","map","dismissTxBanner","AppHeader","openAuthGate","HelpCircle","handleClaimOne","item","handleClaimAll","successCount","_","formatCurrency","Download","IconComponent","ArrowUpRight","Lock","Target","Receipt","DollarSign","Trophy","description","formatTimeAgo","tx","formatTxAmount","toneClass","Banknote","Plus","DepositUSDCModal","WithdrawUSDCModal","FiatDepositSheet","FiatWithdrawalSheet","X","Clock","Copy","url","ExternalLink","c"],"mappings":"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","x_google_ignoreList":[0,2]}