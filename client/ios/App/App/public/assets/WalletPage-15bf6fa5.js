import{j as e}from"./ui-c369d1f3.js";import{r as d}from"./vendor-c36eaa8e.js";import{a as H,a0 as Y,D as t,o as G,a1 as x,h as w,a2 as N,P as y,a3 as O}from"./index-78beacc5.js";import{A as v}from"./AppHeader-5f619f9e.js";import{b as l}from"./format-14414da9.js";import{u as Q}from"./useEscrowBalance-5c6e362b.js";import{u as T,D as V}from"./DepositUSDCModal-4620608e.js";import{u as q,W as z}from"./WithdrawUSDCModal-1d812251.js";import{m as J}from"./wagmi-c444efa6.js";import{A as k}from"./arrow-down-to-line-3ec1fc28.js";import"./utils-617af415.js";import"./useNotifications-29ac0910.js";import"./useWalletConnectSession-1627a74c.js";import"./utils-ae6b997d.js";const he=({onNavigateBack:K})=>{const{user:S,isAuthenticated:C}=H(),{address:X,isConnected:a}=J();Y();const{balance:D,isLoading:W,refetch:A}=T(),{availableUSD:m,reservedUSD:U,totalUSD:_,isLoading:I,refetch:L,isCorrectChain:B}=Q(),{data:P,isLoading:R}=q(S?.id,10),h=P?.items||[],[u,n]=d.useState(!1),[p,o]=d.useState(!1),[g,r]=d.useState(!1),c=W||I,i=async()=>{await Promise.all([A(),L()])},f=()=>{a?n(!0):r(!0)},M=()=>{a?o(!0):r(!0)},E=s=>{switch(s){case"deposit":return{Icon:y,color:"green"};case"withdraw":return{Icon:k,color:"blue"};case"lock":case"bet_placed":return{Icon:N,color:"orange"};case"unlock":case"bet_refund":return{Icon:x,color:"purple"};case"payout":return{Icon:t,color:"green"};case"creator_fee":return{Icon:t,color:"emerald"};case"platform_fee":return{Icon:t,color:"indigo"};default:return{Icon:t,color:"gray"}}},F=s=>{switch(s){case"deposit":return"Deposit";case"withdraw":return"Withdrawal";case"bet_placed":return"Stake Placed";case"bet_refund":return"Bet Refunded";case"payout":return"Payout";case"creator_fee":return"Creator Earnings";case"platform_fee":return"Platform Fee";case"unlock":return"Funds Released";case"lock":return"Funds Reserved";default:return s.replace(/_/g," ")}};return C?e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(v,{title:"Wallet",action:a&&e.jsx("button",{onClick:i,disabled:c,className:"p-2 text-gray-600 hover:text-gray-900 transition-colors","aria-label":"Refresh balances",children:e.jsx(x,{className:`w-5 h-5 ${c?"animate-spin":""}`})})}),e.jsx("div",{className:"mx-auto w-full max-w-[720px] lg:max-w-[960px] px-4 py-4",children:e.jsx("div",{className:"space-y-4",children:a?c?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[1,2,3].map(s=>e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2 w-2/3"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"})]},s))})}):e.jsxs(e.Fragment,{children:[!B&&e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-xl p-4",children:e.jsx("p",{className:"text-sm text-amber-800",children:"⚠️ Please switch to Base Sepolia network"})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(w,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Wallet"})]}),e.jsx("div",{className:"text-xl font-semibold text-gray-900 font-mono",children:l(D||0,"USD",!0)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"USDC on Base"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(t,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"Available"})]}),e.jsx("div",{className:"text-xl font-semibold text-gray-900 font-mono",children:l(m,"USD",!0)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Ready to stake"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(N,{className:"w-4 h-4 text-gray-500"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium",children:"In Bets"})]}),e.jsx("div",{className:"text-xl font-semibold text-gray-900 font-mono",children:l(U,"USD",!0)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"Currently locked"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Quick Actions"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:f,className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:[e.jsx(y,{className:"w-4 h-4"}),e.jsx("span",{children:"Deposit"})]}),e.jsxs("button",{onClick:M,disabled:_<=0,className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 border border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(k,{className:"w-4 h-4"}),e.jsx("span",{children:"Withdraw"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Recent Activity"}),R?e.jsxs("div",{className:"text-center py-6",children:[e.jsx(x,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-gray-400"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Loading activity..."})]}):h.length>0?e.jsx("div",{className:"space-y-3",children:h.map(s=>{const{Icon:$,color:b}=E(s.kind),j=s.kind==="deposit"||s.kind==="unlock"||s.kind==="bet_refund"||s.kind==="payout"||s.kind==="creator_fee"||s.kind==="platform_fee";return e.jsxs("div",{className:"flex items-center justify-between py-2",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center bg-${b}-100`,children:e.jsx($,{className:`w-4 h-4 text-${b}-600`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:F(s.kind)}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-sm font-medium ${j?"text-green-600":"text-red-600"}`,children:[j?"+":"-",l(s.amountUSD??0,"USD",!0)]}),s.txHash&&e.jsx("a",{href:`https://sepolia.basescan.org/tx/${s.txHash}`,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:underline",children:"View tx"})]})]},s.id)})}):e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("p",{children:"No transactions yet"}),e.jsx("p",{className:"text-sm mb-4",children:"Your transaction history will appear here."}),e.jsx("button",{onClick:f,className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Make Your First Deposit"})]})]})]}):e.jsx("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(w,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Connect your crypto wallet to view balances and manage funds"}),e.jsx("button",{onClick:()=>r(!0),className:"px-6 py-3 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Connect Wallet"})]})})})}),u&&e.jsx(V,{open:u,onClose:()=>n(!1),onSuccess:()=>{n(!1),i()}}),p&&e.jsx(z,{open:p,onClose:()=>o(!1),onSuccess:()=>{o(!1),i()},availableUSDC:m}),g&&e.jsx(O,{isOpen:g,onClose:()=>r(!1)})]}):e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(v,{title:"Wallet"}),e.jsx("div",{className:"mx-auto w-full max-w-[720px] lg:max-w-[960px] px-4 py-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center text-center py-12 px-4",children:[e.jsx("div",{className:"mb-4 text-gray-300",children:e.jsx(t,{className:"w-8 h-8"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign in to view your wallet"}),e.jsx("p",{className:"text-sm text-gray-600 mb-6 max-w-sm",children:"Manage your funds and view transactions."}),e.jsx("button",{onClick:async()=>{try{await G({intent:"view_wallet"})}catch{}},className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Sign In"})]})})]})};export{he as default};
