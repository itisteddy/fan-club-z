{"version":3,"file":"WithdrawUSDCModal-1d812251.js","sources":["../../node_modules/lucide-react/dist/esm/icons/alert-octagon.js","../../node_modules/lucide-react/dist/esm/icons/info.js","../../../shared/src/types/activity.ts","../../src/hooks/useWalletActivity.ts","../../src/utils/walletStatus.ts","../../src/components/ui/StatusCallout.tsx","../../src/components/wallet/WithdrawUSDCModal.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst AlertOctagon = createLucideIcon(\"AlertOctagon\", [\n  [\n    \"polygon\",\n    {\n      points: \"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2\",\n      key: \"h1p8hx\"\n    }\n  ],\n  [\"line\", { x1: \"12\", x2: \"12\", y1: \"8\", y2: \"12\", key: \"1pkeuh\" }],\n  [\"line\", { x1: \"12\", x2: \"12.01\", y1: \"16\", y2: \"16\", key: \"4dfq90\" }]\n]);\n\nexport { AlertOctagon as default };\n//# sourceMappingURL=alert-octagon.js.map\n","/**\n * @license lucide-react v0.303.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Info = createLucideIcon(\"Info\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"M12 16v-4\", key: \"1dtifu\" }],\n  [\"path\", { d: \"M12 8h.01\", key: \"e9boi3\" }]\n]);\n\nexport { Info as default };\n//# sourceMappingURL=info.js.map\n","/**\n * Unified ActivityItem Model\n * \n * Normalizes all activity types (deposits, withdrawals, locks, releases, entries)\n * for consistent rendering across Wallet and Prediction pages\n */\n\nexport type ActivityKind = \n  | 'deposit'\n  | 'withdraw'\n  | 'lock'\n  | 'release'\n  | 'entry'\n  | 'claim'\n  | 'payout'\n  | 'unlock'\n  | 'bet_refund'\n  | 'creator_fee'\n  | 'platform_fee'\n  | 'settlement'\n  | 'win'\n  | 'loss'\n  | 'bet_placed';\n\nexport interface ActivityItem {\n  id: string;\n  kind: ActivityKind;\n  amountUSD: number;\n  txHash?: string;\n  createdAt: string;\n  meta?: {\n    predictionId?: string;\n    predictionTitle?: string;\n    optionId?: string;\n    optionLabel?: string;\n    entryId?: string;\n    lockId?: string;\n    userId?: string;\n    provider?: string;\n    channel?: string;\n    description?: string;\n    [key: string]: any;\n  };\n}\n\n/**\n * Activity icon mapping\n */\nexport const ACTIVITY_ICONS: Record<ActivityKind, string> = {\n  deposit: 'ArrowDownCircle',\n  withdraw: 'ArrowUpCircle',\n  lock: 'Lock',\n  release: 'Unlock',\n  entry: 'TrendingUp',\n  claim: 'Gift',\n  payout: 'DollarSign',\n  unlock: 'RefreshCw',\n  bet_refund: 'Undo',\n  creator_fee: 'PiggyBank',\n  platform_fee: 'Building',\n  settlement: 'CheckCircle',\n  win: 'Trophy',\n  loss: 'XCircle',\n  bet_placed: 'Target',\n};\n\n/**\n * Activity label mapping\n */\nexport const ACTIVITY_LABELS: Record<ActivityKind, string> = {\n  deposit: 'Deposit',\n  withdraw: 'Withdrawal',\n  lock: 'Locked',\n  release: 'Released',\n  entry: 'Bet Placed',\n  claim: 'Claimed',\n  payout: 'Payout',\n  unlock: 'Funds Released',\n  bet_refund: 'Bet Refunded',\n  creator_fee: 'Creator Fee',\n  platform_fee: 'Platform Fee',\n  settlement: 'Settlement Posted',\n  win: 'Won',\n  loss: 'Lost',\n  bet_placed: 'Bet Placed',\n};\n\n/**\n * Normalize wallet transaction to ActivityItem\n */\nexport function normalizeWalletTransaction(tx: any): ActivityItem {\n  // If the backend already set `kind`, trust it; otherwise derive from type/channel/direction\n  const kind: ActivityKind = isValidActivityKind(tx.kind)\n    ? tx.kind\n    : mapTransactionTypeToKind(tx.type, tx.channel, tx.direction);\n  \n  return {\n    id: tx.id,\n    kind,\n    amountUSD: Math.abs(Number(tx.amount || tx.amountUSD || 0)),\n    txHash: tx.txHash || tx.meta?.txHash || tx.external_ref?.split(':')[0],\n    createdAt: tx.createdAt || tx.created_at || tx.timestamp,\n    meta: {\n      predictionId: tx.prediction_id || tx.meta?.prediction_id,\n      predictionTitle: tx.meta?.prediction_title || tx.description,\n      optionId: tx.meta?.option_id,\n      optionLabel: tx.meta?.option_label,\n      entryId: tx.entry_id,\n      lockId: tx.meta?.lock_id,\n      userId: tx.user_id,\n      provider: tx.provider,\n      channel: tx.channel,\n      description: tx.description,\n      ...tx.meta,\n    },\n  };\n}\n\n/**\n * Check if a string is a valid ActivityKind\n */\nfunction isValidActivityKind(kind: any): kind is ActivityKind {\n  const validKinds: ActivityKind[] = [\n    'deposit', 'withdraw', 'lock', 'release', 'entry', 'claim', 'payout',\n    'unlock', 'bet_refund', 'creator_fee', 'platform_fee', 'settlement',\n    'win', 'loss', 'bet_placed'\n  ];\n  return typeof kind === 'string' && validKinds.includes(kind as ActivityKind);\n}\n\n/**\n * Normalize escrow lock to ActivityItem\n */\nexport function normalizeEscrowLock(lock: any): ActivityItem {\n  const kind = lock.status === 'consumed' || lock.state === 'consumed' \n    ? 'entry' \n    : lock.status === 'released' || lock.state === 'released'\n    ? 'release'\n    : 'lock';\n\n  return {\n    id: lock.id,\n    kind,\n    amountUSD: Number(lock.amount || 0),\n    txHash: lock.meta?.tx_hash || lock.tx_ref,\n    createdAt: lock.created_at || lock.released_at,\n    meta: {\n      predictionId: lock.prediction_id,\n      lockId: lock.id,\n      userId: lock.user_id,\n      provider: lock.meta?.provider || 'crypto-base-usdc',\n      ...lock.meta,\n    },\n  };\n}\n\n/**\n * Normalize prediction entry to ActivityItem\n */\nexport function normalizePredictionEntry(entry: any, prediction?: any): ActivityItem {\n  return {\n    id: entry.id,\n    kind: 'entry',\n    amountUSD: Number(entry.amount || 0),\n    createdAt: entry.created_at,\n    meta: {\n      predictionId: entry.prediction_id,\n      predictionTitle: prediction?.title,\n      optionId: entry.option_id,\n      optionLabel: entry.option?.label,\n      entryId: entry.id,\n      lockId: entry.escrow_lock_id,\n      userId: entry.user_id,\n      provider: entry.provider,\n    },\n  };\n}\n\n/**\n * Map transaction type/channel/direction to ActivityKind\n */\nfunction mapTransactionTypeToKind(\n  type: string,\n  channel?: string,\n  direction?: string\n): ActivityKind {\n  // Win/Loss from settlement\n  if (type === 'win' || channel === 'payout') {\n    return 'win';\n  }\n  if (type === 'loss' || channel === 'settlement_loss') {\n    return 'loss';\n  }\n\n  // Deposits\n  if (type === 'credit' && channel === 'escrow_deposit') {\n    return 'deposit';\n  }\n  if (type === 'credit' && channel === 'crypto') {\n    return 'deposit';\n  }\n  if (type === 'deposit' || channel === 'blockchain_deposit') {\n    return 'deposit';\n  }\n\n  // Withdrawals\n  if (type === 'debit' && (channel === 'escrow_withdrawal' || channel === 'escrow_withdraw')) {\n    return 'withdraw';\n  }\n  if (type === 'debit' && channel === 'crypto') {\n    return 'withdraw';\n  }\n  if (type === 'withdraw' || channel === 'blockchain_withdraw') {\n    return 'withdraw';\n  }\n\n  if (type === 'unlock' || channel === 'escrow_unlock') {\n    return 'unlock';\n  }\n\n  // Locks\n  if (type === 'bet_lock' || channel === 'escrow_consumed' || channel === 'blockchain_bet_lock') {\n    return 'lock';\n  }\n  if (channel === 'escrow_locked') {\n    return 'lock';\n  }\n\n  // Releases\n  if (type === 'bet_release' || channel === 'escrow_release' || channel === 'escrow_released' || channel === 'blockchain_bet_release') {\n    return 'release';\n  }\n\n  // Entries\n  if (type === 'bet_entry' || channel === 'prediction_entry') {\n    return 'entry';\n  }\n\n  if (type === 'bet_refund') {\n    return 'bet_refund';\n  }\n\n  if (type === 'settlement' || channel === 'blockchain_settlement') {\n    return 'settlement';\n  }\n\n  // Creator fee\n  if (type === 'creator_fee' || channel === 'creator_fee' || channel === 'blockchain_fee') {\n    return 'creator_fee';\n  }\n\n  if (type === 'platform_fee' || channel === 'platform_fee') {\n    return 'platform_fee';\n  }\n\n  // Claims\n  if (type === 'claim' || channel === 'settlement_claim' || channel === 'blockchain_claim') {\n    return 'claim';\n  }\n\n  // Payouts (different from win - this is generic payout)\n  if (type === 'payout' || channel === 'settlement_payout') {\n    return 'payout';\n  }\n\n  // Default based on direction\n  if (direction === 'credit') {\n    return 'deposit';\n  }\n  if (direction === 'debit') {\n    return 'withdraw';\n  }\n\n  return 'entry';\n}\n\n/**\n * Format relative timestamp (e.g., \"2 hours ago\", \"3 days ago\")\n */\nexport function formatRelativeTime(date: string | Date): string {\n  const now = new Date();\n  const then = typeof date === 'string' ? new Date(date) : date;\n  const diffMs = now.getTime() - then.getTime();\n  const diffSecs = Math.floor(diffMs / 1000);\n  const diffMins = Math.floor(diffSecs / 60);\n  const diffHours = Math.floor(diffMins / 60);\n  const diffDays = Math.floor(diffHours / 24);\n\n  if (diffSecs < 60) {\n    return 'Just now';\n  }\n  if (diffMins < 60) {\n    return `${diffMins} ${diffMins === 1 ? 'minute' : 'minutes'} ago`;\n  }\n  if (diffHours < 24) {\n    return `${diffHours} ${diffHours === 1 ? 'hour' : 'hours'} ago`;\n  }\n  if (diffDays < 7) {\n    return `${diffDays} ${diffDays === 1 ? 'day' : 'days'} ago`;\n  }\n  \n  return then.toLocaleDateString();\n}\n\n/**\n * Get block explorer URL for transaction hash\n */\nexport function getBlockExplorerUrl(txHash: string, chainId?: number): string {\n  // Default to Base Sepolia (84532) if chainId not provided\n  const chainIdNum = chainId || 84532;\n  const baseUrl = chainIdNum === 84532 \n    ? 'https://sepolia.basescan.org'\n    : chainIdNum === 8453\n    ? 'https://basescan.org'\n    : 'https://etherscan.io';\n  \n  return `${baseUrl}/tx/${txHash}`;\n}\n\n","import { useQuery, useInfiniteQuery } from '@tanstack/react-query';\nimport { QK } from '@/lib/queryKeys';\nimport type { ActivityItem } from '@fanclubz/shared';\nimport { normalizeWalletTransaction } from '@fanclubz/shared';\nimport { getApiUrl } from '@/utils/environment';\n\nexport type WalletActivityItem = ActivityItem;\nexport type WalletActivityResponse = { items: WalletActivityItem[] };\n\nfunction fetchWithTimeout(input: string, init?: RequestInit, timeoutMs = 12_000) {\n  const controller = new AbortController();\n  const timeout = setTimeout(() => controller.abort(), timeoutMs);\n  return fetch(input, { ...(init || {}), signal: controller.signal }).finally(() => clearTimeout(timeout));\n}\n\n/**\n * Hook to fetch wallet activity/transaction history\n * \n * PERFORMANCE FIX v2: \n * - Increased refetch interval from 30s to 60s\n * - Added gcTime to keep data in cache longer\n * - Disabled refetchOnWindowFocus to reduce API calls\n */\nexport function useWalletActivity(userId?: string, limit = 20) {\n  const query = useQuery<WalletActivityResponse>({\n    queryKey: QK.walletActivity(userId ?? 'anon', limit),\n    enabled: !!userId,\n    queryFn: async () => {\n      if (!userId) throw new Error('userId is required');\n      \n      const params = new URLSearchParams({ \n        userId, \n        limit: String(limit) \n      });\n      \n      const apiBase = getApiUrl();\n      let r: Response;\n      try {\n        r = await fetchWithTimeout(`${apiBase}/api/wallet/activity?${params.toString()}`, {\n          headers: { Accept: 'application/json' },\n        });\n      } catch (e: any) {\n        if (e?.name === 'AbortError') {\n          throw new Error('Wallet activity request timed out. Please try again.');\n        }\n        throw e;\n      }\n      if (!r.ok) {\n        const error = await r.json().catch(() => ({ message: r.statusText }));\n        throw new Error(error.message || 'Failed to load transactions');\n      }\n      const raw = await r.json() as { items: any[] };\n      \n      const normalisedItems: WalletActivityItem[] = (raw.items || []).map((item) => {\n        try {\n          return normalizeWalletTransaction(item);\n        } catch (error) {\n          console.error('[FCZ-PAY] ui: failed to normalize item', { item, error });\n          return null;\n        }\n      }).filter((item): item is WalletActivityItem => item !== null);\n\n      return { items: normalisedItems };\n    },\n    // PERFORMANCE FIX: Increased intervals to reduce API calls\n    refetchInterval: 60_000, // Refetch every 60 seconds (was 30s)\n    staleTime: 45_000, // Consider data stale after 45 seconds (was 20s)\n    gcTime: 120_000, // Keep in cache for 2 minutes\n    retry: 2,\n    // Don't refetch on window focus - reduces unnecessary API calls\n    refetchOnWindowFocus: false,\n    // Don't refetch on mount if data is fresh\n    refetchOnMount: false,\n  });\n\n  return query;\n}\n\n// Infinite query version for pagination\nexport function useWalletActivityInfinite(userId?: string, limit = 20) {\n  return useInfiniteQuery<WalletActivityResponse, Error, WalletActivityResponse, any, string | undefined>({\n    queryKey: [...QK.walletActivity(userId ?? 'anon', limit), 'infinite'],\n    enabled: !!userId,\n    queryFn: async ({ pageParam }) => {\n      if (!userId) throw new Error('userId is required');\n      \n      const params = new URLSearchParams({ \n        userId, \n        limit: String(limit)\n      });\n      \n      if (pageParam) {\n        params.set('cursor', pageParam);\n      }\n      \n      const apiBase = getApiUrl();\n      let r: Response;\n      try {\n        r = await fetchWithTimeout(`${apiBase}/api/wallet/activity?${params.toString()}`, {\n          headers: { Accept: 'application/json' },\n        });\n      } catch (e: any) {\n        if (e?.name === 'AbortError') {\n          throw new Error('Wallet activity request timed out. Please try again.');\n        }\n        throw e;\n      }\n      if (!r.ok) {\n        const error = await r.json().catch(() => ({ message: r.statusText }));\n        throw new Error(error.message || 'Failed to load transactions');\n      }\n      const raw = await r.json() as { items: any[] };\n      const normalisedItems: WalletActivityItem[] = (raw.items || []).map((item) => \n        normalizeWalletTransaction(item)\n      );\n      return { items: normalisedItems };\n    },\n    getNextPageParam: (lastPage) => {\n      if (!lastPage.items || lastPage.items.length === 0) return undefined;\n      const lastItem = lastPage.items[lastPage.items.length - 1];\n      return lastItem?.id || lastItem?.createdAt;\n    },\n    initialPageParam: undefined as string | undefined,\n    // PERFORMANCE FIX: Increased intervals\n    refetchInterval: 60_000,\n    staleTime: 45_000,\n    gcTime: 120_000,\n    retry: 2,\n    refetchOnWindowFocus: false,\n    refetchOnMount: false,\n  });\n}\n","import { baseSepolia } from 'wagmi/chains';\n\nexport type WalletStatusCode = 'ready' | 'disconnected' | 'wrong_network' | 'session_unhealthy' | 'reconnecting';\n\nexport interface WalletStatusInput {\n  isConnected?: boolean;\n  address?: string | null;\n  chainId?: number | null;\n  expectedChainId?: number;\n  sessionHealthy?: boolean;\n  /** The wagmi status field - used to detect reconnection states */\n  status?: 'connected' | 'disconnected' | 'connecting' | 'reconnecting';\n  /** If using stabilized hook, indicates we're in a transition */\n  isTransitioning?: boolean;\n}\n\nexport interface WalletStatus {\n  code: WalletStatusCode;\n  message: string | null;\n  requiresAction: boolean;\n  expectedChainId: number;\n}\n\n/**\n * Compute the high-level wallet readiness status for UI + guards.\n * \n * IMPORTANT: This function now handles transitioning states to prevent\n * UI flicker during page navigation. When wagmi is reconnecting, we\n * return 'reconnecting' status instead of 'disconnected'.\n */\nexport function computeWalletStatus(input: WalletStatusInput): WalletStatus {\n  const {\n    isConnected,\n    address,\n    chainId,\n    sessionHealthy = true,\n    expectedChainId = baseSepolia.id,\n    status,\n    isTransitioning = false,\n  } = input;\n\n  // Check if we're in a reconnecting state - don't show disconnected UI during transitions\n  const isReconnecting = status === 'reconnecting' || status === 'connecting' || isTransitioning;\n  \n  if (isReconnecting) {\n    // During reconnection, don't require action - wagmi is handling it\n    return {\n      code: 'reconnecting',\n      message: null,\n      requiresAction: false,\n      expectedChainId,\n    };\n  }\n\n  if (!isConnected || !address) {\n    return {\n      code: 'disconnected',\n      message: 'Connect your wallet to continue.',\n      requiresAction: true,\n      expectedChainId,\n    };\n  }\n\n  if (chainId !== expectedChainId) {\n    return {\n      code: 'wrong_network',\n      message: 'Switch your wallet to Base Sepolia.',\n      requiresAction: true,\n      expectedChainId,\n    };\n  }\n\n  if (!sessionHealthy) {\n    return {\n      code: 'session_unhealthy',\n      message: 'Wallet session expired. Please reconnect your wallet.',\n      requiresAction: true,\n      expectedChainId,\n    };\n  }\n\n  return {\n    code: 'ready',\n    message: null,\n    requiresAction: false,\n    expectedChainId,\n  };\n}\n","import { AlertOctagon, AlertTriangle, Info } from 'lucide-react';\nimport { ReactNode } from 'react';\nimport { cn } from '@/lib/utils';\n\ntype StatusTone = 'warning' | 'error' | 'info';\n\ninterface StatusCalloutProps {\n  tone?: StatusTone;\n  title?: string;\n  message: ReactNode;\n  actions?: ReactNode;\n  className?: string;\n}\n\nconst toneConfig: Record<\n  StatusTone,\n  {\n    bg: string;\n    border: string;\n    text: string;\n    icon: typeof AlertTriangle;\n  }\n> = {\n  warning: {\n    bg: 'bg-amber-25 dark:bg-amber-950/40',\n    border: 'border border-amber-100 dark:border-amber-900/60',\n    text: 'text-amber-900 dark:text-amber-100',\n    icon: AlertTriangle,\n  },\n  error: {\n    bg: 'bg-rose-25 dark:bg-rose-950/40',\n    border: 'border border-rose-100 dark:border-rose-900/60',\n    text: 'text-rose-900 dark:text-rose-100',\n    icon: AlertOctagon,\n  },\n  info: {\n    bg: 'bg-blue-25 dark:bg-blue-950/40',\n    border: 'border border-blue-100 dark:border-blue-900/60',\n    text: 'text-blue-900 dark:text-blue-100',\n    icon: Info,\n  },\n};\n\nexport function StatusCallout({\n  tone = 'warning',\n  title,\n  message,\n  actions,\n  className,\n}: StatusCalloutProps) {\n  const config = toneConfig[tone];\n  const Icon = config.icon;\n\n  return (\n    <div\n      className={cn(\n        'rounded-xl px-3 py-3 text-sm shadow-sm',\n        config.bg,\n        config.border,\n        config.text,\n        className,\n      )}\n    >\n      <div className=\"flex items-start gap-3\">\n        <div className=\"rounded-lg bg-white/60 p-1.5 text-xs text-current shadow-sm\">\n          <Icon className=\"h-4 w-4\" />\n        </div>\n        <div className=\"flex-1 space-y-1\">\n          {title && <p className=\"text-sm font-semibold leading-tight\">{title}</p>}\n          <div className=\"text-sm leading-relaxed text-current/90\">{message}</div>\n          {actions && <div className=\"pt-2\">{actions}</div>}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default StatusCallout;\n\n","import * as React from 'react';\nimport { useAccount, useWriteContract, usePublicClient, useSwitchChain } from 'wagmi';\nimport { baseSepolia } from 'wagmi/chains';\nimport { useQueryClient } from '@tanstack/react-query';\nimport { waitForTransactionReceipt, simulateContract } from 'viem/actions';\nimport { getAddress, type Hash } from 'viem';\nimport toast from 'react-hot-toast';\nimport { useAuthStore } from '../../store/authStore';\nimport { invalidateAfterWithdraw } from '@/utils/queryInvalidation';\nimport { \n  parseOnchainError, \n  logTransaction, \n  broadcastBalanceRefresh,\n  isSessionError,\n  cleanupWalletConnectStorage,\n  broadcastReconnectRequired,\n  isUserRejection,\n  ensureWalletReady,\n  hardDelay,\n} from '@/services/onchainTransactionService';\nimport { useWalletConnectSession } from '@/hooks/useWalletConnectSession';\nimport { useWeb3Recovery } from '@/providers/Web3Provider';\nimport { computeWalletStatus } from '@/utils/walletStatus';\nimport StatusCallout from '@/components/ui/StatusCallout';\nimport { getApiUrl } from '@/utils/environment';\n\nconst ESCROW_ADDR_ENV = (import.meta.env.VITE_BASE_ESCROW_ADDRESS \n  ? getAddress(import.meta.env.VITE_BASE_ESCROW_ADDRESS) \n  : undefined) as `0x${string}` | undefined;\n\nconst ESCROW_ABI_MIN = [\n  { type: 'function', name: 'withdraw', stateMutability: 'nonpayable', inputs: [{ name: 'amount', type: 'uint256' }], outputs: [] },\n] as const;\n\nfunction usdToUsdcUnits(n: number): bigint {\n  return BigInt(Math.round(n * 1_000_000));\n}\nfunction clamp2dp(v: number) { return Math.max(0, Math.floor(v * 100) / 100); }\nfunction fmtUSD(n: number) { return `$${n.toLocaleString(undefined, { maximumFractionDigits: 2 })}`; }\n\ntype WithdrawStep = 'input' | 'simulating' | 'withdrawing' | 'waiting';\n\ntype WithdrawUSDCModalProps = {\n  open?: boolean;\n  isOpen?: boolean;\n  onClose: () => void;\n  availableUSDC?: number;\n  userId?: string;\n  escrowAddress?: `0x${string}`;\n  escrowAbi?: any;\n  title?: string;\n  onSuccess?: () => void;\n};\n\nexport default function WithdrawUSDCModal({\n  open,\n  isOpen: controlledOpen,\n  onClose,\n  availableUSDC = 0,\n  userId = '',\n  escrowAddress = ESCROW_ADDR_ENV,\n  escrowAbi = ESCROW_ABI_MIN,\n  title = 'Withdraw from Base',\n  onSuccess,\n}: WithdrawUSDCModalProps) {\n  const queryClient = useQueryClient();\n  const { address, chainId, isConnected, connector } = useAccount();\n  const publicClient = usePublicClient();\n  const { switchChainAsync } = useSwitchChain();\n  const { writeContractAsync, reset: resetWrite } = useWriteContract();\n  const { sessionHealthy } = useWeb3Recovery();\n  const { recoverFromError, withSessionRecovery, cleanupWalletConnectSessions, disconnectWithCleanup } = useWalletConnectSession();\n\n  const [amount, setAmount] = React.useState<number>(0);\n  const [submitting, setSubmitting] = React.useState(false);\n  const [step, setStep] = React.useState<WithdrawStep>('input');\n  const [error, setError] = React.useState<string | null>(null);\n  const [statusMessage, setStatusMessage] = React.useState<string>('');\n  const cancelledRef = React.useRef(false);\n  const mountedRef = React.useRef(true);\n\n  React.useEffect(() => {\n    mountedRef.current = true;\n    return () => { mountedRef.current = false; };\n  }, []);\n\n  const isModalOpen = open ?? controlledOpen ?? false;\n\n  // Reset state when modal closes\n  React.useEffect(() => {\n    if (!isModalOpen) {\n      setAmount(0);\n      setStep('input');\n      setError(null);\n      setStatusMessage('');\n      cancelledRef.current = false;\n      resetWrite();\n    }\n  }, [isModalOpen, resetWrite]);\n\n  // Handle escape key\n  React.useEffect(() => {\n    if (!isModalOpen) return;\n    const onKey = (e: KeyboardEvent) => e.key === 'Escape' && !submitting && handleClose();\n    window.addEventListener('keydown', onKey);\n    return () => window.removeEventListener('keydown', onKey);\n  }, [isModalOpen, submitting]);\n\n  const handleClose = React.useCallback(() => {\n    if (submitting) {\n      cancelledRef.current = true;\n    }\n    onClose();\n  }, [submitting, onClose]);\n\n  if (!isModalOpen) return null;\n\n  const walletStatus = computeWalletStatus({\n    isConnected,\n    address,\n    chainId,\n    expectedChainId: baseSepolia.id,\n    sessionHealthy,\n  });\n  const walletReady = walletStatus.code === 'ready';\n\n  const promptConnectSheet = React.useCallback(() => {\n    window.dispatchEvent(new CustomEvent('fcz:wallet:connect'));\n  }, []);\n\n  const handleSwitchNetwork = React.useCallback(() => {\n    switchChainAsync({ chainId: baseSepolia.id }).catch(() => {\n      toast.error('Approve the network switch request in your wallet.');\n    });\n  }, [switchChainAsync]);\n\n  const handleReconnectClick = React.useCallback(async () => {\n    try {\n      await disconnectWithCleanup();\n    } catch (err) {\n      console.warn('[FCZ-WALLET] Manual reconnect cleanup failed:', err);\n    } finally {\n      promptConnectSheet();\n    }\n  }, [disconnectWithCleanup, promptConnectSheet]);\n\n  const walletCalloutActions = React.useMemo(() => {\n    const buttons: React.ReactNode[] = [];\n    const baseBtn =\n      'inline-flex items-center rounded-lg border border-slate-200 bg-white px-3 py-1.5 text-xs font-semibold text-slate-700 hover:bg-slate-50 transition-colors';\n\n    if (walletStatus.code === 'disconnected') {\n      buttons.push(\n        <button\n          key=\"connect\"\n          type=\"button\"\n          className=\"inline-flex items-center rounded-lg bg-emerald-600 px-3 py-1.5 text-xs font-semibold text-white hover:bg-emerald-700 transition-colors\"\n          onClick={promptConnectSheet}\n        >\n          Connect wallet\n        </button>,\n      );\n    }\n\n    if (walletStatus.code === 'wrong_network') {\n      buttons.push(\n        <button\n          key=\"switch\"\n          type=\"button\"\n          className={baseBtn}\n          onClick={handleSwitchNetwork}\n        >\n          Switch network\n        </button>,\n      );\n    }\n\n    if (walletStatus.code === 'session_unhealthy') {\n      buttons.push(\n        <button\n          key=\"reconnect\"\n          type=\"button\"\n          className=\"inline-flex items-center rounded-lg bg-amber-500 px-3 py-1.5 text-xs font-semibold text-white hover:bg-amber-600 transition-colors\"\n          onClick={handleReconnectClick}\n        >\n          Reconnect wallet\n        </button>,\n      );\n    }\n\n    return buttons.length ? <div className=\"flex flex-wrap gap-2\">{buttons}</div> : null;\n  }, [handleReconnectClick, handleSwitchNetwork, promptConnectSheet, walletStatus.code]);\n\n  // Guard: Missing escrow address\n  if (!escrowAddress) {\n    return (\n      <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50\" onClick={handleClose}>\n        <div className=\"bg-white rounded-lg p-6 max-w-md mx-4\" onClick={(e) => e.stopPropagation()}>\n          <h2 className=\"text-lg font-semibold mb-2 text-red-600\">Configuration Error</h2>\n          <p className=\"text-gray-600 mb-4\">\n            Escrow contract address is not configured. Please contact support.\n          </p>\n          <button\n            onClick={handleClose}\n            className=\"w-full px-4 py-2 bg-gray-200 text-gray-800 rounded-lg hover:bg-gray-300\"\n          >\n            Close\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  const cleanAmount = clamp2dp(amount || 0);\n  const overLimit = cleanAmount > clamp2dp(availableUSDC);\n  const isOnBase = chainId === baseSepolia.id;\n  const disabled =\n    !walletReady || !isConnected || !isOnBase || submitting || cleanAmount <= 0 || overLimit;\n\n  async function ensureBase() {\n    if (chainId !== baseSepolia.id) {\n      try {\n        await switchChainAsync({ chainId: baseSepolia.id });\n      } catch (err) {\n        const wasSessionError = await handleSessionErrorRecovery(err);\n        if (!wasSessionError) {\n          const parsed = parseOnchainError(err);\n          toast.error(parsed.message);\n          setError(parsed.message);\n        }\n        throw err;\n      }\n    }\n  }\n\n  /**\n   * Handle session errors with recovery\n   * Returns true if error was handled (session error)\n   */\n  async function handleSessionErrorRecovery(err: unknown): Promise<boolean> {\n    if (!isSessionError(err)) {\n      return false;\n    }\n    \n    console.log('[FCZ-PAY] Detected stale WalletConnect session, attempting recovery...');\n    \n    try {\n      // Clean up storage first\n      cleanupWalletConnectStorage();\n      \n      // Try to recover\n      await recoverFromError({ attemptReconnect: true });\n      \n      // Notify user\n      toast.error('Wallet session expired. Please reconnect and try again.', { id: 'session-error' });\n      broadcastReconnectRequired('Wallet session expired');\n      \n      return true;\n    } catch (recoveryErr) {\n      console.error('[FCZ-PAY] Session recovery failed:', recoveryErr);\n      // Force cleanup even if recovery fails\n      cleanupWalletConnectStorage();\n      await cleanupWalletConnectSessions();\n      toast.error('Wallet connection lost. Please reconnect.', { id: 'session-error' });\n      return true;\n    }\n  }\n\n  const validateWalletReady = React.useCallback(() => {\n    try {\n      ensureWalletReady({\n        address,\n        chainId,\n        expectedChainId: baseSepolia.id,\n        isConnected,\n        sessionHealthy,\n      });\n      return true;\n    } catch (err) {\n      const parsed = parseOnchainError(err);\n      setError(parsed.message);\n      toast.error(parsed.message);\n      return false;\n    }\n  }, [address, chainId, isConnected, sessionHealthy]);\n\n  async function handleWithdraw() {\n    if (!address || !escrowAddress) {\n      toast.error('Wallet not connected');\n      return;\n    }\n\n    if (!validateWalletReady()) {\n      return;\n    }\n\n    const currentUserId = useAuthStore.getState().user?.id || userId;\n    let txHash: Hash | null = null;\n\n    try {\n      setSubmitting(true);\n      setError(null);\n      setStatusMessage('');\n      resetWrite();\n      \n      await ensureBase();\n      const units = usdToUsdcUnits(cleanAmount);\n\n      console.log('[FCZ-PAY] Withdraw flow started:', {\n        amount: cleanAmount,\n        units: units.toString(),\n        escrowAddress,\n        connector: connector?.id,\n      });\n\n      // Preflight simulate to surface clear errors\n      setStep('simulating');\n      setStatusMessage('Validating withdrawal...');\n      if (publicClient) {\n        try {\n          await simulateContract(publicClient as any, {\n            address: escrowAddress,\n            abi: escrowAbi,\n            functionName: 'withdraw',\n            args: [units],\n            account: address,\n          } as any);\n          console.log('[FCZ-PAY] Withdraw simulation passed');\n        } catch (simErr: unknown) {\n          const parsed = parseOnchainError(simErr);\n          console.error('[FCZ-PAY] Withdraw simulation failed:', parsed);\n          \n          if (parsed.code === 'INSUFFICIENT_GAS') {\n            toast.error('Not enough ETH on Base Sepolia to pay gas. Add ETH and try again.', { id: 'withdraw' });\n          } else if (parsed.code === 'INSUFFICIENT_BALANCE' || parsed.code === 'INSUFFICIENT_ESCROW') {\n            toast.error('Insufficient escrow balance to withdraw.', { id: 'withdraw' });\n          } else {\n            toast.error(parsed.message, { id: 'withdraw' });\n          }\n          throw simErr;\n        }\n      }\n\n      setStep('withdrawing');\n      setStatusMessage('Confirm withdrawal in your wallet...');\n      toast.loading('Confirm withdrawal in your wallet...', { id: 'withdraw' });\n\n      // Execute with session recovery and HARD timeout\n      try {\n        txHash = await withSessionRecovery(async () => {\n          return await writeContractAsync({\n            address: escrowAddress,\n            abi: escrowAbi,\n            functionName: 'withdraw',\n            args: [units],\n          } as any);\n        }, { maxRetries: 1, showToast: false, operationTimeoutMs: 60000 }) as Hash;\n      } catch (writeErr) {\n        // Check for user rejection first\n        if (isUserRejection(writeErr)) {\n          toast.dismiss('withdraw');\n          throw new Error('Transaction cancelled');\n        }\n        \n        // Check for session errors\n        const wasSessionError = await handleSessionErrorRecovery(writeErr);\n        if (wasSessionError) {\n          throw new Error('Wallet session expired. Please reconnect and try again.');\n        }\n        \n        throw writeErr;\n      }\n\n      if (!txHash) {\n        throw new Error('Missing transaction hash after wallet confirmation');\n      }\n\n      console.log('[FCZ-PAY] Withdraw transaction sent:', txHash);\n      \n      // Log withdrawal as pending\n      if (currentUserId) {\n        await logTransaction({\n          userId: currentUserId,\n          walletAddress: address,\n          txHash,\n          type: 'withdraw',\n          status: 'pending',\n          amount: cleanAmount,\n        }).catch(e => console.warn('[FCZ-PAY] Log failed:', e));\n      }\n\n      setStep('waiting');\n      setStatusMessage('Waiting for blockchain confirmation...');\n      toast.loading('Waiting for confirmation...', { id: 'withdraw' });\n\n      if (publicClient) {\n        const receipt = await waitForTransactionReceipt(publicClient as any, { \n          hash: txHash,\n          confirmations: 1,\n          timeout: 180_000,\n        });\n        \n        if (receipt.status === 'reverted') {\n          throw new Error('Withdrawal transaction reverted on-chain');\n        }\n      }\n      \n      console.log('[FCZ-PAY] ✓ Withdraw success:', txHash);\n      \n      // Log withdrawal as completed\n      if (currentUserId) {\n        await logTransaction({\n          userId: currentUserId,\n          walletAddress: address,\n          txHash,\n          type: 'withdraw',\n          status: 'completed',\n          amount: cleanAmount,\n        }).catch(e => console.warn('[FCZ-PAY] Log failed:', e));\n      }\n      \n      // Show success toast with link\n      const truncatedHash = `${txHash.slice(0, 6)}...${txHash.slice(-4)}`;\n      toast.success(\n        <div className=\"flex flex-col\">\n          <span>Withdrew {fmtUSD(cleanAmount)}!</span>\n          <a \n            href={`https://sepolia.basescan.org/tx/${txHash}`}\n            target=\"_blank\"\n            rel=\"noopener noreferrer\"\n            className=\"text-xs text-blue-600 underline\"\n          >\n            View tx: {truncatedHash}\n          </a>\n        </div>,\n        { id: 'withdraw', duration: 6000 }\n      );\n\n      // Reconcile wallet balance with backend\n      if (currentUserId && address) {\n        try {\n          const apiBase = getApiUrl();\n          await fetch(`${apiBase}/api/wallet/reconcile`, {\n            method: 'POST',\n            headers: { 'Content-Type': 'application/json' },\n            body: JSON.stringify({\n              userId: currentUserId,\n              walletAddress: address,\n              txHash: txHash,\n              txType: 'withdraw',\n              amountUSD: cleanAmount,\n            }),\n          });\n          console.log('[FCZ-PAY] Wallet reconciled with backend');\n        } catch (reconcileError) {\n          console.warn('[FCZ-PAY] Reconcile after withdraw failed:', reconcileError);\n        }\n      }\n\n      // Give the chain some time to settle before invalidating queries\n      await hardDelay(1000, 'Post-withdraw settle');\n\n      // Invalidate queries\n      invalidateAfterWithdraw(queryClient, {\n        userId: currentUserId,\n        txHash: txHash,\n      });\n\n      // CRITICAL FIX: Wait for transaction to be indexed, then force balance refresh\n      setTimeout(() => {\n        console.log('[FCZ-PAY] Withdrawn, forcing balance refresh after confirmation delay');\n        broadcastBalanceRefresh();\n        // Force immediate refetch of escrow balance\n        queryClient.invalidateQueries({ queryKey: ['readContract'], exact: false });\n      }, 3000);\n\n      // Also broadcast immediately for faster UI update\n      broadcastBalanceRefresh();\n\n      if (mountedRef.current) {\n        handleClose();\n        onSuccess?.();\n      }\n    } catch (err: unknown) {\n      console.error('[FCZ-PAY] Withdraw failed:', err);\n      \n      // Check for session errors (if not already handled)\n      const wasSessionError = await handleSessionErrorRecovery(err);\n      \n      if (txHash && currentUserId && !wasSessionError) {\n        const parsed = parseOnchainError(err);\n        await logTransaction({\n          userId: currentUserId,\n          walletAddress: address!,\n          txHash,\n          type: 'withdraw',\n          status: 'failed',\n          amount: cleanAmount,\n          error: parsed.message,\n        }).catch(e => console.warn('[FCZ-PAY] Log failed:', e));\n      }\n\n      const parsed = parseOnchainError(err);\n      setError(parsed.message);\n      \n      if (!wasSessionError) {\n        toast.error(`Withdrawal failed: ${parsed.message}`, { id: 'withdraw' });\n      }\n    } finally {\n      cancelledRef.current = false;\n      if (mountedRef.current) {\n        setSubmitting(false);\n        setStep('input');\n        setStatusMessage('');\n      }\n    }\n  }\n\n  const getButtonText = () => {\n    if (!isConnected) return 'Connect wallet';\n    if (!isOnBase) return 'Switch to Base';\n    if (step === 'simulating') return 'Validating...';\n    if (step === 'withdrawing') return 'Confirm in wallet...';\n    if (step === 'waiting') return 'Waiting for confirmation...';\n    return 'Withdraw';\n  };\n\n  const getStepInfo = () => {\n    switch (step) {\n      case 'simulating':\n        return { step: 1, total: 2, message: statusMessage || 'Validating withdrawal...' };\n      case 'withdrawing':\n        return { step: 2, total: 2, message: statusMessage || 'Withdrawing USDC - confirm in wallet' };\n      case 'waiting':\n        return { step: 2, total: 2, message: statusMessage || 'Waiting for confirmation...' };\n      default:\n        return null;\n    }\n  };\n\n  const stepInfo = getStepInfo();\n\n  return (\n    <div className=\"fixed inset-0 z-modal\">\n      <div\n        className=\"absolute inset-0 bg-black/40\"\n        onClick={submitting ? undefined : handleClose}\n      />\n      <div \n        className=\"z-modal fixed inset-x-0 mx-auto w-full max-w-md rounded-t-2xl bg-white shadow-xl bottom-[calc(64px+env(safe-area-inset-bottom,0px))] max-h-[calc(100vh-env(safe-area-inset-top,0px)-64px-env(safe-area-inset-bottom,0px))] focus:outline-none\"\n      >\n        <div className=\"mx-auto mt-2 mb-3 h-1.5 w-16 rounded-full bg-gray-200\" />\n        <div className=\"px-4 pb-3\">\n          <div className=\"flex items-center justify-between\">\n            <h2 className=\"text-lg font-semibold\">{title}</h2>\n            <button\n              aria-label=\"Close\"\n              onClick={handleClose}\n              className=\"rounded-full p-2 hover:bg-gray-100\"\n              disabled={submitting}\n            >\n              ✕\n            </button>\n          </div>\n          <div className=\"mt-1 text-xs text-gray-500\">\n            Wallet: {address ? `${address.slice(0, 6)}…${address.slice(-4)}` : 'Not connected'} · Chain:{' '}\n            {chainId === baseSepolia.id ? 'Base Sepolia' : <span className=\"text-amber-600\">Switch to Base Sepolia</span>}\n          </div>\n        </div>\n\n        <div className=\"overflow-y-auto pb-safe px-4 pt-3\">\n          {walletStatus.code !== 'ready' && (\n            <StatusCallout\n              className=\"mb-4\"\n              tone={walletStatus.code === 'session_unhealthy' ? 'error' : 'warning'}\n              title=\"Wallet action required\"\n              message={walletStatus.message ?? 'Update your wallet connection to continue.'}\n              actions={walletCalloutActions}\n            />\n          )}\n\n          {/* Error display */}\n          {error && step === 'input' && (\n            <div className=\"mb-4 p-3 bg-red-50 border border-red-200 rounded-lg\">\n              <p className=\"text-sm text-red-800\">{error}</p>\n              <button \n                onClick={() => setError(null)}\n                className=\"text-xs text-red-600 underline mt-1\"\n              >\n                Dismiss\n              </button>\n            </div>\n          )}\n\n          {/* Progress indicator */}\n          {stepInfo && (\n            <div className=\"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"animate-spin rounded-full h-4 w-4 border-2 border-blue-600 border-t-transparent\"></div>\n                <p className=\"text-sm text-blue-900 font-medium\">\n                  Step {stepInfo.step}/{stepInfo.total}: {stepInfo.message}\n                </p>\n              </div>\n              {step === 'withdrawing' && (\n                <p className=\"text-xs text-blue-700 mt-1\">\n                  Please check your wallet for the confirmation request\n                </p>\n              )}\n              {step === 'waiting' && (\n                <p className=\"text-xs text-blue-700 mt-1\">\n                  Transaction submitted, waiting for block confirmation...\n                </p>\n              )}\n            </div>\n          )}\n\n          <label className=\"mb-1 block text-sm font-medium\">Amount (USDC)</label>\n          <div className=\"mb-2 flex items-center gap-2\">\n            <div className=\"relative flex-1 min-w-0\">\n              <input\n                inputMode=\"decimal\"\n                pattern=\"[0-9]*\"\n                value={amount ? String(amount) : ''}\n                onChange={(e) => {\n                  const v = Number(e.target.value.replace(/[^\\d.]/g, ''));\n                  setAmount(Number.isFinite(v) ? v : 0);\n                }}\n                placeholder=\"0.00\"\n                disabled={submitting}\n                className=\"w-full rounded-lg border border-gray-200 bg-white pl-3 pr-12 py-2 text-base outline-none ring-emerald-500 focus:ring-2 disabled:opacity-50 tabular-nums\"\n              />\n              <span className=\"absolute right-3 top-1/2 -translate-y-1/2 text-xs text-gray-500 whitespace-nowrap\">USDC</span>\n            </div>\n            <button\n              type=\"button\"\n              onClick={() => setAmount(clamp2dp(availableUSDC))}\n              disabled={submitting}\n              className=\"rounded-lg border border-gray-200 px-3 py-2 text-xs font-semibold hover:bg-gray-50 disabled:opacity-50 whitespace-nowrap min-w-[56px]\"\n            >\n              MAX\n            </button>\n          </div>\n\n          <div className=\"mb-1 text-xs text-gray-500\">\n            <div className=\"flex items-center justify-between\">\n              <span>Available to withdraw</span>\n              <span className=\"font-medium text-gray-700 tabular-nums\">{fmtUSD(availableUSDC)}</span>\n            </div>\n          </div>\n          {overLimit && (\n            <div className=\"mb-3 text-xs font-medium text-red-600\">\n              Insufficient balance\n            </div>\n          )}\n\n          <div className=\"h-3\" />\n        </div>\n\n        <div className=\"sticky bottom-0 bg-white px-4 pt-3 pb-4 shadow-[0_-8px_24px_rgba(0,0,0,0.06)]\">\n          <div className=\"flex items-center gap-3\">\n            <button\n              onClick={handleClose}\n              className=\"h-11 flex-1 rounded-xl border border-gray-200 font-medium hover:bg-gray-50 disabled:opacity-50\"\n              disabled={submitting}\n            >\n              Cancel\n            </button>\n            <button\n              onClick={handleWithdraw}\n              className=\"h-11 flex-1 rounded-xl bg-emerald-600 font-semibold text-white hover:bg-emerald-700 disabled:cursor-not-allowed disabled:opacity-50\"\n              disabled={disabled}\n            >\n              {getButtonText()}\n            </button>\n          </div>\n          <div className=\"pb-safe\" />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["AlertOctagon","createLucideIcon","Info","normalizeWalletTransaction","tx","kind","isValidActivityKind","mapTransactionTypeToKind","type","channel","direction","fetchWithTimeout","input","init","timeoutMs","controller","timeout","useWalletActivity","userId","limit","useQuery","QK","params","apiBase","getApiUrl","r","e","error","item","computeWalletStatus","isConnected","address","chainId","sessionHealthy","expectedChainId","baseSepolia","status","isTransitioning","toneConfig","AlertTriangle","StatusCallout","tone","title","message","actions","className","config","Icon","jsx","cn","jsxs","ESCROW_ADDR_ENV","getAddress","ESCROW_ABI_MIN","usdToUsdcUnits","n","clamp2dp","v","fmtUSD","WithdrawUSDCModal","open","controlledOpen","onClose","availableUSDC","escrowAddress","escrowAbi","onSuccess","queryClient","useQueryClient","connector","useAccount","publicClient","usePublicClient","switchChainAsync","useSwitchChain","writeContractAsync","resetWrite","useWriteContract","useWeb3Recovery","recoverFromError","withSessionRecovery","cleanupWalletConnectSessions","disconnectWithCleanup","useWalletConnectSession","amount","setAmount","React.useState","submitting","setSubmitting","step","setStep","setError","statusMessage","setStatusMessage","cancelledRef","React.useRef","mountedRef","React.useEffect","isModalOpen","onKey","handleClose","React.useCallback","walletStatus","walletReady","promptConnectSheet","handleSwitchNetwork","toast","handleReconnectClick","walletCalloutActions","React.useMemo","buttons","baseBtn","cleanAmount","overLimit","isOnBase","disabled","ensureBase","err","handleSessionErrorRecovery","parsed","parseOnchainError","isSessionError","cleanupWalletConnectStorage","broadcastReconnectRequired","validateWalletReady","ensureWalletReady","handleWithdraw","currentUserId","useAuthStore","txHash","units","simulateContract","simErr","writeErr","isUserRejection","logTransaction","waitForTransactionReceipt","truncatedHash","hardDelay","invalidateAfterWithdraw","broadcastBalanceRefresh","wasSessionError","getButtonText","stepInfo"],"mappings":"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","x_google_ignoreList":[0,1]}