import{j as e}from"./ui-7ef4368a.js";import{r as p}from"./vendor-2237fdcd.js";import{k as P,a as U,d as $,T as y,D as c,o as N,P as v,z as o}from"./index-9d021997.js";import{A as w}from"./AppHeader-e5aabb01.js";import{b as n,a as R,f as L}from"./formatters-10b86754.js";import{D as z}from"./dollar-sign-7adecb09.js";import{C as m}from"./credit-card-7d69c720.js";import"./utils-fa2f248f.js";const M=({onNavigateBack:B})=>{const{user:h}=P(),{user:k,isAuthenticated:A}=U(),{getBalance:S,getTransactionHistory:D,addFunds:C,initializeWallet:u}=$(),[T,g]=p.useState(!0),b=h||k,l=!!h||A;p.useEffect(()=>{l&&b?.id?(u(),g(!1)):l||g(!1)},[l,b?.id,u]);const a=S("USD")||0,r=D({currency:"USD"})||[],d=r.filter(s=>s.type==="deposit").reduce((s,t)=>s+t.amount,0),W=r.length,x=r.sort((s,t)=>new Date(t.date).getTime()-new Date(s.date).getTime()).slice(0,5),j=async s=>{try{await C(s,"USD","Demo funds added"),o.success(`Successfully added $${s.toLocaleString()} to your wallet!`)}catch(t){console.error("Failed to add funds:",t),o.error("Failed to add funds. Please try again.")}};if(!l)return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-[calc(5rem+env(safe-area-inset-bottom))]",children:[e.jsx(w,{title:"Wallet"}),e.jsx("div",{className:"mx-auto w-full max-w-[720px] lg:max-w-[960px] px-4 py-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(y,{className:"w-4 h-4 text-gray-300"}),e.jsx("div",{className:"text-xs text-gray-400 font-medium",children:"Net Profit"})]}),e.jsx("div",{className:"text-xl font-semibold text-gray-300 font-mono",children:"--"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(c,{className:"w-4 h-4 text-gray-300"}),e.jsx("div",{className:"text-xs text-gray-400 font-medium",children:"Deposits"})]}),e.jsx("div",{className:"text-xl font-semibold text-gray-300 font-mono",children:"--"})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(z,{className:"w-4 h-4 text-gray-300"}),e.jsx("div",{className:"text-xs text-gray-400 font-medium",children:"Transactions"})]}),e.jsx("div",{className:"text-xl font-semibold text-gray-300 font-mono",children:"--"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Overview"}),e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx(m,{className:"w-8 h-8 text-gray-400"})}),e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign in to view wallet"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4 max-w-sm mx-auto",children:"Track your balance, deposits, and transaction history."}),e.jsx("button",{onClick:async()=>{try{await N({intent:"view_wallet"})}catch(s){console.error("Auth gate error:",s)}},className:"px-6 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors",children:"Sign In"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Recent Activity"}),e.jsx("div",{className:"text-center py-6 text-gray-500",children:e.jsx("p",{className:"text-sm",children:"Your transaction history will appear here"})})]})]})})]});r.filter(s=>s.type==="withdraw").reduce((s,t)=>s+t.amount,0);const i=a-d,F=d>0?i/d*100:0;return e.jsxs("div",{className:"min-h-screen bg-gray-50 pb-[calc(5rem+env(safe-area-inset-bottom))]",children:[e.jsx(w,{title:"Wallet"}),e.jsx("div",{className:"mx-auto w-full max-w-[720px] lg:max-w-[960px] px-4 py-4",children:e.jsx("div",{className:"space-y-4",children:T?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[...Array(3)].map((s,t)=>e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] animate-pulse",children:[e.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2 w-16"}),e.jsx("div",{className:"h-6 bg-gray-200 rounded w-20"})]},t))}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 animate-pulse",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-20 mb-4"}),e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-32 mx-auto mb-2"}),e.jsx("div",{className:"h-3 bg-gray-200 rounded w-24 mx-auto mb-4"}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsx("div",{className:"flex-1 h-12 bg-gray-200 rounded-lg"}),e.jsx("div",{className:"flex-1 h-12 bg-gray-200 rounded-lg"})]})]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(y,{className:`w-4 h-4 ${i>=0?"text-emerald-500":"text-red-500"}`}),e.jsx("div",{className:"text-xs text-gray-600 font-medium tracking-wide",children:"Net Return"})]}),e.jsx("div",{className:`text-lg font-bold font-mono truncate ${i>=0?"text-emerald-600":"text-red-600"}`,children:n(i,{compact:!0,showSign:!0})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[R(F)," ROI"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(c,{className:"w-4 h-4 text-blue-500"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium tracking-wide",children:"Total In"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900 font-mono truncate",children:n(d,{compact:!0})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[r.filter(s=>s.type==="deposit").length," deposits"]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4 min-h-[88px] flex flex-col justify-center",children:[e.jsxs("div",{className:"flex items-center space-x-1 mb-2",children:[e.jsx(m,{className:"w-4 h-4 text-purple-500"}),e.jsx("div",{className:"text-xs text-gray-600 font-medium tracking-wide",children:"Activity"})]}),e.jsx("div",{className:"text-lg font-bold text-gray-900 font-mono truncate",children:L(W)}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"transactions"})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Overview"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"text-center py-6",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900 mb-2 font-mono",children:n(a,{compact:a>1e4})}),e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Available Balance"}),a>0&&e.jsx("div",{className:"text-xs text-gray-500",children:"Ready for predictions"})]}),e.jsxs("div",{className:"flex space-x-3",children:[e.jsxs("button",{onClick:()=>j(100),className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 bg-emerald-600 text-white rounded-xl font-semibold hover:bg-emerald-700 transition-all duration-200 shadow-sm hover:shadow-md",children:[e.jsx(v,{className:"w-4 h-4"}),e.jsx("span",{children:"Quick Add"})]}),e.jsxs("button",{onClick:async()=>{try{await N({intent:"view_wallet"}),o("Withdrawal coming soon!",{icon:"â³"})}catch(s){console.error("Withdraw intent error:",s)}},className:"flex-1 flex items-center justify-center space-x-2 py-3 px-4 border border-gray-300 text-gray-700 rounded-xl font-semibold hover:bg-gray-50 transition-all duration-200",disabled:a===0,children:[e.jsx(c,{className:"w-4 h-4"}),e.jsx("span",{children:"Withdraw"})]})]}),a===0&&e.jsx("div",{className:"text-center py-2",children:e.jsx("p",{className:"text-xs text-gray-500",children:"Add funds to start making predictions"})})]})]}),e.jsxs("div",{className:"bg-white rounded-2xl border border-black/[0.06] p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Recent Activity"}),x.length>0&&e.jsx("button",{className:"text-xs text-emerald-600 hover:text-emerald-700 font-medium",children:"View All"})]}),x.length>0?e.jsx("div",{className:"space-y-3",children:x.map(s=>{const t=s.type==="deposit",f=Math.abs(s.amount);return e.jsxs("div",{className:"flex items-center justify-between py-2 hover:bg-gray-50 rounded-lg px-2 -mx-2 transition-colors",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[e.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${t?"bg-emerald-100":"bg-red-100"}`,children:t?e.jsx(v,{className:"w-4 h-4 text-emerald-600"}):e.jsx(c,{className:"w-4 h-4 text-red-600"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:s.description||(t?"Funds Added":"Withdrawal")}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.date).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})})]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("div",{className:`text-sm font-semibold font-mono ${t?"text-emerald-600":"text-red-600"}`,children:[t?"+":"-",n(f,{compact:f>1e3})]}),e.jsx("div",{className:`text-xs font-medium ${s.status==="completed"?"text-gray-500":s.status==="pending"?"text-yellow-600":"text-red-500"}`,children:s.status})]})]},s.id)})}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(m,{className:"w-6 h-6 text-gray-400"})}),e.jsx("p",{className:"text-sm text-gray-900 font-medium mb-1",children:"No transactions yet"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4 max-w-sm mx-auto",children:"Your transaction history will appear here as you add funds and make predictions."}),e.jsx("button",{onClick:()=>j(100),className:"px-4 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors text-sm",children:"Add Funds"})]})]})]})})})]})};export{M as default};
