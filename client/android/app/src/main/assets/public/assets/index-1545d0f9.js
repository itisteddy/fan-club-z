import{B as Ln,_ as q,h as $r,y as go}from"./hooks.module-50742324.js";import{ae as gr,af as Ct,ag as bo,ah as fe,ai as Di,aj as wo,ak as N,$ as vo,al as Zt,am as xt,an as _e,ao as Eo,ap as jn,aq as Gr,a0 as Ot,B as L,ar as Ui,as as xo,at as So,a6 as Hi,au as at,av as Ce,aw as ko,ax as Fr,ay as _o,az as Ao,aA as st,aB as Io,aC as Yt,aD as br,aE as Ue,aF as Co,aG as Oo,aH as Po,aI as $i,aJ as To,aK as Bo,aL as Mo,aM as Lo,aN as jo,aO as zr,aP as nt,aQ as No,aR as ot,aS as Vr,aT as Ro,aU as qr,j as Wr}from"./index-6112b649.js";import{n as Do,o as Uo,q as Ho,B as $o,t as Go,U as Fo,u as ct,A as dn,c as ye,d as wr,v as zo,x as Gi,y as Fi,z as zi,m as Vo,C as qo,D as fn,r as Nn,E as Wo,F as Vi,G as Ko,H as Zo,I as Yo,J as Jo,k as Le,K as Qo,L as Xo,M as ec,N as qi,O as Wi,P as Ki,Q as tc}from"./public-3a03d500.js";import{c as nc,g as rc,d as ic,s as ac}from"./index-accd8060.js";import{d as sc,g as oc}from"./vendor-499a370b.js";import"./ui-6244b3df.js";import"./utils-17ec81d9.js";function cc(e,t){if(e.length!==t.length)throw new Do({expectedLength:e.length,givenLength:t.length});const n=[];for(let r=0;r<e.length;r++){const i=e[r],a=t[r];n.push(Zi(i,a))}return gr(n)}function Zi(e,t,n=!1){if(e==="address"){const s=t;if(!Ct(s))throw new bo({address:s});return fe(s.toLowerCase(),{size:n?32:null})}if(e==="string")return Di(t);if(e==="bytes")return t;if(e==="bool")return fe(wo(t),{size:n?32:1});const r=e.match(Uo);if(r){const[s,o,c="256"]=r,u=Number.parseInt(c,10)/8;return N(t,{size:n?32:u,signed:o==="int"})}const i=e.match(Ho);if(i){const[s,o]=i;if(Number.parseInt(o,10)!==(t.length-2)/2)throw new $o({expectedSize:Number.parseInt(o,10),givenSize:(t.length-2)/2});return fe(t,{dir:"right",size:n?32:null})}const a=e.match(Go);if(a&&Array.isArray(t)){const[s,o]=a,c=[];for(let u=0;u<t.length;u++)c.push(Zi(o,t[u],!0));return c.length===0?"0x":gr(c)}throw new Fo(e)}function uc(e){const{source:t}=e,n=new Map,r=new vo(8192),i=new Map,a=({address:s,chainId:o})=>`${s}.${o}`;return{async consume({address:s,chainId:o,client:c}){const u=a({address:s,chainId:o}),d=this.get({address:s,chainId:o,client:c});this.increment({address:s,chainId:o});const p=await d;return await t.set({address:s,chainId:o},p),r.set(u,p),p},async increment({address:s,chainId:o}){const c=a({address:s,chainId:o}),u=n.get(c)??0;n.set(c,u+1)},async get({address:s,chainId:o,client:c}){const u=a({address:s,chainId:o});let d=i.get(u);return d||(d=(async()=>{try{const f=await t.get({address:s,chainId:o,client:c}),l=r.get(u)??0;return l>0&&f<=l?l+1:(r.delete(u),f)}finally{this.reset({address:s,chainId:o})}})(),i.set(u,d)),(n.get(u)??0)+await d},reset({address:s,chainId:o}){const c=a({address:s,chainId:o});n.delete(c),i.delete(c)}}}const lc="0x6492649264926492649264926492649264926492649264926492649264926492";function En(e){const{address:t,data:n,signature:r,to:i="hex"}=e,a=gr([ct([{type:"address"},{type:"bytes"},{type:"bytes"}],[t,n,r]),lc]);return i==="hex"?a:Zt(a)}const dc="0x5792579257925792579257925792579257925792579257925792579257925792",fc=N(0,{size:32});async function pc(e,t){async function n(d){if(d.endsWith(dc.slice(2))){const f=jn(Gr(d,-64,-32)),l=Gr(d,0,-64).slice(2).match(/.{1,64}/g),g=await Promise.all(l.map(v=>fc.slice(2)!==v?e.request({method:"eth_getTransactionReceipt",params:[`0x${v}`]},{dedupe:!0}):void 0)),m=(()=>g.some(v=>v===null)?100:g.every(v=>v?.status==="0x1")?200:g.every(v=>v?.status==="0x0")?500:600)();return{atomic:!1,chainId:xt(f),receipts:g.filter(Boolean),status:m,version:"2.0.0"}}return e.request({method:"wallet_getCallsStatus",params:[d]})}const{atomic:r=!1,chainId:i,receipts:a,version:s="2.0.0",...o}=await n(t.id),[c,u]=(()=>{const d=o.status;return d>=100&&d<200?["pending",d]:d>=200&&d<300?["success",d]:d>=300&&d<700?["failure",d]:d==="CONFIRMED"?["success",200]:d==="PENDING"?["pending",100]:[void 0,d]})();return{...o,atomic:r,chainId:i?xt(i):void 0,receipts:a?.map(d=>({...d,blockNumber:_e(d.blockNumber),gasUsed:_e(d.gasUsed),status:Eo[d.status]}))??[],statusCode:u,status:c,version:s}}async function hc(e,t){const{account:n=e.account,chainId:r,nonce:i}=t;if(!n)throw new dn({docsPath:"/docs/eip7702/prepareAuthorization"});const a=Ot(n),s=(()=>{if(t.executor)return t.executor==="self"?t.executor:Ot(t.executor)})(),o={address:t.contractAddress??t.address,chainId:r,nonce:i};return typeof o.chainId>"u"&&(o.chainId=e.chain?.id??await ye(e,wr,"getChainId")({})),typeof o.nonce>"u"&&(o.nonce=await ye(e,zo,"getTransactionCount")({address:a.address,blockTag:"pending"}),(s==="self"||s?.address&&Gi(s.address,a.address))&&(o.nonce+=1)),o}class mc extends L{constructor(t){super(`Call bundle failed with status: ${t.statusCode}`,{name:"BundleFailedError"}),Object.defineProperty(this,"result",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.result=t}}async function Yi(e,t){const{id:n,pollingInterval:r=e.pollingInterval,status:i=({statusCode:m})=>m===200||m>=300,retryCount:a=4,retryDelay:s=({count:m})=>~~(1<<m)*200,timeout:o=6e4,throwOnFailure:c=!1}=t,u=Ui(["waitForCallsStatus",e.uid,n]),{promise:d,resolve:p,reject:f}=xo();let l;const g=Fi(u,{resolve:p,reject:f},m=>{const v=zi(async()=>{const S=P=>{clearTimeout(l),v(),P(),g()};try{const P=await So(async()=>{const A=await ye(e,pc,"getCallsStatus")({id:n});if(c&&A.status==="failure")throw new mc(A);return A},{retryCount:a,delay:s});if(!i(P))return;S(()=>m.resolve(P))}catch(P){S(()=>m.reject(P))}},{interval:r,emitOnBegin:!0});return v});return l=o?setTimeout(()=>{g(),clearTimeout(l),f(new yc({id:n}))},o):void 0,await d}class yc extends L{constructor({id:t}){super(`Timed out while waiting for call bundle with id "${t}" to be confirmed.`,{name:"WaitForCallsStatusTimeoutError"})}}function gc(e){const{key:t="public",name:n="Public Client"}=e;return Hi({...e,key:t,name:n,type:"publicClient"}).extend(Vo)}function bc(e){const{r:t,s:n}=qo.Signature.fromCompact(e.slice(2,130)),r=+`0x${e.slice(130)}`,[i,a]=(()=>{if(r===0||r===1)return[void 0,r];if(r===27)return[BigInt(r),0];if(r===28)return[BigInt(r),1];throw new Error("Invalid yParityOrV value")})();return typeof i<"u"?{r:N(t,{size:32}),s:N(n,{size:32}),v:i,yParity:a}:{r:N(t,{size:32}),s:N(n,{size:32}),yParity:a}}const wc=[{inputs:[{name:"preOpGas",type:"uint256"},{name:"paid",type:"uint256"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"targetSuccess",type:"bool"},{name:"targetResult",type:"bytes"}],name:"ExecutionResult",type:"error"},{inputs:[{name:"opIndex",type:"uint256"},{name:"reason",type:"string"}],name:"FailedOp",type:"error"},{inputs:[{name:"sender",type:"address"}],name:"SenderAddressResult",type:"error"},{inputs:[{name:"aggregator",type:"address"}],name:"SignatureValidationFailed",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"}],name:"ValidationResult",type:"error"},{inputs:[{components:[{name:"preOpGas",type:"uint256"},{name:"prefund",type:"uint256"},{name:"sigFailed",type:"bool"},{name:"validAfter",type:"uint48"},{name:"validUntil",type:"uint48"},{name:"paymasterContext",type:"bytes"}],name:"returnInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"senderInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"factoryInfo",type:"tuple"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"paymasterInfo",type:"tuple"},{components:[{name:"aggregator",type:"address"},{components:[{name:"stake",type:"uint256"},{name:"unstakeDelaySec",type:"uint256"}],name:"stakeInfo",type:"tuple"}],name:"aggregatorInfo",type:"tuple"}],name:"ValidationResultWithAggregation",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"factory",type:"address"},{indexed:!1,name:"paymaster",type:"address"}],name:"AccountDeployed",type:"event"},{anonymous:!1,inputs:[],name:"BeforeExecution",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalDeposit",type:"uint256"}],name:"Deposited",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"aggregator",type:"address"}],name:"SignatureAggregatorChanged",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"totalStaked",type:"uint256"},{indexed:!1,name:"unstakeDelaySec",type:"uint256"}],name:"StakeLocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawTime",type:"uint256"}],name:"StakeUnlocked",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"StakeWithdrawn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!0,name:"paymaster",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"success",type:"bool"},{indexed:!1,name:"actualGasCost",type:"uint256"},{indexed:!1,name:"actualGasUsed",type:"uint256"}],name:"UserOperationEvent",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"userOpHash",type:"bytes32"},{indexed:!0,name:"sender",type:"address"},{indexed:!1,name:"nonce",type:"uint256"},{indexed:!1,name:"revertReason",type:"bytes"}],name:"UserOperationRevertReason",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"},{indexed:!1,name:"withdrawAddress",type:"address"},{indexed:!1,name:"amount",type:"uint256"}],name:"Withdrawn",type:"event"},{inputs:[],name:"SIG_VALIDATION_FAILED",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"},{name:"sender",type:"address"},{name:"paymasterAndData",type:"bytes"}],name:"_validateSenderAndPaymaster",outputs:[],stateMutability:"view",type:"function"},{inputs:[{name:"unstakeDelaySec",type:"uint32"}],name:"addStake",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"depositTo",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"",type:"address"}],name:"deposits",outputs:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"address"}],name:"getDepositInfo",outputs:[{components:[{name:"deposit",type:"uint112"},{name:"staked",type:"bool"},{name:"stake",type:"uint112"},{name:"unstakeDelaySec",type:"uint32"},{name:"withdrawTime",type:"uint48"}],name:"info",type:"tuple"}],stateMutability:"view",type:"function"},{inputs:[{name:"sender",type:"address"},{name:"key",type:"uint192"}],name:"getNonce",outputs:[{name:"nonce",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"initCode",type:"bytes"}],name:"getSenderAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOps",type:"tuple[]"},{name:"aggregator",type:"address"},{name:"signature",type:"bytes"}],name:"opsPerAggregator",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleAggregatedOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"ops",type:"tuple[]"},{name:"beneficiary",type:"address"}],name:"handleOps",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"key",type:"uint192"}],name:"incrementNonce",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"callData",type:"bytes"},{components:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"paymaster",type:"address"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"}],name:"mUserOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"prefund",type:"uint256"},{name:"contextOffset",type:"uint256"},{name:"preOpGas",type:"uint256"}],name:"opInfo",type:"tuple"},{name:"context",type:"bytes"}],name:"innerHandleOp",outputs:[{name:"actualGasCost",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"",type:"address"},{name:"",type:"uint192"}],name:"nonceSequenceNumber",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"op",type:"tuple"},{name:"target",type:"address"},{name:"targetCallData",type:"bytes"}],name:"simulateHandleOp",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"simulateValidation",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"unlockStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"}],name:"withdrawStake",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"withdrawAddress",type:"address"},{name:"withdrawAmount",type:"uint256"}],name:"withdrawTo",outputs:[],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}];function Ji(e){const{authorization:t,factory:n,factoryData:r}=e;if(n==="0x7702"||n==="0x7702000000000000000000000000000000000000"){if(!t)return"0x7702000000000000000000000000000000000000";const i=t.address;return at([i,r??"0x"])}return n?at([n,r??"0x"]):"0x"}function Qi(e){const{callGasLimit:t,callData:n,maxPriorityFeePerGas:r,maxFeePerGas:i,paymaster:a,paymasterData:s,paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,sender:u,signature:d="0x",verificationGasLimit:p}=e,f=at([fe(N(p||0n),{size:16}),fe(N(t||0n),{size:16})]),l=Ji(e),g=at([fe(N(r||0n),{size:16}),fe(N(i||0n),{size:16})]),m=e.nonce??0n,v=a?at([a,fe(N(c||0n),{size:16}),fe(N(o||0n),{size:16}),s||"0x"]):"0x",S=e.preVerificationGas??0n;return{accountGasLimits:f,callData:n,initCode:l,gasFees:g,nonce:m,paymasterAndData:v,preVerificationGas:S,sender:u,signature:d}}const vc={PackedUserOperation:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"}]};function Ec(e){const{chainId:t,entryPointAddress:n,userOperation:r}=e,i=Qi(r);return{types:vc,primaryType:"PackedUserOperation",domain:{name:"ERC4337",version:"1",chainId:t,verifyingContract:n},message:i}}function xc(e){const{chainId:t,entryPointAddress:n,entryPointVersion:r}=e,i=e.userOperation,{authorization:a,callData:s="0x",callGasLimit:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,paymasterAndData:p="0x",preVerificationGas:f,sender:l,verificationGasLimit:g}=i;if(r==="0.8")return fn(Ec({chainId:t,entryPointAddress:n,userOperation:i}));const m=(()=>{if(r==="0.6"){const v=i.initCode?.slice(0,42),S=i.initCode?.slice(42),P=Ji({authorization:a,factory:v,factoryData:S});return ct([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"uint256"},{type:"bytes32"}],[l,d,Ce(P),Ce(s),o,g,f,c,u,Ce(p)])}if(r==="0.7"){const v=Qi(i);return ct([{type:"address"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"},{type:"bytes32"},{type:"uint256"},{type:"bytes32"},{type:"bytes32"}],[v.sender,v.nonce,Ce(v.initCode),Ce(v.callData),v.accountGasLimits,v.preVerificationGas,v.gasFees,Ce(v.paymasterAndData)])}throw new Error(`entryPointVersion "${r}" not supported.`)})();return Ce(ct([{type:"bytes32"},{type:"address"},{type:"uint256"}],[Ce(m),n,BigInt(t)]))}async function Sc(e){const{extend:t,nonceKeyManager:n=uc({source:{get(){return Date.now()},set(){}}}),...r}=e;let i=!1;const a=await e.getAddress();return{...t,...r,address:a,async getFactoryArgs(){return"isDeployed"in this&&await this.isDeployed()?{factory:void 0,factoryData:void 0}:e.getFactoryArgs()},async getNonce(s){const o=s?.key??BigInt(await n.consume({address:a,chainId:e.client.chain.id,client:e.client}));return e.getNonce?await e.getNonce({...s,key:o}):await Nn(e.client,{abi:Wo(["function getNonce(address, uint192) pure returns (uint256)"]),address:e.entryPoint.address,functionName:"getNonce",args:[a,o]})},async isDeployed(){return i?!0:(i=!!await ye(e.client,Vi,"getCode")({address:a}),i)},...e.sign?{async sign(s){const[{factory:o,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.sign(s)]);return o&&c?En({address:o,data:c,signature:u}):u}}:{},async signMessage(s){const[{factory:o,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.signMessage(s)]);return o&&c&&o!=="0x7702"?En({address:o,data:c,signature:u}):u},async signTypedData(s){const[{factory:o,factoryData:c},u]=await Promise.all([this.getFactoryArgs(),e.signTypedData(s)]);return o&&c&&o!=="0x7702"?En({address:o,data:c,signature:u}):u},type:"smart"}}class Rn extends L{constructor({cause:t}){super("Smart Account is not deployed.",{cause:t,metaMessages:["This could arise when:","- No `factory`/`factoryData` or `initCode` properties are provided for Smart Account deployment.","- An incorrect `sender` address is provided."],name:"AccountNotDeployedError"})}}Object.defineProperty(Rn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa20/});class pt extends L{constructor({cause:t,data:n,message:r}={}){const i=r?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${i?`with reason: ${i}`:"for an unknown reason"}.`,{cause:t,name:"ExecutionRevertedError"}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=n}}Object.defineProperty(pt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32521});Object.defineProperty(pt,"message",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Dn extends L{constructor({cause:t}){super("Failed to send funds to beneficiary.",{cause:t,name:"FailedToSendToBeneficiaryError"})}}Object.defineProperty(Dn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa91/});class Un extends L{constructor({cause:t}){super("Gas value overflowed.",{cause:t,metaMessages:["This could arise when:","- one of the gas values exceeded 2**120 (uint120)"].filter(Boolean),name:"GasValuesOverflowError"})}}Object.defineProperty(Un,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa94/});class Hn extends L{constructor({cause:t}){super("The `handleOps` function was called by the Bundler with a gas limit too low.",{cause:t,name:"HandleOpsOutOfGasError"})}}Object.defineProperty(Hn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa95/});class $n extends L{constructor({cause:t,factory:n,factoryData:r,initCode:i}){super("Failed to simulate deployment for Smart Account.",{cause:t,metaMessages:["This could arise when:","- Invalid `factory`/`factoryData` or `initCode` properties are present","- Smart Account deployment execution ran out of gas (low `verificationGasLimit` value)",`- Smart Account deployment execution reverted with an error
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,i&&`initCode: ${i}`].filter(Boolean),name:"InitCodeFailedError"})}}Object.defineProperty($n,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa13/});class Gn extends L{constructor({cause:t,factory:n,factoryData:r,initCode:i}){super("Smart Account initialization implementation did not create an account.",{cause:t,metaMessages:["This could arise when:","- `factory`/`factoryData` or `initCode` properties are invalid",`- Smart Account initialization implementation is incorrect
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,i&&`initCode: ${i}`].filter(Boolean),name:"InitCodeMustCreateSenderError"})}}Object.defineProperty(Gn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa15/});class Fn extends L{constructor({cause:t,factory:n,factoryData:r,initCode:i,sender:a}){super("Smart Account initialization implementation does not return the expected sender.",{cause:t,metaMessages:["This could arise when:",`Smart Account initialization implementation does not return a sender address
`,n&&`factory: ${n}`,r&&`factoryData: ${r}`,i&&`initCode: ${i}`,a&&`sender: ${a}`].filter(Boolean),name:"InitCodeMustReturnSenderError"})}}Object.defineProperty(Fn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa14/});class zn extends L{constructor({cause:t}){super("Smart Account does not have sufficient funds to execute the User Operation.",{cause:t,metaMessages:["This could arise when:","- the Smart Account does not have sufficient funds to cover the required prefund, or","- a Paymaster was not provided"].filter(Boolean),name:"InsufficientPrefundError"})}}Object.defineProperty(zn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa21/});class Vn extends L{constructor({cause:t}){super("Bundler attempted to call an invalid function on the EntryPoint.",{cause:t,name:"InternalCallOnlyError"})}}Object.defineProperty(Vn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa92/});class qn extends L{constructor({cause:t}){super("Bundler used an invalid aggregator for handling aggregated User Operations.",{cause:t,name:"InvalidAggregatorError"})}}Object.defineProperty(qn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa96/});class Wn extends L{constructor({cause:t,nonce:n}){super("Invalid Smart Account nonce used for User Operation.",{cause:t,metaMessages:[n&&`nonce: ${n}`].filter(Boolean),name:"InvalidAccountNonceError"})}}Object.defineProperty(Wn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa25/});class Kn extends L{constructor({cause:t}){super("Bundler has not set a beneficiary address.",{cause:t,name:"InvalidBeneficiaryError"})}}Object.defineProperty(Kn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa90/});class Jt extends L{constructor({cause:t}){super("Invalid fields set on User Operation.",{cause:t,name:"InvalidFieldsError"})}}Object.defineProperty(Jt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class Zn extends L{constructor({cause:t,paymasterAndData:n}){super("Paymaster properties provided are invalid.",{cause:t,metaMessages:["This could arise when:","- the `paymasterAndData` property is of an incorrect length\n",n&&`paymasterAndData: ${n}`].filter(Boolean),name:"InvalidPaymasterAndDataError"})}}Object.defineProperty(Zn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa93/});class We extends L{constructor({cause:t}){super("Paymaster deposit for the User Operation is too low.",{cause:t,metaMessages:["This could arise when:","- the Paymaster has deposited less than the expected amount via the `deposit` function"].filter(Boolean),name:"PaymasterDepositTooLowError"})}}Object.defineProperty(We,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32508});Object.defineProperty(We,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa31/});class Yn extends L{constructor({cause:t}){super("The `validatePaymasterUserOp` function on the Paymaster reverted.",{cause:t,name:"PaymasterFunctionRevertedError"})}}Object.defineProperty(Yn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa33/});class Jn extends L{constructor({cause:t}){super("The Paymaster contract has not been deployed.",{cause:t,name:"PaymasterNotDeployedError"})}}Object.defineProperty(Jn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa30/});class Qt extends L{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterRateLimitError"})}}Object.defineProperty(Qt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32504});class Xt extends L{constructor({cause:t}){super("UserOperation rejected because paymaster (or signature aggregator) is throttled/banned.",{cause:t,name:"PaymasterStakeTooLowError"})}}Object.defineProperty(Xt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32505});class Qn extends L{constructor({cause:t}){super("Paymaster `postOp` function reverted.",{cause:t,name:"PaymasterPostOpFunctionRevertedError"})}}Object.defineProperty(Qn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa50/});class Xn extends L{constructor({cause:t,factory:n,factoryData:r,initCode:i}){super("Smart Account has already been deployed.",{cause:t,metaMessages:["Remove the following properties and try again:",n&&"`factory`",r&&"`factoryData`",i&&"`initCode`"].filter(Boolean),name:"SenderAlreadyConstructedError"})}}Object.defineProperty(Xn,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa10/});class en extends L{constructor({cause:t}){super("UserOperation rejected because account signature check failed (or paymaster signature, if the paymaster uses its data as signature).",{cause:t,name:"SignatureCheckFailedError"})}}Object.defineProperty(en,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32507});class er extends L{constructor({cause:t}){super("The `validateUserOp` function on the Smart Account reverted.",{cause:t,name:"SmartAccountFunctionRevertedError"})}}Object.defineProperty(er,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa23/});class tn extends L{constructor({cause:t}){super("UserOperation rejected because account specified unsupported signature aggregator.",{cause:t,name:"UnsupportedSignatureAggregatorError"})}}Object.defineProperty(tn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32506});class tr extends L{constructor({cause:t}){super("User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validateUserOp` on the Smart Account are not satisfied"].filter(Boolean),name:"UserOperationExpiredError"})}}Object.defineProperty(tr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa22/});class nr extends L{constructor({cause:t}){super("Paymaster for User Operation expired.",{cause:t,metaMessages:["This could arise when:","- the `validAfter` or `validUntil` values returned from `validatePaymasterUserOp` on the Paymaster are not satisfied"].filter(Boolean),name:"UserOperationPaymasterExpiredError"})}}Object.defineProperty(nr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa32/});class rr extends L{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Smart Account"].filter(Boolean),name:"UserOperationSignatureError"})}}Object.defineProperty(rr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa24/});class ir extends L{constructor({cause:t}){super("Signature provided for the User Operation is invalid.",{cause:t,metaMessages:["This could arise when:","- the `signature` for the User Operation is incorrectly computed, and unable to be verified by the Paymaster"].filter(Boolean),name:"UserOperationPaymasterSignatureError"})}}Object.defineProperty(ir,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa34/});class nn extends L{constructor({cause:t}){super("User Operation rejected by EntryPoint's `simulateValidation` during account creation or validation.",{cause:t,name:"UserOperationRejectedByEntryPointError"})}}Object.defineProperty(nn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32500});class rn extends L{constructor({cause:t}){super("User Operation rejected by Paymaster's `validatePaymasterUserOp`.",{cause:t,name:"UserOperationRejectedByPaymasterError"})}}Object.defineProperty(rn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32501});class an extends L{constructor({cause:t}){super("User Operation rejected with op code validation error.",{cause:t,name:"UserOperationRejectedByOpCodeError"})}}Object.defineProperty(an,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32502});class sn extends L{constructor({cause:t}){super("UserOperation out of time-range: either wallet or paymaster returned a time-range, and it is already expired (or will expire soon).",{cause:t,name:"UserOperationOutOfTimeRangeError"})}}Object.defineProperty(sn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32503});class kc extends L{constructor({cause:t}){super(`An error occurred while executing user operation: ${t?.shortMessage}`,{cause:t,name:"UnknownBundlerError"})}}class ar extends L{constructor({cause:t}){super("User Operation verification gas limit exceeded.",{cause:t,metaMessages:["This could arise when:","- the gas used for verification exceeded the `verificationGasLimit`"].filter(Boolean),name:"VerificationGasLimitExceededError"})}}Object.defineProperty(ar,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa40/});class sr extends L{constructor({cause:t}){super("User Operation verification gas limit is too low.",{cause:t,metaMessages:["This could arise when:","- the `verificationGasLimit` is too low to verify the User Operation"].filter(Boolean),name:"VerificationGasLimitTooLowError"})}}Object.defineProperty(sr,"message",{enumerable:!0,configurable:!0,writable:!0,value:/aa41/});class _c extends L{constructor(t,{callData:n,callGasLimit:r,docsPath:i,factory:a,factoryData:s,initCode:o,maxFeePerGas:c,maxPriorityFeePerGas:u,nonce:d,paymaster:p,paymasterAndData:f,paymasterData:l,paymasterPostOpGasLimit:g,paymasterVerificationGasLimit:m,preVerificationGas:v,sender:S,signature:P,verificationGasLimit:A}){const C=ko({callData:n,callGasLimit:r,factory:a,factoryData:s,initCode:o,maxFeePerGas:typeof c<"u"&&`${Fr(c)} gwei`,maxPriorityFeePerGas:typeof u<"u"&&`${Fr(u)} gwei`,nonce:d,paymaster:p,paymasterAndData:f,paymasterData:l,paymasterPostOpGasLimit:g,paymasterVerificationGasLimit:m,preVerificationGas:v,sender:S,signature:P,verificationGasLimit:A});super(t.shortMessage,{cause:t,docsPath:i,metaMessages:[...t.metaMessages?[...t.metaMessages," "]:[],"Request Arguments:",C].filter(Boolean),name:"UserOperationExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=t}}class Ac extends L{constructor({hash:t}){super(`User Operation receipt with hash "${t}" could not be found. The User Operation may not have been processed yet.`,{name:"UserOperationReceiptNotFoundError"})}}class Ic extends L{constructor({hash:t}){super(`User Operation with hash "${t}" could not be found.`,{name:"UserOperationNotFoundError"})}}class Kr extends L{constructor({hash:t}){super(`Timed out while waiting for User Operation with hash "${t}" to be confirmed.`,{name:"WaitForUserOperationReceiptTimeoutError"})}}const Cc=[pt,Jt,We,Qt,Xt,en,tn,sn,nn,rn,an];function Oc(e,t){const n=(e.details||"").toLowerCase();if(Rn.message.test(n))return new Rn({cause:e});if(Dn.message.test(n))return new Dn({cause:e});if(Un.message.test(n))return new Un({cause:e});if(Hn.message.test(n))return new Hn({cause:e});if($n.message.test(n))return new $n({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Gn.message.test(n))return new Gn({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(Fn.message.test(n))return new Fn({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode,sender:t.sender});if(zn.message.test(n))return new zn({cause:e});if(Vn.message.test(n))return new Vn({cause:e});if(Wn.message.test(n))return new Wn({cause:e,nonce:t.nonce});if(qn.message.test(n))return new qn({cause:e});if(Kn.message.test(n))return new Kn({cause:e});if(Zn.message.test(n))return new Zn({cause:e});if(We.message.test(n))return new We({cause:e});if(Yn.message.test(n))return new Yn({cause:e});if(Jn.message.test(n))return new Jn({cause:e});if(Qn.message.test(n))return new Qn({cause:e});if(er.message.test(n))return new er({cause:e});if(Xn.message.test(n))return new Xn({cause:e,factory:t.factory,factoryData:t.factoryData,initCode:t.initCode});if(tr.message.test(n))return new tr({cause:e});if(nr.message.test(n))return new nr({cause:e});if(ir.message.test(n))return new ir({cause:e});if(rr.message.test(n))return new rr({cause:e});if(ar.message.test(n))return new ar({cause:e});if(sr.message.test(n))return new sr({cause:e});const r=e.walk(i=>Cc.some(a=>a.code===i.code));if(r){if(r.code===pt.code)return new pt({cause:e,data:r.data,message:r.details});if(r.code===Jt.code)return new Jt({cause:e});if(r.code===We.code)return new We({cause:e});if(r.code===Qt.code)return new Qt({cause:e});if(r.code===Xt.code)return new Xt({cause:e});if(r.code===en.code)return new en({cause:e});if(r.code===tn.code)return new tn({cause:e});if(r.code===sn.code)return new sn({cause:e});if(r.code===nn.code)return new nn({cause:e});if(r.code===rn.code)return new rn({cause:e});if(r.code===an.code)return new an({cause:e})}return new kc({cause:e})}function Xi(e,{calls:t,docsPath:n,...r}){const i=(()=>{const a=Oc(e,r);if(t&&a instanceof pt){const s=Pc(a),o=t?.filter(c=>c.abi);if(s&&o.length>0)return Tc({calls:o,revertData:s})}return a})();return new _c(i,{docsPath:n,...r})}function Pc(e){let t;return e.walk(n=>{const r=n;if(typeof r.data=="string"||typeof r.data?.revertData=="string"||!(r instanceof L)&&typeof r.message=="string"){const i=(r.data?.revertData||r.data||r.message).match?.(/(0x[A-Za-z0-9]*)/);if(i)return t=i[1],!0}return!1}),t}function Tc(e){const{calls:t,revertData:n}=e,{abi:r,functionName:i,args:a,to:s}=(()=>{const c=t?.filter(d=>!!d.abi);if(c.length===1)return c[0];const u=c.filter(d=>{try{return!!Ko({abi:d.abi,data:n})}catch{return!1}});return u.length===1?u[0]:{abi:[],functionName:c.reduce((d,p)=>`${d?`${d} | `:""}${p.functionName}`,""),args:void 0,to:void 0}})(),o=(()=>n==="0x"?new Zo({functionName:i}):new Yo({abi:r,data:n,functionName:i}))();return new Jo(o,{abi:r,args:a,contractAddress:s,functionName:i})}function Bc(e){const t={};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),t}function pn(e){const t={};return typeof e.callData<"u"&&(t.callData=e.callData),typeof e.callGasLimit<"u"&&(t.callGasLimit=N(e.callGasLimit)),typeof e.factory<"u"&&(t.factory=e.factory),typeof e.factoryData<"u"&&(t.factoryData=e.factoryData),typeof e.initCode<"u"&&(t.initCode=e.initCode),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=N(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=N(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=N(e.nonce)),typeof e.paymaster<"u"&&(t.paymaster=e.paymaster),typeof e.paymasterAndData<"u"&&(t.paymasterAndData=e.paymasterAndData||"0x"),typeof e.paymasterData<"u"&&(t.paymasterData=e.paymasterData),typeof e.paymasterPostOpGasLimit<"u"&&(t.paymasterPostOpGasLimit=N(e.paymasterPostOpGasLimit)),typeof e.paymasterVerificationGasLimit<"u"&&(t.paymasterVerificationGasLimit=N(e.paymasterVerificationGasLimit)),typeof e.preVerificationGas<"u"&&(t.preVerificationGas=N(e.preVerificationGas)),typeof e.sender<"u"&&(t.sender=e.sender),typeof e.signature<"u"&&(t.signature=e.signature),typeof e.verificationGasLimit<"u"&&(t.verificationGasLimit=N(e.verificationGasLimit)),typeof e.authorization<"u"&&(t.eip7702Auth=Mc(e.authorization)),t}function Mc(e){return{address:e.address,chainId:N(e.chainId),nonce:N(e.nonce),r:e.r?N(BigInt(e.r),{size:32}):fe("0x",{size:32}),s:e.s?N(BigInt(e.s),{size:32}):fe("0x",{size:32}),yParity:e.yParity?N(e.yParity,{size:1}):fe("0x",{size:32})}}async function Lc(e,t){const{chainId:n,entryPointAddress:r,context:i,...a}=t,s=pn(a),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,N(n),i]});return{...u,...o&&{paymasterPostOpGasLimit:_e(o)},...c&&{paymasterVerificationGasLimit:_e(c)}}}async function jc(e,t){const{chainId:n,entryPointAddress:r,context:i,...a}=t,s=pn(a),{paymasterPostOpGasLimit:o,paymasterVerificationGasLimit:c,...u}=await e.request({method:"pm_getPaymasterStubData",params:[{...s,callGasLimit:s.callGasLimit??"0x0",verificationGasLimit:s.verificationGasLimit??"0x0",preVerificationGas:s.preVerificationGas??"0x0"},r,N(n),i]});return{...u,...o&&{paymasterPostOpGasLimit:_e(o)},...c&&{paymasterVerificationGasLimit:_e(c)}}}const Nc=["factory","fees","gas","paymaster","nonce","signature","authorization"];async function vr(e,t){const n=t,{account:r=e.account,parameters:i=Nc,stateOverride:a}=n;if(!r)throw new dn;const s=Ot(r),o=e,c=n.paymaster??o?.paymaster,u=typeof c=="string"?c:void 0,{getPaymasterStubData:d,getPaymasterData:p}=(()=>{if(c===!0)return{getPaymasterStubData:M=>ye(o,jc,"getPaymasterStubData")(M),getPaymasterData:M=>ye(o,Lc,"getPaymasterData")(M)};if(typeof c=="object"){const{getPaymasterStubData:M,getPaymasterData:z}=c;return{getPaymasterStubData:z&&M?M:z,getPaymasterData:z&&M?z:void 0}}return{getPaymasterStubData:void 0,getPaymasterData:void 0}})(),f=n.paymasterContext?n.paymasterContext:o?.paymasterContext;let l={...n,paymaster:u,sender:s.address};const[g,m,v,S,P]=await Promise.all([(async()=>n.calls?s.encodeCalls(n.calls.map(M=>{const z=M;return z.abi?{data:Le(z),to:z.to,value:z.value}:z})):n.callData)(),(async()=>{if(!i.includes("factory"))return;if(n.initCode)return{initCode:n.initCode};if(n.factory&&n.factoryData)return{factory:n.factory,factoryData:n.factoryData};const{factory:M,factoryData:z}=await s.getFactoryArgs();return s.entryPoint.version==="0.6"?{initCode:M&&z?at([M,z]):void 0}:{factory:M,factoryData:z}})(),(async()=>{if(i.includes("fees")){if(typeof n.maxFeePerGas=="bigint"&&typeof n.maxPriorityFeePerGas=="bigint")return l;if(o?.userOperation?.estimateFeesPerGas){const M=await o.userOperation.estimateFeesPerGas({account:s,bundlerClient:o,userOperation:l});return{...l,...M}}try{const M=o.client??e,z=await ye(M,Qo,"estimateFeesPerGas")({chain:M.chain,type:"eip1559"});return{maxFeePerGas:typeof n.maxFeePerGas=="bigint"?n.maxFeePerGas:BigInt(2n*z.maxFeePerGas),maxPriorityFeePerGas:typeof n.maxPriorityFeePerGas=="bigint"?n.maxPriorityFeePerGas:BigInt(2n*z.maxPriorityFeePerGas)}}catch{return}}})(),(async()=>{if(i.includes("nonce"))return typeof n.nonce=="bigint"?n.nonce:s.getNonce()})(),(async()=>{if(i.includes("authorization")){if(typeof n.authorization=="object")return n.authorization;if(s.authorization&&!await s.isDeployed())return{...await hc(s.client,s.authorization),r:"0xfffffffffffffffffffffffffffffff000000000000000000000000000000000",s:"0x7aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa",yParity:1}}})()]);typeof g<"u"&&(l.callData=g),typeof m<"u"&&(l={...l,...m}),typeof v<"u"&&(l={...l,...v}),typeof S<"u"&&(l.nonce=S),typeof P<"u"&&(l.authorization=P),i.includes("signature")&&(typeof n.signature<"u"?l.signature=n.signature:l.signature=await s.getStubSignature(l)),s.entryPoint.version==="0.6"&&!l.initCode&&(l.initCode="0x");let A;async function C(){return A||(e.chain?e.chain.id:(A=await ye(e,wr,"getChainId")({}),A))}let F=!1;if(i.includes("paymaster")&&d&&!u&&!n.paymasterAndData){const{isFinal:M=!1,sponsor:z,...oe}=await d({chainId:await C(),entryPointAddress:s.entryPoint.address,context:f,...l});F=M,l={...l,...oe}}if(s.entryPoint.version==="0.6"&&!l.paymasterAndData&&(l.paymasterAndData="0x"),i.includes("gas")){if(s.userOperation?.estimateGas){const M=await s.userOperation.estimateGas(l);l={...l,...M}}if(typeof l.callGasLimit>"u"||typeof l.preVerificationGas>"u"||typeof l.verificationGasLimit>"u"||l.paymaster&&typeof l.paymasterPostOpGasLimit>"u"||l.paymaster&&typeof l.paymasterVerificationGasLimit>"u"){const M=await ye(o,ea,"estimateUserOperationGas")({account:s,callGasLimit:0n,preVerificationGas:0n,verificationGasLimit:0n,stateOverride:a,...l.paymaster?{paymasterPostOpGasLimit:0n,paymasterVerificationGasLimit:0n}:{},...l});l={...l,callGasLimit:l.callGasLimit??M.callGasLimit,preVerificationGas:l.preVerificationGas??M.preVerificationGas,verificationGasLimit:l.verificationGasLimit??M.verificationGasLimit,paymasterPostOpGasLimit:l.paymasterPostOpGasLimit??M.paymasterPostOpGasLimit,paymasterVerificationGasLimit:l.paymasterVerificationGasLimit??M.paymasterVerificationGasLimit}}}if(i.includes("paymaster")&&p&&!u&&!n.paymasterAndData&&!F){const M=await p({chainId:await C(),entryPointAddress:s.entryPoint.address,context:f,...l});l={...l,...M}}return delete l.calls,delete l.parameters,delete l.paymasterContext,typeof l.paymaster!="string"&&delete l.paymaster,l}async function ea(e,t){const{account:n=e.account,entryPointAddress:r,stateOverride:i}=t;if(!n&&!t.sender)throw new dn;const a=n?Ot(n):void 0,s=Xo(i),o=a?await ye(e,vr,"prepareUserOperation")({...t,parameters:["authorization","factory","nonce","paymaster","signature"]}):t;try{const c=[pn(o),r??a?.entryPoint?.address],u=await e.request({method:"eth_estimateUserOperationGas",params:s?[...c,s]:[...c]});return Bc(u)}catch(c){const u=t.calls;throw Xi(c,{...o,...u?{calls:u}:{}})}}function Rc(e){return e.request({method:"eth_supportedEntryPoints"})}function Dc(e){const t={...e};return e.callGasLimit&&(t.callGasLimit=BigInt(e.callGasLimit)),e.maxFeePerGas&&(t.maxFeePerGas=BigInt(e.maxFeePerGas)),e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=BigInt(e.maxPriorityFeePerGas)),e.nonce&&(t.nonce=BigInt(e.nonce)),e.paymasterPostOpGasLimit&&(t.paymasterPostOpGasLimit=BigInt(e.paymasterPostOpGasLimit)),e.paymasterVerificationGasLimit&&(t.paymasterVerificationGasLimit=BigInt(e.paymasterVerificationGasLimit)),e.preVerificationGas&&(t.preVerificationGas=BigInt(e.preVerificationGas)),e.verificationGasLimit&&(t.verificationGasLimit=BigInt(e.verificationGasLimit)),t}async function Uc(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationByHash",params:[t]},{dedupe:!0});if(!n)throw new Ic({hash:t});const{blockHash:r,blockNumber:i,entryPoint:a,transactionHash:s,userOperation:o}=n;return{blockHash:r,blockNumber:BigInt(i),entryPoint:a,transactionHash:s,userOperation:Dc(o)}}function Hc(e){const t={...e};return e.actualGasCost&&(t.actualGasCost=BigInt(e.actualGasCost)),e.actualGasUsed&&(t.actualGasUsed=BigInt(e.actualGasUsed)),e.logs&&(t.logs=e.logs.map(n=>_o(n))),e.receipt&&(t.receipt=Ao(t.receipt)),t}async function ta(e,{hash:t}){const n=await e.request({method:"eth_getUserOperationReceipt",params:[t]},{dedupe:!0});if(!n)throw new Ac({hash:t});return Hc(n)}async function $c(e,t){const{account:n=e.account,entryPointAddress:r}=t;if(!n&&!t.sender)throw new dn;const i=n?Ot(n):void 0,a=i?await ye(e,vr,"prepareUserOperation")(t):t,s=t.signature||await i?.signUserOperation?.(a),o=pn({...a,signature:s});try{return await e.request({method:"eth_sendUserOperation",params:[o,r??i?.entryPoint?.address]},{retryCount:0})}catch(c){const u=t.calls;throw Xi(c,{...a,...u?{calls:u}:{},signature:s})}}function Gc(e,t){const{hash:n,pollingInterval:r=e.pollingInterval,retryCount:i,timeout:a=12e4}=t;let s=0;const o=Ui(["waitForUserOperationReceipt",e.uid,n]);return new Promise((c,u)=>{const d=Fi(o,{resolve:c,reject:u},p=>{const f=g=>{l(),g(),d()},l=zi(async()=>{i&&s>=i&&f(()=>p.reject(new Kr({hash:n})));try{const g=await ye(e,ta,"getUserOperationReceipt")({hash:n});f(()=>p.resolve(g))}catch(g){const m=g;m.name!=="UserOperationReceiptNotFoundError"&&f(()=>p.reject(m))}s++},{emitOnBegin:!0,interval:r});return a&&setTimeout(()=>f(()=>p.reject(new Kr({hash:n}))),a),l})})}function Fc(e){return{estimateUserOperationGas:t=>ea(e,t),getChainId:()=>wr(e),getSupportedEntryPoints:()=>Rc(e),getUserOperation:t=>Uc(e,t),getUserOperationReceipt:t=>ta(e,t),prepareUserOperation:t=>vr(e,t),sendUserOperation:t=>$c(e,t),waitForUserOperationReceipt:t=>Gc(e,t)}}function zc(e){const{client:t,key:n="bundler",name:r="Bundler Client",paymaster:i,paymasterContext:a,transport:s,userOperation:o}=e;return Object.assign(Hi({...e,chain:e.chain??t?.chain,key:n,name:r,transport:s,type:"bundlerClient"}),{client:t,paymaster:i,paymasterContext:a,userOperation:o}).extend(Fc)}const Vc="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",qc="0.1.1";function Wc(){return qc}class Z extends Error{constructor(t,n={}){const r=(()=>{if(n.cause instanceof Z){if(n.cause.details)return n.cause.details;if(n.cause.shortMessage)return n.cause.shortMessage}return n.cause?.message?n.cause.message:n.details})(),i=(()=>n.cause instanceof Z&&n.cause.docsPath||n.docsPath)(),s=`https://oxlib.sh${i??""}`,o=[t||"An error occurred.",...n.metaMessages?["",...n.metaMessages]:[],...r||i?["",r?`Details: ${r}`:void 0,i?`See: ${s}`:void 0]:[]].filter(c=>typeof c=="string").join(`
`);super(o,n.cause?{cause:n.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docs",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:`ox@${Wc()}`}),this.cause=n.cause,this.details=r,this.docs=s,this.docsPath=i,this.shortMessage=t}walk(t){return na(this,t)}}function na(e,t){return t?.(e)?e:e&&typeof e=="object"&&"cause"in e&&e.cause?na(e.cause,t):t?null:e}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Er=BigInt(0),or=BigInt(1);function on(e,t=""){if(typeof e!="boolean"){const n=t&&`"${t}"`;throw new Error(n+"expected boolean, got type="+typeof e)}return e}function Ke(e,t,n=""){const r=br(e),i=e?.length,a=t!==void 0;if(!r||a&&i!==t){const s=n&&`"${n}" `,o=a?` of length ${t}`:"",c=r?`length=${i}`:`type=${typeof e}`;throw new Error(s+"expected Uint8Array"+o+", got "+c)}return e}function jt(e){const t=e.toString(16);return t.length&1?"0"+t:t}function ra(e){if(typeof e!="string")throw new Error("hex string expected, got "+typeof e);return e===""?Er:BigInt("0x"+e)}function hn(e){return ra(st(e))}function ia(e){return Io(e),ra(st(Uint8Array.from(e).reverse()))}function xr(e,t){return Yt(e.toString(16).padStart(t*2,"0"))}function aa(e,t){return xr(e,t).reverse()}function ue(e,t,n){let r;if(typeof t=="string")try{r=Yt(t)}catch(a){throw new Error(e+" must be hex string or Uint8Array, cause: "+a)}else if(br(t))r=Uint8Array.from(t);else throw new Error(e+" must be hex string or Uint8Array");const i=r.length;if(typeof n=="number"&&i!==n)throw new Error(e+" of length "+n+" expected, got "+i);return r}const xn=e=>typeof e=="bigint"&&Er<=e;function Kc(e,t,n){return xn(e)&&xn(t)&&xn(n)&&t<=e&&e<n}function Zc(e,t,n,r){if(!Kc(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function sa(e){let t;for(t=0;e>Er;e>>=or,t+=1);return t}const Bt=e=>(or<<BigInt(e))-or;function Yc(e,t,n){if(typeof e!="number"||e<2)throw new Error("hashLen must be a number");if(typeof t!="number"||t<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const r=l=>new Uint8Array(l),i=l=>Uint8Array.of(l);let a=r(e),s=r(e),o=0;const c=()=>{a.fill(1),s.fill(0),o=0},u=(...l)=>n(s,a,...l),d=(l=r(0))=>{s=u(i(0),l),a=u(),l.length!==0&&(s=u(i(1),l),a=u())},p=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let l=0;const g=[];for(;l<t;){a=u();const m=a.slice();g.push(m),l+=a.length}return Ue(...g)};return(l,g)=>{c(),d(l);let m;for(;!(m=g(p()));)d();return c(),m}}function Sr(e,t,n={}){if(!e||typeof e!="object")throw new Error("expected valid options object");function r(i,a,s){const o=e[i];if(s&&o===void 0)return;const c=typeof o;if(c!==a||o===null)throw new Error(`param "${i}" is invalid: expected ${a}, got ${c}`)}Object.entries(t).forEach(([i,a])=>r(i,a,!1)),Object.entries(n).forEach(([i,a])=>r(i,a,!0))}function Zr(e){const t=new WeakMap;return(n,...r)=>{const i=t.get(n);if(i!==void 0)return i;const a=e(n,...r);return t.set(n,a),a}}const Jc="#__bigint";function mn(e,t,n){return JSON.stringify(e,(r,i)=>typeof t=="function"?t(r,i):typeof i=="bigint"?i.toString()+Jc:i,n)}function Qc(e,t){if(mt(e)>t)throw new hu({givenSize:mt(e),maxSize:t})}function Xc(e,t){if(typeof t=="number"&&t>0&&t>mt(e)-1)throw new ma({offset:t,position:"start",size:mt(e)})}function eu(e,t,n){if(typeof t=="number"&&typeof n=="number"&&mt(e)!==n-t)throw new ma({offset:n,position:"end",size:mt(e)})}const Ie={zero:48,nine:57,A:65,F:70,a:97,f:102};function Yr(e){if(e>=Ie.zero&&e<=Ie.nine)return e-Ie.zero;if(e>=Ie.A&&e<=Ie.F)return e-(Ie.A-10);if(e>=Ie.a&&e<=Ie.f)return e-(Ie.a-10)}function kr(e,t){if($e(e)>t)throw new lu({givenSize:$e(e),maxSize:t})}function tu(e,t){if(typeof t=="number"&&t>0&&t>$e(e)-1)throw new da({offset:t,position:"start",size:$e(e)})}function nu(e,t,n){if(typeof t=="number"&&typeof n=="number"&&$e(e)!==n-t)throw new da({offset:n,position:"end",size:$e(e)})}function oa(e,t={}){const{dir:n,size:r=32}=t;if(r===0)return e;const i=e.replace("0x","");if(i.length>r*2)throw new du({size:Math.ceil(i.length/2),targetSize:r,type:"Hex"});return`0x${i[n==="right"?"padEnd":"padStart"](r*2,"0")}`}const ru=new TextEncoder,iu=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function au(e,t={}){const{strict:n=!1}=t;if(!e)throw new Jr(e);if(typeof e!="string")throw new Jr(e);if(n&&!/^0x[0-9a-fA-F]*$/.test(e))throw new Qr(e);if(!e.startsWith("0x"))throw new Qr(e)}function yn(...e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function ca(e){return e instanceof Uint8Array?ht(e):Array.isArray(e)?ht(new Uint8Array(e)):e}function ht(e,t={}){let n="";for(let i=0;i<e.length;i++)n+=iu[e[i]];const r=`0x${n}`;return typeof t.size=="number"?(kr(r,t.size),la(r,t.size)):r}function He(e,t={}){const{signed:n,size:r}=t,i=BigInt(e);let a;r?n?a=(1n<<BigInt(r)*8n-1n)-1n:a=2n**(BigInt(r)*8n)-1n:typeof e=="number"&&(a=BigInt(Number.MAX_SAFE_INTEGER));const s=typeof a=="bigint"&&n?-a-1n:0;if(a&&i>a||i<s){const u=typeof e=="bigint"?"n":"";throw new uu({max:a?`${a}${u}`:void 0,min:`${s}${u}`,signed:n,size:r,value:`${e}${u}`})}const c=`0x${(n&&i<0?(1n<<BigInt(r*8))+BigInt(i):i).toString(16)}`;return r?su(c,r):c}function ua(e,t={}){return ht(ru.encode(e),t)}function su(e,t){return oa(e,{dir:"left",size:t})}function la(e,t){return oa(e,{dir:"right",size:t})}function de(e,t,n,r={}){const{strict:i}=r;tu(e,t);const a=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return i&&nu(a,t,n),a}function $e(e){return Math.ceil((e.length-2)/2)}function ou(e,t={}){const{signed:n}=t;t.size&&kr(e,t.size);const r=BigInt(e);if(!n)return r;const i=(e.length-2)/2,a=(1n<<BigInt(i)*8n)-1n,s=a>>1n;return r<=s?r:r-a-1n}function cu(e,t={}){const{strict:n=!1}=t;try{return au(e,{strict:n}),!0}catch{return!1}}class uu extends Z{constructor({max:t,min:n,signed:r,size:i,value:a}){super(`Number \`${a}\` is not in safe${i?` ${i*8}-bit`:""}${r?" signed":" unsigned"} integer range ${t?`(\`${n}\` to \`${t}\`)`:`(above \`${n}\`)`}`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.IntegerOutOfRangeError"})}}class Jr extends Z{constructor(t){super(`Value \`${typeof t=="object"?mn(t):t}\` of type \`${typeof t}\` is an invalid hex type.`,{metaMessages:['Hex types must be represented as `"0x${string}"`.']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexTypeError"})}}class Qr extends Z{constructor(t){super(`Value \`${t}\` is an invalid hex value.`,{metaMessages:['Hex values must start with `"0x"` and contain only hexadecimal characters (0-9, a-f, A-F).']}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.InvalidHexValueError"})}}let lu=class extends Z{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeOverflowError"})}},da=class extends Z{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SliceOffsetOutOfBoundsError"})}};class du extends Z{constructor({size:t,targetSize:n,type:r}){super(`${r.charAt(0).toUpperCase()}${r.slice(1).toLowerCase()} size (\`${t}\`) exceeds padding size (\`${n}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Hex.SizeExceedsPaddingSizeError"})}}function fu(e){if(!(e instanceof Uint8Array)){if(!e)throw new Nt(e);if(typeof e!="object")throw new Nt(e);if(!("BYTES_PER_ELEMENT"in e))throw new Nt(e);if(e.BYTES_PER_ELEMENT!==1||e.constructor.name!=="Uint8Array")throw new Nt(e)}}function fa(e){return e instanceof Uint8Array?e:typeof e=="string"?ha(e):pa(e)}function pa(e){return e instanceof Uint8Array?e:new Uint8Array(e)}function ha(e,t={}){const{size:n}=t;let r=e;n&&(kr(e,n),r=la(e,n));let i=r.slice(2);i.length%2&&(i=`0${i}`);const a=i.length/2,s=new Uint8Array(a);for(let o=0,c=0;o<a;o++){const u=Yr(i.charCodeAt(c++)),d=Yr(i.charCodeAt(c++));if(u===void 0||d===void 0)throw new Z(`Invalid byte sequence ("${i[c-2]}${i[c-1]}" in "${i}").`);s[o]=u*16+d}return s}function mt(e){return e.length}function Xr(e,t,n,r={}){const{strict:i}=r;Xc(e,t);const a=e.slice(t,n);return i&&eu(a,t,n),a}function ei(e,t={}){const{size:n}=t;typeof n<"u"&&Qc(e,n);const r=ht(e,t);return ou(r,t)}function pu(e){try{return fu(e),!0}catch{return!1}}class Nt extends Z{constructor(t){super(`Value \`${typeof t=="object"?mn(t):t}\` of type \`${typeof t}\` is an invalid Bytes value.`,{metaMessages:["Bytes values must be of type `Bytes`."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.InvalidBytesTypeError"})}}class hu extends Z{constructor({givenSize:t,maxSize:n}){super(`Size cannot exceed \`${n}\` bytes. Given size: \`${t}\` bytes.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SizeOverflowError"})}}class ma extends Z{constructor({offset:t,position:n,size:r}){super(`Slice ${n==="start"?"starting":"ending"} at offset \`${t}\` is out-of-bounds (size: \`${r}\`).`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Bytes.SliceOffsetOutOfBoundsError"})}}function ya(e,t={}){const{as:n=typeof e=="string"?"Hex":"Bytes"}=t,r=Co(fa(e));return n==="Bytes"?r:ht(r)}function ga(e,t={}){const{compressed:n}=t,{prefix:r,x:i,y:a}=e;if(n===!1||typeof i=="bigint"&&typeof a=="bigint"){if(r!==4)throw new ti({prefix:r,cause:new wu});return}if(n===!0||typeof i=="bigint"&&typeof a>"u"){if(r!==3&&r!==2)throw new ti({prefix:r,cause:new bu});return}throw new gu({publicKey:e})}function mu(e){const t=(()=>{if(cu(e))return ba(e);if(pu(e))return yu(e);const{prefix:n,x:r,y:i}=e;return typeof r=="bigint"&&typeof i=="bigint"?{prefix:n??4,x:r,y:i}:{prefix:n,x:r}})();return ga(t),t}function yu(e){return ba(ht(e))}function ba(e){if(e.length!==132&&e.length!==130&&e.length!==68)throw new vu({publicKey:e});if(e.length===130){const r=BigInt(de(e,0,32)),i=BigInt(de(e,32,64));return{prefix:4,x:r,y:i}}if(e.length===132){const r=Number(de(e,0,1)),i=BigInt(de(e,1,33)),a=BigInt(de(e,33,65));return{prefix:r,x:i,y:a}}const t=Number(de(e,0,1)),n=BigInt(de(e,1,33));return{prefix:t,x:n}}function gn(e,t={}){ga(e);const{prefix:n,x:r,y:i}=e,{includePrefix:a=!0}=t;return yn(a?He(n,{size:1}):"0x",He(r,{size:32}),typeof i=="bigint"?He(i,{size:32}):"0x")}class gu extends Z{constructor({publicKey:t}){super(`Value \`${mn(t)}\` is not a valid public key.`,{metaMessages:["Public key must contain:","- an `x` and `prefix` value (compressed)","- an `x`, `y`, and `prefix` value (uncompressed)"]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidError"})}}class ti extends Z{constructor({prefix:t,cause:n}){super(`Prefix "${t}" is invalid.`,{cause:n}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidPrefixError"})}}class bu extends Z{constructor(){super("Prefix must be 2 or 3 for compressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidCompressedPrefixError"})}}class wu extends Z{constructor(){super("Prefix must be 4 for uncompressed public keys."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidUncompressedPrefixError"})}}let vu=class extends Z{constructor({publicKey:t}){super(`Value \`${t}\` is an invalid public key size.`,{metaMessages:["Expected: 33 bytes (compressed + prefix), 64 bytes (uncompressed) or 65 bytes (uncompressed + prefix).",`Received ${$e(ca(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"PublicKey.InvalidSerializedSizeError"})}};const ni=2n**256n-1n;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const pe=BigInt(0),se=BigInt(1),Ze=BigInt(2),wa=BigInt(3),va=BigInt(4),Ea=BigInt(5),Eu=BigInt(7),xa=BigInt(8),xu=BigInt(9),Sa=BigInt(16);function be(e,t){const n=e%t;return n>=pe?n:t+n}function ri(e,t){if(e===pe)throw new Error("invert: expected non-zero number");if(t<=pe)throw new Error("invert: expected positive modulus, got "+t);let n=be(e,t),r=t,i=pe,a=se;for(;n!==pe;){const o=r/n,c=r%n,u=i-a*o;r=n,n=c,i=a,a=u}if(r!==se)throw new Error("invert: does not exist");return be(i,t)}function _r(e,t,n){if(!e.eql(e.sqr(t),n))throw new Error("Cannot find square root")}function ka(e,t){const n=(e.ORDER+se)/va,r=e.pow(t,n);return _r(e,r,t),r}function Su(e,t){const n=(e.ORDER-Ea)/xa,r=e.mul(t,Ze),i=e.pow(r,n),a=e.mul(t,i),s=e.mul(e.mul(a,Ze),i),o=e.mul(a,e.sub(s,e.ONE));return _r(e,o,t),o}function ku(e){const t=Qe(e),n=_a(e),r=n(t,t.neg(t.ONE)),i=n(t,r),a=n(t,t.neg(r)),s=(e+Eu)/Sa;return(o,c)=>{let u=o.pow(c,s),d=o.mul(u,r);const p=o.mul(u,i),f=o.mul(u,a),l=o.eql(o.sqr(d),c),g=o.eql(o.sqr(p),c);u=o.cmov(u,d,l),d=o.cmov(f,p,g);const m=o.eql(o.sqr(d),c),v=o.cmov(u,d,m);return _r(o,v,c),v}}function _a(e){if(e<wa)throw new Error("sqrt is not defined for small field");let t=e-se,n=0;for(;t%Ze===pe;)t/=Ze,n++;let r=Ze;const i=Qe(e);for(;ii(i,r)===1;)if(r++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return ka;let a=i.pow(r,t);const s=(t+se)/Ze;return function(c,u){if(c.is0(u))return u;if(ii(c,u)!==1)throw new Error("Cannot find square root");let d=n,p=c.mul(c.ONE,a),f=c.pow(u,t),l=c.pow(u,s);for(;!c.eql(f,c.ONE);){if(c.is0(f))return c.ZERO;let g=1,m=c.sqr(f);for(;!c.eql(m,c.ONE);)if(g++,m=c.sqr(m),g===d)throw new Error("Cannot find square root");const v=se<<BigInt(d-g-1),S=c.pow(p,v);d=g,p=c.sqr(S),f=c.mul(f,p),l=c.mul(l,S)}return l}}function _u(e){return e%va===wa?ka:e%xa===Ea?Su:e%Sa===xu?ku(e):_a(e)}const Au=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function Iu(e){const t={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=Au.reduce((r,i)=>(r[i]="function",r),t);return Sr(e,n),e}function Cu(e,t,n){if(n<pe)throw new Error("invalid exponent, negatives unsupported");if(n===pe)return e.ONE;if(n===se)return t;let r=e.ONE,i=t;for(;n>pe;)n&se&&(r=e.mul(r,i)),i=e.sqr(i),n>>=se;return r}function Aa(e,t,n=!1){const r=new Array(t.length).fill(n?e.ZERO:void 0),i=t.reduce((s,o,c)=>e.is0(o)?s:(r[c]=s,e.mul(s,o)),e.ONE),a=e.inv(i);return t.reduceRight((s,o,c)=>e.is0(o)?s:(r[c]=e.mul(s,r[c]),e.mul(s,o)),a),r}function ii(e,t){const n=(e.ORDER-se)/Ze,r=e.pow(t,n),i=e.eql(r,e.ONE),a=e.eql(r,e.ZERO),s=e.eql(r,e.neg(e.ONE));if(!i&&!a&&!s)throw new Error("invalid Legendre symbol result");return i?1:a?0:-1}function Ia(e,t){t!==void 0&&Oo(t);const n=t!==void 0?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function Qe(e,t,n=!1,r={}){if(e<=pe)throw new Error("invalid field: expected ORDER > 0, got "+e);let i,a,s=!1,o;if(typeof t=="object"&&t!=null){if(r.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=t;f.BITS&&(i=f.BITS),f.sqrt&&(a=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(s=f.modFromBytes),o=f.allowedLengths}else typeof t=="number"&&(i=t),r.sqrt&&(a=r.sqrt);const{nBitLength:c,nByteLength:u}=Ia(e,i);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d;const p=Object.freeze({ORDER:e,isLE:n,BITS:c,BYTES:u,MASK:Bt(c),ZERO:pe,ONE:se,allowedLengths:o,create:f=>be(f,e),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return pe<=f&&f<e},is0:f=>f===pe,isValidNot0:f=>!p.is0(f)&&p.isValid(f),isOdd:f=>(f&se)===se,neg:f=>be(-f,e),eql:(f,l)=>f===l,sqr:f=>be(f*f,e),add:(f,l)=>be(f+l,e),sub:(f,l)=>be(f-l,e),mul:(f,l)=>be(f*l,e),pow:(f,l)=>Cu(p,f,l),div:(f,l)=>be(f*ri(l,e),e),sqrN:f=>f*f,addN:(f,l)=>f+l,subN:(f,l)=>f-l,mulN:(f,l)=>f*l,inv:f=>ri(f,e),sqrt:a||(f=>(d||(d=_u(e)),d(p,f))),toBytes:f=>n?aa(f,u):xr(f,u),fromBytes:(f,l=!0)=>{if(o){if(!o.includes(f.length)||f.length>u)throw new Error("Field.fromBytes: expected "+o+" bytes, got "+f.length);const m=new Uint8Array(u);m.set(f,n?0:m.length-f.length),f=m}if(f.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+f.length);let g=n?ia(f):hn(f);if(s&&(g=be(g,e)),!l&&!p.isValid(g))throw new Error("invalid field element: outside of range 0..ORDER");return g},invertBatch:f=>Aa(p,f),cmov:(f,l,g)=>g?l:f});return Object.freeze(p)}function Ca(e){if(typeof e!="bigint")throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function Oa(e){const t=Ca(e);return t+Math.ceil(t/2)}function Ou(e,t,n=!1){const r=e.length,i=Ca(t),a=Oa(t);if(r<16||r<a||r>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+r);const s=n?ia(e):hn(e),o=be(s,t-se)+se;return n?aa(o,i):xr(o,i)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const yt=BigInt(0),Ye=BigInt(1);function cn(e,t){const n=t.negate();return e?n:t}function Sn(e,t){const n=Aa(e.Fp,t.map(r=>r.Z));return t.map((r,i)=>e.fromAffine(r.toAffine(n[i])))}function Pa(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function kn(e,t){Pa(e,t);const n=Math.ceil(t/e)+1,r=2**(e-1),i=2**e,a=Bt(e),s=BigInt(e);return{windows:n,windowSize:r,mask:a,maxNumber:i,shiftBy:s}}function ai(e,t,n){const{windowSize:r,mask:i,maxNumber:a,shiftBy:s}=n;let o=Number(e&i),c=e>>s;o>r&&(o-=a,c+=Ye);const u=t*r,d=u+Math.abs(o)-1,p=o===0,f=o<0,l=t%2!==0;return{nextN:c,offset:d,isZero:p,isNeg:f,isNegF:l,offsetF:u}}function Pu(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach((n,r)=>{if(!(n instanceof t))throw new Error("invalid point at index "+r)})}function Tu(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach((n,r)=>{if(!t.isValid(n))throw new Error("invalid scalar at index "+r)})}const _n=new WeakMap,Ta=new WeakMap;function An(e){return Ta.get(e)||1}function si(e){if(e!==yt)throw new Error("invalid wNAF")}class Bu{constructor(t,n){this.BASE=t.BASE,this.ZERO=t.ZERO,this.Fn=t.Fn,this.bits=n}_unsafeLadder(t,n,r=this.ZERO){let i=t;for(;n>yt;)n&Ye&&(r=r.add(i)),i=i.double(),n>>=Ye;return r}precomputeWindow(t,n){const{windows:r,windowSize:i}=kn(n,this.bits),a=[];let s=t,o=s;for(let c=0;c<r;c++){o=s,a.push(o);for(let u=1;u<i;u++)o=o.add(s),a.push(o);s=o.double()}return a}wNAF(t,n,r){if(!this.Fn.isValid(r))throw new Error("invalid scalar");let i=this.ZERO,a=this.BASE;const s=kn(t,this.bits);for(let o=0;o<s.windows;o++){const{nextN:c,offset:u,isZero:d,isNeg:p,isNegF:f,offsetF:l}=ai(r,o,s);r=c,d?a=a.add(cn(f,n[l])):i=i.add(cn(p,n[u]))}return si(r),{p:i,f:a}}wNAFUnsafe(t,n,r,i=this.ZERO){const a=kn(t,this.bits);for(let s=0;s<a.windows&&r!==yt;s++){const{nextN:o,offset:c,isZero:u,isNeg:d}=ai(r,s,a);if(r=o,!u){const p=n[c];i=i.add(d?p.negate():p)}}return si(r),i}getPrecomputes(t,n,r){let i=_n.get(n);return i||(i=this.precomputeWindow(n,t),t!==1&&(typeof r=="function"&&(i=r(i)),_n.set(n,i))),i}cached(t,n,r){const i=An(t);return this.wNAF(i,this.getPrecomputes(i,t,r),n)}unsafe(t,n,r,i){const a=An(t);return a===1?this._unsafeLadder(t,n,i):this.wNAFUnsafe(a,this.getPrecomputes(a,t,r),n,i)}createCache(t,n){Pa(n,this.bits),Ta.set(t,n),_n.delete(t)}hasCache(t){return An(t)!==1}}function Mu(e,t,n,r){let i=t,a=e.ZERO,s=e.ZERO;for(;n>yt||r>yt;)n&Ye&&(a=a.add(i)),r&Ye&&(s=s.add(i)),i=i.double(),n>>=Ye,r>>=Ye;return{p1:a,p2:s}}function Lu(e,t,n,r){Pu(n,e),Tu(r,t);const i=n.length,a=r.length;if(i!==a)throw new Error("arrays of points and scalars must have equal length");const s=e.ZERO,o=sa(BigInt(i));let c=1;o>12?c=o-3:o>4?c=o-2:o>0&&(c=2);const u=Bt(c),d=new Array(Number(u)+1).fill(s),p=Math.floor((t.BITS-1)/c)*c;let f=s;for(let l=p;l>=0;l-=c){d.fill(s);for(let m=0;m<a;m++){const v=r[m],S=Number(v>>BigInt(l)&u);d[S]=d[S].add(n[m])}let g=s;for(let m=d.length-1,v=s;m>0;m--)v=v.add(d[m]),g=g.add(v);if(f=f.add(g),l!==0)for(let m=0;m<c;m++)f=f.double()}return f}function oi(e,t,n){if(t){if(t.ORDER!==e)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return Iu(t),t}else return Qe(e,{isLE:n})}function ju(e,t,n={},r){if(r===void 0&&(r=e==="edwards"),!t||typeof t!="object")throw new Error(`expected valid ${e} CURVE object`);for(const c of["p","n","h"]){const u=t[c];if(!(typeof u=="bigint"&&u>yt))throw new Error(`CURVE.${c} must be positive bigint`)}const i=oi(t.p,n.Fp,r),a=oi(t.n,n.Fn,r),o=["Gx","Gy","a",e==="weierstrass"?"b":"d"];for(const c of o)if(!i.isValid(t[c]))throw new Error(`CURVE.${c} must be valid field element of CURVE.Fp`);return t=Object.freeze(Object.assign({},t)),{CURVE:t,Fp:i,Fn:a}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ci=(e,t)=>(e+(e>=0?t:-t)/Ba)/t;function Nu(e,t,n){const[[r,i],[a,s]]=t,o=ci(s*e,n),c=ci(-i*e,n);let u=e-o*r-c*a,d=-o*i-c*s;const p=u<Me,f=d<Me;p&&(u=-u),f&&(d=-d);const l=Bt(Math.ceil(sa(n)/2))+ut;if(u<Me||u>=l||d<Me||d>=l)throw new Error("splitScalar (endomorphism): failed, k="+e);return{k1neg:p,k1:u,k2neg:f,k2:d}}function cr(e){if(!["compact","recovered","der"].includes(e))throw new Error('Signature format must be "compact", "recovered", or "der"');return e}function In(e,t){const n={};for(let r of Object.keys(t))n[r]=e[r]===void 0?t[r]:e[r];return on(n.lowS,"lowS"),on(n.prehash,"prehash"),n.format!==void 0&&cr(n.format),n}class Ru extends Error{constructor(t=""){super(t)}}const Pe={Err:Ru,_tlv:{encode:(e,t)=>{const{Err:n}=Pe;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length&1)throw new n("tlv.encode: unpadded data");const r=t.length/2,i=jt(r);if(i.length/2&128)throw new n("tlv.encode: long form length too big");const a=r>127?jt(i.length/2|128):"";return jt(e)+a+i+t},decode(e,t){const{Err:n}=Pe;let r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");const i=t[r++],a=!!(i&128);let s=0;if(!a)s=i;else{const c=i&127;if(!c)throw new n("tlv.decode(long): indefinite length not supported");if(c>4)throw new n("tlv.decode(long): byte length is too big");const u=t.subarray(r,r+c);if(u.length!==c)throw new n("tlv.decode: length bytes not complete");if(u[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const d of u)s=s<<8|d;if(r+=c,s<128)throw new n("tlv.decode(long): not minimal encoding")}const o=t.subarray(r,r+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(r+s)}}},_int:{encode(e){const{Err:t}=Pe;if(e<Me)throw new t("integer: negative integers are not allowed");let n=jt(e);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){const{Err:t}=Pe;if(e[0]&128)throw new t("invalid signature integer: negative");if(e[0]===0&&!(e[1]&128))throw new t("invalid signature integer: unnecessary leading zero");return hn(e)}},toSig(e){const{Err:t,_int:n,_tlv:r}=Pe,i=ue("signature",e),{v:a,l:s}=r.decode(48,i);if(s.length)throw new t("invalid signature: left bytes after parsing");const{v:o,l:c}=r.decode(2,a),{v:u,l:d}=r.decode(2,c);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(u)}},hexFromSig(e){const{_tlv:t,_int:n}=Pe,r=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s)),a=r+i;return t.encode(48,a)}},Me=BigInt(0),ut=BigInt(1),Ba=BigInt(2),Rt=BigInt(3),Du=BigInt(4);function rt(e,t){const{BYTES:n}=e;let r;if(typeof t=="bigint")r=t;else{let i=ue("private key",t);try{r=e.fromBytes(i)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof t}`)}}if(!e.isValidNot0(r))throw new Error("invalid private key: out of range [1..N-1]");return r}function Uu(e,t={}){const n=ju("weierstrass",e,t),{Fp:r,Fn:i}=n;let a=n.CURVE;const{h:s,n:o}=a;Sr(t,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:c}=t;if(c&&(!r.is0(a.a)||typeof c.beta!="bigint"||!Array.isArray(c.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const u=La(r,i);function d(){if(!r.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function p(b,h,w){const{x:y,y:E}=h.toAffine(),_=r.toBytes(y);if(on(w,"isCompressed"),w){d();const T=!r.isOdd(E);return Ue(Ma(T),_)}else return Ue(Uint8Array.of(4),_,r.toBytes(E))}function f(b){Ke(b,void 0,"Point");const{publicKey:h,publicKeyUncompressed:w}=u,y=b.length,E=b[0],_=b.subarray(1);if(y===h&&(E===2||E===3)){const T=r.fromBytes(_);if(!r.isValid(T))throw new Error("bad point: is not on curve, wrong x");const O=m(T);let I;try{I=r.sqrt(O)}catch(ee){const K=ee instanceof Error?": "+ee.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}d();const j=r.isOdd(I);return(E&1)===1!==j&&(I=r.neg(I)),{x:T,y:I}}else if(y===w&&E===4){const T=r.BYTES,O=r.fromBytes(_.subarray(0,T)),I=r.fromBytes(_.subarray(T,T*2));if(!v(O,I))throw new Error("bad point: is not on curve");return{x:O,y:I}}else throw new Error(`bad point: got length ${y}, expected compressed=${h} or uncompressed=${w}`)}const l=t.toBytes||p,g=t.fromBytes||f;function m(b){const h=r.sqr(b),w=r.mul(h,b);return r.add(r.add(w,r.mul(b,a.a)),a.b)}function v(b,h){const w=r.sqr(h),y=m(b);return r.eql(w,y)}if(!v(a.Gx,a.Gy))throw new Error("bad curve params: generator point");const S=r.mul(r.pow(a.a,Rt),Du),P=r.mul(r.sqr(a.b),BigInt(27));if(r.is0(r.add(S,P)))throw new Error("bad curve params: a or b");function A(b,h,w=!1){if(!r.isValid(h)||w&&r.is0(h))throw new Error(`bad point coordinate ${b}`);return h}function C(b){if(!(b instanceof $))throw new Error("ProjectivePoint expected")}function F(b){if(!c||!c.basises)throw new Error("no endo");return Nu(b,c.basises,i.ORDER)}const M=Zr((b,h)=>{const{X:w,Y:y,Z:E}=b;if(r.eql(E,r.ONE))return{x:w,y};const _=b.is0();h==null&&(h=_?r.ONE:r.inv(E));const T=r.mul(w,h),O=r.mul(y,h),I=r.mul(E,h);if(_)return{x:r.ZERO,y:r.ZERO};if(!r.eql(I,r.ONE))throw new Error("invZ was invalid");return{x:T,y:O}}),z=Zr(b=>{if(b.is0()){if(t.allowInfinityPoint&&!r.is0(b.Y))return;throw new Error("bad point: ZERO")}const{x:h,y:w}=b.toAffine();if(!r.isValid(h)||!r.isValid(w))throw new Error("bad point: x or y not field elements");if(!v(h,w))throw new Error("bad point: equation left != right");if(!b.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function oe(b,h,w,y,E){return w=new $(r.mul(w.X,b),w.Y,w.Z),h=cn(y,h),w=cn(E,w),h.add(w)}class ${constructor(h,w,y){this.X=A("x",h),this.Y=A("y",w,!0),this.Z=A("z",y),Object.freeze(this)}static CURVE(){return a}static fromAffine(h){const{x:w,y}=h||{};if(!h||!r.isValid(w)||!r.isValid(y))throw new Error("invalid affine point");if(h instanceof $)throw new Error("projective point not allowed");return r.is0(w)&&r.is0(y)?$.ZERO:new $(w,y,r.ONE)}static fromBytes(h){const w=$.fromAffine(g(Ke(h,void 0,"point")));return w.assertValidity(),w}static fromHex(h){return $.fromBytes(ue("pointHex",h))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(h=8,w=!0){return Ae.createCache(this,h),w||this.multiply(Rt),this}assertValidity(){z(this)}hasEvenY(){const{y:h}=this.toAffine();if(!r.isOdd)throw new Error("Field doesn't support isOdd");return!r.isOdd(h)}equals(h){C(h);const{X:w,Y:y,Z:E}=this,{X:_,Y:T,Z:O}=h,I=r.eql(r.mul(w,O),r.mul(_,E)),j=r.eql(r.mul(y,O),r.mul(T,E));return I&&j}negate(){return new $(this.X,r.neg(this.Y),this.Z)}double(){const{a:h,b:w}=a,y=r.mul(w,Rt),{X:E,Y:_,Z:T}=this;let O=r.ZERO,I=r.ZERO,j=r.ZERO,R=r.mul(E,E),ee=r.mul(_,_),K=r.mul(T,T),V=r.mul(E,_);return V=r.add(V,V),j=r.mul(E,T),j=r.add(j,j),O=r.mul(h,j),I=r.mul(y,K),I=r.add(O,I),O=r.sub(ee,I),I=r.add(ee,I),I=r.mul(O,I),O=r.mul(V,O),j=r.mul(y,j),K=r.mul(h,K),V=r.sub(R,K),V=r.mul(h,V),V=r.add(V,j),j=r.add(R,R),R=r.add(j,R),R=r.add(R,K),R=r.mul(R,V),I=r.add(I,R),K=r.mul(_,T),K=r.add(K,K),R=r.mul(K,V),O=r.sub(O,R),j=r.mul(K,ee),j=r.add(j,j),j=r.add(j,j),new $(O,I,j)}add(h){C(h);const{X:w,Y:y,Z:E}=this,{X:_,Y:T,Z:O}=h;let I=r.ZERO,j=r.ZERO,R=r.ZERO;const ee=a.a,K=r.mul(a.b,Rt);let V=r.mul(w,_),Y=r.mul(y,T),te=r.mul(E,O),ce=r.add(w,y),J=r.add(_,T);ce=r.mul(ce,J),J=r.add(V,Y),ce=r.sub(ce,J),J=r.add(w,E);let ie=r.add(_,O);return J=r.mul(J,ie),ie=r.add(V,te),J=r.sub(J,ie),ie=r.add(y,E),I=r.add(T,O),ie=r.mul(ie,I),I=r.add(Y,te),ie=r.sub(ie,I),R=r.mul(ee,J),I=r.mul(K,te),R=r.add(I,R),I=r.sub(Y,R),R=r.add(Y,R),j=r.mul(I,R),Y=r.add(V,V),Y=r.add(Y,V),te=r.mul(ee,te),J=r.mul(K,J),Y=r.add(Y,te),te=r.sub(V,te),te=r.mul(ee,te),J=r.add(J,te),V=r.mul(Y,J),j=r.add(j,V),V=r.mul(ie,J),I=r.mul(ce,I),I=r.sub(I,V),V=r.mul(ce,Y),R=r.mul(ie,R),R=r.add(R,V),new $(I,j,R)}subtract(h){return this.add(h.negate())}is0(){return this.equals($.ZERO)}multiply(h){const{endo:w}=t;if(!i.isValidNot0(h))throw new Error("invalid scalar: out of range");let y,E;const _=T=>Ae.cached(this,T,O=>Sn($,O));if(w){const{k1neg:T,k1:O,k2neg:I,k2:j}=F(h),{p:R,f:ee}=_(O),{p:K,f:V}=_(j);E=ee.add(V),y=oe(w.beta,R,K,T,I)}else{const{p:T,f:O}=_(h);y=T,E=O}return Sn($,[y,E])[0]}multiplyUnsafe(h){const{endo:w}=t,y=this;if(!i.isValid(h))throw new Error("invalid scalar: out of range");if(h===Me||y.is0())return $.ZERO;if(h===ut)return y;if(Ae.hasCache(this))return this.multiply(h);if(w){const{k1neg:E,k1:_,k2neg:T,k2:O}=F(h),{p1:I,p2:j}=Mu($,y,_,O);return oe(w.beta,I,j,E,T)}else return Ae.unsafe(y,h)}multiplyAndAddUnsafe(h,w,y){const E=this.multiplyUnsafe(w).add(h.multiplyUnsafe(y));return E.is0()?void 0:E}toAffine(h){return M(this,h)}isTorsionFree(){const{isTorsionFree:h}=t;return s===ut?!0:h?h($,this):Ae.unsafe(this,o).is0()}clearCofactor(){const{clearCofactor:h}=t;return s===ut?this:h?h($,this):this.multiplyUnsafe(s)}isSmallOrder(){return this.multiplyUnsafe(s).is0()}toBytes(h=!0){return on(h,"isCompressed"),this.assertValidity(),l($,this,h)}toHex(h=!0){return st(this.toBytes(h))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(h=!0){return this.toBytes(h)}_setWindowSize(h){this.precompute(h)}static normalizeZ(h){return Sn($,h)}static msm(h,w){return Lu($,i,h,w)}static fromPrivateKey(h){return $.BASE.multiply(rt(i,h))}}$.BASE=new $(a.Gx,a.Gy,r.ONE),$.ZERO=new $(r.ZERO,r.ONE,r.ZERO),$.Fp=r,$.Fn=i;const Xe=i.BITS,Ae=new Bu($,t.endo?Math.ceil(Xe/2):Xe);return $.BASE.precompute(8),$}function Ma(e){return Uint8Array.of(e?2:3)}function La(e,t){return{secretKey:t.BYTES,publicKey:1+e.BYTES,publicKeyUncompressed:1+2*e.BYTES,publicKeyHasPrefix:!0,signature:2*t.BYTES}}function Hu(e,t={}){const{Fn:n}=e,r=t.randomBytes||$i,i=Object.assign(La(e.Fp,n),{seed:Oa(n.ORDER)});function a(l){try{return!!rt(n,l)}catch{return!1}}function s(l,g){const{publicKey:m,publicKeyUncompressed:v}=i;try{const S=l.length;return g===!0&&S!==m||g===!1&&S!==v?!1:!!e.fromBytes(l)}catch{return!1}}function o(l=r(i.seed)){return Ou(Ke(l,i.seed,"seed"),n.ORDER)}function c(l,g=!0){return e.BASE.multiply(rt(n,l)).toBytes(g)}function u(l){const g=o(l);return{secretKey:g,publicKey:c(g)}}function d(l){if(typeof l=="bigint")return!1;if(l instanceof e)return!0;const{secretKey:g,publicKey:m,publicKeyUncompressed:v}=i;if(n.allowedLengths||g===m)return;const S=ue("key",l).length;return S===m||S===v}function p(l,g,m=!0){if(d(l)===!0)throw new Error("first arg must be private key");if(d(g)===!1)throw new Error("second arg must be public key");const v=rt(n,l);return e.fromHex(g).multiply(v).toBytes(m)}return Object.freeze({getPublicKey:c,getSharedSecret:p,keygen:u,Point:e,utils:{isValidSecretKey:a,isValidPublicKey:s,randomSecretKey:o,isValidPrivateKey:a,randomPrivateKey:o,normPrivateKeyToScalar:l=>rt(n,l),precompute(l=8,g=e.BASE){return g.precompute(l,!1)}},lengths:i})}function $u(e,t,n={}){Po(t),Sr(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const r=n.randomBytes||$i,i=n.hmac||((w,...y)=>ec(t,w,Ue(...y))),{Fp:a,Fn:s}=e,{ORDER:o,BITS:c}=s,{keygen:u,getPublicKey:d,getSharedSecret:p,utils:f,lengths:l}=Hu(e,n),g={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},m="compact";function v(w){const y=o>>ut;return w>y}function S(w,y){if(!s.isValidNot0(y))throw new Error(`invalid signature ${w}: out of range 1..Point.Fn.ORDER`);return y}function P(w,y){cr(y);const E=l.signature,_=y==="compact"?E:y==="recovered"?E+1:void 0;return Ke(w,_,`${y} signature`)}class A{constructor(y,E,_){this.r=S("r",y),this.s=S("s",E),_!=null&&(this.recovery=_),Object.freeze(this)}static fromBytes(y,E=m){P(y,E);let _;if(E==="der"){const{r:j,s:R}=Pe.toSig(Ke(y));return new A(j,R)}E==="recovered"&&(_=y[0],E="compact",y=y.subarray(1));const T=s.BYTES,O=y.subarray(0,T),I=y.subarray(T,T*2);return new A(s.fromBytes(O),s.fromBytes(I),_)}static fromHex(y,E){return this.fromBytes(Yt(y),E)}addRecoveryBit(y){return new A(this.r,this.s,y)}recoverPublicKey(y){const E=a.ORDER,{r:_,s:T,recovery:O}=this;if(O==null||![0,1,2,3].includes(O))throw new Error("recovery id invalid");if(o*Ba<E&&O>1)throw new Error("recovery id is ambiguous for h>1 curve");const j=O===2||O===3?_+o:_;if(!a.isValid(j))throw new Error("recovery id 2 or 3 invalid");const R=a.toBytes(j),ee=e.fromBytes(Ue(Ma((O&1)===0),R)),K=s.inv(j),V=F(ue("msgHash",y)),Y=s.create(-V*K),te=s.create(T*K),ce=e.BASE.multiplyUnsafe(Y).add(ee.multiplyUnsafe(te));if(ce.is0())throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return v(this.s)}toBytes(y=m){if(cr(y),y==="der")return Yt(Pe.hexFromSig(this));const E=s.toBytes(this.r),_=s.toBytes(this.s);if(y==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ue(Uint8Array.of(this.recovery),E,_)}return Ue(E,_)}toHex(y){return st(this.toBytes(y))}assertValidity(){}static fromCompact(y){return A.fromBytes(ue("sig",y),"compact")}static fromDER(y){return A.fromBytes(ue("sig",y),"der")}normalizeS(){return this.hasHighS()?new A(this.r,s.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return st(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return st(this.toBytes("compact"))}}const C=n.bits2int||function(y){if(y.length>8192)throw new Error("input is too large");const E=hn(y),_=y.length*8-c;return _>0?E>>BigInt(_):E},F=n.bits2int_modN||function(y){return s.create(C(y))},M=Bt(c);function z(w){return Zc("num < 2^"+c,w,Me,M),s.toBytes(w)}function oe(w,y){return Ke(w,void 0,"message"),y?Ke(t(w),void 0,"prehashed message"):w}function $(w,y,E){if(["recovered","canonical"].some(Y=>Y in E))throw new Error("sign() legacy options not supported");const{lowS:_,prehash:T,extraEntropy:O}=In(E,g);w=oe(w,T);const I=F(w),j=rt(s,y),R=[z(j),z(I)];if(O!=null&&O!==!1){const Y=O===!0?r(l.secretKey):O;R.push(ue("extraEntropy",Y))}const ee=Ue(...R),K=I;function V(Y){const te=C(Y);if(!s.isValidNot0(te))return;const ce=s.inv(te),J=e.BASE.multiply(te).toAffine(),ie=s.create(J.x);if(ie===Me)return;const Lt=s.create(ce*s.create(K+ie*j));if(Lt===Me)return;let Ur=(J.x===ie?0:2)|Number(J.y&ut),Hr=Lt;return _&&v(Lt)&&(Hr=s.neg(Lt),Ur^=1),new A(ie,Hr,Ur)}return{seed:ee,k2sig:V}}function Xe(w,y,E={}){w=ue("message",w);const{seed:_,k2sig:T}=$(w,y,E);return Yc(t.outputLen,s.BYTES,i)(_,T)}function Ae(w){let y;const E=typeof w=="string"||br(w),_=!E&&w!==null&&typeof w=="object"&&typeof w.r=="bigint"&&typeof w.s=="bigint";if(!E&&!_)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(_)y=new A(w.r,w.s);else if(E){try{y=A.fromBytes(ue("sig",w),"der")}catch(T){if(!(T instanceof Pe.Err))throw T}if(!y)try{y=A.fromBytes(ue("sig",w),"compact")}catch{return!1}}return y||!1}function b(w,y,E,_={}){const{lowS:T,prehash:O,format:I}=In(_,g);if(E=ue("publicKey",E),y=oe(ue("message",y),O),"strict"in _)throw new Error("options.strict was renamed to lowS");const j=I===void 0?Ae(w):A.fromBytes(ue("sig",w),I);if(j===!1)return!1;try{const R=e.fromBytes(E);if(T&&j.hasHighS())return!1;const{r:ee,s:K}=j,V=F(y),Y=s.inv(K),te=s.create(V*Y),ce=s.create(ee*Y),J=e.BASE.multiplyUnsafe(te).add(R.multiplyUnsafe(ce));return J.is0()?!1:s.create(J.x)===ee}catch{return!1}}function h(w,y,E={}){const{prehash:_}=In(E,g);return y=oe(y,_),A.fromBytes(w,"recovered").recoverPublicKey(y).toBytes()}return Object.freeze({keygen:u,getPublicKey:d,getSharedSecret:p,utils:f,lengths:l,Point:e,sign:Xe,verify:b,recoverPublicKey:h,Signature:A,hash:t})}function Gu(e){const t={a:e.a,b:e.b,p:e.Fp.ORDER,n:e.n,h:e.h,Gx:e.Gx,Gy:e.Gy},n=e.Fp;let r=e.allowedPrivateKeyLengths?Array.from(new Set(e.allowedPrivateKeyLengths.map(s=>Math.ceil(s/2)))):void 0;const i=Qe(t.n,{BITS:e.nBitLength,allowedLengths:r,modFromBytes:e.wrapPrivateKey}),a={Fp:n,Fn:i,allowInfinityPoint:e.allowInfinityPoint,endo:e.endo,isTorsionFree:e.isTorsionFree,clearCofactor:e.clearCofactor,fromBytes:e.fromBytes,toBytes:e.toBytes};return{CURVE:t,curveOpts:a}}function Fu(e){const{CURVE:t,curveOpts:n}=Gu(e),r={hmac:e.hmac,randomBytes:e.randomBytes,lowS:e.lowS,bits2int:e.bits2int,bits2int_modN:e.bits2int_modN};return{CURVE:t,curveOpts:n,hash:e.hash,ecdsaOpts:r}}function zu(e,t){const n=t.Point;return Object.assign({},t,{ProjectivePoint:n,CURVE:Object.assign({},e,Ia(n.Fn.ORDER,n.Fn.BITS))})}function Vu(e){const{CURVE:t,curveOpts:n,hash:r,ecdsaOpts:i}=Fu(e),a=Uu(t,n),s=$u(a,r,i);return zu(e,s)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Ar(e,t){const n=r=>Vu({...e,hash:r});return{...n(t),create:n}}function qu(e,t={}){const{recovered:n}=t;if(typeof e.r>"u")throw new Cn({signature:e});if(typeof e.s>"u")throw new Cn({signature:e});if(n&&typeof e.yParity>"u")throw new Cn({signature:e});if(e.r<0n||e.r>ni)throw new Ju({value:e.r});if(e.s<0n||e.s>ni)throw new Qu({value:e.s});if(typeof e.yParity=="number"&&e.yParity!==0&&e.yParity!==1)throw new Ir({value:e.yParity})}function ja(e){if(e.length!==130&&e.length!==132)throw new Yu({signature:e});const t=BigInt(de(e,0,32)),n=BigInt(de(e,32,64)),r=(()=>{const i=+`0x${e.slice(130)}`;if(!Number.isNaN(i))try{return Ku(i)}catch{throw new Ir({value:i})}})();return typeof r>"u"?{r:t,s:n}:{r:t,s:n,yParity:r}}function Wu(e){qu(e);const t=e.r,n=e.s;return yn(He(t,{size:32}),He(n,{size:32}),typeof e.yParity=="number"?He(Zu(e.yParity),{size:1}):"0x")}function Ku(e){if(e===0||e===27)return 0;if(e===1||e===28)return 1;if(e>=35)return e%2===0?1:0;throw new Xu({value:e})}function Zu(e){if(e===0)return 27;if(e===1)return 28;throw new Ir({value:e})}class Yu extends Z{constructor({signature:t}){super(`Value \`${t}\` is an invalid signature size.`,{metaMessages:["Expected: 64 bytes or 65 bytes.",`Received ${$e(ca(t))} bytes.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSerializedSizeError"})}}class Cn extends Z{constructor({signature:t}){super(`Signature \`${mn(t)}\` is missing either an \`r\`, \`s\`, or \`yParity\` property.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.MissingPropertiesError"})}}class Ju extends Z{constructor({value:t}){super(`Value \`${t}\` is an invalid r value. r must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidRError"})}}class Qu extends Z{constructor({value:t}){super(`Value \`${t}\` is an invalid s value. s must be a positive integer less than 2^256.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidSError"})}}class Ir extends Z{constructor({value:t}){super(`Value \`${t}\` is an invalid y-parity value. Y-parity must be 0 or 1.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidYParityError"})}}class Xu extends Z{constructor({value:t}){super(`Value \`${t}\` is an invalid v value. v must be 27, 28 or >=35.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"Signature.InvalidVError"})}}const el=new TextDecoder,Dt=Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[t,e.charCodeAt(0)]));({...Object.fromEntries(Array.from("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/").map((e,t)=>[e.charCodeAt(0),t])),["=".charCodeAt(0)]:0,["-".charCodeAt(0)]:0,["_".charCodeAt(0)]:0});function tl(e,t={}){const{pad:n=!0,url:r=!1}=t,i=new Uint8Array(Math.ceil(e.length/3)*4);for(let c=0,u=0;u<e.length;c+=4,u+=3){const d=(e[u]<<16)+(e[u+1]<<8)+(e[u+2]|0);i[c]=Dt[d>>18],i[c+1]=Dt[d>>12&63],i[c+2]=Dt[d>>6&63],i[c+3]=Dt[d&63]}const a=e.length%3,s=Math.floor(e.length/3)*4+(a&&a+1);let o=el.decode(new Uint8Array(i.buffer,0,s));return n&&a===1&&(o+="=="),n&&a===2&&(o+="="),r&&(o=o.replaceAll("+","-").replaceAll("/","_")),o}function nl(e,t={}){return tl(ha(e),t)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Na={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Ra={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},Da={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},rl=Qe(Na.p),il=Qe(Ra.p),al=Qe(Da.p),sl=Ar({...Na,Fp:rl,lowS:!1},To);Ar({...Ra,Fp:il,lowS:!1},Bo);Ar({...Da,Fp:al,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},Mo);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ui=sl;Uint8Array.from([105,171,180,181,160,222,75,198,42,42,32,31,141,37,186,233]);function ol(e={}){const{flag:t=5,rpId:n=window.location.hostname,signCount:r=0}=e,i=ya(ua(n)),a=He(t,{size:1}),s=He(r,{size:4});return yn(i,a,s)}function cl(e){const{challenge:t,crossOrigin:n=!1,extraClientData:r,origin:i=window.location.origin}=e;return JSON.stringify({type:"webauthn.get",challenge:nl(t,{url:!0,pad:!1}),origin:i,crossOrigin:n,...r})}function ul(e){const{challenge:t,crossOrigin:n,extraClientData:r,flag:i,origin:a,rpId:s,signCount:o,userVerification:c="required"}=e,u=ol({flag:i,rpId:s,signCount:o}),d=cl({challenge:t,crossOrigin:n,extraClientData:r,origin:a}),p=ya(ua(d)),f=d.indexOf('"challenge"'),l=d.indexOf('"type"'),g={authenticatorData:u,clientDataJSON:d,challengeIndex:f,typeIndex:l,userVerificationRequired:c==="required"},m=yn(u,p);return{metadata:g,payload:m}}async function ll(e={}){const{extractable:t=!1}=e,n=await globalThis.crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},t,["sign","verify"]),r=await globalThis.crypto.subtle.exportKey("raw",n.publicKey),i=mu(new Uint8Array(r));return{privateKey:n.privateKey,publicKey:i}}async function dl(e){const{payload:t,privateKey:n}=e,r=await globalThis.crypto.subtle.sign({name:"ECDSA",hash:"SHA-256"},n,fa(t)),i=pa(new Uint8Array(r)),a=ei(Xr(i,0,32));let s=ei(Xr(i,32,64));return s>ui.CURVE.n/2n&&(s=ui.CURVE.n-s),{r:a,s}}function Ua(e,t){let n;try{n=e()}catch{return}return{getItem:i=>{var a;const s=c=>c===null?null:JSON.parse(c,t?.reviver),o=(a=n.getItem(i))!=null?a:null;return o instanceof Promise?o.then(s):s(o)},setItem:(i,a)=>n.setItem(i,JSON.stringify(a,t?.replacer)),removeItem:i=>n.removeItem(i)}}const ur=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return ur(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return ur(r)(n)}}}},fl=(e,t)=>(n,r,i)=>{let a={storage:Ua(()=>localStorage),partialize:m=>m,version:0,merge:(m,v)=>({...v,...m}),...t},s=!1;const o=new Set,c=new Set;let u=a.storage;if(!u)return e((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...m)},r,i);const d=()=>{const m=a.partialize({...r()});return u.setItem(a.name,{state:m,version:a.version})},p=i.setState;i.setState=(m,v)=>{p(m,v),d()};const f=e((...m)=>{n(...m),d()},r,i);i.getInitialState=()=>f;let l;const g=()=>{var m,v;if(!u)return;s=!1,o.forEach(P=>{var A;return P((A=r())!=null?A:f)});const S=((v=a.onRehydrateStorage)==null?void 0:v.call(a,(m=r())!=null?m:f))||void 0;return ur(u.getItem.bind(u))(a.name).then(P=>{if(P)if(typeof P.version=="number"&&P.version!==a.version){if(a.migrate){const A=a.migrate(P.state,P.version);return A instanceof Promise?A.then(C=>[!0,C]):[!0,A]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,P.state];return[!1,void 0]}).then(P=>{var A;const[C,F]=P;if(l=a.merge(F,(A=r())!=null?A:f),n(l,!0),C)return d()}).then(()=>{S?.(l,void 0),l=r(),s=!0,c.forEach(P=>P(l))}).catch(P=>{S?.(void 0,P)})};return i.persist={setOptions:m=>{a={...a,...m},m.storage&&(u=m.storage)},clearStorage:()=>{u?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>g(),hasHydrated:()=>s,onHydrate:m=>(o.add(m),()=>{o.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},a.skipHydration||g(),l||f},pl=fl,li=e=>{let t;const n=new Set,r=(u,d)=>{const p=typeof u=="function"?u(t):u;if(!Object.is(p,t)){const f=t;t=d??(typeof p!="object"||p===null)?p:Object.assign({},t,p),n.forEach(l=>l(t,f))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>c,subscribe:u=>(n.add(u),()=>n.delete(u))},c=t=e(r,i,o);return o},Cr=e=>e?li(e):li,gt="4.3.6",Ha="@coinbase/wallet-sdk",hl=()=>({chains:[]}),ml=()=>({keys:{}}),yl=()=>({account:{}}),gl=()=>({subAccount:void 0}),bl=()=>({subAccountConfig:{}}),wl=()=>({spendPermissions:[]}),vl=()=>({config:{version:gt}}),X=Cr(pl((...e)=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},hl(...e)),ml(...e)),yl(...e)),gl(...e)),wl(...e)),vl(...e)),bl(...e)),{name:"cbwsdk.store",storage:Ua(()=>localStorage),partialize:e=>({chains:e.chains,keys:e.keys,account:e.account,subAccount:e.subAccount,spendPermissions:e.spendPermissions,config:e.config})})),El={get:()=>X.getState().subAccountConfig,set:e=>{X.setState(t=>({subAccountConfig:Object.assign(Object.assign({},t.subAccountConfig),e)}))},clear:()=>{X.setState({subAccountConfig:{}})}},xl={get:()=>X.getState().subAccount,set:e=>{X.setState(t=>({subAccount:t.subAccount?Object.assign(Object.assign({},t.subAccount),e):Object.assign({address:e.address},e)}))},clear:()=>{X.setState({subAccount:void 0})}},Sl={get:()=>X.getState().spendPermissions,set:e=>{X.setState({spendPermissions:e})},clear:()=>{X.setState({spendPermissions:[]})}},kl={get:()=>X.getState().account,set:e=>{X.setState(t=>({account:Object.assign(Object.assign({},t.account),e)}))},clear:()=>{X.setState({account:{}})}},_l={get:()=>X.getState().chains,set:e=>{X.setState({chains:e})},clear:()=>{X.setState({chains:[]})}},Al={get:e=>X.getState().keys[e],set:(e,t)=>{X.setState(n=>({keys:Object.assign(Object.assign({},n.keys),{[e]:t})}))},clear:()=>{X.setState({keys:{}})}},$a={get:()=>X.getState().config,set:e=>{X.setState(t=>({config:Object.assign(Object.assign({},t.config),e)}))}},Il={subAccounts:xl,subAccountsConfig:El,spendPermissions:Sl,account:kl,chains:_l,keys:Al,config:$a},k=Object.assign(Object.assign({},X),Il),Cl='!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.ClientAnalytics=t():e.ClientAnalytics=t()}(this,(function(){return(()=>{var e={792:e=>{var t={utf8:{stringToBytes:function(e){return t.bin.stringToBytes(unescape(encodeURIComponent(e)))},bytesToString:function(e){return decodeURIComponent(escape(t.bin.bytesToString(e)))}},bin:{stringToBytes:function(e){for(var t=[],n=0;n<e.length;n++)t.push(255&e.charCodeAt(n));return t},bytesToString:function(e){for(var t=[],n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return t.join("")}}};e.exports=t},562:e=>{var t,n;t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n={rotl:function(e,t){return e<<t|e>>>32-t},rotr:function(e,t){return e<<32-t|e>>>t},endian:function(e){if(e.constructor==Number)return 16711935&n.rotl(e,8)|4278255360&n.rotl(e,24);for(var t=0;t<e.length;t++)e[t]=n.endian(e[t]);return e},randomBytes:function(e){for(var t=[];e>0;e--)t.push(Math.floor(256*Math.random()));return t},bytesToWords:function(e){for(var t=[],n=0,r=0;n<e.length;n++,r+=8)t[r>>>5]|=e[n]<<24-r%32;return t},wordsToBytes:function(e){for(var t=[],n=0;n<32*e.length;n+=8)t.push(e[n>>>5]>>>24-n%32&255);return t},bytesToHex:function(e){for(var t=[],n=0;n<e.length;n++)t.push((e[n]>>>4).toString(16)),t.push((15&e[n]).toString(16));return t.join("")},hexToBytes:function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return t},bytesToBase64:function(e){for(var n=[],r=0;r<e.length;r+=3)for(var i=e[r]<<16|e[r+1]<<8|e[r+2],a=0;a<4;a++)8*r+6*a<=8*e.length?n.push(t.charAt(i>>>6*(3-a)&63)):n.push("=");return n.join("")},base64ToBytes:function(e){e=e.replace(/[^A-Z0-9+\\/]/gi,"");for(var n=[],r=0,i=0;r<e.length;i=++r%4)0!=i&&n.push((t.indexOf(e.charAt(r-1))&Math.pow(2,-2*i+8)-1)<<2*i|t.indexOf(e.charAt(r))>>>6-2*i);return n}},e.exports=n},335:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},762:(e,t,n)=>{var r,i,a,o,s;r=n(562),i=n(792).utf8,a=n(335),o=n(792).bin,(s=function(e,t){e.constructor==String?e=t&&"binary"===t.encoding?o.stringToBytes(e):i.stringToBytes(e):a(e)?e=Array.prototype.slice.call(e,0):Array.isArray(e)||e.constructor===Uint8Array||(e=e.toString());for(var n=r.bytesToWords(e),c=8*e.length,u=1732584193,l=-271733879,d=-1732584194,p=271733878,m=0;m<n.length;m++)n[m]=16711935&(n[m]<<8|n[m]>>>24)|4278255360&(n[m]<<24|n[m]>>>8);n[c>>>5]|=128<<c%32,n[14+(c+64>>>9<<4)]=c;var f=s._ff,v=s._gg,g=s._hh,b=s._ii;for(m=0;m<n.length;m+=16){var h=u,w=l,y=d,T=p;u=f(u,l,d,p,n[m+0],7,-680876936),p=f(p,u,l,d,n[m+1],12,-389564586),d=f(d,p,u,l,n[m+2],17,606105819),l=f(l,d,p,u,n[m+3],22,-1044525330),u=f(u,l,d,p,n[m+4],7,-176418897),p=f(p,u,l,d,n[m+5],12,1200080426),d=f(d,p,u,l,n[m+6],17,-1473231341),l=f(l,d,p,u,n[m+7],22,-45705983),u=f(u,l,d,p,n[m+8],7,1770035416),p=f(p,u,l,d,n[m+9],12,-1958414417),d=f(d,p,u,l,n[m+10],17,-42063),l=f(l,d,p,u,n[m+11],22,-1990404162),u=f(u,l,d,p,n[m+12],7,1804603682),p=f(p,u,l,d,n[m+13],12,-40341101),d=f(d,p,u,l,n[m+14],17,-1502002290),u=v(u,l=f(l,d,p,u,n[m+15],22,1236535329),d,p,n[m+1],5,-165796510),p=v(p,u,l,d,n[m+6],9,-1069501632),d=v(d,p,u,l,n[m+11],14,643717713),l=v(l,d,p,u,n[m+0],20,-373897302),u=v(u,l,d,p,n[m+5],5,-701558691),p=v(p,u,l,d,n[m+10],9,38016083),d=v(d,p,u,l,n[m+15],14,-660478335),l=v(l,d,p,u,n[m+4],20,-405537848),u=v(u,l,d,p,n[m+9],5,568446438),p=v(p,u,l,d,n[m+14],9,-1019803690),d=v(d,p,u,l,n[m+3],14,-187363961),l=v(l,d,p,u,n[m+8],20,1163531501),u=v(u,l,d,p,n[m+13],5,-1444681467),p=v(p,u,l,d,n[m+2],9,-51403784),d=v(d,p,u,l,n[m+7],14,1735328473),u=g(u,l=v(l,d,p,u,n[m+12],20,-1926607734),d,p,n[m+5],4,-378558),p=g(p,u,l,d,n[m+8],11,-2022574463),d=g(d,p,u,l,n[m+11],16,1839030562),l=g(l,d,p,u,n[m+14],23,-35309556),u=g(u,l,d,p,n[m+1],4,-1530992060),p=g(p,u,l,d,n[m+4],11,1272893353),d=g(d,p,u,l,n[m+7],16,-155497632),l=g(l,d,p,u,n[m+10],23,-1094730640),u=g(u,l,d,p,n[m+13],4,681279174),p=g(p,u,l,d,n[m+0],11,-358537222),d=g(d,p,u,l,n[m+3],16,-722521979),l=g(l,d,p,u,n[m+6],23,76029189),u=g(u,l,d,p,n[m+9],4,-640364487),p=g(p,u,l,d,n[m+12],11,-421815835),d=g(d,p,u,l,n[m+15],16,530742520),u=b(u,l=g(l,d,p,u,n[m+2],23,-995338651),d,p,n[m+0],6,-198630844),p=b(p,u,l,d,n[m+7],10,1126891415),d=b(d,p,u,l,n[m+14],15,-1416354905),l=b(l,d,p,u,n[m+5],21,-57434055),u=b(u,l,d,p,n[m+12],6,1700485571),p=b(p,u,l,d,n[m+3],10,-1894986606),d=b(d,p,u,l,n[m+10],15,-1051523),l=b(l,d,p,u,n[m+1],21,-2054922799),u=b(u,l,d,p,n[m+8],6,1873313359),p=b(p,u,l,d,n[m+15],10,-30611744),d=b(d,p,u,l,n[m+6],15,-1560198380),l=b(l,d,p,u,n[m+13],21,1309151649),u=b(u,l,d,p,n[m+4],6,-145523070),p=b(p,u,l,d,n[m+11],10,-1120210379),d=b(d,p,u,l,n[m+2],15,718787259),l=b(l,d,p,u,n[m+9],21,-343485551),u=u+h>>>0,l=l+w>>>0,d=d+y>>>0,p=p+T>>>0}return r.endian([u,l,d,p])})._ff=function(e,t,n,r,i,a,o){var s=e+(t&n|~t&r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._gg=function(e,t,n,r,i,a,o){var s=e+(t&r|n&~r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._hh=function(e,t,n,r,i,a,o){var s=e+(t^n^r)+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._ii=function(e,t,n,r,i,a,o){var s=e+(n^(t|~r))+(i>>>0)+o;return(s<<a|s>>>32-a)+t},s._blocksize=16,s._digestsize=16,e.exports=function(e,t){if(null==e)throw new Error("Illegal argument "+e);var n=r.wordsToBytes(s(e,t));return t&&t.asBytes?n:t&&t.asString?o.bytesToString(n):r.bytesToHex(n)}},2:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Perfume:()=>ze,incrementUjNavigation:()=>Le,markStep:()=>Re,markStepOnce:()=>qe});var r,i,a={isResourceTiming:!1,isElementTiming:!1,maxTime:3e4,reportOptions:{},enableNavigationTracking:!0},o=window,s=o.console,c=o.navigator,u=o.performance,l=function(){return c.deviceMemory},d=function(){return c.hardwareConcurrency},p="mark.",m=function(){return u&&!!u.getEntriesByType&&!!u.now&&!!u.mark},f="4g",v=!1,g={},b={value:0},h={value:{beacon:0,css:0,fetch:0,img:0,other:0,script:0,total:0,xmlhttprequest:0}},w={value:0},y={value:0},T={},k={isHidden:!1,didChange:!1},_=function(){k.isHidden=!1,document.hidden&&(k.isHidden=document.hidden,k.didChange=!0)},S=function(e,t){try{var n=new PerformanceObserver((function(e){t(e.getEntries())}));return n.observe({type:e,buffered:!0}),n}catch(e){s.warn("Perfume.js:",e)}return null},E=function(){return!!(d()&&d()<=4)||!!(l()&&l()<=4)},x=function(e,t){switch(e){case"slow-2g":case"2g":case"3g":return!0;default:return E()||t}},O=function(e){return parseFloat(e.toFixed(4))},j=function(e){return"number"!=typeof e?null:O(e/Math.pow(1024,2))},N=function(e,t,n,r,i){var s,u=function(){a.analyticsTracker&&(k.isHidden&&!["CLS","INP"].includes(e)||a.analyticsTracker({attribution:r,metricName:e,data:t,navigatorInformation:c?{deviceMemory:l()||0,hardwareConcurrency:d()||0,serviceWorkerStatus:"serviceWorker"in c?c.serviceWorker.controller?"controlled":"supported":"unsupported",isLowEndDevice:E(),isLowEndExperience:x(f,v)}:{},rating:n,navigationType:i}))};["CLS","INP"].includes(e)?u():(s=u,"requestIdleCallback"in o?o.requestIdleCallback(s,{timeout:3e3}):s())},I=function(e){e.forEach((function(e){if(!("self"!==e.name||e.startTime<b.value)){var t=e.duration-50;t>0&&(w.value+=t,y.value+=t)}}))};!function(e){e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable"}(r||(r={}));var P,M,B,C,D,A=((i={})[r.instant]={vitalsThresholds:[100,200],maxOutlierThreshold:1e4},i[r.quick]={vitalsThresholds:[200,500],maxOutlierThreshold:1e4},i[r.moderate]={vitalsThresholds:[500,1e3],maxOutlierThreshold:1e4},i[r.slow]={vitalsThresholds:[1e3,2e3],maxOutlierThreshold:1e4},i[r.unavoidable]={vitalsThresholds:[2e3,5e3],maxOutlierThreshold:2e4},i),L={RT:[100,200],TBT:[200,600],NTBT:[200,600]},U=function(e,t){return L[e]?t<=L[e][0]?"good":t<=L[e][1]?"needsImprovement":"poor":null},R=function(e,t,n){Object.keys(t).forEach((function(e){"number"==typeof t[e]&&(t[e]=O(t[e]))})),N(e,t,null,n||{})},q=function(e){var t=e.attribution,n=e.name,r=e.rating,i=e.value,o=e.navigationType;"FCP"===n&&(b.value=i),["FCP","LCP"].includes(n)&&!T[0]&&(T[0]=S("longtask",I)),"FID"===n&&setTimeout((function(){k.didChange||(q({attribution:t,name:"TBT",rating:U("TBT",w.value),value:w.value,navigationType:o}),R("dataConsumption",h.value))}),1e4);var s=O(i);s<=a.maxTime&&s>=0&&N(n,s,r,t,o)},F=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},z=function(e){if("loading"===document.readyState)return"loading";var t=F();if(t){if(e<t.domInteractive)return"loading";if(0===t.domContentLoadedEventStart||e<t.domContentLoadedEventStart)return"dom-interactive";if(0===t.domComplete||e<t.domComplete)return"dom-content-loaded"}return"complete"},K=function(e){var t=e.nodeName;return 1===e.nodeType?t.toLowerCase():t.toUpperCase().replace(/^#/,"")},$=function(e,t){var n="";try{for(;e&&9!==e.nodeType;){var r=e,i=r.id?"#"+r.id:K(r)+(r.className&&r.className.length?"."+r.className.replace(/\\s+/g,"."):"");if(n.length+i.length>(t||100)-1)return n||i;if(n=n?i+">"+n:i,r.id)break;e=r.parentNode}}catch(e){}return n},Q=-1,W=function(){return Q},H=function(e){addEventListener("pageshow",(function(t){t.persisted&&(Q=t.timeStamp,e(t))}),!0)},V=function(){var e=F();return e&&e.activationStart||0},J=function(e,t){var n=F(),r="navigate";return W()>=0?r="back-forward-cache":n&&(r=document.prerendering||V()>0?"prerender":document.wasDiscarded?"restore":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:r}},X=function(e,t,n){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var r=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return r.observe(Object.assign({type:e,buffered:!0},n||{})),r}}catch(e){}},G=function(e,t){var n=function n(r){"pagehide"!==r.type&&"hidden"!==document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},Z=function(e,t,n,r){var i,a;return function(o){t.value>=0&&(o||r)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,n),e(t))}},Y=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},ee=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},te=-1,ne=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},re=function(e){"hidden"===document.visibilityState&&te>-1&&(te="visibilitychange"===e.type?e.timeStamp:0,ae())},ie=function(){addEventListener("visibilitychange",re,!0),addEventListener("prerenderingchange",re,!0)},ae=function(){removeEventListener("visibilitychange",re,!0),removeEventListener("prerenderingchange",re,!0)},oe=function(){return te<0&&(te=ne(),ie(),H((function(){setTimeout((function(){te=ne(),ie()}),0)}))),{get firstHiddenTime(){return te}}},se=function(e,t){t=t||{},ee((function(){var n,r=[1800,3e3],i=oe(),a=J("FCP"),o=X("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(o.disconnect(),e.startTime<i.firstHiddenTime&&(a.value=Math.max(e.startTime-V(),0),a.entries.push(e),n(!0)))}))}));o&&(n=Z(e,a,r,t.reportAllChanges),H((function(i){a=J("FCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,n(!0)}))})))}))},ce={passive:!0,capture:!0},ue=new Date,le=function(e,t){P||(P=t,M=e,B=new Date,me(removeEventListener),de())},de=function(){if(M>=0&&M<B-ue){var e={entryType:"first-input",name:P.type,target:P.target,cancelable:P.cancelable,startTime:P.timeStamp,processingStart:P.timeStamp+M};C.forEach((function(t){t(e)})),C=[]}},pe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var n=function(){le(e,t),i()},r=function(){i()},i=function(){removeEventListener("pointerup",n,ce),removeEventListener("pointercancel",r,ce)};addEventListener("pointerup",n,ce),addEventListener("pointercancel",r,ce)}(t,e):le(t,e)}},me=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,pe,ce)}))},fe=0,ve=1/0,ge=0,be=function(e){e.forEach((function(e){e.interactionId&&(ve=Math.min(ve,e.interactionId),ge=Math.max(ge,e.interactionId),fe=ge?(ge-ve)/7+1:0)}))},he=function(){return D?fe:performance.interactionCount||0},we=0,ye=function(){return he()-we},Te=[],ke={},_e=function(e){var t=Te[Te.length-1],n=ke[e.interactionId];if(n||Te.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{var r={id:e.interactionId,latency:e.duration,entries:[e]};ke[r.id]=r,Te.push(r)}Te.sort((function(e,t){return t.latency-e.latency})),Te.splice(10).forEach((function(e){delete ke[e.id]}))}},Se={},Ee=function e(t){document.prerendering?ee((function(){return e(t)})):"complete"!==document.readyState?addEventListener("load",(function(){return e(t)}),!0):setTimeout(t,0)},xe=function(e,t){t=t||{};var n=[800,1800],r=J("TTFB"),i=Z(e,r,n,t.reportAllChanges);Ee((function(){var a=F();if(a){var o=a.responseStart;if(o<=0||o>performance.now())return;r.value=Math.max(o-V(),0),r.entries=[a],i(!0),H((function(){r=J("TTFB",0),(i=Z(e,r,n,t.reportAllChanges))(!0)}))}}))},Oe=function(e){e.forEach((function(e){e.identifier&&q({attribution:{identifier:e.identifier},name:"ET",rating:null,value:e.startTime})}))},je=function(e){e.forEach((function(e){if(a.isResourceTiming&&R("resourceTiming",e),e.decodedBodySize&&e.initiatorType){var t=e.decodedBodySize/1e3;h.value[e.initiatorType]+=t,h.value.total+=t}}))},Ne=function(){!function(e,t){xe((function(e){!function(e){if(e.entries.length){var t=e.entries[0],n=t.activationStart||0,r=Math.max(t.domainLookupStart-n,0),i=Math.max(t.connectStart-n,0),a=Math.max(t.requestStart-n,0);e.attribution={waitingTime:r,dnsTime:i-r,connectionTime:a-i,requestTime:e.value-a,navigationEntry:t}}else e.attribution={waitingTime:0,dnsTime:0,connectionTime:0,requestTime:0}}(e),function(e){e.value>0&&q(e)}(e)}),t)}(0,a.reportOptions.ttfb),function(e,t){!function(e,t){t=t||{},ee((function(){var e,n=[.1,.25],r=J("CLS"),i=-1,a=0,o=[],s=function(e){i>-1&&function(e){!function(e){if(e.entries.length){var t=e.entries.reduce((function(e,t){return e&&e.value>t.value?e:t}));if(t&&t.sources&&t.sources.length){var n=(r=t.sources).find((function(e){return e.node&&1===e.node.nodeType}))||r[0];if(n)return void(e.attribution={largestShiftTarget:$(n.node),largestShiftTime:t.startTime,largestShiftValue:t.value,largestShiftSource:n,largestShiftEntry:t,loadState:z(t.startTime)})}}var r;e.attribution={}}(e),function(e){q(e)}(e)}(e)},c=function(t){t.forEach((function(t){if(!t.hadRecentInput){var n=o[0],i=o[o.length-1];a&&t.startTime-i.startTime<1e3&&t.startTime-n.startTime<5e3?(a+=t.value,o.push(t)):(a=t.value,o=[t]),a>r.value&&(r.value=a,r.entries=o,e())}}))},u=X("layout-shift",c);u&&(e=Z(s,r,n,t.reportAllChanges),se((function(t){i=t.value,r.value<0&&(r.value=0,e())})),G((function(){c(u.takeRecords()),e(!0)})),H((function(){a=0,i=-1,r=J("CLS",0),e=Z(s,r,n,t.reportAllChanges),Y((function(){return e()}))})))}))}(0,t)}(0,a.reportOptions.cls),function(e,t){se((function(e){!function(e){if(e.entries.length){var t=F(),n=e.entries[e.entries.length-1];if(t){var r=t.activationStart||0,i=Math.max(0,t.responseStart-r);return void(e.attribution={timeToFirstByte:i,firstByteToFCP:e.value-i,loadState:z(e.entries[0].startTime),navigationEntry:t,fcpEntry:n})}}e.attribution={timeToFirstByte:0,firstByteToFCP:e.value,loadState:z(W())}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[100,300],i=oe(),a=J("FID"),o=function(e){e.startTime<i.firstHiddenTime&&(a.value=e.processingStart-e.startTime,a.entries.push(e),n(!0))},s=function(e){e.forEach(o)},c=X("first-input",s);n=Z(e,a,r,t.reportAllChanges),c&&G((function(){s(c.takeRecords()),c.disconnect()}),!0),c&&H((function(){var i;a=J("FID"),n=Z(e,a,r,t.reportAllChanges),C=[],M=-1,P=null,me(addEventListener),i=o,C.push(i),de()}))}))}((function(e){!function(e){var t=e.entries[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.fid),function(e,t){!function(e,t){t=t||{},ee((function(){var n,r=[2500,4e3],i=oe(),a=J("LCP"),o=function(e){var t=e[e.length-1];if(t){var r=Math.max(t.startTime-V(),0);r<i.firstHiddenTime&&(a.value=r,a.entries=[t],n())}},s=X("largest-contentful-paint",o);if(s){n=Z(e,a,r,t.reportAllChanges);var c=function(){Se[a.id]||(o(s.takeRecords()),s.disconnect(),Se[a.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,c,{once:!0,capture:!0})})),G(c,!0),H((function(i){a=J("LCP"),n=Z(e,a,r,t.reportAllChanges),Y((function(){a.value=performance.now()-i.timeStamp,Se[a.id]=!0,n(!0)}))}))}}))}((function(e){!function(e){if(e.entries.length){var t=F();if(t){var n=t.activationStart||0,r=e.entries[e.entries.length-1],i=r.url&&performance.getEntriesByType("resource").filter((function(e){return e.name===r.url}))[0],a=Math.max(0,t.responseStart-n),o=Math.max(a,i?(i.requestStart||i.startTime)-n:0),s=Math.max(o,i?i.responseEnd-n:0),c=Math.max(s,r?r.startTime-n:0),u={element:$(r.element),timeToFirstByte:a,resourceLoadDelay:o-a,resourceLoadTime:s-o,elementRenderDelay:c-s,navigationEntry:t,lcpEntry:r};return r.url&&(u.url=r.url),i&&(u.lcpResourceEntry=i),void(e.attribution=u)}}e.attribution={timeToFirstByte:0,resourceLoadDelay:0,resourceLoadTime:0,elementRenderDelay:e.value}}(e),function(e){q(e)}(e)}),t)}(0,a.reportOptions.lcp),function(e,t){!function(e,t){t=t||{},ee((function(){var n=[200,500];"interactionCount"in performance||D||(D=X("event",be,{type:"event",buffered:!0,durationThreshold:0}));var r,i=J("INP"),a=function(e){e.forEach((function(e){e.interactionId&&_e(e),"first-input"===e.entryType&&!Te.some((function(t){return t.entries.some((function(t){return e.duration===t.duration&&e.startTime===t.startTime}))}))&&_e(e)}));var t,n=(t=Math.min(Te.length-1,Math.floor(ye()/50)),Te[t]);n&&n.latency!==i.value&&(i.value=n.latency,i.entries=n.entries,r())},o=X("event",a,{durationThreshold:t.durationThreshold||40});r=Z(e,i,n,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),G((function(){a(o.takeRecords()),i.value<0&&ye()>0&&(i.value=0,i.entries=[]),r(!0)})),H((function(){Te=[],we=he(),i=J("INP"),r=Z(e,i,n,t.reportAllChanges)})))}))}((function(t){!function(e){if(e.entries.length){var t=e.entries.sort((function(e,t){return t.duration-e.duration||t.processingEnd-t.processingStart-(e.processingEnd-e.processingStart)}))[0];e.attribution={eventTarget:$(t.target),eventType:t.name,eventTime:t.startTime,eventEntry:t,loadState:z(t.startTime)}}else e.attribution={}}(t),e(t)}),t)}((function(e){return q(e)}),a.reportOptions.inp),a.isResourceTiming&&S("resource",je),a.isElementTiming&&S("element",Oe)},Ie=function(e){var t="usageDetails"in e?e.usageDetails:{};R("storageEstimate",{quota:j(e.quota),usage:j(e.usage),caches:j(t.caches),indexedDB:j(t.indexedDB),serviceWorker:j(t.serviceWorkerRegistrations)})},Pe={finalMarkToStepsMap:{},startMarkToStepsMap:{},active:{},navigationSteps:{}},Me=function(e){delete Pe.active[e]},Be=function(){return Pe.navigationSteps},Ce=function(e){var t;return null!==(t=Be()[e])&&void 0!==t?t:{}},De=function(e,t,n){var r="step."+e,i=u.getEntriesByName(p+t).length>0;if(u.getEntriesByName(p+n).length>0&&a.steps){var o=A[a.steps[e].threshold],s=o.maxOutlierThreshold,c=o.vitalsThresholds;if(i){var l=u.measure(r,p+t,p+n),d=l.duration;if(d<=s){var m=function(e,t){return e<=t[0]?"good":e<=t[1]?"needsImprovement":"poor"}(d,c);d>=0&&(N("userJourneyStep",d,m,{stepName:e},void 0),u.measure("step.".concat(e,"_vitals_").concat(m),{start:l.startTime+l.duration,end:l.startTime+l.duration,detail:{type:"stepVital",duration:d}}))}}}},Ae=function(){var e=Be(),t=Pe.startMarkToStepsMap,n=Object.keys(e).length;if(0===n)return{};var r={},i=n-1,a=Ce(i);if(Object.keys(a).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))})),n>1){var o=Ce(i-1);Object.keys(o).forEach((function(e){var n,i=null!==(n=t[e])&&void 0!==n?n:[];Object.keys(i).forEach((function(e){r[e]=!0}))}))}return r},Le=function(){var e,t=Object.keys(Pe.navigationSteps).length;Pe.navigationSteps[t]={};var n=Ae();null===(e=a.onMarkStep)||void 0===e||e.call(a,"",Object.keys(n))},Ue=function(e){var t,n,r,i,o,s,c;if(Pe.finalMarkToStepsMap[e]){!function(e){var t=Pe.navigationSteps,n=Pe.finalMarkToStepsMap,r=Object.keys(t).length;if(0!==r){var i=r-1,a=Ce(i);if(a&&n[e]){var o=n[e];o&&Object.keys(o).forEach((function(e){if(a[e]){var n=Ce(i)||{};n[e]=!1,t[i]=n}if(r>1){var o=i-1,s=Ce(o);s[e]&&(s[e]=!1,t[o]=s)}}))}}}(e);var u=Pe.finalMarkToStepsMap[e];Object.keys(u).forEach((function(t){var n=u[t];n.forEach(Me),Promise.all(n.map((function(n){return function(e,t,n,r){return new(n||(n=Promise))((function(e,t){function i(e){try{o(r.next(e))}catch(e){t(e)}}function a(e){try{o(r.throw(e))}catch(e){t(e)}}function o(t){var r;t.done?e(t.value):(r=t.value,r instanceof n?r:new n((function(e){e(r)}))).then(i,a)}o((r=r.apply(undefined,[])).next())}))}(0,0,void 0,(function(){return function(e,t){var n,r,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,r&&(i=2&a[0]?r.return:a[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,a[1])).done)return i;switch(r=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,r=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!((i=(i=o.trys).length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],r=0}finally{n=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(r){switch(r.label){case 0:return[4,De(n,t,e)];case 1:return r.sent(),[2]}}))}))}))).catch((function(){}))}))}else r=e,i=Pe.navigationSteps,o=Object.keys(i).length,(c=Ce(s=(o>0?o:1)-1)||[])[r]=!0,i[s]=c,function(e){var t,n=null!==(t=Pe.startMarkToStepsMap[e])&&void 0!==t?t:[];Object.keys(n).forEach((function(e){Pe.active[e]||(Pe.active[e]=!0)}))}(e);if(a.enableNavigationTracking){var l=Ae();null===(t=a.onMarkStep)||void 0===t||t.call(a,e,Object.keys(l))}else null===(n=a.onMarkStep)||void 0===n||n.call(a,e,Object.keys(Pe.active))},Re=function(e){u.mark(p+e),Ue(e)},qe=function(e){0===u.getEntriesByName(p+e).length&&(u.mark(p+e),Ue(e))},Fe=0,ze=function(){function e(e){if(void 0===e&&(e={}),this.v="9.0.0-rc.3",a.analyticsTracker=e.analyticsTracker,a.isResourceTiming=!!e.resourceTiming,a.isElementTiming=!!e.elementTiming,a.maxTime=e.maxMeasureTime||a.maxTime,a.reportOptions=e.reportOptions||a.reportOptions,a.steps=e.steps,a.onMarkStep=e.onMarkStep,a.enableNavigationTracking=e.enableNavigationTracking,m()){"PerformanceObserver"in o&&Ne(),void 0!==document.hidden&&document.addEventListener("visibilitychange",_);var t=function(){if(!m())return{};var e=u.getEntriesByType("navigation")[0];if(!e)return{};var t=e.responseStart,n=e.responseEnd;return{fetchTime:n-e.fetchStart,workerTime:e.workerStart>0?n-e.workerStart:0,totalTime:n-e.requestStart,downloadTime:n-t,timeToFirstByte:t-e.requestStart,headerSize:e.transferSize-e.encodedBodySize||0,dnsLookupTime:e.domainLookupEnd-e.domainLookupStart,redirectTime:e.redirectEnd-e.redirectStart}}();R("navigationTiming",t),t.redirectTime&&q({attribution:{},name:"RT",rating:U("RT",t.redirectTime),value:t.redirectTime}),R("networkInformation",function(){if("connection"in c){var e=c.connection;return"object"!=typeof e?{}:(f=e.effectiveType,v=!!e.saveData,{downlink:e.downlink,effectiveType:e.effectiveType,rtt:e.rtt,saveData:!!e.saveData})}return{}}()),c&&c.storage&&"function"==typeof c.storage.estimate&&c.storage.estimate().then(Ie),a.steps&&a.steps&&(Pe.startMarkToStepsMap={},Pe.finalMarkToStepsMap={},Pe.active={},Pe.navigationSteps={},Object.entries(a.steps).forEach((function(e){var t,n,r=e[0],i=e[1].marks,a=i[0],o=i[1],s=null!==(n=Pe.startMarkToStepsMap[a])&&void 0!==n?n:{};if(s[r]=!0,Pe.startMarkToStepsMap[a]=s,Pe.finalMarkToStepsMap[o]){var c=Pe.finalMarkToStepsMap[o][a]||[];c.push(r),Pe.finalMarkToStepsMap[o][a]=c}else Pe.finalMarkToStepsMap[o]=((t={})[a]=[r],t)})))}}return e.prototype.start=function(e){m()&&!g[e]&&(g[e]=!0,u.mark("mark_".concat(e,"_start")))},e.prototype.end=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),m()&&g[e]){u.mark("mark_".concat(e,"_end")),delete g[e];var r=function(e){u.measure(e,"mark_".concat(e,"_start"),"mark_".concat(e,"_end"));var t=u.getEntriesByName(e).pop();return t&&"measure"===t.entryType?t.duration:-1}(e);n&&R(e,O(r),t)}},e.prototype.endPaint=function(e,t){var n=this;setTimeout((function(){n.end(e,t)}))},e.prototype.clear=function(e){delete g[e],u.clearMarks&&(u.clearMarks("mark_".concat(e,"_start")),u.clearMarks("mark_".concat(e,"_end")))},e.prototype.markNTBT=function(){var e=this;this.start("ntbt"),y.value=0,clearTimeout(Fe),Fe=setTimeout((function(){e.end("ntbt",{},!1),q({attribution:{},name:"NTBT",rating:U("NTBT",y.value),value:y.value}),y.value=0}),2e3)},e}()},426:(e,t)=>{"use strict";Symbol.for("react.element"),Symbol.for("react.portal"),Symbol.for("react.fragment"),Symbol.for("react.strict_mode"),Symbol.for("react.profiler"),Symbol.for("react.provider"),Symbol.for("react.context"),Symbol.for("react.forward_ref"),Symbol.for("react.suspense"),Symbol.for("react.memo"),Symbol.for("react.lazy"),Symbol.iterator;var n={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},r=Object.assign,i={};function a(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}function o(){}function s(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||n}a.prototype.isReactComponent={},a.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},a.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},o.prototype=a.prototype;var c=s.prototype=new o;c.constructor=s,r(c,a.prototype),c.isPureReactComponent=!0;Array.isArray,Object.prototype.hasOwnProperty;var u={current:null};t.useCallback=function(e,t){return u.current.useCallback(e,t)},t.useEffect=function(e,t){return u.current.useEffect(e,t)},t.useRef=function(e){return u.current.useRef(e)}},784:(e,t,n)=>{"use strict";e.exports=n(426)},353:function(e,t,n){var r;!function(i,a){"use strict";var o="function",s="undefined",c="object",u="string",l="major",d="model",p="name",m="type",f="vendor",v="version",g="architecture",b="console",h="mobile",w="tablet",y="smarttv",T="wearable",k="embedded",_="Amazon",S="Apple",E="ASUS",x="BlackBerry",O="Browser",j="Chrome",N="Firefox",I="Google",P="Huawei",M="LG",B="Microsoft",C="Motorola",D="Opera",A="Samsung",L="Sharp",U="Sony",R="Xiaomi",q="Zebra",F="Facebook",z="Chromium OS",K="Mac OS",$=function(e){for(var t={},n=0;n<e.length;n++)t[e[n].toUpperCase()]=e[n];return t},Q=function(e,t){return typeof e===u&&-1!==W(t).indexOf(W(e))},W=function(e){return e.toLowerCase()},H=function(e,t){if(typeof e===u)return e=e.replace(/^\\s\\s*/,""),typeof t===s?e:e.substring(0,350)},V=function(e,t){for(var n,r,i,s,u,l,d=0;d<t.length&&!u;){var p=t[d],m=t[d+1];for(n=r=0;n<p.length&&!u&&p[n];)if(u=p[n++].exec(e))for(i=0;i<m.length;i++)l=u[++r],typeof(s=m[i])===c&&s.length>0?2===s.length?typeof s[1]==o?this[s[0]]=s[1].call(this,l):this[s[0]]=s[1]:3===s.length?typeof s[1]!==o||s[1].exec&&s[1].test?this[s[0]]=l?l.replace(s[1],s[2]):a:this[s[0]]=l?s[1].call(this,l,s[2]):a:4===s.length&&(this[s[0]]=l?s[3].call(this,l.replace(s[1],s[2])):a):this[s]=l||a;d+=2}},J=function(e,t){for(var n in t)if(typeof t[n]===c&&t[n].length>0){for(var r=0;r<t[n].length;r++)if(Q(t[n][r],e))return"?"===n?a:n}else if(Q(t[n],e))return"?"===n?a:n;return e},X={ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"},G={browser:[[/\\b(?:crmo|crios)\\/([\\w\\.]+)/i],[v,[p,"Chrome"]],[/edg(?:e|ios|a)?\\/([\\w\\.]+)/i],[v,[p,"Edge"]],[/(opera mini)\\/([-\\w\\.]+)/i,/(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,/(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i],[p,v],[/opios[\\/ ]+([\\w\\.]+)/i],[v,[p,D+" Mini"]],[/\\bopr\\/([\\w\\.]+)/i],[v,[p,D]],[/(kindle)\\/([\\w\\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\\/ ]?([\\w\\.]*)/i,/(avant |iemobile|slim)(?:browser)?[\\/ ]?([\\w\\.]*)/i,/(ba?idubrowser)[\\/ ]?([\\w\\.]+)/i,/(?:ms|\\()(ie) ([\\w\\.]+)/i,/(flock|rockmelt|midori|epiphany|silk|skyfire|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|qq|duckduckgo)\\/([-\\w\\.]+)/i,/(heytap|ovi)browser\\/([\\d\\.]+)/i,/(weibo)__([\\d\\.]+)/i],[p,v],[/(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i],[v,[p,"UC"+O]],[/microm.+\\bqbcore\\/([\\w\\.]+)/i,/\\bqbcore\\/([\\w\\.]+).+microm/i],[v,[p,"WeChat(Win) Desktop"]],[/micromessenger\\/([\\w\\.]+)/i],[v,[p,"WeChat"]],[/konqueror\\/([\\w\\.]+)/i],[v,[p,"Konqueror"]],[/trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i],[v,[p,"IE"]],[/ya(?:search)?browser\\/([\\w\\.]+)/i],[v,[p,"Yandex"]],[/(avast|avg)\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 Secure "+O],v],[/\\bfocus\\/([\\w\\.]+)/i],[v,[p,N+" Focus"]],[/\\bopt\\/([\\w\\.]+)/i],[v,[p,D+" Touch"]],[/coc_coc\\w+\\/([\\w\\.]+)/i],[v,[p,"Coc Coc"]],[/dolfin\\/([\\w\\.]+)/i],[v,[p,"Dolphin"]],[/coast\\/([\\w\\.]+)/i],[v,[p,D+" Coast"]],[/miuibrowser\\/([\\w\\.]+)/i],[v,[p,"MIUI "+O]],[/fxios\\/([-\\w\\.]+)/i],[v,[p,N]],[/\\bqihu|(qi?ho?o?|360)browser/i],[[p,"360 "+O]],[/(oculus|samsung|sailfish|huawei)browser\\/([\\w\\.]+)/i],[[p,/(.+)/,"$1 "+O],v],[/(comodo_dragon)\\/([\\w\\.]+)/i],[[p,/_/g," "],v],[/(electron)\\/([\\w\\.]+) safari/i,/(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,/m?(qqbrowser|baiduboxapp|2345Explorer)[\\/ ]?([\\w\\.]+)/i],[p,v],[/(metasr)[\\/ ]?([\\w\\.]+)/i,/(lbbrowser)/i,/\\[(linkedin)app\\]/i],[p],[/((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i],[[p,F],v],[/(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,/(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,/safari (line)\\/([\\w\\.]+)/i,/\\b(line)\\/([\\w\\.]+)\\/iab/i,/(chromium|instagram)[\\/ ]([-\\w\\.]+)/i],[p,v],[/\\bgsa\\/([\\w\\.]+) .*safari\\//i],[v,[p,"GSA"]],[/musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i],[v,[p,"TikTok"]],[/headlesschrome(?:\\/([\\w\\.]+)| )/i],[v,[p,j+" Headless"]],[/ wv\\).+(chrome)\\/([\\w\\.]+)/i],[[p,j+" WebView"],v],[/droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i],[v,[p,"Android "+O]],[/(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i],[p,v],[/version\\/([\\w\\.\\,]+) .*mobile\\/\\w+ (safari)/i],[v,[p,"Mobile Safari"]],[/version\\/([\\w(\\.|\\,)]+) .*(mobile ?safari|safari)/i],[v,p],[/webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i],[p,[v,J,{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}]],[/(webkit|khtml)\\/([\\w\\.]+)/i],[p,v],[/(navigator|netscape\\d?)\\/([-\\w\\.]+)/i],[[p,"Netscape"],v],[/mobile vr; rv:([\\w\\.]+)\\).+firefox/i],[v,[p,N+" Reality"]],[/ekiohf.+(flow)\\/([\\w\\.]+)/i,/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror|klar)[\\/ ]?([\\w\\.\\+]+)/i,/(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,/(firefox)\\/([\\w\\.]+)/i,/(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir|obigo|mosaic|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,/(links) \\(([\\w\\.]+)/i,/panasonic;(viera)/i],[p,v],[/(cobalt)\\/([\\w\\.]+)/i],[p,[v,/master.|lts./,""]]],cpu:[[/(?:(amd|x(?:(?:86|64)[-_])?|wow|win)64)[;\\)]/i],[[g,"amd64"]],[/(ia32(?=;))/i],[[g,W]],[/((?:i[346]|x)86)[;\\)]/i],[[g,"ia32"]],[/\\b(aarch64|arm(v?8e?l?|_?64))\\b/i],[[g,"arm64"]],[/\\b(arm(?:v[67])?ht?n?[fl]p?)\\b/i],[[g,"armhf"]],[/windows (ce|mobile); ppc;/i],[[g,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?: mac|;|\\))/i],[[g,/ower/,"",W]],[/(sun4\\w)[;\\)]/i],[[g,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\\))|\\barm(?=v(?:[1-7]|[5-7]1)l?|;|eabi)|(?=atmel )avr|(?:irix|mips|sparc)(?:64)?\\b|pa-risc)/i],[[g,W]]],device:[[/\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i],[d,[f,A],[m,w]],[/\\b((?:s[cgp]h|gt|sm)-\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,/samsung[- ]([-\\w]+)/i,/sec-(sgh\\w+)/i],[d,[f,A],[m,h]],[/(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i],[d,[f,S],[m,h]],[/\\((ipad);[-\\w\\),; ]+apple/i,/applecoremedia\\/[\\w\\.]+ \\((ipad)/i,/\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i],[d,[f,S],[m,w]],[/(macintosh);/i],[d,[f,S]],[/\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i],[d,[f,L],[m,h]],[/\\b((?:ag[rs][23]?|bah2?|sht?|btv)-a?[lw]\\d{2})\\b(?!.+d\\/s)/i],[d,[f,P],[m,w]],[/(?:huawei|honor)([-\\w ]+)[;\\)]/i,/\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i],[d,[f,P],[m,h]],[/\\b(poco[\\w ]+)(?: bui|\\))/i,/\\b; (\\w+) build\\/hm\\1/i,/\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,/\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,/\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite)?)(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,h]],[/\\b(mi[-_ ]?(?:pad)(?:[\\w_ ]+))(?: bui|\\))/i],[[d,/_/g," "],[f,R],[m,w]],[/; (\\w+) bui.+ oppo/i,/\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i],[d,[f,"OPPO"],[m,h]],[/vivo (\\w+)(?: bui|\\))/i,/\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i],[d,[f,"Vivo"],[m,h]],[/\\b(rmx[12]\\d{3})(?: bui|;|\\))/i],[d,[f,"Realme"],[m,h]],[/\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,/\\bmot(?:orola)?[- ](\\w*)/i,/((?:moto[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i],[d,[f,C],[m,h]],[/\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i],[d,[f,C],[m,w]],[/((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i],[d,[f,M],[m,w]],[/(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,/\\blg[-e;\\/ ]+((?!browser|netcast|android tv)\\w+)/i,/\\blg-?([\\d\\w]+) bui/i],[d,[f,M],[m,h]],[/(ideatab[-\\w ]+)/i,/lenovo ?(s[56]000[-\\w]+|tab(?:[\\w ]+)|yt[-\\d\\w]{6}|tb[-\\d\\w]{6})/i],[d,[f,"Lenovo"],[m,w]],[/(?:maemo|nokia).*(n900|lumia \\d+)/i,/nokia[-_ ]?([-\\w\\.]*)/i],[[d,/_/g," "],[f,"Nokia"],[m,h]],[/(pixel c)\\b/i],[d,[f,I],[m,w]],[/droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i],[d,[f,I],[m,h]],[/droid.+ (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i],[d,[f,U],[m,h]],[/sony tablet [ps]/i,/\\b(?:sony)?sgp\\w+(?: bui|\\))/i],[[d,"Xperia Tablet"],[f,U],[m,w]],[/ (kb2005|in20[12]5|be20[12][59])\\b/i,/(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i],[d,[f,"OnePlus"],[m,h]],[/(alexa)webm/i,/(kf[a-z]{2}wi|aeo[c-r]{2})( bui|\\))/i,/(kf[a-z]+)( bui|\\)).+silk\\//i],[d,[f,_],[m,w]],[/((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i],[[d,/(.+)/g,"Fire Phone $1"],[f,_],[m,h]],[/(playbook);[-\\w\\),; ]+(rim)/i],[d,f,[m,w]],[/\\b((?:bb[a-f]|st[hv])100-\\d)/i,/\\(bb10; (\\w+)/i],[d,[f,x],[m,h]],[/(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i],[d,[f,E],[m,w]],[/ (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i],[d,[f,E],[m,h]],[/(nexus 9)/i],[d,[f,"HTC"],[m,w]],[/(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,/(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,/(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i],[f,[d,/_/g," "],[m,h]],[/droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i],[d,[f,"Acer"],[m,w]],[/droid.+; (m[1-5] note) bui/i,/\\bmz-([-\\w]{2,})/i],[d,[f,"Meizu"],[m,h]],[/(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[-_ ]?([-\\w]*)/i,/(hp) ([\\w ]+\\w)/i,/(asus)-?(\\w+)/i,/(microsoft); (lumia[\\w ]+)/i,/(lenovo)[-_ ]?([-\\w]+)/i,/(jolla)/i,/(oppo) ?([\\w ]+) bui/i],[f,d,[m,h]],[/(kobo)\\s(ereader|touch)/i,/(archos) (gamepad2?)/i,/(hp).+(touchpad(?!.+tablet)|tablet)/i,/(kindle)\\/([\\w\\.]+)/i,/(nook)[\\w ]+build\\/(\\w+)/i,/(dell) (strea[kpr\\d ]*[\\dko])/i,/(le[- ]+pan)[- ]+(\\w{1,9}) bui/i,/(trinity)[- ]*(t\\d{3}) bui/i,/(gigaset)[- ]+(q\\w{1,9}) bui/i,/(vodafone) ([\\w ]+)(?:\\)| bui)/i],[f,d,[m,w]],[/(surface duo)/i],[d,[f,B],[m,w]],[/droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i],[d,[f,"Fairphone"],[m,h]],[/(u304aa)/i],[d,[f,"AT&T"],[m,h]],[/\\bsie-(\\w*)/i],[d,[f,"Siemens"],[m,h]],[/\\b(rct\\w+) b/i],[d,[f,"RCA"],[m,w]],[/\\b(venue[\\d ]{2,7}) b/i],[d,[f,"Dell"],[m,w]],[/\\b(q(?:mv|ta)\\w+) b/i],[d,[f,"Verizon"],[m,w]],[/\\b(?:barnes[& ]+noble |bn[rt])([\\w\\+ ]*) b/i],[d,[f,"Barnes & Noble"],[m,w]],[/\\b(tm\\d{3}\\w+) b/i],[d,[f,"NuVision"],[m,w]],[/\\b(k88) b/i],[d,[f,"ZTE"],[m,w]],[/\\b(nx\\d{3}j) b/i],[d,[f,"ZTE"],[m,h]],[/\\b(gen\\d{3}) b.+49h/i],[d,[f,"Swiss"],[m,h]],[/\\b(zur\\d{3}) b/i],[d,[f,"Swiss"],[m,w]],[/\\b((zeki)?tb.*\\b) b/i],[d,[f,"Zeki"],[m,w]],[/\\b([yr]\\d{2}) b/i,/\\b(dragon[- ]+touch |dt)(\\w{5}) b/i],[[f,"Dragon Touch"],d,[m,w]],[/\\b(ns-?\\w{0,9}) b/i],[d,[f,"Insignia"],[m,w]],[/\\b((nxa|next)-?\\w{0,9}) b/i],[d,[f,"NextBook"],[m,w]],[/\\b(xtreme\\_)?(v(1[045]|2[015]|[3469]0|7[05])) b/i],[[f,"Voice"],d,[m,h]],[/\\b(lvtel\\-)?(v1[12]) b/i],[[f,"LvTel"],d,[m,h]],[/\\b(ph-1) /i],[d,[f,"Essential"],[m,h]],[/\\b(v(100md|700na|7011|917g).*\\b) b/i],[d,[f,"Envizen"],[m,w]],[/\\b(trio[-\\w\\. ]+) b/i],[d,[f,"MachSpeed"],[m,w]],[/\\btu_(1491) b/i],[d,[f,"Rotor"],[m,w]],[/(shield[\\w ]+) b/i],[d,[f,"Nvidia"],[m,w]],[/(sprint) (\\w+)/i],[f,d,[m,h]],[/(kin\\.[onetw]{3})/i],[[d,/\\./g," "],[f,B],[m,h]],[/droid.+; (cc6666?|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i],[d,[f,q],[m,w]],[/droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i],[d,[f,q],[m,h]],[/smart-tv.+(samsung)/i],[f,[m,y]],[/hbbtv.+maple;(\\d+)/i],[[d,/^/,"SmartTV"],[f,A],[m,y]],[/(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i],[[f,M],[m,y]],[/(apple) ?tv/i],[f,[d,S+" TV"],[m,y]],[/crkey/i],[[d,j+"cast"],[f,I],[m,y]],[/droid.+aft(\\w)( bui|\\))/i],[d,[f,_],[m,y]],[/\\(dtv[\\);].+(aquos)/i,/(aquos-tv[\\w ]+)\\)/i],[d,[f,L],[m,y]],[/(bravia[\\w ]+)( bui|\\))/i],[d,[f,U],[m,y]],[/(mitv-\\w{5}) bui/i],[d,[f,R],[m,y]],[/Hbbtv.*(technisat) (.*);/i],[f,d,[m,y]],[/\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,/hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i],[[f,H],[d,H],[m,y]],[/\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i],[[m,y]],[/(ouya)/i,/(nintendo) ([wids3utch]+)/i],[f,d,[m,b]],[/droid.+; (shield) bui/i],[d,[f,"Nvidia"],[m,b]],[/(playstation [345portablevi]+)/i],[d,[f,U],[m,b]],[/\\b(xbox(?: one)?(?!; xbox))[\\); ]/i],[d,[f,B],[m,b]],[/((pebble))app/i],[f,d,[m,T]],[/(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i],[d,[f,S],[m,T]],[/droid.+; (glass) \\d/i],[d,[f,I],[m,T]],[/droid.+; (wt63?0{2,3})\\)/i],[d,[f,q],[m,T]],[/(quest( 2| pro)?)/i],[d,[f,F],[m,T]],[/(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i],[f,[m,k]],[/(aeobc)\\b/i],[d,[f,_],[m,k]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+? mobile safari/i],[d,[m,h]],[/droid .+?; ([^;]+?)(?: bui|\\) applew).+?(?! mobile) safari/i],[d,[m,w]],[/\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i],[[m,w]],[/(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i],[[m,h]],[/(android[-\\w\\. ]{0,9});.+buil/i],[d,[f,"Generic"]]],engine:[[/windows.+ edge\\/([\\w\\.]+)/i],[v,[p,"EdgeHTML"]],[/webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i],[v,[p,"Blink"]],[/(presto)\\/([\\w\\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\\/([\\w\\.]+)/i,/ekioh(flow)\\/([\\w\\.]+)/i,/(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,/(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,/\\b(libweb)/i],[p,v],[/rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i],[v,p]],os:[[/microsoft (windows) (vista|xp)/i],[p,v],[/(windows) nt 6\\.2; (arm)/i,/(windows (?:phone(?: os)?|mobile))[\\/ ]?([\\d\\.\\w ]*)/i,/(windows)[\\/ ]?([ntce\\d\\. ]+\\w)(?!.+xbox)/i],[p,[v,J,X]],[/(win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i],[[p,"Windows"],[v,J,X]],[/ip[honead]{2,4}\\b(?:.*os ([\\w]+) like mac|; opera)/i,/ios;fbsv\\/([\\d\\.]+)/i,/cfnetwork\\/.+darwin/i],[[v,/_/g,"."],[p,"iOS"]],[/(mac os x) ?([\\w\\. ]*)/i,/(macintosh|mac_powerpc\\b)(?!.+haiku)/i],[[p,K],[v,/_/g,"."]],[/droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i],[v,p],[/(android|webos|qnx|bada|rim tablet os|maemo|meego|sailfish)[-\\/ ]?([\\w\\.]*)/i,/(blackberry)\\w*\\/([\\w\\.]*)/i,/(tizen|kaios)[\\/ ]([\\w\\.]+)/i,/\\((series40);/i],[p,v],[/\\(bb(10);/i],[v,[p,x]],[/(?:symbian ?os|symbos|s60(?=;)|series60)[-\\/ ]?([\\w\\.]*)/i],[v,[p,"Symbian"]],[/mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i],[v,[p,N+" OS"]],[/web0s;.+rt(tv)/i,/\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i],[v,[p,"webOS"]],[/watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i],[v,[p,"watchOS"]],[/crkey\\/([\\d\\.]+)/i],[v,[p,j+"cast"]],[/(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i],[[p,z],v],[/panasonic;(viera)/i,/(netrange)mmh/i,/(nettv)\\/(\\d+\\.[\\w\\.]+)/i,/(nintendo|playstation) ([wids345portablevuch]+)/i,/(xbox); +xbox ([^\\);]+)/i,/\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,/(mint)[\\/\\(\\) ]?(\\w*)/i,/(mageia|vectorlinux)[; ]/i,/([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,/(hurd|linux) ?([\\w\\.]*)/i,/(gnu) ?([\\w\\.]*)/i,/\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,/(haiku) (\\w+)/i],[p,v],[/(sunos) ?([\\w\\.\\d]*)/i],[[p,"Solaris"],v],[/((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,/(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,/\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,/(unix) ?([\\w\\.]*)/i],[p,v]]},Z=function(e,t){if(typeof e===c&&(t=e,e=a),!(this instanceof Z))return new Z(e,t).getResult();var n=typeof i!==s&&i.navigator?i.navigator:a,r=e||(n&&n.userAgent?n.userAgent:""),b=n&&n.userAgentData?n.userAgentData:a,y=t?function(e,t){var n={};for(var r in e)t[r]&&t[r].length%2==0?n[r]=t[r].concat(e[r]):n[r]=e[r];return n}(G,t):G,T=n&&n.userAgent==r;return this.getBrowser=function(){var e,t={};return t[p]=a,t[v]=a,V.call(t,r,y.browser),t[l]=typeof(e=t[v])===u?e.replace(/[^\\d\\.]/g,"").split(".")[0]:a,T&&n&&n.brave&&typeof n.brave.isBrave==o&&(t[p]="Brave"),t},this.getCPU=function(){var e={};return e[g]=a,V.call(e,r,y.cpu),e},this.getDevice=function(){var e={};return e[f]=a,e[d]=a,e[m]=a,V.call(e,r,y.device),T&&!e[m]&&b&&b.mobile&&(e[m]=h),T&&"Macintosh"==e[d]&&n&&typeof n.standalone!==s&&n.maxTouchPoints&&n.maxTouchPoints>2&&(e[d]="iPad",e[m]=w),e},this.getEngine=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.engine),e},this.getOS=function(){var e={};return e[p]=a,e[v]=a,V.call(e,r,y.os),T&&!e[p]&&b&&"Unknown"!=b.platform&&(e[p]=b.platform.replace(/chrome os/i,z).replace(/macos/i,K)),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=typeof e===u&&e.length>350?H(e,350):e,this},this.setUA(r),this};Z.VERSION="1.0.35",Z.BROWSER=$([p,v,l]),Z.CPU=$([g]),Z.DEVICE=$([d,f,m,b,h,y,w,T,k]),Z.ENGINE=Z.OS=$([p,v]),typeof t!==s?(e.exports&&(t=e.exports=Z),t.UAParser=Z):n.amdO?(r=function(){return Z}.call(t,n,t,e))===a||(e.exports=r):typeof i!==s&&(i.UAParser=Z);var Y=typeof i!==s&&(i.jQuery||i.Zepto);if(Y&&!Y.ua){var ee=new Z;Y.ua=ee.getResult(),Y.ua.get=function(){return ee.getUA()},Y.ua.set=function(e){ee.setUA(e);var t=ee.getResult();for(var n in t)Y.ua[n]=t[n]}}}("object"==typeof window?window:this)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,n),a.exports}n.amdO={},n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{ActionType:()=>f,AmplitudePlatformName:()=>g,AnalyticsEventImportance:()=>l,AnalyticsQueries:()=>e,AuthStatus:()=>b,ComponentType:()=>m,IThresholdTier:()=>Jt,MetricType:()=>d,PlatformName:()=>v,SessionActions:()=>h,SessionAutomatedEvents:()=>w,SessionRank:()=>y,SubjectType:()=>p,UserTypeCommerce:()=>c,UserTypeInsto:()=>i,UserTypeRetail:()=>t,UserTypeRetailBusinessBanking:()=>s,UserTypeRetailEmployeeInternal:()=>a,UserTypeRetailEmployeePersonal:()=>o,UserTypeWallet:()=>u,automatedEvents:()=>xn,automatedMappingConfig:()=>In,clearMarkEntry:()=>Vn,clearPerformanceMarkEntries:()=>Xn,config:()=>A,createEventConfig:()=>On,createNewSpan:()=>Ln,createNewTrace:()=>Un,device:()=>W,endPerfMark:()=>Jn,exposeExperiment:()=>wn,flushQueue:()=>or,generateUUID:()=>V,getAnalyticsHeaders:()=>sr,getReferrerData:()=>le,getTracingHeaders:()=>An,getTracingId:()=>Dn,getUrlHostname:()=>pe,getUrlParams:()=>me,getUrlPathname:()=>fe,getUserContext:()=>ar,identify:()=>Tn,identifyFlow:()=>xe,identity:()=>H,identityFlow:()=>Se,incrementUjNavigation:()=>an,init:()=>yn,initNextJsTrackPageview:()=>_n,initTrackPageview:()=>kn,isEventKeyFormatValid:()=>we,isSessionEnded:()=>pt,location:()=>re,logEvent:()=>$t,logMetric:()=>Ht,logPageView:()=>on,logTrace:()=>Rn,markNTBT:()=>tn,markStep:()=>nn,markStepOnce:()=>rn,onVisibilityChange:()=>ln,optIn:()=>En,optOut:()=>Sn,perfMark:()=>Wn,persistentData:()=>oe,postMessage:()=>K,recordSessionDuration:()=>pn,removeFromIdentifyFlow:()=>Ee,savePersistentData:()=>st,sendScheduledEvents:()=>Bt,setBreadcrumbs:()=>ie,setConfig:()=>U,setLocation:()=>ae,setPagePath:()=>ve,setPageview:()=>Kt,setPersistentData:()=>se,setSessionStart:()=>dt,setTime:()=>Ue,startPerfMark:()=>Hn,timeStone:()=>Le,useEventLogger:()=>Yn,useLogEventOnMount:()=>tr,usePerformanceMarks:()=>rr});let e=function(e){return e.fbclid="fbclid",e.gclid="gclid",e.msclkid="msclkid",e.ptclid="ptclid",e.ttclid="ttclid",e.utm_source="utm_source",e.utm_medium="utm_medium",e.utm_campaign="utm_campaign",e.utm_term="utm_term",e.utm_content="utm_content",e}({});const t=0,i=1,a=2,o=3,s=4,c=5,u=6;let l=function(e){return e.low="low",e.high="high",e}({}),d=function(e){return e.count="count",e.rate="rate",e.gauge="gauge",e.distribution="distribution",e.histogram="histogram",e}({}),p=function(e){return e.commerce_merchant="commerce_merchant",e.device="device",e.edp_fingerprint_id="edp_fingerprint_id",e.nft_user="nft_user",e.user="user",e.wallet_user="wallet_user",e.uuid="user_uuid",e}({}),m=function(e){return e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon",e}({}),f=function(e){return e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e}({}),v=function(e){return e.unknown="unknown",e.web="web",e.android="android",e.ios="ios",e.mobile_web="mobile_web",e.tablet_web="tablet_web",e.server="server",e.windows="windows",e.macos="macos",e.extension="extension",e}({}),g=function(e){return e.web="Web",e.ios="iOS",e.android="Android",e}({}),b=function(e){return e[e.notLoggedIn=0]="notLoggedIn",e[e.loggedIn=1]="loggedIn",e}({}),h=function(e){return e.ac="ac",e.af="af",e.ah="ah",e.al="al",e.am="am",e.ar="ar",e.as="as",e}({}),w=function(e){return e.pv="pv",e}({}),y=function(e){return e.xs="xs",e.s="s",e.m="m",e.l="l",e.xl="xl",e.xxl="xxl",e}({});const T="https://analytics-service-dev.cbhq.net",k=3e5,_=5e3,S="analytics-db",E="experiment-exposure-db",x="Analytics SDK:",O=Object.values(e),j="pageview",N="session_duration",I={navigationTiming:{eventName:"perf_navigation_timing"},redirectTime:{eventName:"perf_redirect_time"},RT:{eventName:"perf_redirect_time"},TTFB:{eventName:"perf_time_to_first_byte"},networkInformation:{eventName:"perf_network_information"},storageEstimate:{eventName:"perf_storage_estimate"},FCP:{eventName:"perf_first_contentful_paint"},FID:{eventName:"perf_first_input_delay"},LCP:{eventName:"perf_largest_contentful_paint"},CLS:{eventName:"perf_cumulative_layout_shift"},TBT:{eventName:"perf_total_blocking_time"},NTBT:{eventName:"perf_navigation_total_blocking_time"},INP:{eventName:"perf_interact_to_next_paint"},ET:{eventName:"perf_element_timing"},userJourneyStep:{eventName:"perf_user_journey_step"}},P="1",M="web";function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const C=/^(https?:\\/\\/)/;function D(e){return{eventsEndpoint:e+"/amp",metricsEndPoint:e+"/metrics",exposureEndpoint:e+"/track-exposures",tracesEndpoint:e+"/traces"}}const A=B({authCookie:"logged_in",amplitudeApiKey:"",batchEventsPeriod:_,batchEventsThreshold:30,batchMetricsPeriod:_,batchMetricsThreshold:30,batchTracesPeriod:_,batchTracesThreshold:30,headers:{},interactionManager:null,isAlwaysAuthed:!1,isProd:!1,isInternalApplication:!1,onError:(e,t)=>{console.error(x,e,t)},platform:v.unknown,projectName:"",ricTimeoutScheduleEvent:1e3,ricTimeoutSetDevice:500,showDebugLogging:!1,trackUserId:!1,version:null,apiEndpoint:T},D(T),{steps:{}}),L=[].reduce(((e,t)=>n=>e(t(n))),(e=>{if(!e.isProd)return e.isInternalApplication?(e.apiEndpoint="https://analytics-service-internal-dev.cbhq.net",B({},e,D(e.apiEndpoint))):e;const t=(e=>e.apiEndpoint?C.test(e.apiEndpoint)?e.apiEndpoint:`https://${e.apiEndpoint}`:e.isInternalApplication?"https://analytics-service-internal.cbhq.net":"https://as.coinbase.com")(e);return B({},e,{apiEndpoint:t},D(t))})),U=e=>{const{batchEventsThreshold:t,batchMetricsThreshold:n,batchTracesThreshold:r}=e,i=[t,n,r];for(const e of i)if((e||0)>30){console.warn("You are setting the threshhold for the batch limit to be greater than 30. This may cause request overload.");break}Object.assign(A,L(e))},R=[v.web,v.mobile_web,v.tablet_web];function q(){return"android"===A.platform}function F(){return"ios"===A.platform}function z(){return R.includes(A.platform)}function K(e){if(z()&&navigator&&"serviceWorker"in navigator&&navigator.serviceWorker.controller)try{navigator.serviceWorker.controller.postMessage(e)}catch(e){e instanceof Error&&A.onError(e)}}var $=n(353),Q=n.n($);const W={amplitudeOSName:null,amplitudeOSVersion:null,amplitudeDeviceModel:null,amplitudePlatform:null,browserName:null,browserMajor:null,osName:null,userAgent:null,width:null,height:null},H={countryCode:null,deviceId:null,device_os:null,isOptOut:!1,languageCode:null,locale:null,jwt:null,session_lcc_id:null,userAgent:null,userId:null},V=e=>e?(e^16*Math.random()>>e/4).toString(16):"10000000-1000-4000-8000-100000000000".replace(/[018]/g,V),J=()=>A.isAlwaysAuthed||!!H.userId,X=()=>{const e={};return H.countryCode&&(e.country_code=H.countryCode),e},G=()=>{const{platform:e}=A;if(e===v.web)switch(!0){case window.matchMedia("(max-width: 560px)").matches:return v.mobile_web;case window.matchMedia("(max-width: 1024px, min-width: 561px)").matches:return v.tablet_web}return e},Z=()=>{var e,t,n,r,i;z()?("requestIdleCallback"in window?window.requestIdleCallback(ne,{timeout:A.ricTimeoutSetDevice}):ne(),W.amplitudePlatform=g.web,W.userAgent=(null==(e=window)||null==(e=e.navigator)?void 0:e.userAgent)||null,ee({height:null!=(t=null==(n=window)?void 0:n.innerHeight)?t:null,width:null!=(r=null==(i=window)?void 0:i.innerWidth)?r:null})):F()?(W.amplitudePlatform=g.ios,W.userAgent=H.userAgent,W.userAgent&&ne()):q()&&(W.userAgent=H.userAgent,W.amplitudePlatform=g.android,W.userAgent&&ne())},Y=e=>{Object.assign(H,e),z()&&K({identity:{isAuthed:!!H.userId,locale:H.locale||null}})},ee=e=>{W.height=e.height,W.width=e.width},te=()=>{U({platform:G()}),z()&&K({config:{platform:A.platform}})},ne=()=>{var e;performance.mark&&performance.mark("ua_parser_start");const t=new(Q())(null!=(e=W.userAgent)?e:"").getResult();W.browserName=t.browser.name||null,W.browserMajor=t.browser.major||null,W.osName=t.os.name||null,W.amplitudeOSName=W.browserName,W.amplitudeOSVersion=W.browserMajor,W.amplitudeDeviceModel=W.osName,K({device:{browserName:W.browserName,osName:W.osName}}),performance.mark&&(performance.mark("ua_parser_end"),performance.measure("ua_parser","ua_parser_start","ua_parser_end"))},re={breadcrumbs:[],initialUAAData:{},pageKey:"",pageKeyRegex:{},pagePath:"",prevPageKey:"",prevPagePath:""};function ie(e){Object.assign(re,{breadcrumbs:e})}function ae(e){Object.assign(re,e)}const oe={eventId:0,sequenceNumber:0,sessionId:0,lastEventTime:0,sessionStart:0,sessionUUID:null,userId:null,ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0};function se(e){Object.assign(oe,e)}function ce(){var e,t;return null!=(e=null==(t=document)?void 0:t.referrer)?e:""}function ue(){return ue=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ue.apply(this,arguments)}const le=()=>{const e=ce();if(!e)return{};const t=new URL(e);return t.hostname===pe()?{}:{referrer:e,referring_domain:t.hostname}},de=()=>{const e=new URLSearchParams(me()),t={};return O.forEach((n=>{e.has(n)&&(t[n]=(e.get(n)||"").toLowerCase())})),t},pe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.hostname)||""},me=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.search)||""},fe=()=>{var e;return(null==(e=window)||null==(e=e.location)?void 0:e.pathname)||""},ve=()=>{const e=A.overrideWindowLocation?re.pagePath:fe()+me();e&&e!==re.pagePath&&(e!==re.pagePath&&ge(),re.pagePath=e,re.pageKeyRegex&&Object.keys(re.pageKeyRegex).some((e=>{if(re.pageKeyRegex[e].test(re.pagePath))return re.pageKey=e,!0})))},ge=()=>{if(z()){const e=ce();if(!re.prevPagePath&&e){const t=new URL(e);if(t.hostname===pe())return void(re.prevPagePath=t.pathname)}}re.prevPagePath=re.pagePath,re.prevPageKey=re.pageKey},be=e=>{z()&&Object.assign(e,z()?(Object.keys(re.initialUAAData).length>0||(new URLSearchParams(me()),re.initialUAAData=ue({},(()=>{const e={};return O.forEach((t=>{oe[t]&&(e[t]=oe[t])})),e})(),de(),le())),re.initialUAAData):re.initialUAAData)},he=/^[a-zd]+(_[a-zd]+)*$/;function we(e){return he.test(e)}function ye(){return ye=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ye.apply(this,arguments)}const Te=["action","component_type","component_name","context","logging_id"],ke=["num_non_hardware_accounts","ujs"],_e="ujs_",Se={};function Ee(e){e.forEach((e=>{ke.includes(e)&&delete Se[e]}))}function xe(e){var t;const n=Object.entries(e).reduce(((e,t)=>{const[n,r]=t;return!Te.includes(n)&&ke.includes(n)?we(n)?ye({},e,{[n]:r}):(A.onError(new Error("IdentityFlow property names must have snake case format"),{[n]:r}),e):e}),{});null!=(t=n.ujs)&&t.length&&(n.ujs=n.ujs.map((e=>`${_e}${e}`))),Object.assign(Se,n)}function Oe(){return A.platform!==v.unknown||(A.onError(new Error("SDK platform not initialized")),!1)}const je={eventsQueue:[],eventsScheduled:!1,metricsQueue:[],metricsScheduled:!1,tracesQueue:[],tracesScheduled:!1};function Ne(e){Object.assign(je,e)}const Ie={ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0},Pe={ac:20,af:5,ah:1,al:1,am:0,ar:10,as:20},Me={pv:25},Be={xs:0,s:1,m:1,l:2,xl:2,xxl:2},Ce=e=>e<15?y.xs:e<60?y.s:e<240?y.m:e<960?y.l:e<3840?y.xl:y.xxl,De=e=>{Object.assign(Ie,e)};function Ae(){return(new Date).getTime()}const Le={timeStart:Ae(),timeOnPagePath:0,timeOnPageKey:0,prevTimeOnPagePath:0,prevTimeOnPageKey:0,sessionDuration:0,sessionEnd:0,sessionStart:0,prevSessionDuration:0};function Ue(e){Object.assign(Le,e)}const Re=(e,t)=>t.some((t=>e instanceof t));let qe,Fe;const ze=new WeakMap,Ke=new WeakMap,$e=new WeakMap,Qe=new WeakMap,We=new WeakMap;let He={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return Ke.get(e);if("objectStoreNames"===t)return e.objectStoreNames||$e.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Je(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Ve(e){return"function"==typeof e?(t=e)!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(Fe||(Fe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(t)?function(...e){return t.apply(Xe(this),e),Je(ze.get(this))}:function(...e){return Je(t.apply(Xe(this),e))}:function(e,...n){const r=t.call(Xe(this),e,...n);return $e.set(r,e.sort?e.sort():[e]),Je(r)}:(e instanceof IDBTransaction&&function(e){if(Ke.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),r()},a=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));Ke.set(e,t)}(e),Re(e,qe||(qe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,He):e);var t}function Je(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(Je(e.result)),r()},a=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&ze.set(t,e)})).catch((()=>{})),We.set(t,e),t}(e);if(Qe.has(e))return Qe.get(e);const t=Ve(e);return t!==e&&(Qe.set(e,t),We.set(t,e)),t}const Xe=e=>We.get(e),Ge=["get","getKey","getAll","getAllKeys","count"],Ze=["put","add","delete","clear"],Ye=new Map;function et(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(Ye.get(t))return Ye.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Ze.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Ge.includes(n))return;const a=async function(e,...t){const a=this.transaction(e,i?"readwrite":"readonly");let o=a.store;return r&&(o=o.index(t.shift())),(await Promise.all([o[n](...t),i&&a.done]))[0]};return Ye.set(t,a),a}var tt;tt=He,He={...tt,get:(e,t,n)=>et(e,t)||tt.get(e,t,n),has:(e,t)=>!!et(e,t)||tt.has(e,t)};const nt={isReady:!1,idbKeyval:null};function rt(e){Object.assign(nt,e)}const it={},at=async e=>{if(!nt.idbKeyval)return Promise.resolve(null);try{return await nt.idbKeyval.get(e)}catch(e){return A.onError(new Error("IndexedDB:Get:InternalError")),Promise.resolve(null)}},ot=async(e,t)=>{if(nt.idbKeyval)try{await nt.idbKeyval.set(e,t)}catch(e){A.onError(new Error("IndexedDB:Set:InternalError"))}},st=()=>{"server"!==A.platform&&(se({sessionStart:Le.sessionStart,ac:Ie.ac,af:Ie.af,ah:Ie.ah,al:Ie.al,am:Ie.am,ar:Ie.ar,as:Ie.as,pv:Ie.pv}),H.userId&&se({userId:H.userId}),ot(S,oe))},ct="rgb(5,177,105)",ut=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`%c ${x}`,a=`color:${ct};font-size:11px;`,o=`Importance: ${r}`;console.group(i,a,t,o),n.forEach((e=>{e.event_type?console.log(e.event_type,e):console.log(e)})),console.groupEnd()},lt=e=>{const{metricName:t,data:n}=e,r=e.importance||l.low;if(!A.showDebugLogging||!console)return;const i=`color:${ct};font-size:11px;`,a=`%c ${x}`,o=`Importance: ${r}`;console.log(a,i,t,n,o)},dt=()=>{const e=Ae();oe.sessionId&&oe.lastEventTime&&oe.sessionUUID&&!pt(e)||(oe.sessionId=e,oe.sessionUUID=V(),Ue({sessionStart:e}),lt({metricName:"Started new session:",data:{persistentData:oe,timeStone:Le}})),oe.lastEventTime=e},pt=e=>e-oe.lastEventTime>18e5;function mt(){return mt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mt.apply(this,arguments)}const ft=e=>{var t;(e=>{switch(e.action){case f.click:Ie.ac+=1;break;case f.focus:Ie.af+=1;break;case f.hover:Ie.ah+=1;break;case f.move:Ie.am+=1;break;case f.scroll:Ie.al+=1;break;case f.search:Ie.ar+=1;break;case f.select:Ie.as+=1}})(t=e),t.event_type!==j?t.event_type===N&&((e=>{if(!e.session_rank)return;const t=e.session_rank;Object.values(h).forEach((e=>{Ie.sqs+=Ie[e]*Pe[e]})),Object.values(w).forEach((e=>{Ie.sqs+=Ie[e]*Me[e]})),Ie.sqs*=Be[t]})(t),Object.assign(t,Ie),De({ac:0,af:0,ah:0,al:0,am:0,ar:0,as:0,pv:0,sqs:0})):Ie.pv+=1;const n=e.event_type;delete e.event_type;const r=e.deviceId?e.deviceId:null,i=e.timestamp;return delete e.timestamp,se({eventId:oe.eventId+1}),se({sequenceNumber:oe.sequenceNumber+1}),dt(),st(),{device_id:H.deviceId||r||null,user_id:H.userId,timestamp:i,event_id:oe.eventId,session_id:oe.sessionId||-1,event_type:n,version_name:A.version||null,platform:W.amplitudePlatform,os_name:W.amplitudeOSName,os_version:W.amplitudeOSVersion,device_model:W.amplitudeDeviceModel,language:H.languageCode,event_properties:mt({},e,{session_uuid:oe.sessionUUID,height:W.height,width:W.width}),user_properties:X(),uuid:V(),library:{name:"@cbhq/client-analytics",version:"10.6.0"},sequence_number:oe.sequenceNumber,user_agent:W.userAgent||H.userAgent}},vt=e=>e.map((e=>ft(e)));function gt(){return gt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},gt.apply(this,arguments)}const bt=e=>e.map((e=>(e=>{const t=e.tags||{},n=gt({authed:J()?"true":"false",platform:A.platform},t,{project_name:A.projectName,version_name:A.version||null});return{metric_name:e.metricName,page_path:e.pagePath||null,value:e.value,tags:n,type:e.metricType}})(e))),ht=e=>0!==je.metricsQueue.length&&(je.metricsQueue.length>=A.batchMetricsThreshold||(je.metricsScheduled||(je.metricsScheduled=!0,setTimeout((()=>{je.metricsScheduled=!1,e(bt(je.metricsQueue)),je.metricsQueue=[]}),A.batchMetricsPeriod)),!1)),wt=e=>0!==je.tracesQueue.length&&(je.tracesQueue.length>=A.batchTracesThreshold||(je.tracesScheduled||(je.tracesScheduled=!0,setTimeout((()=>{je.tracesScheduled=!1,e(je.tracesQueue),je.tracesQueue=[]}),A.batchTracesPeriod)),!1)),yt=e=>{var t;z()&&null!=(t=window)&&t.requestIdleCallback?window.requestIdleCallback(e,{timeout:A.ricTimeoutScheduleEvent}):(q()||F())&&A.interactionManager?A.interactionManager.runAfterInteractions(e):e()};function Tt(){return Tt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tt.apply(this,arguments)}const kt="application/x-www-form-urlencoded; charset=UTF-8",_t=e=>{const{data:t,importance:n,isJSON:r,onError:i,url:a}=e,o=r?"application/json":kt,s=n||l.low,c=r?JSON.stringify(t):new URLSearchParams(t).toString();function u(){const e=new XMLHttpRequest;e.open("POST",a,!0),Object.keys(A.headers||{}).forEach((t=>{e.setRequestHeader(t,A.headers[t])})),e.setRequestHeader("Content-Type",kt),H.jwt&&e.setRequestHeader("authorization",`Bearer ${H.jwt}`),e.send(c)}if(!z()||r||!("sendBeacon"in navigator)||s!==l.low||A.headers&&0!==Object.keys(A.headers).length)if(z()&&!r)u();else{const e=Tt({},A.headers,{"Content-Type":o});H.jwt&&(e.Authorization=`Bearer ${H.jwt}`),fetch(a,{method:"POST",mode:"no-cors",headers:e,body:c}).catch((e=>{i(e,{context:"AnalyticsSDKApiError"})}))}else{const e=new Blob([c],{type:kt});try{navigator.sendBeacon.bind(navigator)(a,e)||u()}catch(e){console.error(e),u()}}};var St=n(762),Et=n.n(St);const xt=(e,t,n)=>{const r=e||"";return Et()("2"+r+t+n)};function Ot(){return Ot=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ot.apply(this,arguments)}class jt extends Error{constructor(e){super(e),this.name="CircularJsonReference",this.message=e,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}class Nt extends jt{constructor(...e){super(...e),this.name="DomReferenceInAnalyticsEvent"}}function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},It.apply(this,arguments)}const Pt=(e,t=l.low)=>{var n;e&&je.eventsQueue.push(e),nt.isReady&&(!A.trackUserId||H.userId?(t===l.high||(n=Mt,0!==je.eventsQueue.length&&(je.eventsQueue.length>=A.batchEventsThreshold||(je.eventsScheduled||(je.eventsScheduled=!0,setTimeout((()=>{je.eventsScheduled=!1,n(vt(je.eventsQueue)),je.eventsQueue=[]}),A.batchEventsPeriod)),0))))&&Bt():je.eventsQueue.length>10&&(A.trackUserId=!1,A.onError(new Error("userId not set in Logged-in"))))},Mt=(e,t=l.low)=>{if(H.isOptOut||0===e.length)return;let n;try{n=JSON.stringify(e)}catch(t){const r=e.map((e=>e.event_type)).join(", "),[i,a]=(e=>{try{const n=[];for(const r of e){const e=Ot({},r);r.event_properties&&(e.event_properties=Ot({},e.event_properties,{currentTarget:null,target:null,relatedTarget:null,_dispatchInstances:null,_targetInst:null,view:(t=r.event_properties.view,["string","number","boolean"].includes(typeof t)?r.event_properties.view:null)})),n.push(e)}return[!0,JSON.stringify(n)]}catch(e){return[!1,""]}var t})(e);if(!i)return void A.onError(new jt(t instanceof Error?t.message:"unknown"),{listEventType:r});n=a,A.onError(new Nt("Found DOM element reference"),{listEventType:r,stringifiedEventData:n})}const r=Ae().toString(),i=It({},{e:n,v:"2",upload_time:r},{client:A.amplitudeApiKey,checksum:xt(A.amplitudeApiKey,n,r)});_t({url:A.eventsEndpoint,data:i,importance:t,onError:A.onError}),ut({metricName:"Batch Events",data:e,importance:t})},Bt=()=>{Mt(vt(je.eventsQueue)),Ne({eventsQueue:[]})};function Ct(){return Ct=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ct.apply(this,arguments)}const Dt=Object.values(f),At=Object.values(m),Lt=e=>Dt.includes(e)?e:f.unknown,Ut=e=>At.includes(e)?e:m.unknown,Rt=(e,t,n)=>{const r={auth:J()?b.loggedIn:b.notLoggedIn,action:Lt(e),component_type:Ut(t),logging_id:n,platform:A.platform,project_name:A.projectName};return"number"==typeof H.userTypeEnum&&(r.user_type_enum=H.userTypeEnum),r},qt=e=>{const t=Ae();if(!e)return A.onError(new Error("missing logData")),Ct({},Rt(f.unknown,m.unknown),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});const n=Ct({},e,Rt(e.action,e.componentType,e.loggingId),{locale:H.locale,session_lcc_id:H.session_lcc_id,timestamp:t,time_start:Le.timeStart});return delete n.componentType,delete n.loggingId,n},Ft={blacklistRegex:[],isEnabled:!1};function zt(){return{page_key:re.pageKey,page_path:re.pagePath,prev_page_key:re.prevPageKey,prev_page_path:re.prevPagePath}}function Kt(e){Object.assign(Ft,e)}function $t(e,t,n=l.low){if(H.isOptOut)return;if(!Oe())return;const r=qt(t);!function(e){Ft.isEnabled&&(ve(),Object.assign(e,zt()))}(r),be(r),function(e){Object.keys(Se).length>0&&Object.assign(e,Se)}(r),r.has_double_fired=!1,r.event_type=e,n===l.high?Pt(r,n):yt((()=>{Pt(r)}))}function Qt(e,t=!1){t?_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.metricsEndPoint,data:{metrics:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Metrics",data:e})}function Wt(){return Wt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wt.apply(this,arguments)}function Ht(e){if(!Oe())return;v.server!==A.platform&&!e.pagePath&&re.pagePath&&(e.pagePath=re.pagePath);const t=Object.keys(Se).length?Wt({},e.tags,Se):e.tags;t&&Object.assign(e,{tags:t}),je.metricsQueue.push(e),ht(Qt)&&(Qt(bt(je.metricsQueue)),je.metricsQueue=[])}function Vt(){return Vt=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Vt.apply(this,arguments)}let Jt=function(e){return e.instant="instant",e.quick="quick",e.moderate="moderate",e.slow="slow",e.unavoidable="unavoidable",e}({});function Xt(e){return e.toLowerCase()}let Gt={};const Zt=(e,t)=>{null!=A&&A.onMarkStep&&A.onMarkStep(e,t),xe({ujs:t})};let Yt;const en={Perfume:()=>{},markStep:e=>{},markStepOnce:e=>{},incrementUjNavigation:()=>{}},tn=()=>{z()&&Yt&&Yt.markNTBT&&Yt.markNTBT()},nn=e=>{z()&&Yt&&en.markStep&&en.markStep(e)},rn=e=>{z()&&Yt&&en.markStepOnce&&en.markStepOnce(e)},an=()=>{z()&&Yt&&en.incrementUjNavigation&&en.incrementUjNavigation()};function on(e={callMarkNTBT:!0}){"unknown"!==A.platform&&(Ft.blacklistRegex.some((e=>e.test(fe())))||($t(j,{action:f.render,componentType:m.page}),e.callMarkNTBT&&tn()))}let sn=!1,cn=!1;const un=e=>{sn=!e.persisted},ln=(e,t="hidden",n=!1)=>{cn||(addEventListener("pagehide",un),addEventListener("beforeunload",(()=>{})),cn=!0),addEventListener("visibilitychange",(({timeStamp:n})=>{document.visibilityState===t&&e({timeStamp:n,isUnloading:sn})}),{capture:!0,once:n})},dn=36e3;function pn(){const e=pt(Ae());if(e&&(O.forEach((e=>{oe[e]&&delete oe[e]})),st()),!oe.lastEventTime||!Le.sessionStart||!e)return;const t=Math.round((oe.lastEventTime-Le.sessionStart)/1e3);if(t<1||t>dn)return;const n=Ce(t);$t(N,{action:f.measurement,componentType:m.page,session_duration:t,session_end:oe.lastEventTime,session_start:Le.sessionStart,session_rank:n})}function mn(){return mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mn.apply(this,arguments)}const fn=[],vn=[],gn=()=>{const e=fn.shift();e&&e()},bn=()=>{const e=vn.shift();e&&e()};let hn={};function wn(e){const t=function(e){return{test_name:e.testName,group_name:e.group,subject_id:e.subjectId,exposed_at:Ae(),subject_type:e.subjectType,platform:A.platform}}(e);hn[e.testName]=hn[e.testName]||0,hn[e.testName]+k>Ae()?lt({metricName:`Event: exposeExperiment ${e.testName} not sent`,data:t}):(hn[e.testName]=Ae(),ot(E,hn),lt({metricName:`Event: exposeExperiment ${e.testName} sent`,data:t}),_t({url:A.exposureEndpoint,data:[t],onError:(t,n)=>{hn[e.testName]=0,ot(E,hn),A.onError(t,n)},isJSON:!0,importance:l.high}))}const yn=e=>{var t,r,i;U(e),z()&&(H.languageCode=(null==(t=navigator)?void 0:t.languages[0])||(null==(r=navigator)?void 0:r.language)||""),te(),(()=>{var e;if(z()&&null!=(e=window)&&e.indexedDB){const e=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=Je(o);return r&&o.addEventListener("upgradeneeded",(e=>{r(Je(o.result),e.oldVersion,e.newVersion,Je(o.transaction),e)})),n&&o.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}("keyval-store",1,{upgrade(e){e.createObjectStore("keyval")}});rt({idbKeyval:{get:async t=>(await e).get("keyval",t),set:async(t,n)=>(await e).put("keyval",n,t),delete:async t=>(await e).delete("keyval",t),keys:async()=>(await e).getAllKeys("keyval")}})}else rt({idbKeyval:{get:async e=>new Promise((t=>{t(it[e])})),set:async(e,t)=>new Promise((n=>{it[e]=t,n(e)})),delete:async e=>new Promise((()=>{delete it[e]})),keys:async()=>new Promise((e=>{e(Object.keys(it))}))}})})(),lt({metricName:"Initialized Analytics:",data:{deviceId:H.deviceId}}),fn.push((()=>{Pt()})),(async()=>{const e=await at(S);rt({isReady:!0}),gn(),e&&(bn(),se({eventId:e.eventId||oe.eventId,sequenceNumber:e.sequenceNumber||oe.sequenceNumber,sessionId:e.sessionId||oe.sessionId,lastEventTime:e.lastEventTime||oe.lastEventTime,sessionUUID:e.sessionUUID||oe.sessionUUID}),function(e){se(mn({},function(e){const t={};return O.forEach((n=>{e[n]&&(t[n]=e[n])})),t}(e),de()))}(e),Ue({sessionStart:e.sessionStart||oe.sessionStart}),De({ac:e.ac||Ie.ac,af:e.af||Ie.af,ah:e.ah||Ie.ah,al:e.al||Ie.al,am:e.am||Ie.am,ar:e.ar||Ie.ar,as:e.as||Ie.as,pv:e.pv||Ie.pv}),A.trackUserId&&Y({userId:e.userId||H.userId}),pn(),lt({metricName:"Initialized Analytics IndexedDB:",data:e}))})(),async function(){at(E).then((e=>{hn=null!=e?e:{}})).catch((e=>{e instanceof Error&&A.onError(e)}))}(),Z(),z()&&(ln((()=>{se({lastEventTime:Ae()}),st(),Bt()}),"hidden"),ln((()=>{pn()}),"visible")),z()&&(i=()=>{var e,t,n,r;te(),ee({width:null!=(e=null==(t=window)?void 0:t.innerWidth)?e:null,height:null!=(n=null==(r=window)?void 0:r.innerHeight)?n:null})},addEventListener("resize",(()=>{requestAnimationFrame((()=>{i()}))}))),(()=>{if(z())try{const e=n(2);en.markStep=e.markStep,en.markStepOnce=e.markStepOnce,en.incrementUjNavigation=e.incrementUjNavigation,Yt=new e.Perfume({analyticsTracker:e=>{const{data:t,attribution:n,metricName:r,navigatorInformation:i,rating:a}=e,o=I[r],s=(null==n?void 0:n.category)||null;if(!o&&!s)return;const c=(null==i?void 0:i.deviceMemory)||0,u=(null==i?void 0:i.hardwareConcurrency)||0,l=(null==i?void 0:i.isLowEndDevice)||!1,p=(null==i?void 0:i.isLowEndExperience)||!1,v=(null==i?void 0:i.serviceWorkerStatus)||"unsupported",g=Vt({deviceMemory:c,hardwareConcurrency:u,isLowEndDevice:l,isLowEndExperience:p,serviceWorkerStatus:v},Gt),b={is_low_end_device:l,is_low_end_experience:p,page_key:re.pageKey||"",save_data:t.saveData||!1,service_worker:v,is_perf_metric:!0};if("navigationTiming"===r)t&&"number"==typeof t.redirectTime&&Ht({metricName:I.redirectTime.eventName,metricType:d.histogram,tags:b,value:t.redirectTime||0});else if("TTFB"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),Ht({metricName:I.TTFB.eventName,metricType:d.histogram,tags:Vt({},b),value:t}),a&&Ht({metricName:`perf_web_vitals_ttfb_${a}`,metricType:d.count,tags:b,value:1});else if("networkInformation"===r)null!=t&&t.effectiveType&&(Gt=t,$t(o.eventName,{action:f.measurement,componentType:m.page,networkInformationDownlink:t.downlink,networkInformationEffectiveType:t.effectiveType,networkInformationRtt:t.rtt,networkInformationSaveData:t.saveData,navigatorDeviceMemory:c,navigatorHardwareConcurrency:u}));else if("storageEstimate"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page},t,g)),Ht({metricName:"perf_storage_estimate_caches",metricType:d.histogram,tags:b,value:t.caches}),Ht({metricName:"perf_storage_estimate_indexed_db",metricType:d.histogram,tags:b,value:t.indexedDB});else if("CLS"===r)$t(o.eventName,Vt({action:f.measurement,componentType:m.page,score:100*t||null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_cls_${a}`,metricType:d.count,tags:b,value:1});else if("FID"===r){const e=(null==n?void 0:n.performanceEntry)||null,r=parseInt((null==e?void 0:e.processingStart)||"");$t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,processingStart:null!=e&&e.processingStart?r:null,startTime:null!=e&&e.startTime?parseInt(e.startTime):null,vitalsScore:a||null},g)),a&&Ht({metricName:`perf_web_vitals_fidVitals_${a}`,metricType:d.count,tags:b,value:1})}else"userJourneyStep"===r?($t("perf_user_journey_step",Vt({action:f.measurement,componentType:m.page,duration:t||null,rating:null!=a?a:null,step_name:(null==n?void 0:n.stepName)||""},g)),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}_vitals_${a}`,metricType:d.count,tags:b,value:1}),Ht({metricName:`user_journey_step.${A.projectName}.${A.platform}.${(null==n?void 0:n.stepName)||""}`,metricType:d.distribution,tags:b,value:t||null})):I[r]&&t&&($t(o.eventName,Vt({action:f.measurement,componentType:m.page,duration:t||null,vitalsScore:a||null},g)),a&&(Ht({metricName:`perf_web_vitals_${Xt(r)}_${a}`,metricType:d.count,tags:b,value:1}),"LCP"===r&&Ht({metricName:`perf_web_vitals_${Xt(r)}`,metricType:d.distribution,tags:b,value:t})))},maxMeasureTime:3e4,steps:A.steps,onMarkStep:Zt})}catch(e){e instanceof Error&&A.onError(e)}})()},Tn=e=>{Y(e),e.userAgent&&Z(),lt({metricName:"Identify:",data:{countryCode:H.countryCode,deviceId:H.deviceId,userId:H.userId}})},kn=({blacklistRegex:e,pageKeyRegex:t,browserHistory:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.listen((()=>{on()}))},_n=({blacklistRegex:e,pageKeyRegex:t,nextJsRouter:n})=>{Kt({blacklistRegex:e||[],isEnabled:!0}),ae({pageKeyRegex:t}),on({callMarkNTBT:!1}),n.events.on("routeChangeComplete",(()=>{on()}))},Sn=()=>{Y({isOptOut:!0}),ot(S,{})},En=()=>{Y({isOptOut:!1})},xn={Button:{label:"cb_button",uuid:"e921a074-40e6-4371-8700-134d5cd633e6",componentType:m.button}};function On(e,t,n){return{componentName:e,actions:t,data:n}}function jn(){return jn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},jn.apply(this,arguments)}function Nn(e,t,n){const{componentName:r,data:i}=n;$t(e.label,jn({componentType:e.componentType,action:t,loggingId:e.uuid,component_name:r},i))}const In={actionMapping:{onPress:f.click,onHover:f.hover},handlers:{Button:{[f.click]:e=>Nn(xn.Button,f.click,e),[f.hover]:e=>Nn(xn.Button,f.hover,e)}}};function Pn(e,t=!1){t?_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError}):yt((()=>{_t({url:A.tracesEndpoint,data:{traces:e},isJSON:!0,onError:A.onError})})),ut({metricName:"Batch Traces",data:e})}function Mn(){return Mn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mn.apply(this,arguments)}const Bn=1e6;function Cn(e){return e*Bn}function Dn(e=function(){var e;return null==(e=window)?void 0:e.crypto}()){const t=new Uint32Array(2);return null==e||e.getRandomValues(t),((BigInt(t[0])<<BigInt(32))+BigInt(t[1])).toString()}function An(e,t){return{"x-datadog-origin":"rum","x-datadog-parent-id":t,"x-datadog-sampling-priority":"1","x-datadog-trace-id":e}}function Ln(e){var t;const{name:n,traceId:r,spanId:i,start:a,duration:o,resource:s,meta:c}=e;return{duration:o?Cn(o):0,name:n,resource:s,service:A.projectName,span_id:null!=i?i:Dn(),start:a?Cn(a):0,trace_id:null!=r?r:Dn(),parent_id:P,type:M,meta:Mn({platform:A.platform},re.pageKey?{page_key:re.pageKey}:{},null!=(t=Se.ujs)&&t.length?{last_ujs:Se.ujs[Se.ujs.length-1]}:{},null!=c?c:{})}}function Un(e){return[Ln(e)]}function Rn(e,t){Oe()&&function(e){return e.length>0}(e)&&(t&&function(e,t){e.forEach((e=>function(e,t){const n=Mn({},e.meta,t.meta),r={start:t.start?Cn(t.start):e.start,duration:t.duration?Cn(t.duration):e.duration};Object.assign(e,t,Mn({meta:n},r))}(e,t)))}(e,t),je.tracesQueue.push(e),wt(Pn)&&(Pn(je.tracesQueue),je.tracesQueue=[]))}function qn(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}function Fn(){return Fn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fn.apply(this,arguments)}function zn(){return void 0!==typeof window&&"performance"in window&&"mark"in performance&&"getEntriesByName"in performance}function Kn(e,t){return`perf_${e}${null!=t&&t.label?`_${t.label}`:""}`}function $n(e,t,n){return`${Kn(e,n)}__${t}`}let Qn={};function Wn(e,t,n){if(!zn())return;const r=$n(e,t,n);if(performance.mark(r),"end"===t){const t=Kn(e,n);!function(e,t,n){try{performance.measure(e,t,n)}catch(e){A.onError(e)}}(t,$n(e,"start",n),r);const i=performance.getEntriesByName(t).pop();i&&Ht(Fn({metricName:e,metricType:d.distribution,value:i.duration},null!=n&&n.tags?{tags:n.tags}:{}))}}function Hn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]||(Wn(e,"start",t),Qn[n]=!0)}function Vn(e,t){const n=$n(e,"start",t),r=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(Qn,[n].map(qn));Qn=r}function Jn(e,t){if(!zn())return;const n=$n(e,"start",t);Qn[n]&&(Wn(e,"end",t),Vn(e,t))}function Xn(){zn()&&(performance.clearMarks(),Qn={})}var Gn=n(784);function Zn(){return Zn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zn.apply(this,arguments)}function Yn(e,t,n=l.low){const r=(0,Gn.useRef)(t);return(0,Gn.useEffect)((()=>{r.current=t}),[t]),(0,Gn.useCallback)((t=>{$t(e,Zn({},r.current,t),n)}),[e,n])}function er(){return er=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},er.apply(this,arguments)}function tr(e,t,n=l.low){(0,Gn.useEffect)((()=>{const r=er({},t,{action:f.render});$t(e,r,n)}),[])}function nr(){return nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nr.apply(this,arguments)}const rr=function(e,t){return{markStartPerf:(0,Gn.useCallback)((()=>Hn(e,t)),[e,t]),markEndPerf:(0,Gn.useCallback)((n=>Jn(e,nr({},t,n))),[e,t])}};function ir(){return ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ir.apply(this,arguments)}function ar(){return Object.entries(ir({},Se,zt(),{sessionUUID:oe.sessionUUID,userId:oe.userId})).reduce(((e,t)=>{return null!=(n=t[1])&&""!==n?ir({},e,{[t[0]]:t[1]}):e;var n}),{})}async function or(){return new Promise((e=>{Mt(vt(je.eventsQueue)),Qt(bt(je.metricsQueue),!0),Pn(je.tracesQueue,!0),Ne({eventsQueue:[],metricsQueue:[],tracesQueue:[]}),e()}))}function sr(){return{"X-CB-Device-ID":H.deviceId||"unknown","X-CB-Is-Logged-In":H.userId?"true":"false","X-CB-Pagekey":re.pageKey||"unknown","X-CB-UJS":(e=Se.ujs,void 0===e||0===e.length?"":e.join(",")),"X-CB-Platform":A.platform||"unknown","X-CB-Project-Name":A.projectName||"unknown","X-CB-Session-UUID":oe.sessionUUID||"unknown","X-CB-Version-Name":A.version?String(A.version):"unknown"};var e}})(),r})()}));',Ga=()=>new Promise((e,t)=>{if(window.ClientAnalytics)return e();try{const n=document.createElement("script");n.textContent=Cl,n.type="text/javascript",document.head.appendChild(n),Ol(),document.head.removeChild(n),e()}catch{console.error("Failed to execute inlined telemetry script"),t()}}),Ol=()=>{var e,t,n;if(typeof window<"u"){const r=(n=(e=k.config.get().deviceId)!==null&&e!==void 0?e:(t=window.crypto)===null||t===void 0?void 0:t.randomUUID())!==null&&n!==void 0?n:"";if(window.ClientAnalytics){const{init:i,identify:a,PlatformName:s}=window.ClientAnalytics;i({isProd:!0,amplitudeApiKey:"c66737ad47ec354ced777935b0af822e",platform:s.web,projectName:"base_account_sdk",showDebugLogging:!1,version:"1.0.0",apiEndpoint:"https://cca-lite.coinbase.com"}),a({deviceId:r}),k.config.set({deviceId:r})}}},Q={rpc:{invalidInput:-32e3,resourceNotFound:-32001,resourceUnavailable:-32002,transactionRejected:-32003,methodNotSupported:-32004,limitExceeded:-32005,parse:-32700,invalidRequest:-32600,methodNotFound:-32601,invalidParams:-32602,internal:-32603},provider:{userRejectedRequest:4001,unauthorized:4100,unsupportedMethod:4200,disconnected:4900,chainDisconnected:4901,unsupportedChain:4902}},lr={"-32700":{standard:"JSON RPC 2.0",message:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."},"-32600":{standard:"JSON RPC 2.0",message:"The JSON sent is not a valid Request object."},"-32601":{standard:"JSON RPC 2.0",message:"The method does not exist / is not available."},"-32602":{standard:"JSON RPC 2.0",message:"Invalid method parameter(s)."},"-32603":{standard:"JSON RPC 2.0",message:"Internal JSON-RPC error."},"-32000":{standard:"EIP-1474",message:"Invalid input."},"-32001":{standard:"EIP-1474",message:"Resource not found."},"-32002":{standard:"EIP-1474",message:"Resource unavailable."},"-32003":{standard:"EIP-1474",message:"Transaction rejected."},"-32004":{standard:"EIP-1474",message:"Method not supported."},"-32005":{standard:"EIP-1474",message:"Request limit exceeded."},4001:{standard:"EIP-1193",message:"User rejected the request."},4100:{standard:"EIP-1193",message:"The requested account and/or method has not been authorized by the user."},4200:{standard:"EIP-1193",message:"The requested method is not supported by this Ethereum provider."},4900:{standard:"EIP-1193",message:"The provider is disconnected from all chains."},4901:{standard:"EIP-1193",message:"The provider is disconnected from the specified chain."},4902:{standard:"EIP-3085",message:"Unrecognized chain ID."}},Fa="Unspecified error message.",Pl="Unspecified server error.";function Or(e,t=Fa){if(e&&Number.isInteger(e)){const n=e.toString();if(dr(lr,n))return lr[n].message;if(za(e))return Pl}return t}function Tl(e){if(!Number.isInteger(e))return!1;const t=e.toString();return!!(lr[t]||za(e))}function Bl(e,{shouldIncludeStack:t=!1}={}){const n={};if(e&&typeof e=="object"&&!Array.isArray(e)&&dr(e,"code")&&Tl(e.code)){const r=e;n.code=r.code,r.message&&typeof r.message=="string"?(n.message=r.message,dr(r,"data")&&(n.data=r.data)):(n.message=Or(n.code),n.data={originalError:di(e)})}else n.code=Q.rpc.internal,n.message=fi(e,"message")?e.message:Fa,n.data={originalError:di(e)};return t&&(n.stack=fi(e,"stack")?e.stack:void 0),n}function za(e){return e>=-32099&&e<=-32e3}function di(e){return e&&typeof e=="object"&&!Array.isArray(e)?Object.assign({},e):e}function dr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function fi(e,t){return typeof e=="object"&&e!==null&&t in e&&typeof e[t]=="string"}const x={rpc:{parse:e=>me(Q.rpc.parse,e),invalidRequest:e=>me(Q.rpc.invalidRequest,e),invalidParams:e=>me(Q.rpc.invalidParams,e),methodNotFound:e=>me(Q.rpc.methodNotFound,e),internal:e=>me(Q.rpc.internal,e),server:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum RPC Server errors must provide single object argument.");const{code:t}=e;if(!Number.isInteger(t)||t>-32005||t<-32099)throw new Error('"code" must be an integer such that: -32099 <= code <= -32005');return me(t,e)},invalidInput:e=>me(Q.rpc.invalidInput,e),resourceNotFound:e=>me(Q.rpc.resourceNotFound,e),resourceUnavailable:e=>me(Q.rpc.resourceUnavailable,e),transactionRejected:e=>me(Q.rpc.transactionRejected,e),methodNotSupported:e=>me(Q.rpc.methodNotSupported,e),limitExceeded:e=>me(Q.rpc.limitExceeded,e)},provider:{userRejectedRequest:e=>et(Q.provider.userRejectedRequest,e),unauthorized:e=>et(Q.provider.unauthorized,e),unsupportedMethod:e=>et(Q.provider.unsupportedMethod,e),disconnected:e=>et(Q.provider.disconnected,e),chainDisconnected:e=>et(Q.provider.chainDisconnected,e),unsupportedChain:e=>et(Q.provider.unsupportedChain,e),custom:e=>{if(!e||typeof e!="object"||Array.isArray(e))throw new Error("Ethereum Provider custom errors must provide single object argument.");const{code:t,message:n,data:r}=e;if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string');return new qa(t,n,r)}}};function me(e,t){const[n,r]=Va(t);return new Pr(e,n||Or(e),r)}function et(e,t){const[n,r]=Va(t);return new qa(e,n||Or(e),r)}function Va(e){if(e){if(typeof e=="string")return[e];if(typeof e=="object"&&!Array.isArray(e)){const{message:t,data:n}=e;if(t&&typeof t!="string")throw new Error("Must specify string message.");return[t||void 0,n]}}return[]}class Pr extends Error{constructor(t,n,r){if(!Number.isInteger(t))throw new Error('"code" must be an integer.');if(!n||typeof n!="string")throw new Error('"message" must be a nonempty string.');super(n),this.code=t,r!==void 0&&(this.data=r)}}class qa extends Pr{constructor(t,n,r){if(!Ml(t))throw new Error('"code" must be an integer such that: 1000 <= code <= 4999');super(t,n,r)}}function Ml(e){return Number.isInteger(e)&&e>=1e3&&e<=4999}function pi(e){return typeof e=="object"&&e!==null&&"code"in e&&"data"in e&&e.code===-32090&&typeof e.data=="object"&&e.data!==null&&"type"in e.data&&e.data.type==="INSUFFICIENT_FUNDS"}function Wa(e){return typeof e=="object"&&e!==null&&"details"in e}function Ll(e){try{const t=JSON.parse(e.details);return new Pr(t.code,t.message,t.data)}catch{return null}}function Ka(){return e=>e}const Pt=Ka(),jl=Ka();function Te(e){return Math.floor(e)}const Za=/^[0-9]*$/,Ya=/^[a-f0-9]*$/;function ze(e){return Tr(crypto.getRandomValues(new Uint8Array(e)))}function Tr(e){return[...e].map(t=>t.toString(16).padStart(2,"0")).join("")}function Kt(e){return new Uint8Array(e.match(/.{1,2}/g).map(t=>Number.parseInt(t,16)))}function St(e,t=!1){const n=e.toString("hex");return Pt(t?`0x${n}`:n)}function On(e){return St(pr(e),!0)}function Ee(e){return jl(e.toString(10))}function it(e){return Pt(`0x${BigInt(e).toString(16)}`)}function Ja(e){return e.startsWith("0x")||e.startsWith("0X")}function Br(e){return Ja(e)?e.slice(2):e}function Qa(e){return Ja(e)?`0x${e.slice(2)}`:`0x${e}`}function bn(e){if(typeof e!="string")return!1;const t=Br(e).toLowerCase();return Ya.test(t)}function fr(e,t=!1){if(typeof e=="string"){const n=Br(e).toLowerCase();if(Ya.test(n))return Pt(t?`0x${n}`:n)}throw x.rpc.invalidParams(`"${String(e)}" is not a hexadecimal string`)}function Mr(e,t=!1){let n=fr(e,!1);return n.length%2===1&&(n=Pt(`0${n}`)),t?Pt(`0x${n}`):n}function je(e){if(typeof e=="string"){const t=Br(e).toLowerCase();if(bn(t)&&t.length===40)return Qa(t)}throw x.rpc.invalidParams(`Invalid Ethereum address: ${String(e)}`)}function pr(e){if(Buffer.isBuffer(e))return e;if(typeof e=="string"){if(bn(e)){const t=Mr(e,!1);return Buffer.from(t,"hex")}return Buffer.from(e,"utf8")}throw x.rpc.invalidParams(`Not binary data: ${String(e)}`)}function kt(e){if(typeof e=="number"&&Number.isInteger(e))return Te(e);if(typeof e=="string"){if(Za.test(e))return Te(Number(e));if(bn(e))return Te(Number(BigInt(Mr(e,!0))))}throw x.rpc.invalidParams(`Not an integer: ${String(e)}`)}function bt(e){if(e!==null&&(typeof e=="bigint"||Rl(e)))return BigInt(e.toString(10));if(typeof e=="number")return BigInt(kt(e));if(typeof e=="string"){if(Za.test(e))return BigInt(e);if(bn(e))return BigInt(Mr(e,!0))}throw x.rpc.invalidParams(`Not an integer: ${String(e)}`)}function Nl(e){if(typeof e=="string")return JSON.parse(e);if(typeof e=="object")return e;throw x.rpc.invalidParams(`Not a JSON string or an object: ${String(e)}`)}function Rl(e){if(e==null||typeof e.constructor!="function")return!1;const{constructor:t}=e;return typeof t.config=="function"&&typeof t.EUCLID=="number"}function Dl(){const e=document.querySelector('link[sizes="192x192"]')||document.querySelector('link[sizes="180x180"]')||document.querySelector('link[rel="icon"]')||document.querySelector('link[rel="shortcut icon"]'),{protocol:t,host:n}=document.location,r=e?e.getAttribute("href"):null;return!r||r.startsWith("javascript:")||r.startsWith("vbscript:")?`${t}//${n}/favicon.ico`:r.startsWith("http://")||r.startsWith("https://")||r.startsWith("data:")?r:r.startsWith("//")?t+r:`${t}//${n}${r}`}const Ul=`Coinbase Wallet SDK requires the Cross-Origin-Opener-Policy header to not be set to 'same-origin'. This is to ensure that the SDK can communicate with the Coinbase Smart Wallet app.

Please see https://www.smartwallet.dev/guides/tips/popup-tips#cross-origin-opener-policy for more information.`,Hl=()=>{let e;return{getCrossOriginOpenerPolicy:()=>e===void 0?"undefined":e,checkCrossOriginOpenerPolicy:async()=>{if(typeof window>"u"){e="non-browser-env";return}try{const t=`${window.location.origin}${window.location.pathname}`,n=await fetch(t,{method:"HEAD"});if(!n.ok)throw new Error(`HTTP error! status: ${n.status}`);const r=n.headers.get("Cross-Origin-Opener-Policy");e=r??"null",e==="same-origin"&&console.error(Ul)}catch(t){console.error("Error checking Cross-Origin-Opener-Policy:",t.message),e="error"}}}},{checkCrossOriginOpenerPolicy:Xa,getCrossOriginOpenerPolicy:$l}=Hl();async function _t(e,t){const n=Object.assign(Object.assign({},e),{jsonrpc:"2.0",id:crypto.randomUUID()}),r=await window.fetch(t,{method:"POST",body:JSON.stringify(n),mode:"cors",headers:{"Content-Type":"application/json","X-Cbw-Sdk-Version":gt,"X-Cbw-Sdk-Platform":Ha}}),{result:i,error:a}=await r.json();if(a)throw a;return i}function Gl(){return globalThis.coinbaseWalletExtension}function Fl(){var e,t;try{const n=globalThis;return(e=n.ethereum)!==null&&e!==void 0?e:(t=n.top)===null||t===void 0?void 0:t.ethereum}catch{return}}function es({metadata:e,preference:t}){var n,r;const{appName:i,appLogoUrl:a,appChainIds:s}=e;if(t.options!=="smartWalletOnly"){const c=Gl();if(c)return(n=c.setAppInfo)===null||n===void 0||n.call(c,i,a,s,t),c}const o=Fl();if(o?.isCoinbaseBrowser)return(r=o.setAppInfo)===null||r===void 0||r.call(o,i,a,s,t),o}function zl(e){if(!e||typeof e!="object"||Array.isArray(e))throw x.rpc.invalidParams({message:"Expected a single, non-array, object argument.",data:e});const{method:t,params:n}=e;if(typeof t!="string"||t.length===0)throw x.rpc.invalidParams({message:"'args.method' must be a non-empty string.",data:e});if(n!==void 0&&!Array.isArray(n)&&(typeof n!="object"||n===null))throw x.rpc.invalidParams({message:"'args.params' must be an object or array if provided.",data:e});switch(t){case"eth_sign":case"eth_signTypedData_v2":case"eth_subscribe":case"eth_unsubscribe":throw x.provider.unsupportedMethod()}}function ts(e){if(e){if(!["all","smartWalletOnly","eoaOnly"].includes(e.options))throw new Error(`Invalid options: ${e.options}`);if(e.attribution&&e.attribution.auto!==void 0&&e.attribution.dataSuffix!==void 0)throw new Error("Attribution cannot contain both auto and dataSuffix properties");if(e.telemetry&&typeof e.telemetry!="boolean")throw new Error("Telemetry must be a boolean")}}function hi(e){if(typeof e!="function")throw new Error("toAccount is not a function")}const Vl="https://keys.coinbase.com/connect",ns="https://rpc.wallet.coinbase.com",mi="https://www.walletlink.org",ql="https://go.cb-w.com/walletlink";var D;(function(e){e.unknown="unknown",e.banner="banner",e.button="button",e.card="card",e.chart="chart",e.content_script="content_script",e.dropdown="dropdown",e.link="link",e.page="page",e.modal="modal",e.table="table",e.search_bar="search_bar",e.service_worker="service_worker",e.text="text",e.text_input="text_input",e.tray="tray",e.checkbox="checkbox",e.icon="icon"})(D||(D={}));var U;(function(e){e.unknown="unknown",e.blur="blur",e.click="click",e.change="change",e.dismiss="dismiss",e.focus="focus",e.hover="hover",e.select="select",e.measurement="measurement",e.move="move",e.process="process",e.render="render",e.scroll="scroll",e.view="view",e.search="search",e.keyPress="keyPress",e.error="error"})(U||(U={}));var H;(function(e){e.low="low",e.high="high"})(H||(H={}));function G(e,t,n){var r,i,a,s;window.ClientAnalytics&&((r=window.ClientAnalytics)===null||r===void 0||r.logEvent(e,Object.assign(Object.assign({},t),{sdkVersion:gt,appName:(a=(i=k.config.get().metadata)===null||i===void 0?void 0:i.appName)!==null&&a!==void 0?a:"",appOrigin:window.location.origin,appPreferredSigner:(s=k.config.get().preference)===null||s===void 0?void 0:s.options}),n))}const Wl=()=>{G("communicator.popup_setup.started",{action:U.unknown,componentType:D.unknown},H.high)},Kl=()=>{G("communicator.popup_setup.completed",{action:U.unknown,componentType:D.unknown},H.high)},Zl=()=>{G("communicator.popup_unload.received",{action:U.unknown,componentType:D.unknown},H.high)},Lr=({snackbarContext:e})=>{G(`snackbar.${e}.shown`,{action:U.render,componentType:D.modal,snackbarContext:e},H.high)},lt=({snackbarContext:e,snackbarAction:t})=>{G(`snackbar.${e}.action_clicked`,{action:U.click,componentType:D.button,snackbarContext:e,snackbarAction:t},H.high)},Yl=(()=>'@namespace svg "http://www.w3.org/2000/svg";.-cbwsdk-css-reset,.-cbwsdk-css-reset *{animation:none;animation-delay:0;animation-direction:normal;animation-duration:0;animation-fill-mode:none;animation-iteration-count:1;animation-name:none;animation-play-state:running;animation-timing-function:ease;backface-visibility:visible;background:0;background-attachment:scroll;background-clip:border-box;background-color:rgba(0,0,0,0);background-image:none;background-origin:padding-box;background-position:0 0;background-position-x:0;background-position-y:0;background-repeat:repeat;background-size:auto auto;border:0;border-style:none;border-width:medium;border-color:inherit;border-bottom:0;border-bottom-color:inherit;border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-style:none;border-bottom-width:medium;border-collapse:separate;border-image:none;border-left:0;border-left-color:inherit;border-left-style:none;border-left-width:medium;border-radius:0;border-right:0;border-right-color:inherit;border-right-style:none;border-right-width:medium;border-spacing:0;border-top:0;border-top-color:inherit;border-top-left-radius:0;border-top-right-radius:0;border-top-style:none;border-top-width:medium;box-shadow:none;box-sizing:border-box;caption-side:top;clear:none;clip:auto;color:inherit;columns:auto;column-count:auto;column-fill:balance;column-gap:normal;column-rule:medium none currentColor;column-rule-color:currentColor;column-rule-style:none;column-rule-width:none;column-span:1;column-width:auto;counter-increment:none;counter-reset:none;direction:ltr;empty-cells:show;float:none;font:normal;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;font-size:medium;font-style:normal;font-variant:normal;font-weight:normal;height:auto;hyphens:none;letter-spacing:normal;line-height:normal;list-style:none;list-style-image:none;list-style-position:outside;list-style-type:disc;margin:0;margin-bottom:0;margin-left:0;margin-right:0;margin-top:0;opacity:1;orphans:0;outline:0;outline-color:invert;outline-style:none;outline-width:medium;overflow:visible;overflow-x:visible;overflow-y:visible;padding:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;page-break-after:auto;page-break-before:auto;page-break-inside:auto;perspective:none;perspective-origin:50% 50%;pointer-events:auto;position:static;quotes:"\\201C" "\\201D" "\\2018" "\\2019";tab-size:8;table-layout:auto;text-align:inherit;text-align-last:auto;text-decoration:none;text-decoration-color:inherit;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-shadow:none;text-transform:none;transform:none;transform-style:flat;transition:none;transition-delay:0s;transition-duration:0s;transition-property:none;transition-timing-function:ease;unicode-bidi:normal;vertical-align:baseline;visibility:visible;white-space:normal;widows:0;word-spacing:normal;z-index:auto}.-cbwsdk-css-reset strong{font-weight:bold}.-cbwsdk-css-reset *{box-sizing:border-box;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Helvetica Neue",Arial,sans-serif;line-height:1}.-cbwsdk-css-reset [class*=container]{margin:0;padding:0}.-cbwsdk-css-reset style{display:none}')();function rs(){const e=document.createElement("style");e.type="text/css",e.appendChild(document.createTextNode(Yl)),document.documentElement.appendChild(e)}function is(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=is(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function At(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=is(e))&&(r&&(r+=" "),r+=t);return r}function Jl(){try{return window.frameElement!==null}catch{return!1}}function Ql(){try{return Jl()&&window.top?window.top.location:window.location}catch{return window.location}}function Xl(){var e;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test((e=window?.navigator)===null||e===void 0?void 0:e.userAgent)}function as(){var e,t;return(t=(e=window?.matchMedia)===null||e===void 0?void 0:e.call(window,"(prefers-color-scheme: dark)").matches)!==null&&t!==void 0?t:!1}const ed=(()=>".-cbwsdk-css-reset .-gear-container{margin-left:16px !important;margin-right:9px !important;display:flex;align-items:center;justify-content:center;width:24px;height:24px;transition:opacity .25s}.-cbwsdk-css-reset .-gear-container *{user-select:none}.-cbwsdk-css-reset .-gear-container svg{opacity:0;position:absolute}.-cbwsdk-css-reset .-gear-icon{height:12px;width:12px;z-index:10000}.-cbwsdk-css-reset .-cbwsdk-snackbar{align-items:flex-end;display:flex;flex-direction:column;position:fixed;right:0;top:0;z-index:2147483647}.-cbwsdk-css-reset .-cbwsdk-snackbar *{user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance{display:flex;flex-direction:column;margin:8px 16px 0 16px;overflow:visible;text-align:left;transform:translateX(0);transition:opacity .25s,transform .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header:hover .-gear-container svg{opacity:1}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header{display:flex;align-items:center;background:#fff;overflow:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-cblogo{margin:8px 8px 8px 8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-header-message{color:#000;font-size:13px;line-height:1.5;user-select:none}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu{background:#fff;transition:opacity .25s ease-in-out,transform .25s linear,visibility 0s;visibility:hidden;border:1px solid #e7ebee;box-sizing:border-box;border-radius:8px;opacity:0;flex-direction:column;padding-left:8px;padding-right:8px}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:last-child{margin-bottom:8px !important}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover{background:#f5f7f8;border-radius:6px;transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover span{color:#050f19;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item:hover svg path{fill:#000;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item{visibility:inherit;height:35px;margin-top:8px;margin-bottom:0;display:flex;flex-direction:row;align-items:center;padding:8px;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item *{visibility:inherit;cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover{background:rgba(223,95,103,.2);transition:background .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover *{cursor:pointer}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover svg path{fill:#df5f67;transition:fill .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-is-red:hover span{color:#df5f67;transition:color .25s}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-menu-item-info{color:#aaa;font-size:13px;margin:0 8px 0 32px;position:absolute}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-hidden{opacity:0;text-align:left;transform:translateX(25%);transition:opacity .5s linear}.-cbwsdk-css-reset .-cbwsdk-snackbar-instance-expanded .-cbwsdk-snackbar-instance-menu{opacity:1;display:flex;transform:translateY(8px);visibility:visible}")(),td="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEuNDkyIDEwLjQxOWE4LjkzIDguOTMgMCAwMTguOTMtOC45M2gxMS4xNjNhOC45MyA4LjkzIDAgMDE4LjkzIDguOTN2MTEuMTYzYTguOTMgOC45MyAwIDAxLTguOTMgOC45M0gxMC40MjJhOC45MyA4LjkzIDAgMDEtOC45My04LjkzVjEwLjQxOXoiIGZpbGw9IiMxNjUyRjAiLz48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTEwLjQxOSAwSDIxLjU4QzI3LjMzNSAwIDMyIDQuNjY1IDMyIDEwLjQxOVYyMS41OEMzMiAyNy4zMzUgMjcuMzM1IDMyIDIxLjU4MSAzMkgxMC40MkM0LjY2NSAzMiAwIDI3LjMzNSAwIDIxLjU4MVYxMC40MkMwIDQuNjY1IDQuNjY1IDAgMTAuNDE5IDB6bTAgMS40ODhhOC45MyA4LjkzIDAgMDAtOC45MyA4LjkzdjExLjE2M2E4LjkzIDguOTMgMCAwMDguOTMgOC45M0gyMS41OGE4LjkzIDguOTMgMCAwMDguOTMtOC45M1YxMC40MmE4LjkzIDguOTMgMCAwMC04LjkzLTguOTNIMTAuNDJ6IiBmaWxsPSIjZmZmIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNS45OTggMjYuMDQ5Yy01LjU0OSAwLTEwLjA0Ny00LjQ5OC0xMC4wNDctMTAuMDQ3IDAtNS41NDggNC40OTgtMTAuMDQ2IDEwLjA0Ny0xMC4wNDYgNS41NDggMCAxMC4wNDYgNC40OTggMTAuMDQ2IDEwLjA0NiAwIDUuNTQ5LTQuNDk4IDEwLjA0Ny0xMC4wNDYgMTAuMDQ3eiIgZmlsbD0iI2ZmZiIvPjxwYXRoIGQ9Ik0xMi43NjIgMTQuMjU0YzAtLjgyMi42NjctMS40ODkgMS40ODktMS40ODloMy40OTdjLjgyMiAwIDEuNDg4LjY2NiAxLjQ4OCAxLjQ4OXYzLjQ5N2MwIC44MjItLjY2NiAxLjQ4OC0xLjQ4OCAxLjQ4OGgtMy40OTdhMS40ODggMS40ODggMCAwMS0xLjQ4OS0xLjQ4OHYtMy40OTh6IiBmaWxsPSIjMTY1MkYwIi8+PC9zdmc+",nd="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTIiIGhlaWdodD0iMTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHBhdGggZD0iTTEyIDYuNzV2LTEuNWwtMS43Mi0uNTdjLS4wOC0uMjctLjE5LS41Mi0uMzItLjc3bC44MS0xLjYyLTEuMDYtMS4wNi0xLjYyLjgxYy0uMjQtLjEzLS41LS4yNC0uNzctLjMyTDYuNzUgMGgtMS41bC0uNTcgMS43MmMtLjI3LjA4LS41My4xOS0uNzcuMzJsLTEuNjItLjgxLTEuMDYgMS4wNi44MSAxLjYyYy0uMTMuMjQtLjI0LjUtLjMyLjc3TDAgNS4yNXYxLjVsMS43Mi41N2MuMDguMjcuMTkuNTMuMzIuNzdsLS44MSAxLjYyIDEuMDYgMS4wNiAxLjYyLS44MWMuMjQuMTMuNS4yMy43Ny4zMkw1LjI1IDEyaDEuNWwuNTctMS43MmMuMjctLjA4LjUyLS4xOS43Ny0uMzJsMS42Mi44MSAxLjA2LTEuMDYtLjgxLTEuNjJjLjEzLS4yNC4yMy0uNS4zMi0uNzdMMTIgNi43NXpNNiA4LjVhMi41IDIuNSAwIDAxMC01IDIuNSAyLjUgMCAwMTAgNXoiIGZpbGw9IiMwNTBGMTkiLz48L3N2Zz4=";class ss{constructor(){this.items=new Map,this.nextItemKey=0,this.root=null,this.darkMode=as()}attach(t){this.root=document.createElement("div"),this.root.className="-cbwsdk-snackbar-root",t.appendChild(this.root),this.render()}presentItem(t){const n=this.nextItemKey++;return this.items.set(n,t),this.render(),()=>{this.items.delete(n),this.render()}}clear(){this.items.clear(),this.render()}render(){this.root&&Ln(q("div",null,q(os,{darkMode:this.darkMode},Array.from(this.items.entries()).map(([t,n])=>q(rd,Object.assign({},n,{key:t}))))),this.root)}}const os=e=>q("div",{class:At("-cbwsdk-snackbar-container")},q("style",null,ed),q("div",{class:"-cbwsdk-snackbar"},e.children)),rd=({autoExpand:e,message:t,menuItems:n})=>{const[r,i]=$r(!0),[a,s]=$r(e??!1);go(()=>{const c=[window.setTimeout(()=>{i(!1)},1),window.setTimeout(()=>{s(!0)},1e4)];return()=>{c.forEach(window.clearTimeout)}});const o=()=>{s(!a)};return q("div",{class:At("-cbwsdk-snackbar-instance",r&&"-cbwsdk-snackbar-instance-hidden",a&&"-cbwsdk-snackbar-instance-expanded")},q("div",{class:"-cbwsdk-snackbar-instance-header",onClick:o},q("img",{src:td,class:"-cbwsdk-snackbar-instance-header-cblogo"})," ",q("div",{class:"-cbwsdk-snackbar-instance-header-message"},t),q("div",{class:"-gear-container"},!a&&q("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},q("circle",{cx:"12",cy:"12",r:"12",fill:"#F5F7F8"})),q("img",{src:nd,class:"-gear-icon",title:"Expand"}))),n&&n.length>0&&q("div",{class:"-cbwsdk-snackbar-instance-menu"},n.map((c,u)=>q("div",{class:At("-cbwsdk-snackbar-instance-menu-item",c.isRed&&"-cbwsdk-snackbar-instance-menu-item-is-red"),onClick:c.onClick,key:u},q("svg",{width:c.svgWidth,height:c.svgHeight,viewBox:"0 0 10 11",fill:"none",xmlns:"http://www.w3.org/2000/svg"},q("path",{"fill-rule":c.defaultFillRule,"clip-rule":c.defaultClipRule,d:c.path,fill:"#AAAAAA"})),q("span",{class:At("-cbwsdk-snackbar-instance-menu-item-info",c.isRed&&"-cbwsdk-snackbar-instance-menu-item-info-is-red")},c.info)))))},cs="M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z";class id{constructor(){this.attached=!1,this.snackbar=new ss}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");const t=document.documentElement,n=document.createElement("div");n.className="-cbwsdk-css-reset",t.appendChild(n),this.snackbar.attach(n),this.attached=!0,rs()}showConnecting(t){let n;return t.isUnlinkedErrorState?n={autoExpand:!0,message:"Connection lost",menuItems:[{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:"M5.00008 0.96875C6.73133 0.96875 8.23758 1.94375 9.00008 3.375L10.0001 2.375V5.5H9.53133H7.96883H6.87508L7.80633 4.56875C7.41258 3.3875 6.31258 2.53125 5.00008 2.53125C3.76258 2.53125 2.70633 3.2875 2.25633 4.36875L0.812576 3.76875C1.50008 2.125 3.11258 0.96875 5.00008 0.96875ZM2.19375 6.43125C2.5875 7.6125 3.6875 8.46875 5 8.46875C6.2375 8.46875 7.29375 7.7125 7.74375 6.63125L9.1875 7.23125C8.5 8.875 6.8875 10.0312 5 10.0312C3.26875 10.0312 1.7625 9.05625 1 7.625L0 8.625V5.5H0.46875H2.03125H3.125L2.19375 6.43125Z",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]}:n={message:"Confirm on phone",menuItems:[{isRed:!0,info:"Cancel transaction",svgWidth:"11",svgHeight:"11",path:"M10.3711 1.52346L9.21775 0.370117L5.37109 4.21022L1.52444 0.370117L0.371094 1.52346L4.2112 5.37012L0.371094 9.21677L1.52444 10.3701L5.37109 6.53001L9.21775 10.3701L10.3711 9.21677L6.53099 5.37012L10.3711 1.52346Z",defaultFillRule:"inherit",defaultClipRule:"inherit",onClick:t.onCancel},{isRed:!1,info:"Reset connection",svgWidth:"10",svgHeight:"11",path:cs,defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:t.onResetConnection}]},this.snackbar.presentItem(n)}}const yi=420,gi=700,ad={isRed:!1,info:"Retry",svgWidth:"10",svgHeight:"11",path:cs,defaultFillRule:"evenodd",defaultClipRule:"evenodd"},sd="Popup was blocked. Try again.";let Ut=null;function od(e){const t=(window.innerWidth-yi)/2+window.screenX,n=(window.innerHeight-gi)/2+window.screenY;ud(e);function r(){const a=`wallet_${crypto.randomUUID()}`,s=window.open(e,a,`width=${yi}, height=${gi}, left=${t}, top=${n}`);return s?.focus(),s||null}let i=r();if(!i){const a=jr();return new Promise((s,o)=>{Lr({snackbarContext:"popup_blocked"}),a.presentItem({autoExpand:!0,message:sd,menuItems:[Object.assign(Object.assign({},ad),{onClick:()=>{lt({snackbarContext:"popup_blocked",snackbarAction:"confirm"}),i=r(),i?s(i):o(x.rpc.internal("Popup window was blocked")),a.clear()}})]})})}return Promise.resolve(i)}function cd(e){e&&!e.closed&&e.close()}function ud(e){const t={sdkName:Ha,sdkVersion:gt,origin:window.location.origin,coop:$l()};for(const[n,r]of Object.entries(t))e.searchParams.has(n)||e.searchParams.append(n,r.toString())}function jr(){if(!Ut){const e=document.createElement("div");e.className="-cbwsdk-css-reset",document.body.appendChild(e),Ut=new ss,Ut.attach(e)}return Ut}class ld{constructor({url:t=Vl,metadata:n,preference:r}){this.popup=null,this.listeners=new Map,this.postMessage=async i=>{(await this.waitForPopupLoaded()).postMessage(i,this.url.origin)},this.postRequestAndWaitForResponse=async i=>{const a=this.onMessage(({requestId:s})=>s===i.id);return this.postMessage(i),await a},this.onMessage=async i=>new Promise((a,s)=>{const o=c=>{if(c.origin!==this.url.origin)return;const u=c.data;i(u)&&(a(u),window.removeEventListener("message",o),this.listeners.delete(o))};window.addEventListener("message",o),this.listeners.set(o,{reject:s})}),this.disconnect=()=>{cd(this.popup),this.popup=null,this.listeners.forEach(({reject:i},a)=>{i(x.provider.userRejectedRequest("Request rejected")),window.removeEventListener("message",a)}),this.listeners.clear()},this.waitForPopupLoaded=async()=>this.popup&&!this.popup.closed?(this.popup.focus(),this.popup):(Wl(),this.popup=await od(this.url),this.onMessage(({event:i})=>i==="PopupUnload").then(()=>{this.disconnect(),Zl()}).catch(()=>{}),this.onMessage(({event:i})=>i==="PopupLoaded").then(i=>{this.postMessage({requestId:i.id,data:{version:gt,metadata:this.metadata,preference:this.preference,location:window.location.toString()}})}).then(()=>{if(!this.popup)throw x.rpc.internal();return Kl(),this.popup})),this.url=new URL(t),this.metadata=n,this.preference=r}}function re(e){return e.errorMessage!==void 0}function dd(e){const t=Bl(fd(e),{shouldIncludeStack:!0}),n=new URL("https://docs.cloud.coinbase.com/wallet-sdk/docs/errors");return n.searchParams.set("version",gt),n.searchParams.set("code",t.code.toString()),n.searchParams.set("message",t.message),Object.assign(Object.assign({},t),{docUrl:n.href})}function fd(e){var t;if(typeof e=="string")return{message:e,code:Q.rpc.internal};if(re(e)){const n=e.errorMessage,r=(t=e.errorCode)!==null&&t!==void 0?t:n.match(/(denied|rejected)/i)?Q.provider.userRejectedRequest:void 0;return Object.assign(Object.assign({},e),{message:n,code:r,data:{method:e.method}})}return e}class pd extends Lo{}class Je{constructor(t,n){this.scope=t,this.module=n}storeObject(t,n){this.setItem(t,JSON.stringify(n))}loadObject(t){const n=this.getItem(t);return n?JSON.parse(n):void 0}setItem(t,n){localStorage.setItem(this.scopedKey(t),n)}getItem(t){return localStorage.getItem(this.scopedKey(t))}removeItem(t){localStorage.removeItem(this.scopedKey(t))}clear(){const t=this.scopedKey(""),n=[];for(let r=0;r<localStorage.length;r++){const i=localStorage.key(r);typeof i=="string"&&i.startsWith(t)&&n.push(i)}n.forEach(r=>localStorage.removeItem(r))}scopedKey(t){return`-${this.scope}${this.module?`:${this.module}`:""}:${t}`}static clearAll(){new Je("CBWSDK").clear(),new Je("walletlink").clear()}}const hd=({signerType:e})=>{G("provider.signer.loaded_from_storage",{action:U.measurement,componentType:D.unknown,signerType:e},H.low)},md=({method:e,correlationId:t})=>{G("provider.request.started",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t},H.high)},yd=({method:e,correlationId:t,signerType:n,errorMessage:r})=>{G("provider.request.error",{action:U.error,componentType:D.unknown,method:e,signerType:n,correlationId:t,errorMessage:r},H.high)},gd=({method:e,signerType:t,correlationId:n})=>{G("provider.request.responded",{action:U.unknown,componentType:D.unknown,method:e,signerType:t,correlationId:n},H.high)},bd=()=>{G("provider.enable_function.called",{action:U.measurement,componentType:D.unknown},H.high)},wd=()=>{G("signer.selection.requested",{action:U.unknown,componentType:D.unknown},H.high)},vd=e=>{G("signer.selection.responded",{action:U.unknown,componentType:D.unknown,signerType:e},H.high)},Ht=Cr(()=>({correlationIds:new Map})),we={get:e=>Ht.getState().correlationIds.get(e),set:(e,t)=>{Ht.setState(n=>{const r=new Map(n.correlationIds);return r.set(e,t),{correlationIds:r}})},delete:e=>{Ht.setState(t=>{const n=new Map(t.correlationIds);return n.delete(e),{correlationIds:n}})},clear:()=>{Ht.setState({correlationIds:new Map})}},Ed=({method:e,correlationId:t})=>{var n;G("scw_signer.handshake.started",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},xd=({method:e,correlationId:t,errorMessage:n})=>{var r;G("scw_signer.handshake.error",{action:U.error,componentType:D.unknown,method:e,correlationId:t,errorMessage:n,enableAutoSubAccounts:(r=k.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},H.high)},Sd=({method:e,correlationId:t})=>{var n;G("scw_signer.handshake.completed",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},kd=({method:e,correlationId:t})=>{var n;G("scw_signer.request.started",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},_d=({method:e,correlationId:t,errorMessage:n})=>{var r;G("scw_signer.request.error",{action:U.error,componentType:D.unknown,method:e,correlationId:t,errorMessage:n,enableAutoSubAccounts:(r=k.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},H.high)},Ad=({method:e,correlationId:t})=>{var n;G("scw_signer.request.completed",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},Id=({method:e,correlationId:t})=>{var n;G("scw_sub_account.request.started",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},Cd=({method:e,correlationId:t})=>{var n;G("scw_sub_account.request.completed",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},Od=({method:e,correlationId:t,errorMessage:n})=>{var r;G("scw_sub_account.request.error",{action:U.error,componentType:D.unknown,method:e,correlationId:t,errorMessage:n,enableAutoSubAccounts:(r=k.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},H.high)},Pd=({method:e,correlationId:t})=>{var n;G("scw_sub_account.add_owner.started",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},Td=({method:e,correlationId:t})=>{var n;G("scw_sub_account.add_owner.completed",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},Bd=({method:e,correlationId:t,errorMessage:n})=>{var r;G("scw_sub_account.add_owner.error",{action:U.error,componentType:D.unknown,method:e,correlationId:t,errorMessage:n,enableAutoSubAccounts:(r=k.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},H.high)},Md=({method:e,correlationId:t})=>{var n;G("scw_sub_account.insufficient_balance.error_handling.started",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},Ld=({method:e,correlationId:t})=>{var n;G("scw_sub_account.insufficient_balance.error_handling.completed",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t,enableAutoSubAccounts:(n=k.subAccountsConfig.get())===null||n===void 0?void 0:n.enableAutoSubAccounts},H.high)},jd=({method:e,correlationId:t,errorMessage:n})=>{var r;G("scw_sub_account.insufficient_balance.error_handling.error",{action:U.error,componentType:D.unknown,method:e,correlationId:t,errorMessage:n,enableAutoSubAccounts:(r=k.subAccountsConfig.get())===null||r===void 0?void 0:r.enableAutoSubAccounts},H.high)},Ve=e=>"message"in e&&typeof e.message=="string"?e.message:"",us=Cr(()=>({}));function bi(e){e.forEach(t=>{var n,r,i,a,s,o,c,u;if(!t.rpcUrl)return;const d=jo({id:t.id,rpcUrls:{default:{http:[t.rpcUrl]}},name:(r=(n=t.nativeCurrency)===null||n===void 0?void 0:n.name)!==null&&r!==void 0?r:"",nativeCurrency:{name:(a=(i=t.nativeCurrency)===null||i===void 0?void 0:i.name)!==null&&a!==void 0?a:"",symbol:(o=(s=t.nativeCurrency)===null||s===void 0?void 0:s.symbol)!==null&&o!==void 0?o:"",decimals:(u=(c=t.nativeCurrency)===null||c===void 0?void 0:c.decimal)!==null&&u!==void 0?u:18}}),p=gc({chain:d,transport:zr(t.rpcUrl)}),f=zc({client:p,transport:zr(t.rpcUrl)});us.setState({[t.id]:{client:p,bundlerClient:f}})})}function ls(e){var t;return(t=us.getState()[e])===null||t===void 0?void 0:t.client}function he(e,t,n){if(e==null)throw t??x.rpc.invalidParams({message:n??"value must be present",data:e})}function De(e,t){if(!Array.isArray(e))throw x.rpc.invalidParams({message:t??"value must be an array",data:e})}function $t(e){if(typeof e!="object"||e===null)throw x.rpc.internal("sub account info is not an object");if(!("address"in e))throw x.rpc.internal("sub account is invalid");if("address"in e&&typeof e.address=="string"&&!Ct(e.address))throw x.rpc.internal("sub account address is invalid");if("factory"in e&&typeof e.factory=="string"&&!Ct(e.factory))throw x.rpc.internal("sub account factory address is invalid");if("factoryData"in e&&typeof e.factoryData=="string"&&!nt(e.factoryData))throw x.rpc.internal("sub account factory data is invalid")}async function Nd(){return crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!0,["deriveKey"])}async function Rd(e,t){return crypto.subtle.deriveKey({name:"ECDH",public:t},e,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"])}async function Dd(e,t){const n=crypto.getRandomValues(new Uint8Array(12)),r=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},e,new TextEncoder().encode(t));return{iv:n,cipherText:r}}async function Ud(e,{iv:t,cipherText:n}){const r=await crypto.subtle.decrypt({name:"AES-GCM",iv:t},e,n);return new TextDecoder().decode(r)}function ds(e){switch(e){case"public":return"spki";case"private":return"pkcs8"}}async function fs(e,t){const n=ds(e),r=await crypto.subtle.exportKey(n,t);return Tr(new Uint8Array(r))}async function ps(e,t){const n=ds(e),r=Kt(t).buffer;return await crypto.subtle.importKey(n,new Uint8Array(r),{name:"ECDH",namedCurve:"P-256"},!0,e==="private"?["deriveKey"]:[])}async function Hd(e,t){const n=JSON.stringify(e,(r,i)=>{if(!(i instanceof Error))return i;const a=i;return Object.assign(Object.assign({},a.code?{code:a.code}:{}),{message:a.message})});return Dd(t,n)}async function $d(e,t){return JSON.parse(await Ud(t,e))}function Gd(e,t){const n=typeof indexedDB<"u"?nc(e,t):void 0;return{getItem:async r=>{const i=await rc(r,n);return i||null},removeItem:async r=>ic(r,n),setItem:async(r,i)=>ac(r,i,n)}}const Fd="cbwsdk",zd="keys",wn="activeId",Ge=Gd(Fd,zd);async function Vd(){const e=await ll({extractable:!1}),t=de(gn(e.publicKey),1);return await Ge.setItem(t,e),await Ge.setItem(wn,t),e}async function hs(){const e=await Ge.getItem(wn);if(!e)return null;const t=await Ge.getItem(e);return t||null}async function qd(){const e=await hs();if(!e){const t=await Vd(),n=de(gn(t.publicKey),1);return await Ge.setItem(n,t),await Ge.setItem(wn,n),t}return e}async function Wd(){const e=await qd(),t=de(gn(e.publicKey),1),n=async r=>{const{payload:i,metadata:a}=ul({challenge:r,origin:"https://keys.coinbase.com",userVerification:"preferred"}),s=await dl({payload:i,privateKey:e.privateKey});return{signature:Wu(s),raw:{},webauthn:a}};return{id:t,publicKey:t,async sign({hash:r}){return n(r)},async signMessage({message:r}){return n(qi(r))},async signTypedData(r){return n(fn(r))},type:"webAuthn"}}async function hr(){return{account:await Wd()}}async function Fp(){const e=await hs();e&&(await Ge.removeItem(de(gn(e.publicKey),1)),await Ge.removeItem(wn))}const wi={storageKey:"ownPrivateKey",keyType:"private"},vi={storageKey:"ownPublicKey",keyType:"public"},Ei={storageKey:"peerPublicKey",keyType:"public"};class Kd{constructor(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null}async getOwnPublicKey(){return await this.loadKeysIfNeeded(),this.ownPublicKey}async getSharedSecret(){return await this.loadKeysIfNeeded(),this.sharedSecret}async setPeerPublicKey(t){this.sharedSecret=null,this.peerPublicKey=t,await this.storeKey(Ei,t),await this.loadKeysIfNeeded()}async clear(){this.ownPrivateKey=null,this.ownPublicKey=null,this.peerPublicKey=null,this.sharedSecret=null,k.keys.clear()}async generateKeyPair(){const t=await Nd();this.ownPrivateKey=t.privateKey,this.ownPublicKey=t.publicKey,await this.storeKey(wi,t.privateKey),await this.storeKey(vi,t.publicKey)}async loadKeysIfNeeded(){if(this.ownPrivateKey===null&&(this.ownPrivateKey=await this.loadKey(wi)),this.ownPublicKey===null&&(this.ownPublicKey=await this.loadKey(vi)),(this.ownPrivateKey===null||this.ownPublicKey===null)&&await this.generateKeyPair(),this.peerPublicKey===null&&(this.peerPublicKey=await this.loadKey(Ei)),this.sharedSecret===null){if(this.ownPrivateKey===null||this.peerPublicKey===null)return;this.sharedSecret=await Rd(this.ownPrivateKey,this.peerPublicKey)}}async loadKey(t){const n=k.keys.get(t.storageKey);return n?ps(t.keyType,n):null}async storeKey(t,n){const r=await fs(t.keyType,n);k.keys.set(t.storageKey,r)}}function Et(e,t){if(!(typeof e!="object"||e===null))return t.split(/[.[\]]+/).filter(Boolean).reduce((n,r)=>{if(typeof n=="object"&&n!==null)return n[r]},e)}const ms="0x0ba5ed0c6aa8c49038f819e587e2633c4a9f428a",ys="0xf85210B21cC50302F477BA56686d2019dC9b67Ad",ve=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{inputs:[{name:"owner",type:"bytes"}],name:"AlreadyOwner",type:"error"},{inputs:[],name:"Initialized",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidEthereumAddressOwner",type:"error"},{inputs:[{name:"key",type:"uint256"}],name:"InvalidNonceKey",type:"error"},{inputs:[{name:"owner",type:"bytes"}],name:"InvalidOwnerBytesLength",type:"error"},{inputs:[],name:"LastOwner",type:"error"},{inputs:[{name:"index",type:"uint256"}],name:"NoOwnerAtIndex",type:"error"},{inputs:[{name:"ownersRemaining",type:"uint256"}],name:"NotLastOwner",type:"error"},{inputs:[{name:"selector",type:"bytes4"}],name:"SelectorNotAllowed",type:"error"},{inputs:[],name:"Unauthorized",type:"error"},{inputs:[],name:"UnauthorizedCallContext",type:"error"},{inputs:[],name:"UpgradeFailed",type:"error"},{inputs:[{name:"index",type:"uint256"},{name:"expectedOwner",type:"bytes"},{name:"actualOwner",type:"bytes"}],name:"WrongOwnerAtIndex",type:"error"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"AddOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"index",type:"uint256"},{indexed:!1,name:"owner",type:"bytes"}],name:"RemoveOwner",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"implementation",type:"address"}],name:"Upgraded",type:"event"},{stateMutability:"payable",type:"fallback"},{inputs:[],name:"REPLAYABLE_NONCE_KEY",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"owner",type:"address"}],name:"addOwnerAddress",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"addOwnerPublicKey",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"functionSelector",type:"bytes4"}],name:"canSkipChainIdValidation",outputs:[{name:"",type:"bool"}],stateMutability:"pure",type:"function"},{inputs:[],name:"domainSeparator",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"eip712Domain",outputs:[{name:"fields",type:"bytes1"},{name:"name",type:"string"},{name:"version",type:"string"},{name:"chainId",type:"uint256"},{name:"verifyingContract",type:"address"},{name:"salt",type:"bytes32"},{name:"extensions",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[],name:"entryPoint",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"execute",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"target",type:"address"},{name:"value",type:"uint256"},{name:"data",type:"bytes"}],name:"calls",type:"tuple[]"}],name:"executeBatch",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"calls",type:"bytes[]"}],name:"executeWithoutChainIdValidation",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"}],name:"getUserOpHashWithoutChainId",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"$",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{name:"owners",type:"bytes[]"}],name:"initialize",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{name:"account",type:"address"}],name:"isOwnerAddress",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"account",type:"bytes"}],name:"isOwnerBytes",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"x",type:"bytes32"},{name:"y",type:"bytes32"}],name:"isOwnerPublicKey",outputs:[{name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"},{name:"signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"result",type:"bytes4"}],stateMutability:"view",type:"function"},{inputs:[],name:"nextOwnerIndex",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"}],name:"ownerAtIndex",outputs:[{name:"",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[],name:"ownerCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"proxiableUUID",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeLastOwner",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{name:"index",type:"uint256"},{name:"owner",type:"bytes"}],name:"removeOwnerAtIndex",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"removedOwnersCount",outputs:[{name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{name:"hash",type:"bytes32"}],name:"replaySafeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{name:"newImplementation",type:"address"},{name:"data",type:"bytes"}],name:"upgradeToAndCall",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{components:[{name:"sender",type:"address"},{name:"nonce",type:"uint256"},{name:"initCode",type:"bytes"},{name:"callData",type:"bytes"},{name:"callGasLimit",type:"uint256"},{name:"verificationGasLimit",type:"uint256"},{name:"preVerificationGas",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymasterAndData",type:"bytes"},{name:"signature",type:"bytes"}],name:"userOp",type:"tuple"},{name:"userOpHash",type:"bytes32"},{name:"missingAccountFunds",type:"uint256"}],name:"validateUserOp",outputs:[{name:"validationData",type:"uint256"}],stateMutability:"nonpayable",type:"function"},{stateMutability:"payable",type:"receive"}],gs=[{inputs:[{name:"implementation_",type:"address"}],stateMutability:"payable",type:"constructor"},{inputs:[],name:"OwnerRequired",type:"error"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"createAccount",outputs:[{name:"account",type:"address"}],stateMutability:"payable",type:"function"},{inputs:[{name:"owners",type:"bytes[]"},{name:"nonce",type:"uint256"}],name:"getAddress",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"implementation",outputs:[{name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"initCodeHash",outputs:[{name:"",type:"bytes32"}],stateMutability:"view",type:"function"}];function xi(e){var t;if(!Array.isArray(e.params))return null;switch(e.method){case"personal_sign":return e.params[1];case"eth_signTypedData_v4":return e.params[0];case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":return(t=e.params[0])===null||t===void 0?void 0:t.from;default:return null}}function Zd(e,t){if(!Array.isArray(e.params))throw x.rpc.invalidParams();const n=[...e.params];switch(e.method){case"eth_signTransaction":case"eth_sendTransaction":case"wallet_sendCalls":n[0].from=t;break;case"eth_signTypedData_v4":n[0]=t;break;case"personal_sign":n[1]=t;break}return Object.assign(Object.assign({},e),{params:n})}function Si(e){var t;if(!e||!Array.isArray(e)||!(!((t=e[0])===null||t===void 0)&&t.chainId)||typeof e[0].chainId!="string"&&typeof e[0].chainId!="number")throw x.rpc.invalidParams()}function Yd(e){if(!e||!Array.isArray(e)||e.length!==1&&e.length!==2||typeof e[0]!="string"||!Ct(e[0]))throw x.rpc.invalidParams();if(e.length===2){if(!Array.isArray(e[1]))throw x.rpc.invalidParams();for(const t of e[1])if(typeof t!="string"||!t.startsWith("0x"))throw x.rpc.invalidParams()}}function un(e,t){const n=Object.assign({},e);if(t&&e.method.startsWith("wallet_")){let r=Et(n,"params.0.capabilities");if(typeof r>"u"&&(r={}),typeof r!="object")throw x.rpc.invalidParams();r=Object.assign(Object.assign({},t),r),n.params&&Array.isArray(n.params)&&(n.params[0]=Object.assign(Object.assign({},n.params[0]),{capabilities:r}))}return n}async function Pn(){var e;const t=(e=k.subAccountsConfig.get())!==null&&e!==void 0?e:{},n={};if(t.enableAutoSubAccounts){const{account:r}=t.toOwnerAccount?await t.toOwnerAccount():await hr();if(!r)throw x.provider.unauthorized("No owner account found");n.addSubAccount={account:{type:"create",keys:[{type:r.address?"address":"webauthn-p256",publicKey:r.address||r.publicKey}]}}}k.subAccountsConfig.set({capabilities:n})}function Jd(e){if(!(e.method==="coinbase_fetchPermissions"&&e.params===void 0)){if(e.method==="coinbase_fetchPermissions"&&Array.isArray(e.params)&&e.params.length===1&&typeof e.params[0]=="object"){if(typeof e.params[0].account!="string"||!e.params[0].chainId.startsWith("0x"))throw x.rpc.invalidParams("FetchPermissions - Invalid params: params[0].account must be a hex string");if(typeof e.params[0].chainId!="string"||!e.params[0].chainId.startsWith("0x"))throw x.rpc.invalidParams("FetchPermissions - Invalid params: params[0].chainId must be a hex string");if(typeof e.params[0].spender!="string"||!e.params[0].spender.startsWith("0x"))throw x.rpc.invalidParams("FetchPermissions - Invalid params: params[0].spender must be a hex string");return}throw x.rpc.invalidParams()}}function Qd(e){var t,n,r;if(e.params!==void 0)return e;const i=(t=k.getState().account.accounts)===null||t===void 0?void 0:t[0],a=(n=k.getState().account.chain)===null||n===void 0?void 0:n.id,s=(r=k.getState().subAccount)===null||r===void 0?void 0:r.address;if(!i||!s||!a)throw x.rpc.invalidParams("FetchPermissions - one or more of account, sub account, or chain id is missing, connect to sub account via wallet_connect first");return{method:"coinbase_fetchPermissions",params:[{account:i,chainId:N(a),spender:s}]}}function Xd({spendPermission:e,chainId:t}){return{domain:{name:"Spend Permission Manager",version:"1",chainId:t,verifyingContract:ys},types:{SpendPermission:[{name:"account",type:"address"},{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermission",message:{account:e.account,spender:e.spender,token:e.token,allowance:e.allowance,period:e.period,start:e.start,end:e.end,salt:e.salt,extraData:e.extraData}}}function ef({spendPermissionBatch:e,chainId:t}){return{domain:{name:"Spend Permission Manager",version:"1",chainId:t,verifyingContract:ys},types:{SpendPermissionBatch:[{name:"account",type:"address"},{name:"period",type:"uint48"},{name:"start",type:"uint48"},{name:"end",type:"uint48"},{name:"permissions",type:"PermissionDetails[]"}],PermissionDetails:[{name:"spender",type:"address"},{name:"token",type:"address"},{name:"allowance",type:"uint160"},{name:"salt",type:"uint256"},{name:"extraData",type:"bytes"}]},primaryType:"SpendPermissionBatch",message:{account:e.account,period:e.period,start:e.start,end:e.end,permissions:e.permissions.map(n=>({spender:n.spender,token:n.token,allowance:n.allowance,salt:n.salt,extraData:n.extraData}))}}}async function bs({client:e,id:t}){var n;const r=await Yi(e,{id:t});if(r.status==="success")return(n=r.receipts)===null||n===void 0?void 0:n[0].transactionHash;throw x.rpc.internal("failed to send transaction")}function ws({calls:e,from:t,chainId:n,capabilities:r}){const i=$a.get().paymasterUrls;let a={method:"wallet_sendCalls",params:[{version:"1.0",calls:e,chainId:N(n),from:t,atomicRequired:!0,capabilities:r}]};return i?.[n]&&(a=un(a,{paymasterService:{url:i?.[n]}})),a}async function tf(){const e=jr();return await new Promise(n=>{Lr({snackbarContext:"sub_account_insufficient_balance"}),e.presentItem({autoExpand:!0,message:"Insufficient spend permission. Choose how to proceed:",menuItems:[{isRed:!1,info:"Create new Spend Permission",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{lt({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"create_permission"}),e.clear(),n("update_permission")}},{isRed:!1,info:"Continue in Popup",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{lt({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"continue_in_popup"}),e.clear(),n("continue_popup")}},{isRed:!0,info:"Cancel",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{lt({snackbarContext:"sub_account_insufficient_balance",snackbarAction:"cancel"}),e.clear(),n("cancel")}}]})})}function nf({errorData:e,sourceAddress:t}){var n;const r=[];for(const[i,{amount:a,sources:s}]of Object.entries((n=e?.required)!==null&&n!==void 0?n:{})){if(s.filter(c=>_e(c.balance)>=_e(a)&&c.address.toLowerCase()===t?.toLowerCase()).length===0)throw new Error("Source address has insufficient balance for a token");r.push({token:i,requiredAmount:_e(a)})}return r}function rf(e){return typeof e=="object"&&e!==null&&"calls"in e}function af(e){return Array.isArray(e)&&e.length===1&&typeof e[0]=="object"&&e[0]!==null&&"to"in e[0]}function sf(e){return No(Ce(ot(e)),0,16)}function of({attribution:e,dappOrigin:t}){if(e){if("auto"in e&&e.auto&&t)return sf(t);if("dataSuffix"in e)return e.dataSuffix}}function cf(e,t){var n;if(!Array.isArray(e?.params))return!1;const r=(n=e.params[0])===null||n===void 0?void 0:n.capabilities;return!r||typeof r!="object"?!1:t in r}function Gt(e,t){const n=e.filter(r=>r!==t);return[t,...n]}function Ft(e,t){return[...e.filter(r=>r!==t),t]}async function uf(){const e=k.spendPermissions.get(),t=k.subAccounts.get(),n=k.account.get().accounts;return n?{accounts:n?.map(i=>({address:i,capabilities:{subAccounts:t?[t]:void 0,spendPermissions:e.length>0?{permissions:e}:void 0}}))}:null}function lf(e){return e.replaceAll("+","-").replaceAll("/","_").replace(/=+$/,"")}function zt(e){const t=btoa(String.fromCharCode(...new Uint8Array(e)));return lf(t)}function df({webauthn:e,signature:t,id:n}){const r=ja(t);return{id:n,rawId:zt(Vr(n)),response:{authenticatorData:zt(Zt(e.authenticatorData)),clientDataJSON:zt(Vr(e.clientDataJSON)),signature:zt(ff(r.r,r.s))},type:JSON.parse(e.clientDataJSON).type}}function ff(e,t){const n=Zt(jn(N(e))),r=Zt(jn(N(t))),i=n.length,a=r.length,s=i+a+4,o=new Uint8Array(s+2);return o[0]=48,o[1]=s,o[2]=2,o[3]=i,o.set(n,4),o[i+4]=2,o[i+5]=a,o.set(r,i+6),o}var pf=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};async function hf(e){const{owner:t,ownerIndex:n,address:r,client:i,factoryData:a}=e,s={abi:wc,address:Vc,version:"0.6"},o={abi:gs,address:ms};return Sc({client:i,entryPoint:s,extend:{abi:ve,factory:o},async decodeCalls(c){const u=Wi({abi:ve,data:c});if(u.functionName==="execute")return[{to:u.args[0],value:u.args[1],data:u.args[2]}];if(u.functionName==="executeBatch")return u.args[0].map(d=>({to:d.target,value:d.value,data:d.data}));throw new L(`unable to decode calls for "${u.functionName}"`)},async encodeCalls(c){var u,d;return c.length===1?Le({abi:ve,functionName:"execute",args:[c[0].to,(u=c[0].value)!==null&&u!==void 0?u:BigInt(0),(d=c[0].data)!==null&&d!==void 0?d:"0x"]}):Le({abi:ve,functionName:"executeBatch",args:[c.map(p=>{var f,l;return{data:(f=p.data)!==null&&f!==void 0?f:"0x",target:p.to,value:(l=p.value)!==null&&l!==void 0?l:BigInt(0)}})]})},async getAddress(){return r},async getFactoryArgs(){return a?{factory:o.address,factoryData:a}:{factory:o.address,factoryData:a}},async getStubSignature(){return t.type==="webAuthn"?"0x0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000400000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000012000000000000000000000000000000000000000000000000000000000000000170000000000000000000000000000000000000000000000000000000000000001949fc7c88032b9fcb5f6efc7a7b8c63668eae9871b765e23123bb473ff57aa831a7c0d9276168ebcc29f2875a0239cffdf2a9cd1c2007c5c77c071db9264df1d000000000000000000000000000000000000000000000000000000000000002549960de5880e8c687434170f6476605b8fe4aeb9a28632c7995cf3ba831d97630500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008a7b2274797065223a22776562617574686e2e676574222c226368616c6c656e6765223a2273496a396e6164474850596759334b7156384f7a4a666c726275504b474f716d59576f4d57516869467773222c226f726967696e223a2268747470733a2f2f7369676e2e636f696e626173652e636f6d222c2263726f73734f726967696e223a66616c73657d00000000000000000000000000000000000000000000":wt({ownerIndex:n,signature:"0xfffffffffffffffffffffffffffffff0000000000000000000000000000000007aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa1c"})},async sign(c){const u=await this.getAddress(),d=Tn({address:u,chainId:i.chain.id,hash:c.hash}),p=await Vt({hash:d,owner:t});return wt({ownerIndex:n,signature:p})},async signMessage(c){const{message:u}=c,d=await this.getAddress(),p=Tn({address:d,chainId:i.chain.id,hash:qi(u)}),f=await Vt({hash:p,owner:t});return wt({ownerIndex:n,signature:f})},async signTypedData(c){const{domain:u,types:d,primaryType:p,message:f}=c,l=await this.getAddress(),g=Tn({address:l,chainId:i.chain.id,hash:fn({domain:u,message:f,primaryType:p,types:d})}),m=await Vt({hash:g,owner:t});return wt({ownerIndex:n,signature:m})},async signUserOperation(c){const{chainId:u=i.chain.id}=c,d=pf(c,["chainId"]),p=await this.getAddress(),f=xc({chainId:u,entryPointAddress:s.address,entryPointVersion:s.version,userOperation:Object.assign(Object.assign({},d),{sender:p})}),l=await Vt({hash:f,owner:t});return wt({ownerIndex:n,signature:l})},userOperation:{async estimateGas(c){var u;if(t.type==="webAuthn")return{verificationGasLimit:BigInt(Math.max(Number((u=c.verificationGasLimit)!==null&&u!==void 0?u:BigInt(0)),8e5))}}}})}async function Vt({hash:e,owner:t}){if(t.type==="webAuthn"){const{signature:n,webauthn:r}=await t.sign({hash:e});return mf({signature:n,webauthn:r})}if(t.sign)return t.sign({hash:e});throw new L("`owner` does not support raw sign.")}function Tn({address:e,chainId:t,hash:n}){return fn({domain:{chainId:t,name:"Coinbase Smart Wallet",verifyingContract:e,version:"1"},types:{CoinbaseSmartWalletMessage:[{name:"hash",type:"bytes32"}]},primaryType:"CoinbaseSmartWalletMessage",message:{hash:n}})}function mf({webauthn:e,signature:t}){const{r:n,s:r}=ja(t);return ct([{components:[{name:"authenticatorData",type:"bytes"},{name:"clientDataJSON",type:"bytes"},{name:"challengeIndex",type:"uint256"},{name:"typeIndex",type:"uint256"},{name:"r",type:"uint256"},{name:"s",type:"uint256"}],type:"tuple"}],[{authenticatorData:e.authenticatorData,clientDataJSON:Di(e.clientDataJSON),challengeIndex:BigInt(e.challengeIndex),typeIndex:BigInt(e.typeIndex),r:n,s:r}])}function wt(e){const{ownerIndex:t=0}=e,n=(()=>{if(Ro(e.signature)!==65)return e.signature;const r=bc(e.signature);return cc(["bytes32","bytes32","uint8"],[r.r,r.s,r.yParity===0?27:28])})();return ct([{components:[{name:"ownerIndex",type:"uint8"},{name:"signatureData",type:"bytes"}],type:"tuple"}],[{ownerIndex:t,signatureData:n}])}async function yf({address:e,client:t,factory:n,factoryData:r,owner:i,ownerIndex:a,parentAddress:s,attribution:o}){var c;const u={address:e,factory:n,factoryData:r},d=(c=t.chain)===null||c===void 0?void 0:c.id;if(!d)throw x.rpc.internal("chainId not found");const p=await hf({owner:i,ownerIndex:a??1,address:e,client:t,factoryData:r}),f=async l=>{var g,m,v,S,P,A;try{switch(l.method){case"wallet_addSubAccount":return u;case"eth_accounts":return[u.address];case"eth_coinbase":return u.address;case"net_version":return d.toString();case"eth_chainId":return N(d);case"eth_sendTransaction":{De(l.params);const C=l.params[0];he(C.to,x.rpc.invalidParams("to is required"));const F={to:C.to,data:fr((g=C.data)!==null&&g!==void 0?g:"0x",!0),value:fr((m=C.value)!==null&&m!==void 0?m:"0x",!0),from:(v=C.from)!==null&&v!==void 0?v:u.address},M=ws({calls:[F],chainId:d,from:F.from}),z=await f(M);return bs({client:t,id:z})}case"wallet_sendCalls":{De(l.params);const C=Et(l.params[0],"chainId");if(!C)throw x.rpc.invalidParams("chainId is required");if(!nt(C))throw x.rpc.invalidParams("chainId must be a hex encoded integer");if(!l.params[0])throw x.rpc.invalidParams("params are required");if(!("calls"in l.params[0]))throw x.rpc.invalidParams("calls are required");let F={method:"wallet_prepareCalls",params:[{version:"1.0",calls:l.params[0].calls,chainId:C,from:u.address,capabilities:"capabilities"in l.params[0]?l.params[0].capabilities:{}}]};s&&(F=un(F,{funding:[{type:"spendPermission",data:{autoApply:!0,sources:[s],preference:"PREFER_DIRECT_BALANCE"}}]}));let M=await f(F);const z=await((P=(S=i).sign)===null||P===void 0?void 0:P.call(S,{hash:qr(M.signatureRequest.hash)}));let oe;if(!z)throw x.rpc.internal("signature not found");return nt(z)?oe={type:"secp256k1",data:{address:i.address,signature:z}}:oe={type:"webauthn",data:{signature:JSON.stringify(df(Object.assign({id:(A=i.id)!==null&&A!==void 0?A:"1"},z))),publicKey:i.publicKey}},(await f({method:"wallet_sendPreparedCalls",params:[{version:"1.0",type:M.type,data:M.userOp,chainId:M.chainId,signature:oe}]}))[0]}case"wallet_sendPreparedCalls":{De(l.params);const C=Et(l.params[0],"chainId");if(!C)throw x.rpc.invalidParams("chainId is required");if(!nt(C))throw x.rpc.invalidParams("chainId must be a hex encoded integer");return await t.request({method:"wallet_sendPreparedCalls",params:l.params})}case"wallet_prepareCalls":{De(l.params);const C=Et(l.params[0],"chainId");if(!C)throw x.rpc.invalidParams("chainId is required");if(!nt(C))throw x.rpc.invalidParams("chainId must be a hex encoded integer");if(!l.params[0])throw x.rpc.invalidParams("params are required");if(!Et(l.params[0],"calls"))throw x.rpc.invalidParams("calls are required");const F=l.params[0];return o&&F.capabilities&&!("attribution"in F.capabilities)&&(F.capabilities.attribution=o),await t.request({method:"wallet_prepareCalls",params:[Object.assign(Object.assign({},l.params[0]),{chainId:C})]})}case"personal_sign":{if(De(l.params),!nt(l.params[0]))throw x.rpc.invalidParams("message must be a hex encoded string");const C=qr(l.params[0]);return p.signMessage({message:C})}case"eth_signTypedData_v4":{De(l.params);const C=typeof l.params[1]=="string"?JSON.parse(l.params[1]):l.params[1];return p.signTypedData(C)}case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"wallet_addEthereumChain":case"wallet_switchEthereumChain":default:throw x.rpc.methodNotSupported()}}catch(C){if(Wa(C)){const F=Ll(C);if(F)throw F}throw C}};return{request:f}}async function vs({address:e,client:t,publicKey:n,factory:r,factoryData:i}){if(!await Vi(t,{address:e})&&r&&i){if(Wr(r)!==Wr(ms))throw x.rpc.internal("unknown factory address");const o=Wi({abi:gs,data:i});if(o.functionName!=="createAccount")throw x.rpc.internal("unknown factory function");const[c]=o.args;return c.findIndex(u=>u.toLowerCase()===ki(n).toLowerCase())}const s=await Nn(t,{address:e,abi:ve,functionName:"ownerCount"});for(let o=Number(s)-1;o>=0;o--){const c=await Nn(t,{address:e,abi:ve,functionName:"ownerAtIndex",args:[BigInt(o)]}),u=ki(n);if(c.toLowerCase()===u.toLowerCase())return o}return-1}function ki(e){return Ct(e)?fe(e):e}async function gf(){const e=jr();return new Promise(t=>{Lr({snackbarContext:"sub_account_add_owner"}),e.presentItem({autoExpand:!0,message:"App requires a signer update",menuItems:[{isRed:!1,info:"Confirm",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{lt({snackbarContext:"sub_account_add_owner",snackbarAction:"confirm"}),e.clear(),t("authenticate")}},{isRed:!0,info:"Cancel",svgWidth:"10",svgHeight:"11",path:"",defaultFillRule:"evenodd",defaultClipRule:"evenodd",onClick:()=>{lt({snackbarContext:"sub_account_add_owner",snackbarAction:"cancel"}),e.clear(),t("cancel")}}]})})}async function bf({ownerAccount:e,globalAccountRequest:t}){var n,r;const i=k.account.get(),a=k.subAccounts.get(),s=(n=i.accounts)===null||n===void 0?void 0:n.find(g=>g.toLowerCase()!==a?.address.toLowerCase());he(s,x.provider.unauthorized("no global account")),he((r=i.chain)===null||r===void 0?void 0:r.id,x.provider.unauthorized("no chain id")),he(a?.address,x.provider.unauthorized("no sub account"));const o=[];if(e.type==="local"&&e.address&&o.push({to:a.address,data:Le({abi:ve,functionName:"addOwnerAddress",args:[e.address]}),value:ot(0)}),e.publicKey){const[g,m]=Ki([{type:"bytes32"},{type:"bytes32"}],e.publicKey);o.push({to:a.address,data:Le({abi:ve,functionName:"addOwnerPublicKey",args:[g,m]}),value:ot(0)})}const c={method:"wallet_sendCalls",params:[{version:"1",calls:o,chainId:N(84532),from:s}]};if(await gf()==="cancel")throw x.provider.unauthorized("user cancelled");const d=await t(c),p=ls(i.chain.id);if(he(p,x.rpc.internal(`client not found for chainId ${i.chain.id}`)),(await Yi(p,{id:d})).status!=="success")throw x.rpc.internal("add owner call failed");const l=await vs({address:a.address,publicKey:e.type==="local"&&e.address?e.address:e.publicKey,client:p});if(l===-1)throw x.rpc.internal("failed to find owner index");return l}async function wf({errorData:e,globalAccountAddress:t,subAccountAddress:n,client:r,request:i,subAccountRequest:a,globalAccountRequest:s}){var o;const c=(o=r.chain)===null||o===void 0?void 0:o.id;he(c,x.rpc.internal("invalid chainId"));const u=nf({errorData:e,sourceAddress:t}),d=await tf();if(d==="cancel")throw new Error("User cancelled funding");let p;const f=60*60*24,l=3;if(d==="update_permission"){if(u.length===1){const A=u[0],C=Xd({spendPermission:{token:A.token,allowance:N(A.requiredAmount*BigInt(l)),period:f,account:t,spender:n,start:0,end:0xffffffffffff,salt:N(BigInt(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),extraData:"0x"},chainId:c});p={method:"eth_signTypedData_v4",params:[t,C]}}else{const A=ef({spendPermissionBatch:{account:t,period:f,start:0,end:0xffffffffffff,permissions:u.map(C=>({token:C.token,allowance:N(C.requiredAmount*BigInt(l)),period:f,account:t,spender:n,salt:"0x0",extraData:"0x"}))},chainId:c});p={method:"eth_signTypedData_v4",params:[t,A]}}try{await s(p)}catch(A){throw console.error(A),new Error("User denied spend permission request")}return a(i)}const g=u.map(A=>A.token.toLowerCase()==="0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE".toLowerCase()?{to:n,value:N(A.requiredAmount),data:"0x"}:{to:A.token,value:"0x0",data:Le({abi:tc,functionName:"transfer",args:[n,A.requiredAmount]})});let m;if(i.method==="wallet_sendCalls"&&rf(i.params))m=i.params[0];else if(i.method==="eth_sendTransaction"&&af(i.params))m=ws({calls:[i.params[0]],chainId:c,from:i.params[0].from}).params[0];else throw new Error("Could not get original call");const v=Le({abi:ve,functionName:"executeBatch",args:[m.calls.map(A=>{var C,F;return{target:A.to,value:_e((C=A.value)!==null&&C!==void 0?C:"0x0"),data:(F=A.data)!==null&&F!==void 0?F:"0x"}})]}),S=[...g,{data:v,to:n,value:"0x0"}],P=await s({method:"wallet_sendCalls",params:[Object.assign(Object.assign({},m),{calls:S,from:t})]});return i.method==="eth_sendTransaction"?bs({client:r,id:P}):P}class Es{constructor(t){var n,r,i,a;this.communicator=t.communicator,this.callback=t.callback,this.keyManager=new Kd;const{account:s,chains:o}=k.getState();this.accounts=(n=s.accounts)!==null&&n!==void 0?n:[],this.chain=(r=s.chain)!==null&&r!==void 0?r:{id:(a=(i=t.metadata.appChainIds)===null||i===void 0?void 0:i[0])!==null&&a!==void 0?a:1},o&&bi(o)}async handshake(t){var n,r,i;const a=we.get(t);Ed({method:t.method,correlationId:a});try{await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n));const s=await this.createRequestMessage({handshake:{method:t.method,params:(i=t.params)!==null&&i!==void 0?i:[]}},a),o=await this.communicator.postRequestAndWaitForResponse(s);if("failure"in o.content)throw o.content.failure;const c=await ps("public",o.sender);await this.keyManager.setPeerPublicKey(c);const u=await this.decryptResponseMessage(o);this.handleResponse(t,u),Sd({method:t.method,correlationId:a})}catch(s){throw xd({method:t.method,correlationId:a,errorMessage:Ve(s)}),s}}async request(t){const n=we.get(t);kd({method:t.method,correlationId:n});try{const r=await this._request(t);return Ad({method:t.method,correlationId:n}),r}catch(r){throw _d({method:t.method,correlationId:n,errorMessage:Ve(r)}),r}}async _request(t){var n,r,i,a,s,o,c,u,d,p,f,l,g,m;if(this.accounts.length===0)switch(t.method){case"eth_requestAccounts":return await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n)),await Pn(),await this.request({method:"wallet_connect",params:[{version:"1",capabilities:Object.assign({},(a=(i=k.subAccountsConfig.get())===null||i===void 0?void 0:i.capabilities)!==null&&a!==void 0?a:{})}]}),this.accounts;case"wallet_switchEthereumChain":{Si(t.params),this.chain.id=Number(t.params[0].chainId);return}case"wallet_connect":{await((o=(s=this.communicator).waitForPopupLoaded)===null||o===void 0?void 0:o.call(s)),await Pn();let v={};cf(t,"addSubAccount")&&(v=(u=(c=k.subAccountsConfig.get())===null||c===void 0?void 0:c.capabilities)!==null&&u!==void 0?u:{});const S=un(t,v);return this.sendRequestToPopup(S)}case"wallet_sendCalls":case"wallet_sign":return this.sendRequestToPopup(t);default:throw x.provider.unauthorized()}if(this.shouldRequestUseSubAccountSigner(t)){const v=we.get(t);Id({method:t.method,correlationId:v});try{const S=await this.sendRequestToSubAccountSigner(t);return Cd({method:t.method,correlationId:v}),S}catch(S){throw Od({method:t.method,correlationId:v,errorMessage:Ve(S)}),S}}switch(t.method){case"eth_requestAccounts":case"eth_accounts":{const v=k.subAccounts.get(),S=k.subAccountsConfig.get();return v?.address&&(this.accounts=S?.enableAutoSubAccounts?Gt(this.accounts,v.address):Ft(this.accounts,v.address)),(d=this.callback)===null||d===void 0||d.call(this,"connect",{chainId:N(this.chain.id)}),this.accounts}case"eth_coinbase":return this.accounts[0];case"net_version":return this.chain.id;case"eth_chainId":return N(this.chain.id);case"wallet_getCapabilities":return this.handleGetCapabilitiesRequest(t);case"wallet_switchEthereumChain":return this.handleSwitchChainRequest(t);case"eth_ecRecover":case"personal_sign":case"wallet_sign":case"personal_ecRecover":case"eth_signTransaction":case"eth_sendTransaction":case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":case"wallet_addEthereumChain":case"wallet_watchAsset":case"wallet_sendCalls":case"wallet_showCallsStatus":case"wallet_grantPermissions":return this.sendRequestToPopup(t);case"wallet_connect":{const v=await uf();if(v)return v;await((f=(p=this.communicator).waitForPopupLoaded)===null||f===void 0?void 0:f.call(p)),await Pn();const S=k.subAccountsConfig.get(),P=un(t,(l=S?.capabilities)!==null&&l!==void 0?l:{});return(g=this.callback)===null||g===void 0||g.call(this,"connect",{chainId:N(this.chain.id)}),this.sendRequestToPopup(P)}case"wallet_getSubAccounts":{const v=k.subAccounts.get();if(v?.address)return{subAccounts:[v]};if(!this.chain.rpcUrl)throw x.rpc.internal("No RPC URL set for chain");const S=await _t(t,this.chain.rpcUrl);if(De(S.subAccounts,"subAccounts"),S.subAccounts.length>0){$t(S.subAccounts[0]);const P=S.subAccounts[0];k.subAccounts.set({address:P.address,factory:P.factory,factoryData:P.factoryData})}return S}case"wallet_addSubAccount":return this.addSubAccount(t);case"coinbase_fetchPermissions":{Jd(t);const v=Qd(t),S=await _t(v,ns),P=xt((m=v.params)===null||m===void 0?void 0:m[0].chainId);return k.spendPermissions.set(S.permissions.map(A=>Object.assign(Object.assign({},A),{chainId:P}))),S}default:if(!this.chain.rpcUrl)throw x.rpc.internal("No RPC URL set for chain");return _t(t,this.chain.rpcUrl)}}async sendRequestToPopup(t){var n,r;await((r=(n=this.communicator).waitForPopupLoaded)===null||r===void 0?void 0:r.call(n));const i=await this.sendEncryptedRequest(t),a=await this.decryptResponseMessage(i);return this.handleResponse(t,a)}async handleResponse(t,n){var r,i,a,s,o;const c=n.result;if("error"in c)throw c.error;switch(t.method){case"eth_requestAccounts":{const u=c.value;this.accounts=u,k.account.set({accounts:u,chain:this.chain}),(r=this.callback)===null||r===void 0||r.call(this,"accountsChanged",u);break}case"wallet_connect":{const u=c.value,d=u.accounts.map(S=>S.address);this.accounts=d,k.account.set({accounts:d});const p=u.accounts.at(0),f=p?.capabilities;if(f?.subAccounts){const S=f?.subAccounts;De(S,"subAccounts"),$t(S[0]),k.subAccounts.set({address:S[0].address,factory:S[0].factory,factoryData:S[0].factoryData})}let l=[this.accounts[0]];const g=k.subAccounts.get(),m=k.subAccountsConfig.get();g?.address&&(this.accounts=m?.enableAutoSubAccounts?Gt(this.accounts,g.address):Ft(this.accounts,g.address));const v=(a=(i=u?.accounts)===null||i===void 0?void 0:i[0].capabilities)===null||a===void 0?void 0:a.spendPermissions;v&&"permissions"in v&&k.spendPermissions.set(v?.permissions),(s=this.callback)===null||s===void 0||s.call(this,"accountsChanged",l);break}case"wallet_addSubAccount":{$t(c.value);const u=c.value;k.subAccounts.set(u);const d=k.subAccountsConfig.get();this.accounts=d?.enableAutoSubAccounts?Gt(this.accounts,u.address):Ft(this.accounts,u.address),(o=this.callback)===null||o===void 0||o.call(this,"accountsChanged",this.accounts);break}}return c.value}async cleanup(){var t,n;const r=k.config.get().metadata;await this.keyManager.clear(),k.account.clear(),k.subAccounts.clear(),k.spendPermissions.clear(),k.chains.clear(),this.accounts=[],this.chain={id:(n=(t=r?.appChainIds)===null||t===void 0?void 0:t[0])!==null&&n!==void 0?n:1}}async handleSwitchChainRequest(t){Si(t.params);const n=kt(t.params[0].chainId);if(this.updateChain(n))return null;const i=await this.sendRequestToPopup(t);return i===null&&this.updateChain(n),i}async handleGetCapabilitiesRequest(t){Yd(t.params);const n=t.params[0],r=t.params[1];if(!this.accounts.some(o=>Gi(o,n)))throw x.provider.unauthorized("no active account found when getting capabilities");const i=k.getState().account.capabilities;if(!i)return{};if(!r||r.length===0)return i;const a=new Set(r.map(o=>xt(o)));return Object.fromEntries(Object.entries(i).filter(([o])=>{try{const c=xt(o);return a.has(c)}catch{return!1}}))}async sendEncryptedRequest(t){const n=await this.keyManager.getSharedSecret();if(!n)throw x.provider.unauthorized("No shared secret found when encrypting request");const r=await Hd({action:t,chainId:this.chain.id},n),i=we.get(t),a=await this.createRequestMessage({encrypted:r},i);return this.communicator.postRequestAndWaitForResponse(a)}async createRequestMessage(t,n){const r=await fs("public",await this.keyManager.getOwnPublicKey());return{id:crypto.randomUUID(),correlationId:n,sender:r,content:t,timestamp:new Date}}async decryptResponseMessage(t){var n,r,i;const a=t.content;if("failure"in a)throw a.failure;const s=await this.keyManager.getSharedSecret();if(!s)throw x.provider.unauthorized("Invalid session: no shared secret found when decrypting response");const o=await $d(a.encrypted,s),c=(n=o.data)===null||n===void 0?void 0:n.chains;if(c){const d=(r=o.data)===null||r===void 0?void 0:r.nativeCurrencies,p=Object.entries(c).map(([f,l])=>{const g=d?.[Number(f)];return Object.assign({id:Number(f),rpcUrl:l},g?{nativeCurrency:g}:{})});k.chains.set(p),this.updateChain(this.chain.id,p),bi(p)}const u=(i=o.data)===null||i===void 0?void 0:i.capabilities;return u&&k.account.set({capabilities:u}),o}updateChain(t,n){var r;const i=k.getState(),a=n??i.chains,s=a?.find(o=>o.id===t);return s?(s!==this.chain&&(this.chain=s,k.account.set({chain:s}),(r=this.callback)===null||r===void 0||r.call(this,"chainChanged",it(s.id))),!0):!1}async addSubAccount(t){var n,r,i,a;const o=k.getState().subAccount,c=k.subAccountsConfig.get();if(o?.address)return this.accounts=c?.enableAutoSubAccounts?Gt(this.accounts,o.address):Ft(this.accounts,o.address),(n=this.callback)===null||n===void 0||n.call(this,"accountsChanged",this.accounts),o;if(await((i=(r=this.communicator).waitForPopupLoaded)===null||i===void 0?void 0:i.call(r)),Array.isArray(t.params)&&t.params.length>0&&t.params[0].account&&t.params[0].account.type==="create"){let d;if(t.params[0].account.keys&&t.params[0].account.keys.length>0)d=t.params[0].account.keys;else{const p=(a=k.subAccountsConfig.get())!==null&&a!==void 0?a:{},{account:f}=p.toOwnerAccount?await p.toOwnerAccount():await hr();if(!f)throw x.provider.unauthorized("could not get subaccount owner account when adding sub account");d=[{type:f.address?"address":"webauthn-p256",publicKey:f.address||f.publicKey}]}t.params[0].account.keys=d}const u=await this.sendRequestToPopup(t);return $t(u),u}shouldRequestUseSubAccountSigner(t){const n=xi(t),r=k.subAccounts.get();return n?n.toLowerCase()===r?.address.toLowerCase():!1}async sendRequestToSubAccountSigner(t){var n;const r=k.subAccounts.get(),i=k.subAccountsConfig.get(),a=k.config.get();he(r?.address,x.provider.unauthorized("no active sub account when sending request to sub account signer"));const s=i?.toOwnerAccount?await i.toOwnerAccount():await hr();he(s?.account,x.provider.unauthorized("no active sub account owner when sending request to sub account signer")),xi(t)===void 0&&(t=Zd(t,r.address));const c=ls(this.chain.id);he(c,x.rpc.internal(`client not found for chainId ${this.chain.id} when sending request to sub account signer`));const u=this.accounts.find(g=>g.toLowerCase()!==r.address.toLowerCase());he(u,x.provider.unauthorized("no global account found when sending request to sub account signer"));const d=of({attribution:(n=a.preference)===null||n===void 0?void 0:n.attribution,dappOrigin:window.location.origin}),p=s.account.type==="local"?s.account.address:s.account.publicKey;let f=await vs({address:r.address,factory:r.factory,factoryData:r.factoryData,publicKey:p,client:c});if(f===-1){const g=we.get(t);Pd({method:t.method,correlationId:g});try{f=await bf({ownerAccount:s.account,globalAccountRequest:this.sendRequestToPopup.bind(this)}),Td({method:t.method,correlationId:g})}catch(m){return Bd({method:t.method,correlationId:g,errorMessage:Ve(m)}),x.provider.unauthorized("failed to add sub account owner when sending request to sub account signer")}}const{request:l}=await yf({address:r.address,owner:s.account,client:c,factory:r.factory,factoryData:r.factoryData,parentAddress:u,attribution:d?{suffix:d}:void 0,ownerIndex:f});try{return await l(t)}catch(g){let m;if(Wa(g))m=JSON.parse(g.details);else if(pi(g))m=g;else throw g;if(!(pi(m)&&m.data)||!m.data)throw g;const v=we.get(t);Md({method:t.method,correlationId:v});try{const S=await wf({errorData:m.data,globalAccountAddress:u,subAccountAddress:r.address,client:c,request:t,subAccountRequest:l,globalAccountRequest:this.request.bind(this)});return Ld({method:t.method,correlationId:v}),S}catch(S){throw console.error(S),jd({method:t.method,correlationId:v,errorMessage:Ve(S)}),g}}}}const vf=({method:e,correlationId:t})=>{G("walletlink_signer.handshake.started",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t},H.high)},Ef=({method:e,correlationId:t,errorMessage:n})=>{G("walletlink_signer.handshake.error",{action:U.error,componentType:D.unknown,method:e,correlationId:t,errorMessage:n},H.high)},xf=({method:e,correlationId:t})=>{G("walletlink_signer.handshake.completed",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t},H.high)},Sf=({method:e,correlationId:t})=>{G("walletlink_signer.request.started",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t},H.high)},kf=({method:e,correlationId:t,errorMessage:n})=>{G("walletlink_signer.request.error",{action:U.error,componentType:D.unknown,method:e,correlationId:t,errorMessage:n},H.high)},_f=({method:e,correlationId:t})=>{G("walletlink_signer.request.completed",{action:U.unknown,componentType:D.unknown,method:e,correlationId:t},H.high)},_i=()=>{G("walletlink_signer.walletlink_connection.connection_failed",{action:U.measurement,componentType:D.unknown},H.high)},Af=()=>{G("walletlink_signer.walletlink_connection.fetch_unseen_events_failed",{action:U.measurement,componentType:D.unknown},H.high)};var W={},ne={};Object.defineProperty(ne,"__esModule",{value:!0});ne.output=ne.exists=ne.hash=ne.bytes=ne.bool=ne.number=ne.isBytes=void 0;function ln(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`positive integer expected, not ${e}`)}ne.number=ln;function xs(e){if(typeof e!="boolean")throw new Error(`boolean expected, not ${e}`)}ne.bool=xs;function Ss(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}ne.isBytes=Ss;function Nr(e,...t){if(!Ss(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}ne.bytes=Nr;function ks(e){if(typeof e!="function"||typeof e.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");ln(e.outputLen),ln(e.blockLen)}ne.hash=ks;function _s(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}ne.exists=_s;function As(e,t){Nr(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}ne.output=As;const If={number:ln,bool:xs,bytes:Nr,hash:ks,exists:_s,output:As};ne.default=If;var B={};Object.defineProperty(B,"__esModule",{value:!0});B.add5L=B.add5H=B.add4H=B.add4L=B.add3H=B.add3L=B.add=B.rotlBL=B.rotlBH=B.rotlSL=B.rotlSH=B.rotr32L=B.rotr32H=B.rotrBL=B.rotrBH=B.rotrSL=B.rotrSH=B.shrSL=B.shrSH=B.toBig=B.split=B.fromBig=void 0;const qt=BigInt(2**32-1),mr=BigInt(32);function Rr(e,t=!1){return t?{h:Number(e&qt),l:Number(e>>mr&qt)}:{h:Number(e>>mr&qt)|0,l:Number(e&qt)|0}}B.fromBig=Rr;function Is(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:a,l:s}=Rr(e[i],t);[n[i],r[i]]=[a,s]}return[n,r]}B.split=Is;const Cs=(e,t)=>BigInt(e>>>0)<<mr|BigInt(t>>>0);B.toBig=Cs;const Os=(e,t,n)=>e>>>n;B.shrSH=Os;const Ps=(e,t,n)=>e<<32-n|t>>>n;B.shrSL=Ps;const Ts=(e,t,n)=>e>>>n|t<<32-n;B.rotrSH=Ts;const Bs=(e,t,n)=>e<<32-n|t>>>n;B.rotrSL=Bs;const Ms=(e,t,n)=>e<<64-n|t>>>n-32;B.rotrBH=Ms;const Ls=(e,t,n)=>e>>>n-32|t<<64-n;B.rotrBL=Ls;const js=(e,t)=>t;B.rotr32H=js;const Ns=(e,t)=>e;B.rotr32L=Ns;const Rs=(e,t,n)=>e<<n|t>>>32-n;B.rotlSH=Rs;const Ds=(e,t,n)=>t<<n|e>>>32-n;B.rotlSL=Ds;const Us=(e,t,n)=>t<<n-32|e>>>64-n;B.rotlBH=Us;const Hs=(e,t,n)=>e<<n-32|t>>>64-n;B.rotlBL=Hs;function $s(e,t,n,r){const i=(t>>>0)+(r>>>0);return{h:e+n+(i/2**32|0)|0,l:i|0}}B.add=$s;const Gs=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);B.add3L=Gs;const Fs=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;B.add3H=Fs;const zs=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);B.add4L=zs;const Vs=(e,t,n,r,i)=>t+n+r+i+(e/2**32|0)|0;B.add4H=Vs;const qs=(e,t,n,r,i)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(i>>>0);B.add5L=qs;const Ws=(e,t,n,r,i,a)=>t+n+r+i+a+(e/2**32|0)|0;B.add5H=Ws;const Cf={fromBig:Rr,split:Is,toBig:Cs,shrSH:Os,shrSL:Ps,rotrSH:Ts,rotrSL:Bs,rotrBH:Ms,rotrBL:Ls,rotr32H:js,rotr32L:Ns,rotlSH:Rs,rotlSL:Ds,rotlBH:Us,rotlBL:Hs,add:$s,add3L:Gs,add3H:Fs,add4L:zs,add4H:Vs,add5H:Ws,add5L:qs};B.default=Cf;var Ks={};const Of=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,Pf=Object.freeze(Object.defineProperty({__proto__:null,crypto:Of},Symbol.toStringTag,{value:"Module"})),Tf=sc(Pf);(function(e){/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */Object.defineProperty(e,"__esModule",{value:!0}),e.randomBytes=e.wrapXOFConstructorWithOpts=e.wrapConstructorWithOpts=e.wrapConstructor=e.checkOpts=e.Hash=e.concatBytes=e.toBytes=e.utf8ToBytes=e.asyncLoop=e.nextTick=e.hexToBytes=e.bytesToHex=e.byteSwap32=e.byteSwapIfBE=e.byteSwap=e.isLE=e.rotl=e.rotr=e.createView=e.u32=e.u8=e.isBytes=void 0;const t=Tf,n=ne;function r(b){return b instanceof Uint8Array||b!=null&&typeof b=="object"&&b.constructor.name==="Uint8Array"}e.isBytes=r;const i=b=>new Uint8Array(b.buffer,b.byteOffset,b.byteLength);e.u8=i;const a=b=>new Uint32Array(b.buffer,b.byteOffset,Math.floor(b.byteLength/4));e.u32=a;const s=b=>new DataView(b.buffer,b.byteOffset,b.byteLength);e.createView=s;const o=(b,h)=>b<<32-h|b>>>h;e.rotr=o;const c=(b,h)=>b<<h|b>>>32-h>>>0;e.rotl=c,e.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;const u=b=>b<<24&4278190080|b<<8&16711680|b>>>8&65280|b>>>24&255;e.byteSwap=u,e.byteSwapIfBE=e.isLE?b=>b:b=>(0,e.byteSwap)(b);function d(b){for(let h=0;h<b.length;h++)b[h]=(0,e.byteSwap)(b[h])}e.byteSwap32=d;const p=Array.from({length:256},(b,h)=>h.toString(16).padStart(2,"0"));function f(b){(0,n.bytes)(b);let h="";for(let w=0;w<b.length;w++)h+=p[b[w]];return h}e.bytesToHex=f;const l={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function g(b){if(b>=l._0&&b<=l._9)return b-l._0;if(b>=l._A&&b<=l._F)return b-(l._A-10);if(b>=l._a&&b<=l._f)return b-(l._a-10)}function m(b){if(typeof b!="string")throw new Error("hex string expected, got "+typeof b);const h=b.length,w=h/2;if(h%2)throw new Error("padded hex string expected, got unpadded hex of length "+h);const y=new Uint8Array(w);for(let E=0,_=0;E<w;E++,_+=2){const T=g(b.charCodeAt(_)),O=g(b.charCodeAt(_+1));if(T===void 0||O===void 0){const I=b[_]+b[_+1];throw new Error('hex string expected, got non-hex character "'+I+'" at index '+_)}y[E]=T*16+O}return y}e.hexToBytes=m;const v=async()=>{};e.nextTick=v;async function S(b,h,w){let y=Date.now();for(let E=0;E<b;E++){w(E);const _=Date.now()-y;_>=0&&_<h||(await(0,e.nextTick)(),y+=_)}}e.asyncLoop=S;function P(b){if(typeof b!="string")throw new Error(`utf8ToBytes expected string, got ${typeof b}`);return new Uint8Array(new TextEncoder().encode(b))}e.utf8ToBytes=P;function A(b){return typeof b=="string"&&(b=P(b)),(0,n.bytes)(b),b}e.toBytes=A;function C(...b){let h=0;for(let y=0;y<b.length;y++){const E=b[y];(0,n.bytes)(E),h+=E.length}const w=new Uint8Array(h);for(let y=0,E=0;y<b.length;y++){const _=b[y];w.set(_,E),E+=_.length}return w}e.concatBytes=C;class F{clone(){return this._cloneInto()}}e.Hash=F;const M={}.toString;function z(b,h){if(h!==void 0&&M.call(h)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(b,h)}e.checkOpts=z;function oe(b){const h=y=>b().update(A(y)).digest(),w=b();return h.outputLen=w.outputLen,h.blockLen=w.blockLen,h.create=()=>b(),h}e.wrapConstructor=oe;function $(b){const h=(y,E)=>b(E).update(A(y)).digest(),w=b({});return h.outputLen=w.outputLen,h.blockLen=w.blockLen,h.create=y=>b(y),h}e.wrapConstructorWithOpts=$;function Xe(b){const h=(y,E)=>b(E).update(A(y)).digest(),w=b({});return h.outputLen=w.outputLen,h.blockLen=w.blockLen,h.create=y=>b(y),h}e.wrapXOFConstructorWithOpts=Xe;function Ae(b=32){if(t.crypto&&typeof t.crypto.getRandomValues=="function")return t.crypto.getRandomValues(new Uint8Array(b));throw new Error("crypto.getRandomValues must be defined")}e.randomBytes=Ae})(Ks);Object.defineProperty(W,"__esModule",{value:!0});W.shake256=W.shake128=W.keccak_512=W.keccak_384=W.keccak_256=W.keccak_224=W.sha3_512=W.sha3_384=W.sha3_256=W.sha3_224=W.Keccak=W.keccakP=void 0;const tt=ne,Tt=B,Oe=Ks,Zs=[],Ys=[],Js=[],Bf=BigInt(0),vt=BigInt(1),Mf=BigInt(2),Lf=BigInt(7),jf=BigInt(256),Nf=BigInt(113);for(let e=0,t=vt,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],Zs.push(2*(5*r+n)),Ys.push((e+1)*(e+2)/2%64);let i=Bf;for(let a=0;a<7;a++)t=(t<<vt^(t>>Lf)*Nf)%jf,t&Mf&&(i^=vt<<(vt<<BigInt(a))-vt);Js.push(i)}const[Rf,Df]=(0,Tt.split)(Js,!0),Ai=(e,t,n)=>n>32?(0,Tt.rotlBH)(e,t,n):(0,Tt.rotlSH)(e,t,n),Ii=(e,t,n)=>n>32?(0,Tt.rotlBL)(e,t,n):(0,Tt.rotlSL)(e,t,n);function Qs(e,t=24){const n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let s=0;s<10;s++)n[s]=e[s]^e[s+10]^e[s+20]^e[s+30]^e[s+40];for(let s=0;s<10;s+=2){const o=(s+8)%10,c=(s+2)%10,u=n[c],d=n[c+1],p=Ai(u,d,1)^n[o],f=Ii(u,d,1)^n[o+1];for(let l=0;l<50;l+=10)e[s+l]^=p,e[s+l+1]^=f}let i=e[2],a=e[3];for(let s=0;s<24;s++){const o=Ys[s],c=Ai(i,a,o),u=Ii(i,a,o),d=Zs[s];i=e[d],a=e[d+1],e[d]=c,e[d+1]=u}for(let s=0;s<50;s+=10){for(let o=0;o<10;o++)n[o]=e[s+o];for(let o=0;o<10;o++)e[s+o]^=~n[(o+2)%10]&n[(o+4)%10]}e[0]^=Rf[r],e[1]^=Df[r]}n.fill(0)}W.keccakP=Qs;class Mt extends Oe.Hash{constructor(t,n,r,i=!1,a=24){if(super(),this.blockLen=t,this.suffix=n,this.outputLen=r,this.enableXOF=i,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,tt.number)(r),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Oe.u32)(this.state)}keccak(){Oe.isLE||(0,Oe.byteSwap32)(this.state32),Qs(this.state32,this.rounds),Oe.isLE||(0,Oe.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(t){(0,tt.exists)(this);const{blockLen:n,state:r}=this;t=(0,Oe.toBytes)(t);const i=t.length;for(let a=0;a<i;){const s=Math.min(n-this.pos,i-a);for(let o=0;o<s;o++)r[this.pos++]^=t[a++];this.pos===n&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:t,suffix:n,pos:r,blockLen:i}=this;t[r]^=n,n&128&&r===i-1&&this.keccak(),t[i-1]^=128,this.keccak()}writeInto(t){(0,tt.exists)(this,!1),(0,tt.bytes)(t),this.finish();const n=this.state,{blockLen:r}=this;for(let i=0,a=t.length;i<a;){this.posOut>=r&&this.keccak();const s=Math.min(r-this.posOut,a-i);t.set(n.subarray(this.posOut,this.posOut+s),i),this.posOut+=s,i+=s}return t}xofInto(t){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(t)}xof(t){return(0,tt.number)(t),this.xofInto(new Uint8Array(t))}digestInto(t){if((0,tt.output)(t,this),this.finished)throw new Error("digest() was already called");return this.writeInto(t),this.destroy(),t}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(t){const{blockLen:n,suffix:r,outputLen:i,rounds:a,enableXOF:s}=this;return t||(t=new Mt(n,r,i,s,a)),t.state32.set(this.state32),t.pos=this.pos,t.posOut=this.posOut,t.finished=this.finished,t.rounds=a,t.suffix=r,t.outputLen=i,t.enableXOF=s,t.destroyed=this.destroyed,t}}W.Keccak=Mt;const Fe=(e,t,n)=>(0,Oe.wrapConstructor)(()=>new Mt(t,e,n));W.sha3_224=Fe(6,144,224/8);W.sha3_256=Fe(6,136,256/8);W.sha3_384=Fe(6,104,384/8);W.sha3_512=Fe(6,72,512/8);W.keccak_224=Fe(1,144,224/8);W.keccak_256=Fe(1,136,256/8);W.keccak_384=Fe(1,104,384/8);W.keccak_512=Fe(1,72,512/8);const Xs=(e,t,n)=>(0,Oe.wrapXOFConstructorWithOpts)((r={})=>new Mt(t,e,r.dkLen===void 0?n:r.dkLen,!0));W.shake128=Xs(31,168,128/8);W.shake256=Xs(31,136,256/8);const{keccak_256:Uf}=W;function eo(e){return Buffer.allocUnsafe(e).fill(0)}function Hf(e){return`0x${e.toString(16)}`}function $f(e){const t=Hf(e);return new Buffer(ro(t.slice(2)),"hex")}function Gf(e){return e.toString(2).length}function to(e,t){let n=e.toString(16);n.length%2!==0&&(n="0"+n);const r=n.match(/.{1,2}/g).map(i=>parseInt(i,16));for(;r.length<t;)r.unshift(0);return Buffer.from(r)}function Ff(e,t){const n=e<0n;let r;if(n){const i=(1n<<BigInt(t))-1n;r=(~e&i)+1n}else r=e;return r&=(1n<<BigInt(t))-1n,r}function no(e,t,n){const r=eo(t);return e=vn(e),n?e.length<t?(e.copy(r),r):e.slice(0,t):e.length<t?(e.copy(r,t-e.length),r):e.slice(-t)}function zf(e,t){return no(e,t,!0)}function vn(e){if(!Buffer.isBuffer(e))if(Array.isArray(e))e=Buffer.from(e);else if(typeof e=="string")io(e)?e=Buffer.from(ro(ao(e)),"hex"):e=Buffer.from(e);else if(typeof e=="number")e=$f(e);else if(e==null)e=Buffer.allocUnsafe(0);else if(typeof e=="bigint")e=to(e);else if(e.toArray)e=Buffer.from(e.toArray());else throw new Error("invalid type");return e}function Vf(e){return e=vn(e),"0x"+e.toString("hex")}function qf(e,t){if(e=vn(e),t||(t=256),t!==256)throw new Error("unsupported");return Buffer.from(Uf(new Uint8Array(e)))}function ro(e){return e.length%2?"0"+e:e}function io(e){return typeof e=="string"&&e.match(/^0x[0-9A-Fa-f]*$/)}function ao(e){return typeof e=="string"&&e.startsWith("0x")?e.slice(2):e}var so={zeros:eo,setLength:no,setLengthRight:zf,isHexString:io,stripHexPrefix:ao,toBuffer:vn,bufferToHex:Vf,keccak:qf,bitLengthFromBigInt:Gf,bufferBEFromBigInt:to,twosFromBigInt:Ff};const ae=so;function oo(e){return e.startsWith("int[")?"int256"+e.slice(3):e==="int"?"int256":e.startsWith("uint[")?"uint256"+e.slice(4):e==="uint"?"uint256":e.startsWith("fixed[")?"fixed128x128"+e.slice(5):e==="fixed"?"fixed128x128":e.startsWith("ufixed[")?"ufixed128x128"+e.slice(6):e==="ufixed"?"ufixed128x128":e}function dt(e){return Number.parseInt(/^\D+(\d+)$/.exec(e)[1],10)}function Ci(e){var t=/^\D+(\d+)x(\d+)$/.exec(e);return[Number.parseInt(t[1],10),Number.parseInt(t[2],10)]}function co(e){var t=e.match(/(.*)\[(.*?)\]$/);return t?t[2]===""?"dynamic":Number.parseInt(t[2],10):null}function qe(e){var t=typeof e;if(t==="string"||t==="number")return BigInt(e);if(t==="bigint")return e;throw new Error("Argument is not a number")}function Se(e,t){var n,r,i,a;if(e==="address")return Se("uint160",qe(t));if(e==="bool")return Se("uint8",t?1:0);if(e==="string")return Se("bytes",new Buffer(t,"utf8"));if(Kf(e)){if(typeof t.length>"u")throw new Error("Not an array?");if(n=co(e),n!=="dynamic"&&n!==0&&t.length>n)throw new Error("Elements exceed array size: "+n);i=[],e=e.slice(0,e.lastIndexOf("[")),typeof t=="string"&&(t=JSON.parse(t));for(a in t)i.push(Se(e,t[a]));if(n==="dynamic"){var s=Se("uint256",t.length);i.unshift(s)}return Buffer.concat(i)}else{if(e==="bytes")return t=new Buffer(t),i=Buffer.concat([Se("uint256",t.length),t]),t.length%32!==0&&(i=Buffer.concat([i,ae.zeros(32-t.length%32)])),i;if(e.startsWith("bytes")){if(n=dt(e),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);return ae.setLengthRight(t,32)}else if(e.startsWith("uint")){if(n=dt(e),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);r=qe(t);const o=ae.bitLengthFromBigInt(r);if(o>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+o);if(r<0)throw new Error("Supplied uint is negative");return ae.bufferBEFromBigInt(r,32)}else if(e.startsWith("int")){if(n=dt(e),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);r=qe(t);const o=ae.bitLengthFromBigInt(r);if(o>n)throw new Error("Supplied int exceeds width: "+n+" vs "+o);const c=ae.twosFromBigInt(r,256);return ae.bufferBEFromBigInt(c,32)}else if(e.startsWith("ufixed")){if(n=Ci(e),r=qe(t),r<0)throw new Error("Supplied ufixed is negative");return Se("uint256",r*BigInt(2)**BigInt(n[1]))}else if(e.startsWith("fixed"))return n=Ci(e),Se("int256",qe(t)*BigInt(2)**BigInt(n[1]))}throw new Error("Unsupported or invalid type: "+e)}function Wf(e){return e==="string"||e==="bytes"||co(e)==="dynamic"}function Kf(e){return e.lastIndexOf("]")===e.length-1}function Zf(e,t){var n=[],r=[],i=32*e.length;for(var a in e){var s=oo(e[a]),o=t[a],c=Se(s,o);Wf(s)?(n.push(Se("uint256",i)),r.push(c),i+=c.length):n.push(c)}return Buffer.concat(n.concat(r))}function uo(e,t){if(e.length!==t.length)throw new Error("Number of types are not matching the values");for(var n,r,i=[],a=0;a<e.length;a++){var s=oo(e[a]),o=t[a];if(s==="bytes")i.push(o);else if(s==="string")i.push(new Buffer(o,"utf8"));else if(s==="bool")i.push(new Buffer(o?"01":"00","hex"));else if(s==="address")i.push(ae.setLength(o,20));else if(s.startsWith("bytes")){if(n=dt(s),n<1||n>32)throw new Error("Invalid bytes<N> width: "+n);i.push(ae.setLengthRight(o,n))}else if(s.startsWith("uint")){if(n=dt(s),n%8||n<8||n>256)throw new Error("Invalid uint<N> width: "+n);r=qe(o);const c=ae.bitLengthFromBigInt(r);if(c>n)throw new Error("Supplied uint exceeds width: "+n+" vs "+c);i.push(ae.bufferBEFromBigInt(r,n/8))}else if(s.startsWith("int")){if(n=dt(s),n%8||n<8||n>256)throw new Error("Invalid int<N> width: "+n);r=qe(o);const c=ae.bitLengthFromBigInt(r);if(c>n)throw new Error("Supplied int exceeds width: "+n+" vs "+c);const u=ae.twosFromBigInt(r,n);i.push(ae.bufferBEFromBigInt(u,n/8))}else throw new Error("Unsupported or invalid type: "+s)}return Buffer.concat(i)}function Yf(e,t){return ae.keccak(uo(e,t))}var Jf={rawEncode:Zf,solidityPack:uo,soliditySHA3:Yf};const ge=so,It=Jf,lo={type:"object",properties:{types:{type:"object",additionalProperties:{type:"array",items:{type:"object",properties:{name:{type:"string"},type:{type:"string"}},required:["name","type"]}}},primaryType:{type:"string"},domain:{type:"object"},message:{type:"object"}},required:["types","primaryType","domain","message"]},Bn={encodeData(e,t,n,r=!0){const i=["bytes32"],a=[this.hashType(e,n)];if(r){const s=(o,c,u)=>{if(n[c]!==void 0)return["bytes32",u==null?"0x0000000000000000000000000000000000000000000000000000000000000000":ge.keccak(this.encodeData(c,u,n,r))];if(u===void 0)throw new Error(`missing value for field ${o} of type ${c}`);if(c==="bytes")return["bytes32",ge.keccak(u)];if(c==="string")return typeof u=="string"&&(u=Buffer.from(u,"utf8")),["bytes32",ge.keccak(u)];if(c.lastIndexOf("]")===c.length-1){const d=c.slice(0,c.lastIndexOf("[")),p=u.map(f=>s(o,d,f));return["bytes32",ge.keccak(It.rawEncode(p.map(([f])=>f),p.map(([,f])=>f)))]}return[c,u]};for(const o of n[e]){const[c,u]=s(o.name,o.type,t[o.name]);i.push(c),a.push(u)}}else for(const s of n[e]){let o=t[s.name];if(o!==void 0)if(s.type==="bytes")i.push("bytes32"),o=ge.keccak(o),a.push(o);else if(s.type==="string")i.push("bytes32"),typeof o=="string"&&(o=Buffer.from(o,"utf8")),o=ge.keccak(o),a.push(o);else if(n[s.type]!==void 0)i.push("bytes32"),o=ge.keccak(this.encodeData(s.type,o,n,r)),a.push(o);else{if(s.type.lastIndexOf("]")===s.type.length-1)throw new Error("Arrays currently unimplemented in encodeData");i.push(s.type),a.push(o)}}return It.rawEncode(i,a)},encodeType(e,t){let n="",r=this.findTypeDependencies(e,t).filter(i=>i!==e);r=[e].concat(r.sort());for(const i of r){if(!t[i])throw new Error("No type definition specified: "+i);n+=i+"("+t[i].map(({name:s,type:o})=>o+" "+s).join(",")+")"}return n},findTypeDependencies(e,t,n=[]){if(e=e.match(/^\w*/)[0],n.includes(e)||t[e]===void 0)return n;n.push(e);for(const r of t[e])for(const i of this.findTypeDependencies(r.type,t,n))!n.includes(i)&&n.push(i);return n},hashStruct(e,t,n,r=!0){return ge.keccak(this.encodeData(e,t,n,r))},hashType(e,t){return ge.keccak(this.encodeType(e,t))},sanitizeData(e){const t={};for(const n in lo.properties)e[n]&&(t[n]=e[n]);return t.types&&(t.types=Object.assign({EIP712Domain:[]},t.types)),t},hash(e,t=!0){const n=this.sanitizeData(e),r=[Buffer.from("1901","hex")];return r.push(this.hashStruct("EIP712Domain",n.domain,n.types,t)),n.primaryType!=="EIP712Domain"&&r.push(this.hashStruct(n.primaryType,n.message,n.types,t)),ge.keccak(Buffer.concat(r))}};var Qf={TYPED_MESSAGE_SCHEMA:lo,TypedDataUtils:Bn,hashForSignTypedDataLegacy:function(e){return Xf(e.data)},hashForSignTypedData_v3:function(e){return Bn.hash(e.data,!1)},hashForSignTypedData_v4:function(e){return Bn.hash(e.data)}};function Xf(e){const t=new Error("Expect argument to be non-empty array");if(typeof e!="object"||!e.length)throw t;const n=e.map(function(a){return a.type==="bytes"?ge.toBuffer(a.value):a.value}),r=e.map(function(a){return a.type}),i=e.map(function(a){if(!a.name)throw t;return a.type+" "+a.name});return It.soliditySHA3(["bytes32","bytes32"],[It.soliditySHA3(new Array(e.length).fill("string"),i),It.soliditySHA3(r,n)])}const Wt=oc(Qf),ep="walletUsername",yr="Addresses",tp="AppVersion";class np{constructor(t){this.secret=t}async encrypt(t){const n=this.secret;if(n.length!==64)throw new Error("secret must be 256 bits");const r=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.importKey("raw",Kt(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]),a=new TextEncoder,s=await window.crypto.subtle.encrypt({name:"AES-GCM",iv:r},i,a.encode(t)),o=16,c=s.slice(s.byteLength-o),u=s.slice(0,s.byteLength-o),d=new Uint8Array(c),p=new Uint8Array(u),f=new Uint8Array([...r,...d,...p]);return Tr(f)}async decrypt(t){const n=this.secret;if(n.length!==64)throw new Error("secret must be 256 bits");return new Promise((r,i)=>{(async()=>{const a=await crypto.subtle.importKey("raw",Kt(n),{name:"aes-gcm"},!1,["encrypt","decrypt"]),s=Kt(t),o=s.slice(0,12),c=s.slice(12,28),u=s.slice(28),d=new Uint8Array([...u,...c]),p={name:"AES-GCM",iv:new Uint8Array(o)};try{const f=await window.crypto.subtle.decrypt(p,a,d),l=new TextDecoder;r(l.decode(f))}catch(f){i(f)}})()})}}class rp{constructor(t,n,r){this.linkAPIUrl=t,this.sessionId=n;const i=`${n}:${r}`;this.auth=`Basic ${btoa(i)}`}async markUnseenEventsAsSeen(t){return Promise.all(t.map(n=>fetch(`${this.linkAPIUrl}/events/${n.eventId}/seen`,{method:"POST",headers:{Authorization:this.auth}}))).catch(n=>console.error("Unable to mark events as seen:",n))}async fetchUnseenEvents(){var t;const n=await fetch(`${this.linkAPIUrl}/events?unseen=true`,{headers:{Authorization:this.auth}});if(n.ok){const{events:r,error:i}=await n.json();if(i)throw new Error(`Check unseen events failed: ${i}`);const a=(t=r?.filter(s=>s.event==="Web3Response").map(s=>({type:"Event",sessionId:this.sessionId,eventId:s.id,event:s.event,data:s.data})))!==null&&t!==void 0?t:[];return this.markUnseenEventsAsSeen(a),a}throw new Error(`Check unseen events failed: ${n.status}`)}}var ke;(function(e){e[e.DISCONNECTED=0]="DISCONNECTED",e[e.CONNECTING=1]="CONNECTING",e[e.CONNECTED=2]="CONNECTED"})(ke||(ke={}));class le{setConnectionStateListener(t){this.connectionStateListener=t}setIncomingDataListener(t){this.incomingDataListener=t}constructor(t,n=WebSocket){this.WebSocketClass=n,this.webSocket=null,this.isDisconnecting=!1,this.url=t.replace(/^http/,"ws"),this.instanceId=le.instanceCounter++,le.activeInstances.add(this.instanceId)}async connect(){if(this.webSocket)throw new Error("webSocket object is not null");if(this.isDisconnecting)throw new Error("WebSocket is disconnecting, cannot reconnect on same instance");return new Promise((t,n)=>{var r;let i;try{this.webSocket=i=new this.WebSocketClass(this.url)}catch(a){n(a);return}(r=this.connectionStateListener)===null||r===void 0||r.call(this,ke.CONNECTING),i.onclose=a=>{var s;this.clearWebSocket(),i.readyState!==WebSocket.OPEN&&n(new Error(`websocket error ${a.code}: ${a.reason}`)),(s=this.connectionStateListener)===null||s===void 0||s.call(this,ke.DISCONNECTED)},i.onopen=a=>{var s;t(),(s=this.connectionStateListener)===null||s===void 0||s.call(this,ke.CONNECTED),le.pendingData.length>0&&([...le.pendingData].forEach(c=>this.sendData(c)),le.pendingData=[])},i.onmessage=a=>{var s,o;if(a.data==="h")(s=this.incomingDataListener)===null||s===void 0||s.call(this,{type:"Heartbeat"});else try{const c=JSON.parse(a.data);(o=this.incomingDataListener)===null||o===void 0||o.call(this,c)}catch{}}})}disconnect(){var t;const{webSocket:n}=this;if(n){this.isDisconnecting=!0,this.clearWebSocket(),(t=this.connectionStateListener)===null||t===void 0||t.call(this,ke.DISCONNECTED),this.connectionStateListener=void 0,this.incomingDataListener=void 0;try{n.close()}catch{}}}sendData(t){const{webSocket:n}=this;if(!n){le.pendingData.push(t),this.isDisconnecting||this.connect();return}if(n.readyState!==WebSocket.OPEN){le.pendingData.push(t);return}n.send(t)}clearWebSocket(){const{webSocket:t}=this;t&&(this.webSocket=null,t.onclose=null,t.onerror=null,t.onmessage=null,t.onopen=null)}cleanup(){le.activeInstances.delete(this.instanceId)}}le.instanceCounter=0;le.activeInstances=new Set;le.pendingData=[];const Oi=1e4,ip=6e4;class ap{constructor({session:t,linkAPIUrl:n,listener:r}){this.destroyed=!1,this.lastHeartbeatResponse=0,this.nextReqId=Te(1),this.reconnectAttempts=0,this.isReconnecting=!1,this._connected=!1,this._linked=!1,this.requestResolutions=new Map,this.handleSessionMetadataUpdated=a=>{if(!a)return;new Map([["__destroyed",this.handleDestroyed],["EthereumAddress",this.handleAccountUpdated],["WalletUsername",this.handleWalletUsernameUpdated],["AppVersion",this.handleAppVersionUpdated],["ChainId",o=>a.JsonRpcUrl&&this.handleChainUpdated(o,a.JsonRpcUrl)]]).forEach((o,c)=>{const u=a[c];u!==void 0&&o(u)})},this.handleDestroyed=a=>{var s;a==="1"&&((s=this.listener)===null||s===void 0||s.resetAndReload())},this.handleAccountUpdated=async a=>{var s;try{const o=await this.cipher.decrypt(a);(s=this.listener)===null||s===void 0||s.accountUpdated(o)}catch{}},this.handleMetadataUpdated=async(a,s)=>{var o;try{const c=await this.cipher.decrypt(s);(o=this.listener)===null||o===void 0||o.metadataUpdated(a,c)}catch{}},this.handleWalletUsernameUpdated=async a=>{this.handleMetadataUpdated(ep,a)},this.handleAppVersionUpdated=async a=>{this.handleMetadataUpdated(tp,a)},this.handleChainUpdated=async(a,s)=>{var o;try{const c=await this.cipher.decrypt(a),u=await this.cipher.decrypt(s);(o=this.listener)===null||o===void 0||o.chainUpdated(c,u)}catch{}},this.session=t,this.cipher=new np(t.secret),this.listener=r,this.linkAPIUrl=n,this.WebSocketClass=WebSocket;const i=this.createWebSocket();this.ws=i,this.http=new rp(n,t.id,t.key),this.setupVisibilityChangeHandler()}createWebSocket(){const t=new le(`${this.linkAPIUrl}/rpc`,this.WebSocketClass);return this.activeWsInstance=t,t.setConnectionStateListener(async n=>{if(t!==this.activeWsInstance)return;let r=!1;switch(n){case ke.DISCONNECTED:this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=void 0),this.lastHeartbeatResponse=0,r=!1,this.destroyed||(async()=>{if(this.isReconnecting)return;this.isReconnecting=!0;const a=this.reconnectAttempts===0?0:3e3;await new Promise(s=>setTimeout(s,a)),!this.destroyed&&t===this.activeWsInstance?(this.reconnectAttempts++,"cleanup"in this.ws&&typeof this.ws.cleanup=="function"&&this.ws.cleanup(),this.ws=this.createWebSocket(),this.ws.connect().catch(()=>{_i()}).finally(()=>{this.isReconnecting=!1})):this.isReconnecting=!1})();break;case ke.CONNECTED:this.reconnectAttempts=0;try{r=await this.handleConnected(),this.fetchUnseenEventsAPI().catch(()=>{})}catch{break}this.connected=r,this.updateLastHeartbeat(),this.heartbeatIntervalId&&clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=window.setInterval(()=>{this.heartbeat()},Oi),setTimeout(()=>{this.heartbeat()},100);break;case ke.CONNECTING:break}n!==ke.CONNECTED&&(this.connected=r)}),t.setIncomingDataListener(n=>{var r;switch(n.type){case"Heartbeat":this.updateLastHeartbeat();return;case"IsLinkedOK":case"Linked":{const i=n.type==="IsLinkedOK"?n.linked:void 0;this.linked=i||n.onlineGuests>0;break}case"GetSessionConfigOK":case"SessionConfigUpdated":{this.handleSessionMetadataUpdated(n.metadata);break}case"Event":{this.handleIncomingEvent(n);break}}n.id!==void 0&&((r=this.requestResolutions.get(n.id))===null||r===void 0||r(n))}),t}setupVisibilityChangeHandler(){this.visibilityChangeHandler=()=>{!document.hidden&&!this.destroyed&&(this.connected?this.heartbeat():this.reconnectWithFreshWebSocket())},this.focusHandler=()=>{!this.destroyed&&!this.connected&&this.reconnectWithFreshWebSocket()},document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("focus",this.focusHandler),window.addEventListener("pageshow",t=>{t.persisted&&this.focusHandler&&this.focusHandler()})}reconnectWithFreshWebSocket(){if(this.destroyed)return;const t=this.ws;this.activeWsInstance=void 0,t.disconnect(),"cleanup"in t&&typeof t.cleanup=="function"&&t.cleanup(),this.ws=this.createWebSocket(),this.ws.connect().catch(()=>{_i()})}connect(){if(this.destroyed)throw new Error("instance is destroyed");this.ws.connect()}async destroy(){this.destroyed||(await this.makeRequest({type:"SetSessionConfig",id:Te(this.nextReqId++),sessionId:this.session.id,metadata:{__destroyed:"1"}},{timeout:1e3}),this.destroyed=!0,this.activeWsInstance=void 0,this.heartbeatIntervalId&&(clearInterval(this.heartbeatIntervalId),this.heartbeatIntervalId=void 0),this.visibilityChangeHandler&&document.removeEventListener("visibilitychange",this.visibilityChangeHandler),this.focusHandler&&window.removeEventListener("focus",this.focusHandler),this.ws.disconnect(),"cleanup"in this.ws&&typeof this.ws.cleanup=="function"&&this.ws.cleanup(),this.listener=void 0)}get connected(){return this._connected}set connected(t){this._connected=t}get linked(){return this._linked}set linked(t){var n,r;this._linked=t,t&&((n=this.onceLinked)===null||n===void 0||n.call(this)),(r=this.listener)===null||r===void 0||r.linkedUpdated(t)}setOnceLinked(t){return new Promise(n=>{this.linked?t().then(n):this.onceLinked=()=>{t().then(n),this.onceLinked=void 0}})}async handleIncomingEvent(t){var n;if(!(t.type!=="Event"||t.event!=="Web3Response"))try{const r=await this.cipher.decrypt(t.data),i=JSON.parse(r);if(i.type!=="WEB3_RESPONSE")return;(n=this.listener)===null||n===void 0||n.handleWeb3ResponseMessage(i.id,i.response)}catch{}}async checkUnseenEvents(){await new Promise(t=>setTimeout(t,250));try{await this.fetchUnseenEventsAPI()}catch(t){console.error("Unable to check for unseen events",t)}}async fetchUnseenEventsAPI(){try{(await this.http.fetchUnseenEvents()).forEach(n=>{this.handleIncomingEvent(n)})}catch{Af()}}async publishEvent(t,n,r=!1){const i=await this.cipher.encrypt(JSON.stringify(Object.assign(Object.assign({},n),{origin:location.origin,location:location.href,relaySource:"coinbaseWalletExtension"in window&&window.coinbaseWalletExtension?"injected_sdk":"sdk"}))),a={type:"PublishEvent",id:Te(this.nextReqId++),sessionId:this.session.id,event:t,data:i,callWebhook:r};return this.setOnceLinked(async()=>{const s=await this.makeRequest(a);if(s.type==="Fail")throw new Error(s.error||"failed to publish event");return s.eventId})}sendData(t){this.ws.sendData(JSON.stringify(t))}updateLastHeartbeat(){this.lastHeartbeatResponse=Date.now()}heartbeat(){if(Date.now()-this.lastHeartbeatResponse>Oi*2){this.ws.disconnect();return}if(this.connected)try{this.ws.sendData("h")}catch{}}async makeRequest(t,n={timeout:ip}){const r=t.id;this.sendData(t);let i;return Promise.race([new Promise((a,s)=>{i=window.setTimeout(()=>{s(new Error(`request ${r} timed out`))},n.timeout)}),new Promise(a=>{this.requestResolutions.set(r,s=>{clearTimeout(i),a(s),this.requestResolutions.delete(r)})})])}async handleConnected(){return(await this.makeRequest({type:"HostSession",id:Te(this.nextReqId++),sessionId:this.session.id,sessionKey:this.session.key})).type==="Fail"?!1:(this.sendData({type:"IsLinked",id:Te(this.nextReqId++),sessionId:this.session.id}),this.sendData({type:"GetSessionConfig",id:Te(this.nextReqId++),sessionId:this.session.id}),!0)}}class sp{constructor(){this._nextRequestId=0,this.callbacks=new Map}makeRequestId(){this._nextRequestId=(this._nextRequestId+1)%2147483647;const t=this._nextRequestId,n=Qa(t.toString(16));return this.callbacks.get(n)&&this.callbacks.delete(n),t}}function op(e){return e instanceof Uint8Array||e!=null&&typeof e=="object"&&e.constructor.name==="Uint8Array"}function Dr(e,...t){if(!op(e))throw new Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw new Error(`Uint8Array expected of length ${t}, not of length=${e.length}`)}function Pi(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")}function cp(e,t){Dr(e);const n=t.outputLen;if(e.length<n)throw new Error(`digestInto() expects output buffer of length at least ${n}`)}/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Mn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),xe=(e,t)=>e<<32-t|e>>>t;new Uint8Array(new Uint32Array([287454020]).buffer)[0];const up=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function lp(e){Dr(e);let t="";for(let n=0;n<e.length;n++)t+=up[e[n]];return t}function dp(e){if(typeof e!="string")throw new Error(`utf8ToBytes expected string, got ${typeof e}`);return new Uint8Array(new TextEncoder().encode(e))}function fo(e){return typeof e=="string"&&(e=dp(e)),Dr(e),e}class fp{clone(){return this._cloneInto()}}function pp(e){const t=r=>e().update(fo(r)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function hp(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const i=BigInt(32),a=BigInt(4294967295),s=Number(n>>i&a),o=Number(n&a),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,o,r)}const mp=(e,t,n)=>e&t^~e&n,yp=(e,t,n)=>e&t^e&n^t&n;class gp extends fp{constructor(t,n,r,i){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Mn(this.buffer)}update(t){Pi(this);const{view:n,buffer:r,blockLen:i}=this;t=fo(t);const a=t.length;for(let s=0;s<a;){const o=Math.min(i-this.pos,a-s);if(o===i){const c=Mn(t);for(;i<=a-s;s+=i)this.process(c,s);continue}r.set(t.subarray(s,s+o),this.pos),this.pos+=o,s+=o,this.pos===i&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){Pi(this),cp(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:i,isLE:a}=this;let{pos:s}=this;n[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let p=s;p<i;p++)n[p]=0;hp(r,i-8,BigInt(this.length*8),a),this.process(r,0);const o=Mn(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let p=0;p<u;p++)o.setUint32(4*p,d[p],a)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:i,finished:a,destroyed:s,pos:o}=this;return t.length=i,t.pos=o,t.finished=a,t.destroyed=s,i%n&&t.buffer.set(r),t}}const bp=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ne=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Re=new Uint32Array(64);class wp extends gp{constructor(){super(64,32,8,!1),this.A=Ne[0]|0,this.B=Ne[1]|0,this.C=Ne[2]|0,this.D=Ne[3]|0,this.E=Ne[4]|0,this.F=Ne[5]|0,this.G=Ne[6]|0,this.H=Ne[7]|0}get(){const{A:t,B:n,C:r,D:i,E:a,F:s,G:o,H:c}=this;return[t,n,r,i,a,s,o,c]}set(t,n,r,i,a,s,o,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=i|0,this.E=a|0,this.F=s|0,this.G=o|0,this.H=c|0}process(t,n){for(let p=0;p<16;p++,n+=4)Re[p]=t.getUint32(n,!1);for(let p=16;p<64;p++){const f=Re[p-15],l=Re[p-2],g=xe(f,7)^xe(f,18)^f>>>3,m=xe(l,17)^xe(l,19)^l>>>10;Re[p]=m+Re[p-7]+g+Re[p-16]|0}let{A:r,B:i,C:a,D:s,E:o,F:c,G:u,H:d}=this;for(let p=0;p<64;p++){const f=xe(o,6)^xe(o,11)^xe(o,25),l=d+f+mp(o,c,u)+bp[p]+Re[p]|0,m=(xe(r,2)^xe(r,13)^xe(r,22))+yp(r,i,a)|0;d=u,u=c,c=o,o=s+l|0,s=a,a=i,i=r,r=l+m|0}r=r+this.A|0,i=i+this.B|0,a=a+this.C|0,s=s+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,i,a,s,o,c,u,d)}roundClean(){Re.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const vp=pp(()=>new wp),Ti="session:id",Bi="session:secret",Mi="session:linked";class ft{constructor(t,n,r,i=!1){this.storage=t,this.id=n,this.secret=r,this.key=lp(vp(`${n}, ${r} WalletLink`)),this._linked=!!i}static create(t){const n=ze(16),r=ze(32);return new ft(t,n,r).save()}static load(t){const n=t.getItem(Ti),r=t.getItem(Mi),i=t.getItem(Bi);return n&&i?new ft(t,n,i,r==="1"):null}get linked(){return this._linked}set linked(t){this._linked=t,this.persistLinked()}save(){return this.storage.setItem(Ti,this.id),this.storage.setItem(Bi,this.secret),this.persistLinked(),this}persistLinked(){this.storage.setItem(Mi,this._linked?"1":"0")}}const Ep=(()=>".-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop{position:fixed;top:0;left:0;right:0;bottom:0;transition:opacity .25s;background-color:rgba(10,11,13,.5)}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-backdrop-hidden{opacity:0}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box{display:block;position:fixed;top:50%;left:50%;transform:translate(-50%, -50%);padding:20px;border-radius:8px;background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box p{display:block;font-weight:400;font-size:14px;line-height:20px;padding-bottom:12px;color:#5b636e}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box button{appearance:none;border:none;background:none;color:#0052ff;padding:0;text-decoration:none;display:block;font-weight:600;font-size:16px;line-height:24px}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark{background-color:#0a0b0d;color:#fff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.dark button{color:#0052ff}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light{background-color:#fff;color:#0a0b0d}.-cbwsdk-css-reset .-cbwsdk-redirect-dialog-box.light button{color:#0052ff}")();class xp{constructor(){this.root=null,this.darkMode=as()}attach(){const t=document.documentElement;this.root=document.createElement("div"),this.root.className="-cbwsdk-css-reset",t.appendChild(this.root),rs()}present(t){this.render(t)}clear(){this.render(null)}render(t){this.root&&(Ln(null,this.root),t&&Ln(q(Sp,Object.assign({},t,{onDismiss:()=>{this.clear()},darkMode:this.darkMode})),this.root))}}const Sp=({title:e,buttonText:t,darkMode:n,onButtonClick:r,onDismiss:i})=>{const a=n?"dark":"light";return q(os,{darkMode:n},q("div",{class:"-cbwsdk-redirect-dialog"},q("style",null,Ep),q("div",{class:"-cbwsdk-redirect-dialog-backdrop",onClick:i}),q("div",{class:At("-cbwsdk-redirect-dialog-box",a)},q("p",null,e),q("button",{onClick:r},t))))};class Li{constructor(){this.attached=!1,this.redirectDialog=new xp}attach(){if(this.attached)throw new Error("Coinbase Wallet SDK UI is already attached");this.redirectDialog.attach(),this.attached=!0}redirectToCoinbaseWallet(t){const n=new URL(ql);n.searchParams.append("redirect_url",Ql().href),t&&n.searchParams.append("wl_url",t);const r=document.createElement("a");r.target="cbw-opener",r.href=n.href,r.rel="noreferrer noopener",r.click()}openCoinbaseWalletDeeplink(t){this.redirectToCoinbaseWallet(t),setTimeout(()=>{this.redirectDialog.present({title:"Redirecting to Coinbase Wallet...",buttonText:"Open",onButtonClick:()=>{this.redirectToCoinbaseWallet(t)}})},99)}showConnecting(t){return()=>{this.redirectDialog.clear()}}}class Be{constructor(t){this.chainCallbackParams={chainId:"",jsonRpcUrl:""},this.isMobileWeb=Xl(),this.linkedUpdated=a=>{this.isLinked=a;const s=this.storage.getItem(yr);if(a&&(this._session.linked=a),this.isUnlinkedErrorState=!1,s){const o=s.split(" "),c=this.storage.getItem("IsStandaloneSigning")==="true";o[0]!==""&&!a&&this._session.linked&&!c&&(this.isUnlinkedErrorState=!0)}},this.metadataUpdated=(a,s)=>{this.storage.setItem(a,s)},this.chainUpdated=(a,s)=>{this.chainCallbackParams.chainId===a&&this.chainCallbackParams.jsonRpcUrl===s||(this.chainCallbackParams={chainId:a,jsonRpcUrl:s},this.chainCallback&&this.chainCallback(s,Number.parseInt(a,10)))},this.accountUpdated=a=>{this.accountsCallback&&this.accountsCallback([a]),Be.accountRequestCallbackIds.size>0&&(Array.from(Be.accountRequestCallbackIds.values()).forEach(s=>{this.invokeCallback(s,{method:"requestEthereumAccounts",result:[a]})}),Be.accountRequestCallbackIds.clear())},this.resetAndReload=this.resetAndReload.bind(this),this.linkAPIUrl=t.linkAPIUrl,this.storage=t.storage,this.metadata=t.metadata,this.accountsCallback=t.accountsCallback,this.chainCallback=t.chainCallback;const{session:n,ui:r,connection:i}=this.subscribe();this._session=n,this.connection=i,this.relayEventManager=new sp,this.ui=r,this.ui.attach()}subscribe(){const t=ft.load(this.storage)||ft.create(this.storage),{linkAPIUrl:n}=this,r=new ap({session:t,linkAPIUrl:n,listener:this}),i=this.isMobileWeb?new Li:new id;return r.connect(),{session:t,ui:i,connection:r}}resetAndReload(){this.connection.destroy().then(()=>{const t=ft.load(this.storage);t?.id===this._session.id&&Je.clearAll(),document.location.reload()}).catch(t=>{})}signEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:Ee(t.weiValue),data:St(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?Ee(t.gasPriceInWei):null,maxFeePerGas:t.gasPriceInWei?Ee(t.gasPriceInWei):null,maxPriorityFeePerGas:t.gasPriceInWei?Ee(t.gasPriceInWei):null,gasLimit:t.gasLimit?Ee(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!1}})}signAndSubmitEthereumTransaction(t){return this.sendRequest({method:"signEthereumTransaction",params:{fromAddress:t.fromAddress,toAddress:t.toAddress,weiValue:Ee(t.weiValue),data:St(t.data,!0),nonce:t.nonce,gasPriceInWei:t.gasPriceInWei?Ee(t.gasPriceInWei):null,maxFeePerGas:t.maxFeePerGas?Ee(t.maxFeePerGas):null,maxPriorityFeePerGas:t.maxPriorityFeePerGas?Ee(t.maxPriorityFeePerGas):null,gasLimit:t.gasLimit?Ee(t.gasLimit):null,chainId:t.chainId,shouldSubmit:!0}})}submitEthereumTransaction(t,n){return this.sendRequest({method:"submitEthereumTransaction",params:{signedTransaction:St(t,!0),chainId:n}})}getWalletLinkSession(){return this._session}sendRequest(t){let n=null;const r=ze(8),i=a=>{this.publishWeb3RequestCanceledEvent(r),this.handleErrorResponse(r,t.method,a),n?.()};return new Promise((a,s)=>{n=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:i,onResetConnection:this.resetAndReload}),this.relayEventManager.callbacks.set(r,o=>{if(n?.(),re(o))return s(new Error(o.errorMessage));a(o)}),this.publishWeb3RequestEvent(r,t)})}publishWeb3RequestEvent(t,n){const r={type:"WEB3_REQUEST",id:t,request:n};this.publishEvent("Web3Request",r,!0).then(i=>{}).catch(i=>{this.handleWeb3ResponseMessage(r.id,{method:n.method,errorMessage:i.message})}),this.isMobileWeb&&this.openCoinbaseWalletDeeplink(n.method)}openCoinbaseWalletDeeplink(t){if(this.ui instanceof Li)switch(t){case"requestEthereumAccounts":case"switchEthereumChain":return;default:window.addEventListener("blur",()=>{window.addEventListener("focus",()=>{this.connection.checkUnseenEvents()},{once:!0})},{once:!0}),this.ui.openCoinbaseWalletDeeplink();break}}publishWeb3RequestCanceledEvent(t){const n={type:"WEB3_REQUEST_CANCELED",id:t};this.publishEvent("Web3RequestCanceled",n,!1).then()}publishEvent(t,n,r){return this.connection.publishEvent(t,n,r)}handleWeb3ResponseMessage(t,n){if(n.method==="requestEthereumAccounts"){Be.accountRequestCallbackIds.forEach(r=>this.invokeCallback(r,n)),Be.accountRequestCallbackIds.clear();return}this.invokeCallback(t,n)}handleErrorResponse(t,n,r){var i;const a=(i=r?.message)!==null&&i!==void 0?i:"Unspecified error message.";this.handleWeb3ResponseMessage(t,{method:n,errorMessage:a})}invokeCallback(t,n){const r=this.relayEventManager.callbacks.get(t);r&&(r(n),this.relayEventManager.callbacks.delete(t))}requestEthereumAccounts(){const{appName:t,appLogoUrl:n}=this.metadata,r={method:"requestEthereumAccounts",params:{appName:t,appLogoUrl:n}},i=ze(8);return new Promise((a,s)=>{this.relayEventManager.callbacks.set(i,o=>{if(re(o))return s(new Error(o.errorMessage));a(o)}),Be.accountRequestCallbackIds.add(i),this.publishWeb3RequestEvent(i,r)})}watchAsset(t,n,r,i,a,s){const o={method:"watchAsset",params:{type:t,options:{address:n,symbol:r,decimals:i,image:a},chainId:s}};let c=null;const u=ze(8),d=p=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,o.method,p),c?.()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}),new Promise((p,f)=>{this.relayEventManager.callbacks.set(u,l=>{if(c?.(),re(l))return f(new Error(l.errorMessage));p(l)}),this.publishWeb3RequestEvent(u,o)})}addEthereumChain(t,n,r,i,a,s){const o={method:"addEthereumChain",params:{chainId:t,rpcUrls:n,blockExplorerUrls:i,chainName:a,iconUrls:r,nativeCurrency:s}};let c=null;const u=ze(8),d=p=>{this.publishWeb3RequestCanceledEvent(u),this.handleErrorResponse(u,o.method,p),c?.()};return c=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:d,onResetConnection:this.resetAndReload}),new Promise((p,f)=>{this.relayEventManager.callbacks.set(u,l=>{if(c?.(),re(l))return f(new Error(l.errorMessage));p(l)}),this.publishWeb3RequestEvent(u,o)})}switchEthereumChain(t,n){const r={method:"switchEthereumChain",params:Object.assign({chainId:t},{address:n})};let i=null;const a=ze(8),s=o=>{this.publishWeb3RequestCanceledEvent(a),this.handleErrorResponse(a,r.method,o),i?.()};return i=this.ui.showConnecting({isUnlinkedErrorState:this.isUnlinkedErrorState,onCancel:s,onResetConnection:this.resetAndReload}),new Promise((o,c)=>{this.relayEventManager.callbacks.set(a,u=>{if(i?.(),re(u)&&u.errorCode)return c(x.provider.custom({code:u.errorCode,message:"Unrecognized chain ID. Try adding the chain using addEthereumChain first."}));if(re(u))return c(new Error(u.errorMessage));o(u)}),this.publishWeb3RequestEvent(a,r)})}}Be.accountRequestCallbackIds=new Set;const ji="DefaultChainId",Ni="DefaultJsonRpcUrl";class po{constructor(t){this._relay=null,this._addresses=[],this.metadata=t.metadata,this._storage=new Je("walletlink",mi),this.callback=t.callback||null;const n=this._storage.getItem(yr);if(n){const r=n.split(" ");r[0]!==""&&(this._addresses=r.map(i=>je(i)))}this.initializeRelay()}getSession(){const t=this.initializeRelay(),{id:n,secret:r}=t.getWalletLinkSession();return{id:n,secret:r}}async handshake(t){const n="eth_requestAccounts",r=we.get(t);vf({method:n,correlationId:r});try{await this._eth_requestAccounts(),xf({method:n,correlationId:r})}catch(i){throw Ef({method:n,correlationId:r,errorMessage:Ve(i)}),i}}get selectedAddress(){return this._addresses[0]||void 0}get jsonRpcUrl(){var t;return(t=this._storage.getItem(Ni))!==null&&t!==void 0?t:void 0}set jsonRpcUrl(t){this._storage.setItem(Ni,t)}updateProviderInfo(t,n){var r;this.jsonRpcUrl=t;const i=this.getChainId();this._storage.setItem(ji,n.toString(10)),kt(n)!==i&&((r=this.callback)===null||r===void 0||r.call(this,"chainChanged",it(n)))}async watchAsset(t){const n=Array.isArray(t)?t[0]:t;if(!n.type)throw x.rpc.invalidParams("Type is required");if(n?.type!=="ERC20")throw x.rpc.invalidParams(`Asset of type '${n.type}' is not supported`);if(!n?.options)throw x.rpc.invalidParams("Options are required");if(!n?.options.address)throw x.rpc.invalidParams("Address is required");const r=this.getChainId(),{address:i,symbol:a,image:s,decimals:o}=n.options,u=await this.initializeRelay().watchAsset(n.type,i,a,o,s,r?.toString());return re(u)?!1:!!u.result}async addEthereumChain(t){var n,r;const i=t[0];if(((n=i.rpcUrls)===null||n===void 0?void 0:n.length)===0)throw x.rpc.invalidParams("please pass in at least 1 rpcUrl");if(!i.chainName||i.chainName.trim()==="")throw x.rpc.invalidParams("chainName is a required field");if(!i.nativeCurrency)throw x.rpc.invalidParams("nativeCurrency is a required field");const a=Number.parseInt(i.chainId,16);if(a===this.getChainId())return!1;const s=this.initializeRelay(),{rpcUrls:o=[],blockExplorerUrls:c=[],chainName:u,iconUrls:d=[],nativeCurrency:p}=i,f=await s.addEthereumChain(a.toString(),o,d,c,u,p);if(re(f))return!1;if(((r=f.result)===null||r===void 0?void 0:r.isApproved)===!0)return this.updateProviderInfo(o[0],a),null;throw x.rpc.internal("unable to add ethereum chain")}async switchEthereumChain(t){const n=t[0],r=Number.parseInt(n.chainId,16),a=await this.initializeRelay().switchEthereumChain(r.toString(10),this.selectedAddress||void 0);if(re(a))throw a;const s=a.result;return s.isApproved&&s.rpcUrl.length>0&&this.updateProviderInfo(s.rpcUrl,r),null}async cleanup(){this.callback=null,this._relay&&this._relay.resetAndReload(),this._storage.clear()}_setAddresses(t,n){var r;if(!Array.isArray(t))throw new Error("addresses is not an array");const i=t.map(a=>je(a));JSON.stringify(i)!==JSON.stringify(this._addresses)&&(this._addresses=i,(r=this.callback)===null||r===void 0||r.call(this,"accountsChanged",i),this._storage.setItem(yr,i.join(" ")))}async request(t){const n=we.get(t);Sf({method:t.method,correlationId:n});try{const r=await this._request(t);return _f({method:t.method,correlationId:n}),r}catch(r){throw kf({method:t.method,correlationId:n,errorMessage:Ve(r)}),r}}async _request(t){const n=t.params||[];switch(t.method){case"eth_accounts":return[...this._addresses];case"eth_coinbase":return this.selectedAddress||null;case"net_version":return this.getChainId().toString(10);case"eth_chainId":return it(this.getChainId());case"eth_requestAccounts":return this._eth_requestAccounts();case"eth_ecRecover":case"personal_ecRecover":return this.ecRecover(t);case"personal_sign":return this.personalSign(t);case"eth_signTransaction":return this._eth_signTransaction(n);case"eth_sendRawTransaction":return this._eth_sendRawTransaction(n);case"eth_sendTransaction":return this._eth_sendTransaction(n);case"eth_signTypedData_v1":case"eth_signTypedData_v3":case"eth_signTypedData_v4":case"eth_signTypedData":return this.signTypedData(t);case"wallet_addEthereumChain":return this.addEthereumChain(n);case"wallet_switchEthereumChain":return this.switchEthereumChain(n);case"wallet_watchAsset":return this.watchAsset(n);default:if(!this.jsonRpcUrl)throw x.rpc.internal("No RPC URL set for chain");return _t(t,this.jsonRpcUrl)}}_ensureKnownAddress(t){const n=je(t);if(!this._addresses.map(i=>je(i)).includes(n))throw new Error("Unknown Ethereum address")}_prepareTransactionParams(t){const n=t.from?je(t.from):this.selectedAddress;if(!n)throw new Error("Ethereum address is unavailable");this._ensureKnownAddress(n);const r=t.to?je(t.to):null,i=t.value!=null?bt(t.value):BigInt(0),a=t.data?pr(t.data):Buffer.alloc(0),s=t.nonce!=null?kt(t.nonce):null,o=t.gasPrice!=null?bt(t.gasPrice):null,c=t.maxFeePerGas!=null?bt(t.maxFeePerGas):null,u=t.maxPriorityFeePerGas!=null?bt(t.maxPriorityFeePerGas):null,d=t.gas!=null?bt(t.gas):null,p=t.chainId?kt(t.chainId):this.getChainId();return{fromAddress:n,toAddress:r,weiValue:i,data:a,nonce:s,gasPriceInWei:o,maxFeePerGas:c,maxPriorityFeePerGas:u,gasLimit:d,chainId:p}}async ecRecover(t){const{method:n,params:r}=t;if(!Array.isArray(r))throw x.rpc.invalidParams();const a=await this.initializeRelay().sendRequest({method:"ethereumAddressFromSignedMessage",params:{message:On(r[0]),signature:On(r[1]),addPrefix:n==="personal_ecRecover"}});if(re(a))throw a;return a.result}getChainId(){var t;return Number.parseInt((t=this._storage.getItem(ji))!==null&&t!==void 0?t:"1",10)}async _eth_requestAccounts(){var t,n;if(this._addresses.length>0)return(t=this.callback)===null||t===void 0||t.call(this,"connect",{chainId:it(this.getChainId())}),this._addresses;const i=await this.initializeRelay().requestEthereumAccounts();if(re(i))throw i;if(!i.result)throw new Error("accounts received is empty");return this._setAddresses(i.result),(n=this.callback)===null||n===void 0||n.call(this,"connect",{chainId:it(this.getChainId())}),this._addresses}async personalSign({params:t}){if(!Array.isArray(t))throw x.rpc.invalidParams();const n=t[1],r=t[0];this._ensureKnownAddress(n);const a=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:je(n),message:On(r),addPrefix:!0,typedDataJson:null}});if(re(a))throw a;return a.result}async _eth_signTransaction(t){const n=this._prepareTransactionParams(t[0]||{}),i=await this.initializeRelay().signEthereumTransaction(n);if(re(i))throw i;return i.result}async _eth_sendRawTransaction(t){const n=pr(t[0]),i=await this.initializeRelay().submitEthereumTransaction(n,this.getChainId());if(re(i))throw i;return i.result}async _eth_sendTransaction(t){const n=this._prepareTransactionParams(t[0]||{}),i=await this.initializeRelay().signAndSubmitEthereumTransaction(n);if(re(i))throw i;return i.result}async signTypedData(t){const{method:n,params:r}=t;if(!Array.isArray(r))throw x.rpc.invalidParams();const i=u=>{const d={eth_signTypedData_v1:Wt.hashForSignTypedDataLegacy,eth_signTypedData_v3:Wt.hashForSignTypedData_v3,eth_signTypedData_v4:Wt.hashForSignTypedData_v4,eth_signTypedData:Wt.hashForSignTypedData_v4};return St(d[n]({data:Nl(u)}),!0)},a=r[n==="eth_signTypedData_v1"?1:0],s=r[n==="eth_signTypedData_v1"?0:1];this._ensureKnownAddress(a);const c=await this.initializeRelay().sendRequest({method:"signEthereumMessage",params:{address:je(a),message:i(s),typedDataJson:JSON.stringify(s,null,2),addPrefix:!1}});if(re(c))throw c;return c.result}initializeRelay(){return this._relay||(this._relay=new Be({linkAPIUrl:mi,storage:this._storage,metadata:this.metadata,accountsCallback:this._setAddresses.bind(this),chainCallback:this.updateProviderInfo.bind(this)})),this._relay}}const ho="SignerType",mo=new Je("CBWSDK","SignerConfigurator");function kp(){return mo.getItem(ho)}function _p(e){mo.setItem(ho,e)}function Ri(e){if(e)return e instanceof Es?"scw":"walletlink"}async function Ap(e){const{communicator:t,metadata:n,handshakeRequest:r,callback:i}=e;Cp(t,n,i,r).catch(()=>{});const a={id:crypto.randomUUID(),event:"selectSignerType",data:Object.assign(Object.assign({},e.preference),{handshakeRequest:r})},{data:s}=await t.postRequestAndWaitForResponse(a);return s}function Ip(e){const{signerType:t,metadata:n,communicator:r,callback:i}=e;switch(t){case"scw":return new Es({metadata:n,callback:i,communicator:r});case"walletlink":return new po({metadata:n,callback:i})}}async function Cp(e,t,n,r){await e.onMessage(({event:a})=>a==="WalletLinkSessionRequest");const i=new po({metadata:t,callback:n});e.postMessage({event:"WalletLinkUpdate",data:{session:i.getSession()}}),await i.handshake(r),e.postMessage({event:"WalletLinkUpdate",data:{connected:!0}})}var Op=globalThis&&globalThis.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n};class yo extends pd{constructor(t){var{metadata:n}=t,r=t.preference,{keysUrl:i}=r,a=Op(r,["keysUrl"]);super(),this.signer=null,this.isCoinbaseWallet=!0,this.metadata=n,this.preference=a,this.communicator=new ld({url:i,metadata:n,preference:a});const s=kp();s&&(this.signer=this.initSigner(s),hd({signerType:s}))}async request(t){const n=crypto.randomUUID();we.set(t,n),md({method:t.method,correlationId:n});try{const r=await this._request(t);return gd({method:t.method,signerType:Ri(this.signer),correlationId:n}),r}catch(r){throw yd({method:t.method,correlationId:n,signerType:Ri(this.signer),errorMessage:r instanceof Error?r.message:""}),r}finally{we.delete(t)}}async _request(t){try{if(zl(t),!this.signer)switch(t.method){case"eth_requestAccounts":{let r;const i=k.subAccountsConfig.get();i?.enableAutoSubAccounts?r="scw":r=await this.requestSignerSelection(t);const a=this.initSigner(r);r==="scw"&&i?.enableAutoSubAccounts?(await a.handshake({method:"handshake"}),await a.request(t)):await a.handshake(t),this.signer=a,_p(r);break}case"wallet_connect":{const r=this.initSigner("scw");await r.handshake({method:"handshake"});const i=await r.request(t);return this.signer=r,i}case"wallet_sendCalls":case"wallet_sign":{const r=this.initSigner("scw");await r.handshake({method:"handshake"});const i=await r.request(t);return await r.cleanup(),i}case"wallet_getCallsStatus":return await _t(t,ns);case"net_version":return 1;case"eth_chainId":return it(1);default:throw x.provider.unauthorized("Must call 'eth_requestAccounts' before other methods")}return await this.signer.request(t)}catch(n){const{code:r}=n;return r===Q.provider.unauthorized&&this.disconnect(),Promise.reject(dd(n))}}async enable(){return console.warn('.enable() has been deprecated. Please use .request({ method: "eth_requestAccounts" }) instead.'),bd(),await this.request({method:"eth_requestAccounts"})}async disconnect(){var t;await((t=this.signer)===null||t===void 0?void 0:t.cleanup()),this.signer=null,Je.clearAll(),we.clear(),this.emit("disconnect",x.provider.disconnected("User initiated disconnection"))}async requestSignerSelection(t){wd();const n=await Ap({communicator:this.communicator,preference:this.preference,metadata:this.metadata,handshakeRequest:t,callback:this.emit.bind(this)});return vd(n),n}initSigner(t){return Ip({signerType:t,metadata:this.metadata,communicator:this.communicator,callback:this.emit.bind(this)})}}const Pp=(e,t)=>{let n;switch(e){case"standard":return n=t,`data:image/svg+xml,%3Csvg width='${t}' height='${n}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `;case"circle":return n=t,`data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='${t}' height='${n}' viewBox='0 0 999.81 999.81'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052fe;%7D.cls-2%7Bfill:%23fefefe;%7D.cls-3%7Bfill:%230152fe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M655-115.9h56c.83,1.59,2.36.88,3.56,1a478,478,0,0,1,75.06,10.42C891.4-81.76,978.33-32.58,1049.19,44q116.7,126,131.94,297.61c.38,4.14-.34,8.53,1.78,12.45v59c-1.58.84-.91,2.35-1,3.56a482.05,482.05,0,0,1-10.38,74.05c-24,106.72-76.64,196.76-158.83,268.93s-178.18,112.82-287.2,122.6c-4.83.43-9.86-.25-14.51,1.77H654c-1-1.68-2.69-.91-4.06-1a496.89,496.89,0,0,1-105.9-18.59c-93.54-27.42-172.78-77.59-236.91-150.94Q199.34,590.1,184.87,426.58c-.47-5.19.25-10.56-1.77-15.59V355c1.68-1,.91-2.7,1-4.06a498.12,498.12,0,0,1,18.58-105.9c26-88.75,72.64-164.9,140.6-227.57q126-116.27,297.21-131.61C645.32-114.57,650.35-113.88,655-115.9Zm377.92,500c0-192.44-156.31-349.49-347.56-350.15-194.13-.68-350.94,155.13-352.29,347.42-1.37,194.55,155.51,352.1,348.56,352.47C876.15,734.23,1032.93,577.84,1032.93,384.11Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-2' d='M1032.93,384.11c0,193.73-156.78,350.12-351.29,349.74-193-.37-349.93-157.92-348.56-352.47C334.43,189.09,491.24,33.28,685.37,34,876.62,34.62,1032.94,191.67,1032.93,384.11ZM683,496.81q43.74,0,87.48,0c15.55,0,25.32-9.72,25.33-25.21q0-87.48,0-175c0-15.83-9.68-25.46-25.59-25.46H595.77c-15.88,0-25.57,9.64-25.58,25.46q0,87.23,0,174.45c0,16.18,9.59,25.7,25.84,25.71Z' transform='translate(-183.1 115.9)'/%3E%3Cpath class='cls-3' d='M683,496.81H596c-16.25,0-25.84-9.53-25.84-25.71q0-87.23,0-174.45c0-15.82,9.7-25.46,25.58-25.46H770.22c15.91,0,25.59,9.63,25.59,25.46q0,87.47,0,175c0,15.49-9.78,25.2-25.33,25.21Q726.74,496.84,683,496.81Z' transform='translate(-183.1 115.9)'/%3E%3C/svg%3E`;case"text":return n=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogo":return n=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%230052ff;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;case"textLight":return n=(.1*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 528.15 53.64'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Ctitle%3ECoinbase_Wordmark_SubBrands_ALL%3C/title%3E%3Cpath class='cls-1' d='M164.45,15a15,15,0,0,0-11.74,5.4V0h-8.64V52.92h8.5V48a15,15,0,0,0,11.88,5.62c10.37,0,18.21-8.21,18.21-19.3S174.67,15,164.45,15Zm-1.3,30.67c-6.19,0-10.73-4.83-10.73-11.31S157,23,163.22,23s10.66,4.82,10.66,11.37S169.34,45.65,163.15,45.65Zm83.31-14.91-6.34-.93c-3-.43-5.18-1.44-5.18-3.82,0-2.59,2.8-3.89,6.62-3.89,4.18,0,6.84,1.8,7.42,4.76h8.35c-.94-7.49-6.7-11.88-15.55-11.88-9.15,0-15.2,4.68-15.2,11.3,0,6.34,4,10,12,11.16l6.33.94c3.1.43,4.83,1.65,4.83,4,0,2.95-3,4.17-7.2,4.17-5.12,0-8-2.09-8.43-5.25h-8.49c.79,7.27,6.48,12.38,16.84,12.38,9.44,0,15.7-4.32,15.7-11.74C258.12,35.28,253.58,31.82,246.46,30.74Zm-27.65-2.3c0-8.06-4.9-13.46-15.27-13.46-9.79,0-15.26,5-16.34,12.6h8.57c.43-3,2.73-5.4,7.63-5.4,4.39,0,6.55,1.94,6.55,4.32,0,3.09-4,3.88-8.85,4.39-6.63.72-14.84,3-14.84,11.66,0,6.7,5,11,12.89,11,6.19,0,10.08-2.59,12-6.7.28,3.67,3,6.05,6.84,6.05h5v-7.7h-4.25Zm-8.5,9.36c0,5-4.32,8.64-9.57,8.64-3.24,0-6-1.37-6-4.25,0-3.67,4.39-4.68,8.42-5.11s6-1.22,7.13-2.88ZM281.09,15c-11.09,0-19.23,8.35-19.23,19.36,0,11.6,8.72,19.3,19.37,19.3,9,0,16.06-5.33,17.86-12.89h-9c-1.3,3.31-4.47,5.19-8.71,5.19-5.55,0-9.72-3.46-10.66-9.51H299.3V33.12C299.3,22.46,291.53,15,281.09,15Zm-9.87,15.26c1.37-5.18,5.26-7.7,9.72-7.7,4.9,0,8.64,2.8,9.51,7.7ZM19.3,23a9.84,9.84,0,0,1,9.5,7h9.14c-1.65-8.93-9-15-18.57-15A19,19,0,0,0,0,34.34c0,11.09,8.28,19.3,19.37,19.3,9.36,0,16.85-6,18.5-15H28.8a9.75,9.75,0,0,1-9.43,7.06c-6.27,0-10.66-4.83-10.66-11.31S13,23,19.3,23Zm41.11-8A19,19,0,0,0,41,34.34c0,11.09,8.28,19.3,19.37,19.3A19,19,0,0,0,79.92,34.27C79.92,23.33,71.64,15,60.41,15Zm.07,30.67c-6.19,0-10.73-4.83-10.73-11.31S54.22,23,60.41,23s10.8,4.89,10.8,11.37S66.67,45.65,60.48,45.65ZM123.41,15c-5.62,0-9.29,2.3-11.45,5.54V15.7h-8.57V52.92H112V32.69C112,27,115.63,23,121,23c5,0,8.06,3.53,8.06,8.64V52.92h8.64V31C137.66,21.6,132.84,15,123.41,15ZM92,.36a5.36,5.36,0,0,0-5.55,5.47,5.55,5.55,0,0,0,11.09,0A5.35,5.35,0,0,0,92,.36Zm-9.72,23h5.4V52.92h8.64V15.7h-14Zm298.17-7.7L366.2,52.92H372L375.29,44H392l3.33,8.88h6L386.87,15.7ZM377,39.23l6.45-17.56h.1l6.56,17.56ZM362.66,15.7l-7.88,29h-.11l-8.14-29H341l-8,28.93h-.1l-8-28.87H319L329.82,53h5.45l8.19-29.24h.11L352,53h5.66L368.1,15.7Zm135.25,0v4.86h12.32V52.92h5.6V20.56h12.32V15.7ZM467.82,52.92h25.54V48.06H473.43v-12h18.35V31.35H473.43V20.56h19.93V15.7H467.82ZM443,15.7h-5.6V52.92h24.32V48.06H443Zm-30.45,0h-5.61V52.92h24.32V48.06H412.52Z'/%3E%3C/svg%3E`;case"textWithLogoLight":return n=(.25*t).toFixed(2),`data:image/svg+xml,%3Csvg width='${t}' height='${n}' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 308.44 77.61'%3E%3Cdefs%3E%3Cstyle%3E.cls-1%7Bfill:%23fefefe;%7D%3C/style%3E%3C/defs%3E%3Cpath class='cls-1' d='M142.94,20.2l-7.88,29H135l-8.15-29h-5.55l-8,28.93h-.11l-8-28.87H99.27l10.84,37.27h5.44l8.2-29.24h.1l8.41,29.24h5.66L148.39,20.2Zm17.82,0L146.48,57.42h5.82l3.28-8.88h16.65l3.34,8.88h6L167.16,20.2Zm-3.44,23.52,6.45-17.55h.11l6.56,17.55ZM278.2,20.2v4.86h12.32V57.42h5.6V25.06h12.32V20.2ZM248.11,57.42h25.54V52.55H253.71V40.61h18.35V35.85H253.71V25.06h19.94V20.2H248.11ZM223.26,20.2h-5.61V57.42H242V52.55H223.26Zm-30.46,0h-5.6V57.42h24.32V52.55H192.8Zm-154,38A19.41,19.41,0,1,1,57.92,35.57H77.47a38.81,38.81,0,1,0,0,6.47H57.92A19.39,19.39,0,0,1,38.81,58.21Z'/%3E%3C/svg%3E`;default:return n=t,`data:image/svg+xml,%3Csvg width='${t}' height='${n}' viewBox='0 0 1024 1024' fill='none' xmlns='http://www.w3.org/2000/svg'%3E %3Crect width='1024' height='1024' fill='%230052FF'/%3E %3Cpath fill-rule='evenodd' clip-rule='evenodd' d='M152 512C152 710.823 313.177 872 512 872C710.823 872 872 710.823 872 512C872 313.177 710.823 152 512 152C313.177 152 152 313.177 152 512ZM420 396C406.745 396 396 406.745 396 420V604C396 617.255 406.745 628 420 628H604C617.255 628 628 617.255 628 604V420C628 406.745 617.255 396 604 396H420Z' fill='white'/%3E %3C/svg%3E `}};class zp{constructor(t){k.persist.rehydrate(),this.metadata={appName:t.appName||"Dapp",appLogoUrl:t.appLogoUrl||Dl(),appChainIds:t.appChainIds||[]},k.config.set({metadata:this.metadata}),Xa()}makeWeb3Provider(t={options:"all"}){var n;ts(t),t.telemetry!==!1&&Ga(),k.config.set({preference:t});const r={metadata:this.metadata,preference:t};return(n=es(r))!==null&&n!==void 0?n:new yo(r)}getCoinbaseWalletLogo(t,n=240){return Pp(t,n)}}function Tp(e){var t;const n={metadata:e.metadata,preference:e.preference};return(t=es(n))!==null&&t!==void 0?t:new yo(n)}const Bp={options:"all"};function Vp(e){var t,n,r,i;const a={metadata:{appName:e.appName||"Dapp",appLogoUrl:e.appLogoUrl||"",appChainIds:e.appChainIds||[]},preference:Object.assign(Bp,(t=e.preference)!==null&&t!==void 0?t:{}),paymasterUrls:e.paymasterUrls};!((n=e.subAccounts)===null||n===void 0)&&n.toOwnerAccount&&hi(e.subAccounts.toOwnerAccount),k.subAccountsConfig.set({toOwnerAccount:(r=e.subAccounts)===null||r===void 0?void 0:r.toOwnerAccount,enableAutoSubAccounts:(i=e.subAccounts)===null||i===void 0?void 0:i.enableAutoSubAccounts}),k.config.set(a),k.persist.rehydrate(),Xa(),a.preference.telemetry!==!1&&Ga(),ts(a.preference);let s=null;const o={getProvider(){return s||(s=Tp(a)),s.sdk=o,s},subAccount:{async create(c){var u,d;const p=k.getState();return he((u=p.subAccount)===null||u===void 0?void 0:u.address,new Error("subaccount already exists")),await((d=o.getProvider())===null||d===void 0?void 0:d.request({method:"wallet_addSubAccount",params:[{version:"1",account:c}]}))},async get(){var c,u;const d=k.subAccounts.get();if(d?.address)return d;const f=(u=(await((c=o.getProvider())===null||c===void 0?void 0:c.request({method:"wallet_connect",params:[{version:"1",capabilities:{}}]}))).accounts[0].capabilities)===null||u===void 0?void 0:u.subAccounts;return Array.isArray(f)?f[0]:null},async addOwner({address:c,publicKey:u,chainId:d}){var p,f;const l=k.subAccounts.get(),g=k.account.get();he(g,new Error("account does not exist")),he(l?.address,new Error("subaccount does not exist"));const m=[];if(u){const[v,S]=Ki([{type:"bytes32"},{type:"bytes32"}],u);m.push({to:l.address,data:Le({abi:ve,functionName:"addOwnerPublicKey",args:[v,S]}),value:ot(0)})}return c&&m.push({to:l.address,data:Le({abi:ve,functionName:"addOwnerAddress",args:[c]}),value:ot(0)}),await((p=o.getProvider())===null||p===void 0?void 0:p.request({method:"wallet_sendCalls",params:[{calls:m,chainId:ot(d),from:(f=g.accounts)===null||f===void 0?void 0:f[0],version:"1"}]}))},setToOwnerAccount(c){hi(c),k.subAccountsConfig.set({toOwnerAccount:c})}}};return o}export{zp as CoinbaseWalletSDK,Vp as createCoinbaseWalletSDK,zp as default,hr as getCryptoKeyAccount,Fp as removeCryptoKey};
