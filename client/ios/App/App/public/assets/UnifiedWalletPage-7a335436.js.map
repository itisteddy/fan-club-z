{"version":3,"file":"UnifiedWalletPage-7a335436.js","sources":["../../src/components/ui/card/Card.tsx","../../src/components/ui/card/StatCard.tsx","../../src/components/ui/skeleton/Skeleton.tsx","../../src/hooks/useEscrowSnapshot.ts","../../src/pages/UnifiedWalletPage.tsx"],"sourcesContent":["import React from 'react';\nimport { cn } from '../../../utils/cn';\n\n// Base Card Component\nexport function Card({ \n  children, \n  className, \n  ...props \n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div \n      className={cn(\n        // Base styling with var(--surface, #fff)\n        'bg-white',\n        // Radius: 16px\n        'rounded-2xl',\n        // Border: 1px solid rgba(0,0,0,0.06)\n        'border border-black/[0.06]',\n        // Internal padding: 16px mobile, 20px ≥768px\n        'p-4 md:p-5',\n        // Shadow: none by default; elevate only when interactive/pressed\n        'shadow-none',\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\n// Card Header with title, meta, and actions\nexport function CardHeader({ \n  title, \n  meta, \n  actions,\n  className,\n  ...props \n}: {\n  title?: React.ReactNode;\n  meta?: React.ReactNode;\n  actions?: React.ReactNode;\n  className?: string;\n} & React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div \n      className={cn(\n        'flex items-start justify-between',\n        'mb-4',\n        className\n      )}\n      {...props}\n    >\n      <div className=\"flex-1 min-w-0\">\n        {title && (\n          <div className=\"mb-1\">\n            {typeof title === 'string' ? (\n              <CardTitle>{title}</CardTitle>\n            ) : (\n              title\n            )}\n          </div>\n        )}\n        {meta && (\n          <div>\n            {typeof meta === 'string' ? (\n              <CardMeta>{meta}</CardMeta>\n            ) : (\n              meta\n            )}\n          </div>\n        )}\n      </div>\n      {actions && (\n        <div className=\"flex items-center space-x-2 ml-3\">\n          {actions}\n        </div>\n      )}\n    </div>\n  );\n}\n\n// Card Content wrapper\nexport function CardContent({ \n  children, \n  className,\n  ...props \n}: {\n  children: React.ReactNode;\n  className?: string;\n} & React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div \n      className={cn('space-y-3', className)}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\n// Card Actions (button row)\nexport function CardActions({ \n  children, \n  className,\n  ...props \n}: {\n  children: React.ReactNode;\n  className?: string;\n} & React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div \n      className={cn(\n        'flex items-center space-x-3 pt-4 border-t border-gray-100',\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\n// Card Divider\nexport function CardDivider({ \n  className,\n  ...props \n}: React.HTMLAttributes<HTMLHRElement>) {\n  return (\n    <hr \n      className={cn(\n        'border-0 border-t border-gray-100 my-4',\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\n// Typography Components\nexport function CardTitle({ \n  children, \n  className,\n  ...props \n}: {\n  children: React.ReactNode;\n  className?: string;\n} & React.HTMLAttributes<HTMLHeadingElement>) {\n  return (\n    <h3 \n      className={cn(\n        // Title: 14–16px semibold\n        'text-sm md:text-base font-semibold text-gray-900 leading-tight',\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </h3>\n  );\n}\n\nexport function CardValue({ \n  children, \n  className,\n  ...props \n}: {\n  children: React.ReactNode;\n  className?: string;\n} & React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div \n      className={cn(\n        // Value: 20–24px semibold/mono\n        'text-xl md:text-2xl font-semibold text-gray-900 font-mono leading-tight',\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\nexport function CardMeta({ \n  children, \n  className,\n  ...props \n}: {\n  children: React.ReactNode;\n  className?: string;\n} & React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div \n      className={cn(\n        // Meta: 12–13px medium\n        'text-xs md:text-sm text-gray-600 font-medium',\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </div>\n  );\n}\n\n// Export all components\nexport default Card;\n","import React from 'react';\nimport { cn } from '../../../utils/cn';\nimport { formatUSDCompact, formatNumberShort, formatPercent, formatLargeNumber, formatPercentage, formatCurrency } from '@/lib/format';\n\ninterface StatCardProps {\n  label: string;\n  value?: string | number;\n  icon?: React.ReactNode;\n  loading?: boolean;\n  error?: boolean;\n  tooltip?: string;\n  variant?: 'default' | 'currency' | 'percentage' | 'balance' | 'count';\n  compact?: boolean;\n  className?: string;\n  subtitle?: string;\n  /** Phase 7D: currency for variant=currency (default USD) */\n  currency?: string;\n}\n\nexport function StatCard({ \n  label, \n  value, \n  icon, \n  loading = false, \n  error = false, \n  tooltip,\n  variant = 'default',\n  compact = false,\n  className,\n  subtitle,\n  currency = 'USD',\n}: StatCardProps) {\n  const formatValue = (val: string | number | undefined) => {\n    if (loading || val === undefined || val === null) {\n      return '—';\n    }\n    \n    if (error) {\n      return 'Error';\n    }\n    \n    const numValue = typeof val === 'string' ? parseFloat(val) : val;\n    \n    switch (variant) {\n      case 'currency':\n        return currency !== 'USD' ? formatCurrency(numValue, { compact, currency }) : formatUSDCompact(numValue);\n      case 'percentage':\n        return formatPercentage(numValue);\n      case 'balance': {\n        const amount = typeof numValue === 'number' ? numValue : Number(numValue || 0);\n        const formatted = formatCurrency(Math.abs(amount), { compact });\n        const sign = amount > 0 ? '+' : amount < 0 ? '-' : '';\n        return `${sign}${formatted}`;\n      }\n      case 'count':\n        return formatNumberShort(numValue);\n      default:\n        if (typeof val === 'number') {\n          return formatLargeNumber(val);\n        }\n        return val?.toString() || '—';\n    }\n  };\n\n  const getValueColor = () => {\n    if (loading || error) return 'text-gray-400';\n    \n    if (variant === 'balance' && typeof value === 'number') {\n      if (value > 0) return 'text-green-600';\n      if (value < 0) return 'text-red-600';\n    }\n    \n    return 'text-gray-900';\n  };\n\n  return (\n    <div \n      className={cn(\n        // Base styling matching design tokens\n        'bg-white',\n        'rounded-2xl',\n        'border border-black/[0.06]',\n        compact ? 'p-3' : 'p-4',\n        // Fixed min height for consistent layout\n        'min-h-[88px] md:min-h-[96px]',\n        // Centered vertical layout\n        'flex flex-col justify-center',\n        // Interactive states\n        'hover:shadow-sm transition-shadow duration-200',\n        className\n      )}\n      title={tooltip}\n    >\n      <div className=\"flex items-center justify-between mb-2\">\n        <span className={cn(\n          // Meta: 12–13px medium in muted color\n          'text-xs md:text-sm font-medium text-gray-600',\n          'leading-tight'\n        )}>\n          {label}\n        </span>\n        {icon && (\n          <div className=\"text-gray-400 flex-shrink-0 ml-2\">\n            {icon}\n          </div>\n        )}\n      </div>\n      \n      <div className=\"space-y-1\">\n        <div className={cn(\n          // Value styling\n          'text-lg md:text-xl font-semibold font-mono leading-tight',\n          'truncate',\n          getValueColor(),\n          loading && 'animate-pulse'\n        )}>\n          {loading && (\n            <div className=\"h-5 bg-gray-200 rounded w-16 animate-pulse\"></div>\n          )}\n          {!loading && formatValue(value)}\n        </div>\n        {subtitle && (\n          <p className=\"text-xs text-gray-500 leading-tight truncate\">{subtitle}</p>\n        )}\n      </div>\n    </div>\n  );\n}\n\n// StatRow component for consistent 3-up grid layout\nexport function StatRow({ \n  children, \n  className \n}: { \n  children: React.ReactNode;\n  className?: string;\n}) {\n  return (\n    <div className={cn(\n      // Responsive grid: 3-up, break to 2/1 as needed\n      'grid grid-cols-2 md:grid-cols-3 gap-3 md:gap-4',\n      // Handle third card wrapping on mobile\n      '[&>*:nth-child(3)]:col-span-2 md:[&>*:nth-child(3)]:col-span-1',\n      className\n    )}>\n      {children}\n    </div>\n  );\n}\n\nexport default StatCard;\n","import React from 'react';\nimport { cn } from '../../../utils/cn';\nimport Card from '../card/Card';\nimport { StatRow } from '../card/StatCard';\n\n// Base Skeleton primitive\nexport function Skeleton({ \n  className,\n  ...props \n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\n        'animate-pulse bg-gray-200 rounded',\n        className\n      )}\n      {...props}\n    />\n  );\n}\n\n// Skeleton lines\nexport function SkeletonLines({ \n  count = 3, \n  className \n}: { \n  count?: number; \n  className?: string;\n}) {\n  return (\n    <div className={cn('space-y-2', className)}>\n      {Array.from({ length: count }).map((_, i) => (\n        <Skeleton \n          key={i}\n          className={cn(\n            'h-4',\n            // Last line is shorter\n            i === count - 1 && 'w-3/4'\n          )}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Skeleton for StatCard\nexport function SkeletonStatCard({ \n  className \n}: { \n  className?: string;\n}) {\n  return (\n    <Card \n      className={cn(\n        'min-h-[88px] md:min-h-[96px] p-3 md:p-4',\n        'flex flex-col justify-center',\n        className\n      )}\n    >\n      <div className=\"space-y-3\">\n        {/* Label */}\n        <Skeleton className=\"h-3 w-2/3\" />\n        {/* Value */}\n        <Skeleton className=\"h-6 w-3/4\" />\n      </div>\n    </Card>\n  );\n}\n\n// Skeleton for StatRow (3 stat cards)\nexport function SkeletonStatRow({ \n  className \n}: { \n  className?: string;\n}) {\n  return (\n    <StatRow className={className}>\n      <SkeletonStatCard />\n      <SkeletonStatCard />\n      <SkeletonStatCard />\n    </StatRow>\n  );\n}\n\n// Skeleton for list item\nexport function SkeletonListItem({ \n  showAvatar = true,\n  className \n}: { \n  showAvatar?: boolean; \n  className?: string;\n}) {\n  return (\n    <div className={cn('flex items-start space-x-3 py-3', className)}>\n      {showAvatar && (\n        <Skeleton className=\"w-10 h-10 rounded-full flex-shrink-0\" />\n      )}\n      <div className=\"flex-1 min-w-0 space-y-2\">\n        <Skeleton className=\"h-4 w-full\" />\n        <Skeleton className=\"h-3 w-2/3\" />\n      </div>\n    </div>\n  );\n}\n\n// Skeleton for list (5 items by default)\nexport function SkeletonList({ \n  count = 5,\n  showAvatar = true,\n  className \n}: { \n  count?: number; \n  showAvatar?: boolean; \n  className?: string;\n}) {\n  return (\n    <div className={cn('divide-y divide-gray-100', className)}>\n      {Array.from({ length: count }).map((_, i) => (\n        <SkeletonListItem \n          key={i} \n          showAvatar={showAvatar}\n          className={i === 0 ? 'pt-0' : undefined}\n        />\n      ))}\n    </div>\n  );\n}\n\n// Skeleton for Card\nexport function SkeletonCard({ \n  includeHeader = true,\n  className \n}: { \n  includeHeader?: boolean; \n  className?: string;\n}) {\n  return (\n    <Card className={className}>\n      {includeHeader && (\n        <div className=\"mb-4\">\n          <Skeleton className=\"h-5 w-32 mb-2\" />\n          <Skeleton className=\"h-3 w-48\" />\n        </div>\n      )}\n      <SkeletonLines count={3} />\n    </Card>\n  );\n}\n\nexport default Skeleton;\n","import { useQuery } from '@tanstack/react-query';\nimport { useEffect } from 'react';\nimport { QK } from '@/lib/queryKeys';\nimport { getApiUrl } from '@/utils/environment';\n\nexport type EscrowSnapshot = {\n  currency: 'USD';\n  escrowUSDC: number;           // On-chain escrow total (available + reserved)\n  reservedUSDC: number;         // Reserved via DB locks (locked + consumed)\n  availableToStakeUSDC: number; // Effective available to stake (escrow - active locks)\n  totalDepositedUSDC?: number;\n  totalWithdrawnUSDC?: number;\n  walletAddress?: string | null;\n  lastUpdated: string;\n  source?: 'onchain' | 'cached';\n};\n\ntype Options = {\n  walletAddress?: string | null;\n  enabled?: boolean;\n  refetchIntervalMs?: number;\n  forceRefresh?: boolean;\n};\n\nexport function useEscrowSnapshot(userId?: string, options: Options = {}) {\n  const walletAddress = options.walletAddress?.toLowerCase() ?? undefined;\n\n  const query = useQuery({\n    queryKey: QK.walletSummary(userId ?? 'anon', walletAddress ?? null),\n    enabled: !!userId && (options.enabled ?? true),\n    queryFn: async () => {\n      if (!userId) throw new Error('userId is required');\n\n      const params = new URLSearchParams({ userId });\n      if (walletAddress) params.set('walletAddress', walletAddress);\n      if (options.forceRefresh) params.set('refresh', '1');\n\n      const apiBase = getApiUrl();\n      // Prevent infinite loading if the network request stalls\n      const controller = new AbortController();\n      const timeout = setTimeout(() => controller.abort(), 12_000);\n      let r: Response;\n      try {\n        r = await fetch(`${apiBase}/api/wallet/summary?${params.toString()}`, {\n          headers: { Accept: 'application/json' },\n          signal: controller.signal,\n        });\n      } catch (e: any) {\n        if (e?.name === 'AbortError') {\n          throw new Error('Wallet summary request timed out. Please try again.');\n        }\n        throw e;\n      } finally {\n        clearTimeout(timeout);\n      }\n      if (!r.ok) {\n        const error = await r.json().catch(() => ({ message: r.statusText }));\n        throw new Error(error.message || 'Failed to load escrow snapshot');\n      }\n      const data = (await r.json()) as EscrowSnapshot;\n      return data;\n    },\n    refetchInterval: options.refetchIntervalMs ?? 5000,\n    staleTime: 2000,\n    retry: 2,\n  });\n\n  // Light refetch on focus for mobile UX\n  useEffect(() => {\n    const onFocus = () => {\n      if (userId && document.hasFocus()) query.refetch();\n    };\n    window.addEventListener('focus', onFocus);\n    return () => window.removeEventListener('focus', onFocus);\n  }, [userId, query]);\n\n  return query;\n}\n\n\n","import React, { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Plus, ArrowDownToLine, DollarSign, Lock, Wallet, RefreshCw, HelpCircle, X, ArrowRightLeft, Banknote } from 'lucide-react';\nimport { useAuthStore } from '../store/authStore';\nimport { useAccount, useDisconnect, useSwitchChain } from 'wagmi';\nimport { baseSepolia } from 'wagmi/chains';\nimport toast from 'react-hot-toast';\nimport AppHeader from '../components/layout/AppHeader';\nimport Page from '../components/ui/layout/Page';\nimport Card, { CardHeader, CardContent } from '../components/ui/card/Card';\nimport StatCard, { StatRow } from '../components/ui/card/StatCard';\nimport EmptyState from '../components/ui/empty/EmptyState';\nimport AuthRequiredState from '../components/ui/empty/AuthRequiredState';\nimport { SkeletonStatRow, SkeletonCard } from '../components/ui/skeleton/Skeleton';\nimport { formatUSDCompact, truncateText, formatCurrency } from '@/lib/format';\n// Use unified escrow snapshot (server-computed: on-chain + DB locks)\nimport { useEscrowSnapshot } from '../hooks/useEscrowSnapshot';\nimport { useUSDCBalance } from '../hooks/useUSDCBalance';\nimport { useWalletActivity } from '../hooks/useWalletActivity';\nimport DepositUSDCModal from '../components/wallet/DepositUSDCModal';\nimport WithdrawUSDCModal from '../components/wallet/WithdrawUSDCModal';\nimport ConnectWalletSheet from '../components/wallet/ConnectWalletSheet';\nimport { getApiUrl } from '../config';\nimport { useFundingModeStore } from '../store/fundingModeStore';\nimport { useAutoNetworkSwitch } from '../hooks/useAutoNetworkSwitch';\nimport { formatTxAmount, toneClass } from '@/lib/txFormat';\nimport { setCooldown } from '@/lib/cooldowns';\nimport { usePaystackStatus, useFiatSummary } from '@/hooks/useFiatWallet';\nimport { FiatDepositSheet } from '@/components/wallet/FiatDepositSheet';\nimport { FiatWithdrawalSheet } from '@/components/wallet/FiatWithdrawalSheet';\nimport { Runtime } from '@/config/runtime';\n\ninterface WalletPageProps {\n  onNavigateBack?: () => void;\n}\n\nconst WalletPage: React.FC<WalletPageProps> = ({ onNavigateBack }) => {\n  const { user, isAuthenticated } = useAuthStore();\n  const { address, isConnected, chainId } = useAccount();\n  const { disconnect } = useDisconnect();\n  const { switchChain } = useSwitchChain();\n  // Auto-switch to Base Sepolia when connected on wrong network (crypto rail only)\n  useAutoNetworkSwitch();\n  const { mode, setMode, isDemoEnabled, isFiatEnabled, setFiatEnabled } = useFundingModeStore();\n  const capabilities = Runtime.capabilities;\n  const showDemo = isDemoEnabled && capabilities.allowDemo;\n  // Gate fiat/crypto modes by capabilities\n  const effectiveFiatEnabled = isFiatEnabled && capabilities.allowFiat;\n  const effectiveCryptoEnabled = capabilities.allowCrypto;\n  const isDemoMode = showDemo && mode === 'demo';\n  const isFiatMode = effectiveFiatEnabled && mode === 'fiat';\n  const isCryptoMode = effectiveCryptoEnabled && !isDemoMode && !isFiatMode;\n\n  // Fiat feature flag + balances (server-controlled)\n  const { data: paystackStatus } = usePaystackStatus();\n  const { data: fiatData, isLoading: loadingFiat, refetch: refetchFiat } = useFiatSummary(user?.id);\n  useEffect(() => {\n    if (paystackStatus?.enabled !== undefined) {\n      setFiatEnabled(paystackStatus.enabled);\n    }\n  }, [paystackStatus?.enabled, setFiatEnabled]);\n  \n  // On-chain wallet USDC (token balance)\n  const { balance: walletBalance, isLoading: loadingWalletBalance, refetch: refetchWallet } = useUSDCBalance();\n  // Server-computed escrow snapshot (combines on-chain escrow + DB locks)\n  const { data: snapshot, isLoading: loadingSnapshot, refetch: refetchSnapshot } = useEscrowSnapshot(user?.id, {\n    walletAddress: address?.toLowerCase() ?? undefined,\n    enabled: !!user?.id,\n    refetchIntervalMs: 5000,\n  });\n  const availableUSD = snapshot?.availableToStakeUSDC ?? 0;\n  const reservedUSD = snapshot?.reservedUSDC ?? 0;\n  const totalUSD = snapshot?.escrowUSDC ?? 0;\n  const isCorrectChain = !!chainId && chainId === baseSepolia.id;\n\n  // Demo wallet summary (DB-backed)\n  const [demoSummary, setDemoSummary] = useState<null | { currency: string; available: number; reserved: number; total: number; lastUpdated: string }>(null);\n  const [demoLoading, setDemoLoading] = useState(false);\n  const [demoError, setDemoError] = useState<string | null>(null);\n\n  // Demo credits faucet cooldown (24h) - persisted per user\n  const [demoNextAtMs, setDemoNextAtMs] = useState<number | null>(null);\n  const [demoRemainingMs, setDemoRemainingMs] = useState<number>(0);\n\n  const demoCooldownKey = useMemo(() => {\n    return user?.id ? `fcz_demo_credits_next_at:${user.id}` : null;\n  }, [user?.id]);\n\n  const formatRemaining = useCallback((ms: number) => {\n    const totalSeconds = Math.max(0, Math.floor(ms / 1000));\n    const hours = Math.floor(totalSeconds / 3600);\n    const minutes = Math.floor((totalSeconds % 3600) / 60);\n    const seconds = totalSeconds % 60;\n    const pad = (n: number) => String(n).padStart(2, '0');\n    return `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;\n  }, []);\n\n  useEffect(() => {\n    if (!demoCooldownKey) {\n      setDemoNextAtMs(null);\n      setDemoRemainingMs(0);\n      return;\n    }\n    try {\n      const raw = localStorage.getItem(demoCooldownKey);\n      const parsed = raw ? Number(raw) : NaN;\n      if (Number.isFinite(parsed) && parsed > 0) {\n        setDemoNextAtMs(parsed);\n      } else {\n        setDemoNextAtMs(null);\n        setDemoRemainingMs(0);\n      }\n    } catch {\n      setDemoNextAtMs(null);\n      setDemoRemainingMs(0);\n    }\n  }, [demoCooldownKey]);\n\n  useEffect(() => {\n    if (!demoCooldownKey || !demoNextAtMs) {\n      setDemoRemainingMs(0);\n      return;\n    }\n\n    const tick = () => {\n      const remaining = demoNextAtMs - Date.now();\n      if (remaining <= 0) {\n        setDemoRemainingMs(0);\n        setDemoNextAtMs(null);\n        try {\n          localStorage.removeItem(demoCooldownKey);\n        } catch {}\n        return;\n      }\n      setDemoRemainingMs(remaining);\n    };\n\n    tick();\n    const id = window.setInterval(tick, 1000);\n    return () => window.clearInterval(id);\n  }, [demoCooldownKey, demoNextAtMs]);\n\n  // Transaction history from database\n  const { data: activityData, isLoading: loadingActivity, refetch: refetchActivity } = useWalletActivity(user?.id, 20);\n\n  const fetchDemoSummary = useCallback(async () => {\n    if (!user?.id) return;\n    try {\n      setDemoLoading(true);\n      setDemoError(null);\n      const resp = await fetch(`${getApiUrl()}/api/demo-wallet/summary?userId=${user.id}`);\n      const json = await resp.json().catch(() => null);\n      if (!resp.ok) {\n        throw new Error(json?.message || 'Failed to load demo wallet');\n      }\n      setDemoSummary(json?.summary ?? null);\n    } catch (e: any) {\n      setDemoError(e?.message || 'Failed to load demo wallet');\n      setDemoSummary(null);\n    } finally {\n      setDemoLoading(false);\n    }\n  }, [user?.id]);\n\n  const faucetDemo = useCallback(async () => {\n    if (!user?.id) return;\n    if (demoRemainingMs > 0) {\n      return;\n    }\n    try {\n      setDemoLoading(true);\n      setDemoError(null);\n      const resp = await fetch(`${getApiUrl()}/api/demo-wallet/faucet`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ userId: user.id }),\n      });\n      const json = await resp.json().catch(() => null);\n      if (!resp.ok) {\n        throw new Error(json?.message || 'Failed to faucet demo credits');\n      }\n      setDemoSummary(json?.summary ?? null);\n      await refetchActivity();\n      const nextEligibleAt = json?.nextEligibleAt ? Date.parse(String(json.nextEligibleAt)) : NaN;\n      const nextAt = Number.isFinite(nextEligibleAt) ? nextEligibleAt : Date.now() + 24 * 60 * 60 * 1000;\n      setDemoNextAtMs(nextAt);\n      setDemoRemainingMs(nextAt - Date.now());\n      if (demoCooldownKey) {\n        try {\n          // Persist cooldown using server-provided nextEligibleAt when possible\n          if (json?.nextEligibleAt) {\n            setCooldown(demoCooldownKey, String(json.nextEligibleAt));\n          } else {\n            localStorage.setItem(demoCooldownKey, String(nextAt));\n          }\n        } catch {}\n      }\n      if (json?.alreadyGranted) {\n        toast(`Not yet available. Next request in ${formatRemaining(nextAt - Date.now())}.`, { id: 'demo-faucet', icon: '⏳' });\n      } else {\n        toast('Demo credits added.', { id: 'demo-faucet', icon: '✅' });\n      }\n    } catch (e: any) {\n      setDemoError(e?.message || 'Failed to faucet demo credits');\n      toast(e?.message || 'Failed to add demo credits', { id: 'demo-faucet', icon: '⚠️' });\n    } finally {\n      setDemoLoading(false);\n    }\n  }, [user?.id, refetchActivity, demoRemainingMs, demoCooldownKey]);\n\n  useEffect(() => {\n    if (isDemoMode) {\n      void fetchDemoSummary();\n    }\n  }, [isDemoMode, fetchDemoSummary]);\n  \n  const activities = activityData?.items || [];\n  \n  // Modal states\n  const [showDepositModal, setShowDepositModal] = useState(false);\n  const [showWithdrawModal, setShowWithdrawModal] = useState(false);\n  const [showConnectWallet, setShowConnectWallet] = useState(false);\n\n  const [showFiatDeposit, setShowFiatDeposit] = useState(false);\n  const [showFiatWithdraw, setShowFiatWithdraw] = useState(false);\n\n  const isLoading = isFiatMode ? loadingFiat : (loadingWalletBalance || loadingSnapshot);\n\n  const recordOnchainTransactions = useCallback(async () => {\n    if (!user?.id) return;\n    // Best-effort: ask the server to reconcile and record recent on-chain deposits/withdrawals into wallet_transactions\n    try {\n      const params = new URLSearchParams({ userId: user.id, refresh: '1' });\n      if (address) params.set('walletAddress', address.toLowerCase());\n      await fetch(`${getApiUrl()}/api/wallet/summary?${params.toString()}`);\n    } catch (e) {\n      // non-fatal: balances still come from on-chain reads\n      console.warn('[wallet] recordOnchainTransactions failed (non-fatal):', e);\n    }\n  }, [user?.id, address]);\n\n  const handleRefresh = useCallback(async () => {\n    await recordOnchainTransactions();\n    await Promise.all([refetchWallet(), refetchSnapshot(), refetchActivity(), refetchFiat()]);\n  }, [recordOnchainTransactions, refetchWallet, refetchSnapshot, refetchActivity, refetchFiat]);\n\n  const handleDeposit = () => {\n    if (isFiatMode) {\n      setShowFiatDeposit(true);\n      return;\n    }\n    if (!isConnected) {\n      setShowConnectWallet(true);\n    } else {\n      setShowDepositModal(true);\n    }\n  };\n\n  const handleWithdraw = () => {\n    if (isFiatMode) {\n      setShowFiatWithdraw(true);\n      return;\n    }\n    if (!isConnected) {\n      setShowConnectWallet(true);\n    } else {\n      setShowWithdrawModal(true);\n    }\n  };\n\n  const getActivityIcon = (kind: string) => {\n    switch (kind) {\n      case 'deposit':\n        return { Icon: Plus, color: 'green' };\n      case 'withdraw':\n        return { Icon: ArrowDownToLine, color: 'blue' };\n      case 'lock':\n      case 'bet_placed':\n        return { Icon: Lock, color: 'orange' };\n      case 'unlock':\n      case 'bet_refund':\n        return { Icon: RefreshCw, color: 'purple' };\n      case 'payout':\n        return { Icon: DollarSign, color: 'green' };\n      case 'creator_fee':\n        return { Icon: DollarSign, color: 'emerald' };\n      case 'platform_fee':\n        return { Icon: DollarSign, color: 'indigo' };\n      default:\n        return { Icon: DollarSign, color: 'gray' };\n    }\n  };\n\n  const getActivityLabel = (kind: string) => {\n    switch (kind) {\n      case 'deposit':\n        return 'Deposit';\n      case 'withdraw':\n        return 'Withdrawal';\n      case 'lock':\n        return 'Funds Reserved';\n      case 'unlock':\n        return 'Funds Released';\n      case 'bet_placed':\n        return 'Stake Placed';\n        return 'Bet Placed';\n      case 'bet_refund':\n        return 'Bet Refunded';\n      case 'payout':\n        return 'Payout';\n      case 'creator_fee':\n        return 'Creator Earnings';\n      case 'platform_fee':\n        return 'Platform Fee';\n      default:\n        return kind.replace(/_/g, ' ');\n    }\n  };\n\n  // Handle authentication required\n  if (!isAuthenticated) {\n    return (\n      <>\n        <AppHeader title=\"Wallet\" />\n        <Page>\n          <AuthRequiredState\n            icon={<DollarSign />}\n            title=\"Sign in to view your wallet\"\n            description=\"Manage your funds and transaction history.\"\n            intent=\"view_wallet\"\n          />\n        </Page>\n      </>\n    );\n  }\n\n  return (\n    <>\n      <AppHeader \n        title=\"Wallet\" \n        // Keep title visually centered even when there are multiple right-side actions.\n        left={isConnected ? <div className=\"w-[72px]\" /> : undefined}\n        action={\n          isConnected ? (\n            <div className=\"flex items-center gap-1\">\n              <button\n                onClick={handleRefresh}\n                disabled={isLoading}\n                className=\"rounded-full p-2 text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors disabled:opacity-50\"\n                aria-label=\"Refresh balances\"\n              >\n                <RefreshCw className={`w-5 h-5 ${isLoading ? 'animate-spin' : ''}`} />\n              </button>\n              <button\n                onClick={() => disconnect()}\n                className=\"rounded-full p-2 text-gray-600 hover:bg-gray-100 hover:text-gray-900 transition-colors\"\n                aria-label=\"Disconnect wallet\"\n              >\n                <X className=\"w-5 h-5\" />\n              </button>\n            </div>\n          ) : null\n        }\n      />\n      \n      <Page>\n        {/* Funding mode toggle (Demo/Fiat gated by feature flags + store-safe mode) */}\n        {(showDemo || effectiveFiatEnabled || effectiveCryptoEnabled) && (\n          <div className=\"mb-4\">\n            <div className=\"inline-flex rounded-lg bg-gray-100 p-1 flex-wrap gap-1\">\n              {effectiveCryptoEnabled && (\n                <button\n                  onClick={() => setMode('crypto')}\n                  className={`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${\n                    isCryptoMode ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-600 hover:text-gray-900'\n                  }`}\n                >\n                  Crypto (USDC)\n                </button>\n              )}\n              {showDemo && (\n                <button\n                  onClick={() => setMode('demo')}\n                  className={`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${\n                    isDemoMode ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-600 hover:text-gray-900'\n                  }`}\n                >\n                  Demo Credits\n                </button>\n              )}\n              {effectiveFiatEnabled && (\n                <button\n                  onClick={() => setMode('fiat')}\n                  className={`px-3 py-1.5 text-sm font-medium rounded-md transition-colors ${\n                    isFiatMode ? 'bg-white text-gray-900 shadow-sm' : 'text-gray-600 hover:text-gray-900'\n                  }`}\n                >\n                  Fiat (NGN)\n                </button>\n              )}\n            </div>\n            {Runtime.storeSafeMode && (\n              <p className=\"mt-2 text-xs text-gray-500\">Demo Mode</p>\n            )}\n          </div>\n        )}\n\n        {isCryptoMode && !isConnected ? (\n          <Card>\n            <CardContent>\n              <div className=\"text-center py-8\">\n                <Wallet className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n                <h3 className=\"text-lg font-semibold text-gray-900 mb-2\">\n                  Connect Your Wallet\n                </h3>\n                <p className=\"text-sm text-gray-600 mb-4\">\n                  Connect your crypto wallet to view balances and manage funds\n                </p>\n                <button\n                  onClick={() => setShowConnectWallet(true)}\n                  className=\"px-6 py-3 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors\"\n                >\n                  Connect Wallet\n                </button>\n                {/* Funding Guide Link */}\n                <div className=\"mt-6 pt-4 border-t border-gray-100\">\n                  <p className=\"text-sm text-gray-500 mb-2\">Don't have a wallet yet?</p>\n                  <a\n                    href=\"https://fanclubz.app/docs/funding-guide\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"inline-flex items-center space-x-1 text-sm font-medium text-emerald-600 hover:text-emerald-700 transition-colors\"\n                  >\n                    <HelpCircle className=\"w-4 h-4\" />\n                    <span>Learn how to get started</span>\n                  </a>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ) : isLoading ? (\n          <>\n            <SkeletonStatRow />\n            <SkeletonCard />\n            <SkeletonCard />\n          </>\n        ) : (\n          <>\n            {/* Balance Overview */}\n            <StatRow>\n              {isDemoMode ? (\n                <>\n                  <StatCard\n                    label=\"Demo Credits\"\n                    value={demoSummary?.total ?? 0}\n                    variant=\"currency\"\n                    icon={<Wallet className=\"w-4 h-4\" />}\n                    subtitle=\"Total\"\n                  />\n                  <StatCard\n                    label=\"Available\"\n                    value={demoSummary?.available ?? 0}\n                    variant=\"currency\"\n                    icon={<DollarSign className=\"w-4 h-4\" />}\n                    subtitle=\"Ready to stake\"\n                  />\n                  <StatCard\n                    label=\"In Bets\"\n                    value={demoSummary?.reserved ?? 0}\n                    variant=\"currency\"\n                    icon={<Lock className=\"w-4 h-4\" />}\n                    subtitle=\"Currently locked\"\n                  />\n                </>\n              ) : isFiatMode ? (\n                <>\n                  <StatCard\n                    label=\"Fiat Wallet\"\n                    value={fiatData?.summary?.totalNgn ?? 0}\n                    variant=\"currency\"\n                    currency=\"NGN\"\n                    compact\n                    icon={<Banknote className=\"w-4 h-4\" />}\n                    subtitle=\"Total\"\n                  />\n                  <StatCard\n                    label=\"Available\"\n                    value={fiatData?.summary?.availableNgn ?? 0}\n                    variant=\"currency\"\n                    currency=\"NGN\"\n                    compact\n                    icon={<DollarSign className=\"w-4 h-4\" />}\n                    subtitle=\"Ready to stake\"\n                  />\n                  <StatCard\n                    label=\"In Bets\"\n                    value={fiatData?.summary?.lockedNgn ?? 0}\n                    variant=\"currency\"\n                    currency=\"NGN\"\n                    compact\n                    icon={<Lock className=\"w-4 h-4\" />}\n                    subtitle=\"Currently locked\"\n                  />\n                </>\n              ) : (\n                <>\n                  <StatCard \n                    label=\"Wallet Balance\" \n                    value={walletBalance || 0} \n                    variant=\"currency\"\n                    icon={<Wallet className=\"w-4 h-4\" />}\n                    subtitle=\"USDC on Base\"\n                  />\n                  <StatCard \n                    label=\"Available\" \n                    value={availableUSD} \n                    variant=\"currency\"\n                    icon={<DollarSign className=\"w-4 h-4\" />}\n                    subtitle=\"Ready to stake\"\n                  />\n                  <StatCard \n                    label=\"In Bets\" \n                    value={reservedUSD}\n                    variant=\"currency\"\n                    icon={<Lock className=\"w-4 h-4\" />}\n                    subtitle=\"Currently locked\"\n                  />\n                </>\n              )}\n            </StatRow>\n\n            {/* Phase 7D: FX USD estimates (display-only) */}\n            {isFiatMode && (\n              <div className=\"mt-3 mb-1 px-1\">\n                {(() => {\n                  const fx = fiatData?.fx;\n                  const usdEst = fiatData?.summary?.usdEstimate;\n                  const fxOk = fx && fx.rate != null && !fx.isStale && Number.isFinite(usdEst);\n                  const totalUsdEst = fxOk && isConnected\n                    ? (usdEst ?? 0) + (snapshot?.availableToStakeUSDC ?? 0)\n                    : fxOk ? (usdEst ?? 0) : null;\n                  const asOf = fx?.asOf ? new Date(fx.asOf).toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit' }) : null;\n                  const retrievedAt = fx?.retrievedAt ? new Date(fx.retrievedAt).toLocaleTimeString(undefined, { hour: '2-digit', minute: '2-digit' }) : null;\n                  return (\n                    <div className=\"space-y-1 text-xs text-gray-500\">\n                      {fxOk ? (\n                        <>\n                          <p>\n                            Approx. available ≈ {formatCurrency(usdEst!, { compact: false, currency: 'USD' })}\n                            {asOf ? ` · Rate as of ${asOf}` : ''}\n                            {fx?.source ? ` · Source ${fx.source}` : ''}\n                            {retrievedAt ? ` · Updated ${retrievedAt}` : ''}\n                          </p>\n                          {totalUsdEst != null && (\n                            <p className=\"font-medium text-gray-700\">Total (USD est.) ≈ {formatCurrency(totalUsdEst, { compact: false, currency: 'USD' })}</p>\n                          )}\n                        </>\n                      ) : (\n                        <p>Rates temporarily unavailable</p>\n                      )}\n                    </div>\n                  );\n                })()}\n              </div>\n            )}\n\n            {/* Chain Warning */}\n            {isCryptoMode && !isCorrectChain && (\n              <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4\">\n                <div className=\"flex items-center justify-between gap-3\">\n                  <p className=\"text-sm text-amber-800\">\n                    ⚠️ Please switch to Base Sepolia network to view accurate balances and make transactions\n                  </p>\n                  {isConnected && (\n                    <button\n                      type=\"button\"\n                      onClick={() => switchChain({ chainId: baseSepolia.id })}\n                      className=\"inline-flex items-center gap-2 rounded-lg border border-amber-300 bg-white px-3 py-1 text-xs font-medium text-amber-900 hover:bg-amber-100 transition-colors\"\n                    >\n                      <ArrowRightLeft className=\"w-4 h-4\" />\n                      Switch\n                    </button>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {isDemoMode && demoError && (\n              <div className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 mb-4\">\n                <p className=\"text-sm text-amber-800\">{demoError}</p>\n              </div>\n            )}\n\n            {/* Quick Actions Card */}\n            <Card>\n              <CardHeader title=\"Quick Actions\" />\n              <CardContent>\n                {isDemoMode ? (\n                  <div className=\"grid grid-cols-1 gap-4\">\n                    <button\n                      onClick={faucetDemo}\n                      disabled={demoLoading || demoRemainingMs > 0}\n                      className=\"flex items-center justify-center space-x-2 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 p-4 rounded-xl transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      <Plus className=\"w-5 h-5\" />\n                      <span>\n                        {demoRemainingMs > 0\n                          ? `Next credits in ${formatRemaining(demoRemainingMs)}`\n                          : 'Get Demo Credits'}\n                      </span>\n                    </button>\n                  </div>\n                ) : (\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <button\n                      onClick={handleDeposit}\n                      className=\"flex items-center justify-center space-x-2 bg-emerald-50 hover:bg-emerald-100 text-emerald-700 p-4 rounded-xl transition-colors font-medium\"\n                    >\n                      <Plus className=\"w-5 h-5\" />\n                      <span>{isFiatMode ? 'Deposit NGN' : 'Deposit'}</span>\n                    </button>\n                    <button\n                      onClick={handleWithdraw}\n                      disabled={isFiatMode ? (Number(fiatData?.summary?.availableNgn ?? 0) <= 0) : (totalUSD <= 0)}\n                      className=\"flex items-center justify-center space-x-2 bg-blue-50 hover:bg-blue-100 text-blue-700 p-4 rounded-xl transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed\"\n                    >\n                      <ArrowDownToLine className=\"w-5 h-5\" />\n                      <span>{isFiatMode ? 'Withdraw NGN' : 'Withdraw'}</span>\n                    </button>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n\n            {/* Transaction History Card */}\n            <Card>\n              <CardHeader title=\"Recent Activity\" />\n              <CardContent>\n                {loadingActivity ? (\n                  <div className=\"text-center py-6\">\n                    <RefreshCw className=\"w-6 h-6 animate-spin mx-auto mb-2 text-gray-400\" />\n                    <p className=\"text-sm text-gray-600\">Loading activity...</p>\n                  </div>\n                ) : activities.length > 0 ? (\n                  <div className=\"space-y-2\">\n                    {activities.map((activity) => {\n                      const { Icon, color } = getActivityIcon(activity.kind);\n                      const tx = formatTxAmount({\n                        amount: activity.amountUSD ?? 0,\n                        kind: activity.kind,\n                        compact: true,\n                        currency: (activity as any)?.meta?.currency || 'USD',\n                      });\n                      \n                      return (\n                        <div key={activity.id} className=\"flex items-center justify-between py-3 border-b border-gray-100 last:border-0\">\n                          <div className=\"flex items-center space-x-3\">\n                            <div className={`w-8 h-8 rounded-full flex items-center justify-center bg-${color}-100 text-${color}-600`}>\n                              <Icon className=\"w-4 h-4\" />\n                            </div>\n                            <div className=\"flex-1 min-w-0\">\n                              <p className=\"text-sm font-medium text-gray-900\">\n                                {getActivityLabel(activity.kind)}\n                              </p>\n                              <p className=\"text-xs text-gray-500\">\n                                {new Date(activity.createdAt).toLocaleDateString('en-US', {\n                                  month: 'short',\n                                  day: 'numeric',\n                                  hour: 'numeric',\n                                  minute: '2-digit'\n                                })}\n                              </p>\n                            </div>\n                          </div>\n                          <div className=\"text-right\">\n                            <p className={`text-sm font-semibold ${toneClass(tx.tone)}`}>\n                              {tx.display}\n                            </p>\n                            {activity.txHash && /^0x[a-fA-F0-9]{64}$/.test(String(activity.txHash)) && (\n                              <a\n                                href={`https://sepolia.basescan.org/tx/${activity.txHash}`}\n                                target=\"_blank\"\n                                rel=\"noopener noreferrer\"\n                                className=\"text-xs text-blue-600 hover:underline\"\n                              >\n                                View tx\n                              </a>\n                            )}\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                ) : (\n                  <div className=\"py-8 text-center\">\n                    <EmptyState\n                      title=\"No activity yet\"\n                      description=\"Your transaction history will appear here.\"\n                      primaryAction={\n                        <button\n                          onClick={handleDeposit}\n                          className=\"px-4 py-2 bg-emerald-600 text-white rounded-lg font-medium hover:bg-emerald-700 transition-colors\"\n                        >\n                          Make Your First Deposit\n                        </button>\n                      }\n                    />\n                    {/* Funding Guide Link */}\n                    <div className=\"mt-6 pt-4 border-t border-gray-100\">\n                      <p className=\"text-sm text-gray-500 mb-2\">New to crypto wallets?</p>\n                      <a\n                        href=\"https://fanclubz.app/docs/funding-guide\"\n                        target=\"_blank\"\n                        rel=\"noopener noreferrer\"\n                        className=\"inline-flex items-center space-x-1 text-sm font-medium text-emerald-600 hover:text-emerald-700 transition-colors\"\n                      >\n                        <HelpCircle className=\"w-4 h-4\" />\n                        <span>Learn how to fund your wallet</span>\n                      </a>\n                    </div>\n                  </div>\n                )}\n              </CardContent>\n            </Card>\n          </>\n        )}\n      </Page>\n\n      {/* Modals */}\n      {showDepositModal && user?.id && (\n        <DepositUSDCModal\n          open={showDepositModal}\n          onClose={() => setShowDepositModal(false)}\n          onSuccess={() => {\n            setShowDepositModal(false);\n            handleRefresh();\n          }}\n          availableUSDC={walletBalance || 0}\n          userId={user.id}\n        />\n      )}\n      \n      {showWithdrawModal && user?.id && (\n        <WithdrawUSDCModal\n          open={showWithdrawModal}\n          onClose={() => setShowWithdrawModal(false)}\n          onSuccess={() => {\n            setShowWithdrawModal(false);\n            handleRefresh();\n          }}\n          availableUSDC={availableUSD}\n          userId={user.id}\n        />\n      )}\n\n      {/* Fiat sheets (NGN) - gated by capabilities */}\n      {effectiveFiatEnabled && user?.id && capabilities.allowFiat && (\n        <>\n          <FiatDepositSheet open={showFiatDeposit} onClose={() => setShowFiatDeposit(false)} userId={user.id} userEmail={user.email} />\n          <FiatWithdrawalSheet\n            open={showFiatWithdraw}\n            onClose={() => setShowFiatWithdraw(false)}\n            userId={user.id}\n            fiatSummary={fiatData?.summary ?? null}\n          />\n        </>\n      )}\n      \n      {/* Connect wallet - gated by capabilities */}\n      {showConnectWallet && capabilities.allowCrypto && (\n        <ConnectWalletSheet\n          isOpen={showConnectWallet}\n          onClose={() => setShowConnectWallet(false)}\n        />\n      )}\n    </>\n  );\n};\n\nexport default WalletPage;\n"],"names":["Card","children","className","props","jsx","cn","CardHeader","title","meta","actions","jsxs","CardTitle","CardMeta","CardContent","StatCard","label","value","icon","loading","error","tooltip","variant","compact","subtitle","currency","formatValue","val","numValue","formatCurrency","formatUSDCompact","formatPercentage","amount","formatted","formatNumberShort","formatLargeNumber","getValueColor","StatRow","Skeleton","SkeletonLines","count","_","i","SkeletonStatCard","SkeletonStatRow","SkeletonCard","includeHeader","useEscrowSnapshot","userId","options","walletAddress","query","useQuery","QK","params","apiBase","getApiUrl","controller","timeout","r","e","useEffect","onFocus","WalletPage","onNavigateBack","user","isAuthenticated","useAuthStore","address","isConnected","chainId","useAccount","disconnect","useDisconnect","switchChain","useSwitchChain","useAutoNetworkSwitch","mode","setMode","isDemoEnabled","isFiatEnabled","setFiatEnabled","useFundingModeStore","capabilities","Runtime","showDemo","effectiveFiatEnabled","effectiveCryptoEnabled","isDemoMode","isFiatMode","isCryptoMode","paystackStatus","usePaystackStatus","fiatData","loadingFiat","refetchFiat","useFiatSummary","walletBalance","loadingWalletBalance","refetchWallet","useUSDCBalance","snapshot","loadingSnapshot","refetchSnapshot","availableUSD","reservedUSD","totalUSD","isCorrectChain","baseSepolia","demoSummary","setDemoSummary","useState","demoLoading","setDemoLoading","demoError","setDemoError","demoNextAtMs","setDemoNextAtMs","demoRemainingMs","setDemoRemainingMs","demoCooldownKey","useMemo","formatRemaining","useCallback","ms","totalSeconds","hours","minutes","seconds","pad","n","raw","parsed","tick","remaining","id","activityData","loadingActivity","refetchActivity","useWalletActivity","fetchDemoSummary","resp","json","faucetDemo","nextEligibleAt","nextAt","setCooldown","toast","activities","showDepositModal","setShowDepositModal","showWithdrawModal","setShowWithdrawModal","showConnectWallet","setShowConnectWallet","showFiatDeposit","setShowFiatDeposit","showFiatWithdraw","setShowFiatWithdraw","isLoading","recordOnchainTransactions","handleRefresh","handleDeposit","handleWithdraw","getActivityIcon","kind","Plus","ArrowDownToLine","Lock","RefreshCw","DollarSign","getActivityLabel","Fragment","AppHeader","X","Page","Wallet","HelpCircle","Banknote","fx","usdEst","fxOk","totalUsdEst","asOf","retrievedAt","ArrowRightLeft","activity","Icon","color","tx","formatTxAmount","toneClass","EmptyState","DepositUSDCModal","WithdrawUSDCModal","FiatDepositSheet","FiatWithdrawalSheet","ConnectWalletSheet","AuthRequiredState"],"mappings":"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"}