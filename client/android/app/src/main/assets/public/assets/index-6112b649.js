var dh=Object.defineProperty;var hh=(r,e,t)=>e in r?dh(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var X=(r,e,t)=>(hh(r,typeof e!="symbol"?e+"":e,t),t);import{_ as O,t as fh,a as zs,j as d,A as Yr,m as oe,c as ph,R as mh,P as gh,O as yh,C as wh,T as bh,D as vh,b as xh}from"./ui-6244b3df.js";import{b as wl,r as y,g as _h,d as Eh,R as pr,a as Sh}from"./vendor-499a370b.js";import{u as kh,c as Vs,a as Ch,s as Th,Q as Ah,b as Ph}from"./utils-17ec81d9.js";function Ih(r,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in r)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(r,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var Li={},_a=wl;Li.createRoot=_a.createRoot,Li.hydrateRoot=_a.hydrateRoot;const jh="modulepreload",Oh=function(r){return"/"+r},Ea={},ue=function(e,t,n){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(i=>{if(i=Oh(i),i in Ea)return;Ea[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!n)for(let u=s.length-1;u>=0;u--){const h=s[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const l=document.createElement("link");if(l.rel=o?"stylesheet":jh,o||(l.as="script",l.crossOrigin=""),l.href=i,document.head.appendChild(l),o)return new Promise((u,h)=>{l.addEventListener("load",u),l.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var Sa="popstate";function Nh(r={}){function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return Di("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(n,s){return typeof s=="string"?s:sn(s)}return $h(e,t,null,r)}function te(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Be(r,e){if(!r){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Rh(){return Math.random().toString(36).substring(2,10)}function ka(r,e){return{usr:r.state,key:r.key,idx:e}}function Di(r,e,t=null,n){return{pathname:typeof r=="string"?r:r.pathname,search:"",hash:"",...typeof e=="string"?Tr(e):e,state:t,key:e&&e.key||n||Rh()}}function sn({pathname:r="/",search:e="",hash:t=""}){return e&&e!=="?"&&(r+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(r+=t.charAt(0)==="#"?t:"#"+t),r}function Tr(r){let e={};if(r){let t=r.indexOf("#");t>=0&&(e.hash=r.substring(t),r=r.substring(0,t));let n=r.indexOf("?");n>=0&&(e.search=r.substring(n),r=r.substring(0,n)),r&&(e.pathname=r)}return e}function $h(r,e,t,n={}){let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a="POP",c=null,l=u();l==null&&(l=0,o.replaceState({...o.state,idx:l},""));function u(){return(o.state||{idx:null}).idx}function h(){a="POP";let m=u(),x=m==null?null:m-l;l=m,c&&c({action:a,location:g.location,delta:x})}function f(m,x){a="PUSH";let b=Di(g.location,m,x);t&&t(b,m),l=u()+1;let v=ka(b,l),E=g.createHref(b);try{o.pushState(v,"",E)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;s.location.assign(E)}i&&c&&c({action:a,location:g.location,delta:1})}function p(m,x){a="REPLACE";let b=Di(g.location,m,x);t&&t(b,m),l=u();let v=ka(b,l),E=g.createHref(b);o.replaceState(v,"",E),i&&c&&c({action:a,location:g.location,delta:0})}function w(m){return Lh(m)}let g={get action(){return a},get location(){return r(s,o)},listen(m){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Sa,h),c=m,()=>{s.removeEventListener(Sa,h),c=null}},createHref(m){return e(s,m)},createURL:w,encodeLocation(m){let x=w(m);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:p,go(m){return o.go(m)}};return g}function Lh(r,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),te(t,"No window.location.(origin|href) available to create URL");let n=typeof r=="string"?r:sn(r);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=t+n),new URL(n,t)}function bl(r,e,t="/"){return Dh(r,e,t,!1)}function Dh(r,e,t,n){let s=typeof e=="string"?Tr(e):e,i=Qe(s.pathname||"/",t);if(i==null)return null;let o=vl(r);Uh(o);let a=null;for(let c=0;a==null&&c<o.length;++c){let l=Zh(i);a=Gh(o[c],l,n)}return a}function vl(r,e=[],t=[],n="",s=!1){let i=(o,a,c=s,l)=>{let u={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:a,route:o};if(u.relativePath.startsWith("/")){if(!u.relativePath.startsWith(n)&&c)return;te(u.relativePath.startsWith(n),`Absolute route path "${u.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),u.relativePath=u.relativePath.slice(n.length)}let h=Ye([n,u.relativePath]),f=t.concat(u);o.children&&o.children.length>0&&(te(o.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${h}".`),vl(o.children,e,f,h,c)),!(o.path==null&&!o.index)&&e.push({path:h,score:Wh(h,o.index),routesMeta:f})};return r.forEach((o,a)=>{if(o.path===""||!o.path?.includes("?"))i(o,a);else for(let c of xl(o.path))i(o,a,!0,c)}),e}function xl(r){let e=r.split("/");if(e.length===0)return[];let[t,...n]=e,s=t.endsWith("?"),i=t.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=xl(n.join("/")),a=[];return a.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&a.push(...o),a.map(c=>r.startsWith("/")&&c===""?"/":c)}function Uh(r){r.sort((e,t)=>e.score!==t.score?t.score-e.score:Hh(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}var Bh=/^:[\w-]+$/,Mh=3,Fh=2,zh=1,Vh=10,qh=-2,Ca=r=>r==="*";function Wh(r,e){let t=r.split("/"),n=t.length;return t.some(Ca)&&(n+=qh),e&&(n+=Fh),t.filter(s=>!Ca(s)).reduce((s,i)=>s+(Bh.test(i)?Mh:i===""?zh:Vh),n)}function Hh(r,e){return r.length===e.length&&r.slice(0,-1).every((n,s)=>n===e[s])?r[r.length-1]-e[e.length-1]:0}function Gh(r,e,t=!1){let{routesMeta:n}=r,s={},i="/",o=[];for(let a=0;a<n.length;++a){let c=n[a],l=a===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=Ss({path:c.relativePath,caseSensitive:c.caseSensitive,end:l},u),f=c.route;if(!h&&l&&t&&!n[n.length-1].route.index&&(h=Ss({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(s,h.params),o.push({params:s,pathname:Ye([i,h.pathname]),pathnameBase:Xh(Ye([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=Ye([i,h.pathnameBase]))}return o}function Ss(r,e){typeof r=="string"&&(r={path:r,caseSensitive:!1,end:!0});let[t,n]=Kh(r.path,r.caseSensitive,r.end),s=e.match(t);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((l,{paramName:u,isOptional:h},f)=>{if(u==="*"){let w=a[f]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[u]=void 0:l[u]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:i,pathnameBase:o,pattern:r}}function Kh(r,e=!1,t=!0){Be(r==="*"||!r.endsWith("*")||r.endsWith("/*"),`Route path "${r}" will be treated as if it were "${r.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${r.replace(/\*$/,"/*")}".`);let n=[],s="^"+r.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,c)=>(n.push({paramName:a,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return r.endsWith("*")?(n.push({paramName:"*"}),s+=r==="*"||r==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":r!==""&&r!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function Zh(r){try{return r.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Be(!1,`The URL path "${r}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),r}}function Qe(r,e){if(e==="/")return r;if(!r.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=r.charAt(t);return n&&n!=="/"?null:r.slice(t)||"/"}function Jh(r,e="/"){let{pathname:t,search:n="",hash:s=""}=typeof r=="string"?Tr(r):r;return{pathname:t?t.startsWith("/")?t:Yh(t,e):e,search:ef(n),hash:tf(s)}}function Yh(r,e){let t=e.replace(/\/+$/,"").split("/");return r.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function li(r,e,t,n){return`Cannot include a '${r}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function Qh(r){return r.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _l(r){let e=Qh(r);return e.map((t,n)=>n===e.length-1?t.pathname:t.pathnameBase)}function El(r,e,t,n=!1){let s;typeof r=="string"?s=Tr(r):(s={...r},te(!s.pathname||!s.pathname.includes("?"),li("?","pathname","search",s)),te(!s.pathname||!s.pathname.includes("#"),li("#","pathname","hash",s)),te(!s.search||!s.search.includes("#"),li("#","search","hash",s)));let i=r===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=t;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;s.pathname=f.join("/")}a=h>=0?e[h]:"/"}let c=Jh(s,a),l=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(l||u)&&(c.pathname+="/"),c}var Ye=r=>r.join("/").replace(/\/\/+/g,"/"),Xh=r=>r.replace(/\/+$/,"").replace(/^\/*/,"/"),ef=r=>!r||r==="?"?"":r.startsWith("?")?r:"?"+r,tf=r=>!r||r==="#"?"":r.startsWith("#")?r:"#"+r;function rf(r){return r!=null&&typeof r.status=="number"&&typeof r.statusText=="string"&&typeof r.internal=="boolean"&&"data"in r}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var Sl=["POST","PUT","PATCH","DELETE"];new Set(Sl);var nf=["GET",...Sl];new Set(nf);var Ar=y.createContext(null);Ar.displayName="DataRouter";var qs=y.createContext(null);qs.displayName="DataRouterState";y.createContext(!1);var kl=y.createContext({isTransitioning:!1});kl.displayName="ViewTransition";var sf=y.createContext(new Map);sf.displayName="Fetchers";var of=y.createContext(null);of.displayName="Await";var Fe=y.createContext(null);Fe.displayName="Navigation";var Rn=y.createContext(null);Rn.displayName="Location";var ze=y.createContext({outlet:null,matches:[],isDataRoute:!1});ze.displayName="Route";var jo=y.createContext(null);jo.displayName="RouteError";function af(r,{relative:e}={}){te($n(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:n}=y.useContext(Fe),{hash:s,pathname:i,search:o}=Ln(r,{relative:e}),a=i;return t!=="/"&&(a=i==="/"?t:Ye([t,i])),n.createHref({pathname:a,search:o,hash:s})}function $n(){return y.useContext(Rn)!=null}function Te(){return te($n(),"useLocation() may be used only in the context of a <Router> component."),y.useContext(Rn).location}var Cl="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Tl(r){y.useContext(Fe).static||y.useLayoutEffect(r)}function Qt(){let{isDataRoute:r}=y.useContext(ze);return r?xf():cf()}function cf(){te($n(),"useNavigate() may be used only in the context of a <Router> component.");let r=y.useContext(Ar),{basename:e,navigator:t}=y.useContext(Fe),{matches:n}=y.useContext(ze),{pathname:s}=Te(),i=JSON.stringify(_l(n)),o=y.useRef(!1);return Tl(()=>{o.current=!0}),y.useCallback((c,l={})=>{if(Be(o.current,Cl),!o.current)return;if(typeof c=="number"){t.go(c);return}let u=El(c,JSON.parse(i),s,l.relative==="path");r==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:Ye([e,u.pathname])),(l.replace?t.replace:t.push)(u,l.state,l)},[e,t,i,s,r])}y.createContext(null);function lf(){let{matches:r}=y.useContext(ze),e=r[r.length-1];return e?e.params:{}}function Ln(r,{relative:e}={}){let{matches:t}=y.useContext(ze),{pathname:n}=Te(),s=JSON.stringify(_l(t));return y.useMemo(()=>El(r,JSON.parse(s),n,e==="path"),[r,s,n,e])}function uf(r,e){return Al(r,e)}function Al(r,e,t,n,s){te($n(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:i}=y.useContext(Fe),{matches:o}=y.useContext(ze),a=o[o.length-1],c=a?a.params:{},l=a?a.pathname:"/",u=a?a.pathnameBase:"/",h=a&&a.route;{let b=h&&h.path||"";Pl(l,!h||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let f=Te(),p;if(e){let b=typeof e=="string"?Tr(e):e;te(u==="/"||b.pathname?.startsWith(u),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${u}" but pathname "${b.pathname}" was given in the \`location\` prop.`),p=b}else p=f;let w=p.pathname||"/",g=w;if(u!=="/"){let b=u.replace(/^\//,"").split("/");g="/"+w.replace(/^\//,"").split("/").slice(b.length).join("/")}let m=bl(r,{pathname:g});Be(h||m!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),Be(m==null||m[m.length-1].route.element!==void 0||m[m.length-1].route.Component!==void 0||m[m.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=mf(m&&m.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:Ye([u,i.encodeLocation?i.encodeLocation(b.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:Ye([u,i.encodeLocation?i.encodeLocation(b.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:b.pathnameBase])})),o,t,n,s);return e&&x?y.createElement(Rn.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},x):x}function df(){let r=vf(),e=rf(r)?`${r.status} ${r.statusText}`:r instanceof Error?r.message:JSON.stringify(r),t=r instanceof Error?r.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",r),o=y.createElement(y.Fragment,null,y.createElement("p",null,"ðŸ’¿ Hey developer ðŸ‘‹"),y.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",y.createElement("code",{style:i},"ErrorBoundary")," or"," ",y.createElement("code",{style:i},"errorElement")," prop on your route.")),y.createElement(y.Fragment,null,y.createElement("h2",null,"Unexpected Application Error!"),y.createElement("h3",{style:{fontStyle:"italic"}},e),t?y.createElement("pre",{style:s},t):null,o)}var hf=y.createElement(df,null),ff=class extends y.Component{constructor(r){super(r),this.state={location:r.location,revalidation:r.revalidation,error:r.error}}static getDerivedStateFromError(r){return{error:r}}static getDerivedStateFromProps(r,e){return e.location!==r.location||e.revalidation!=="idle"&&r.revalidation==="idle"?{error:r.error,location:r.location,revalidation:r.revalidation}:{error:r.error!==void 0?r.error:e.error,location:e.location,revalidation:r.revalidation||e.revalidation}}componentDidCatch(r,e){this.props.unstable_onError?this.props.unstable_onError(r,e):console.error("React Router caught the following error during render",r)}render(){return this.state.error!==void 0?y.createElement(ze.Provider,{value:this.props.routeContext},y.createElement(jo.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function pf({routeContext:r,match:e,children:t}){let n=y.useContext(Ar);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),y.createElement(ze.Provider,{value:r},t)}function mf(r,e=[],t=null,n=null,s=null){if(r==null){if(!t)return null;if(t.errors)r=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)r=t.matches;else return null}let i=r,o=t?.errors;if(o!=null){let l=i.findIndex(u=>u.route.id&&o?.[u.route.id]!==void 0);te(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(o).join(",")}`),i=i.slice(0,Math.min(i.length,l+1))}let a=!1,c=-1;if(t)for(let l=0;l<i.length;l++){let u=i[l];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(c=l),u.route.id){let{loaderData:h,errors:f}=t,p=u.route.loader&&!h.hasOwnProperty(u.route.id)&&(!f||f[u.route.id]===void 0);if(u.route.lazy||p){a=!0,c>=0?i=i.slice(0,c+1):i=[i[0]];break}}}return i.reduceRight((l,u,h)=>{let f,p=!1,w=null,g=null;t&&(f=o&&u.route.id?o[u.route.id]:void 0,w=u.route.errorElement||hf,a&&(c<0&&h===0?(Pl("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),p=!0,g=null):c===h&&(p=!0,g=u.route.hydrateFallbackElement||null)));let m=e.concat(i.slice(0,h+1)),x=()=>{let b;return f?b=w:p?b=g:u.route.Component?b=y.createElement(u.route.Component,null):u.route.element?b=u.route.element:b=l,y.createElement(pf,{match:u,routeContext:{outlet:l,matches:m,isDataRoute:t!=null},children:b})};return t&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?y.createElement(ff,{location:t.location,revalidation:t.revalidation,component:w,error:f,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0},unstable_onError:n}):x()},null)}function Oo(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function gf(r){let e=y.useContext(Ar);return te(e,Oo(r)),e}function yf(r){let e=y.useContext(qs);return te(e,Oo(r)),e}function wf(r){let e=y.useContext(ze);return te(e,Oo(r)),e}function No(r){let e=wf(r),t=e.matches[e.matches.length-1];return te(t.route.id,`${r} can only be used on routes that contain a unique "id"`),t.route.id}function bf(){return No("useRouteId")}function vf(){let r=y.useContext(jo),e=yf("useRouteError"),t=No("useRouteError");return r!==void 0?r:e.errors?.[t]}function xf(){let{router:r}=gf("useNavigate"),e=No("useNavigate"),t=y.useRef(!1);return Tl(()=>{t.current=!0}),y.useCallback(async(s,i={})=>{Be(t.current,Cl),t.current&&(typeof s=="number"?r.navigate(s):await r.navigate(s,{fromRouteId:e,...i}))},[r,e])}var Ta={};function Pl(r,e,t){!e&&!Ta[r]&&(Ta[r]=!0,Be(!1,t))}y.memo(_f);function _f({routes:r,future:e,state:t,unstable_onError:n}){return Al(r,void 0,t,n,e)}function fe(r){te(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ef({basename:r="/",children:e=null,location:t,navigationType:n="POP",navigator:s,static:i=!1}){te(!$n(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=r.replace(/^\/*/,"/"),a=y.useMemo(()=>({basename:o,navigator:s,static:i,future:{}}),[o,s,i]);typeof t=="string"&&(t=Tr(t));let{pathname:c="/",search:l="",hash:u="",state:h=null,key:f="default"}=t,p=y.useMemo(()=>{let w=Qe(c,o);return w==null?null:{location:{pathname:w,search:l,hash:u,state:h,key:f},navigationType:n}},[o,c,l,u,h,f,n]);return Be(p!=null,`<Router basename="${o}"> is not able to match the URL "${c}${l}${u}" because it does not start with the basename, so the <Router> won't render anything.`),p==null?null:y.createElement(Fe.Provider,{value:a},y.createElement(Rn.Provider,{children:e,value:p}))}function Sf({children:r,location:e}){return uf(Ui(r),e)}function Ui(r,e=[]){let t=[];return y.Children.forEach(r,(n,s)=>{if(!y.isValidElement(n))return;let i=[...e,s];if(n.type===y.Fragment){t.push.apply(t,Ui(n.props.children,i));return}te(n.type===fe,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),te(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Ui(n.props.children,i)),t.push(o)}),t}var ps="get",ms="application/x-www-form-urlencoded";function Ws(r){return r!=null&&typeof r.tagName=="string"}function kf(r){return Ws(r)&&r.tagName.toLowerCase()==="button"}function Cf(r){return Ws(r)&&r.tagName.toLowerCase()==="form"}function Tf(r){return Ws(r)&&r.tagName.toLowerCase()==="input"}function Af(r){return!!(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}function Pf(r,e){return r.button===0&&(!e||e==="_self")&&!Af(r)}var Fn=null;function If(){if(Fn===null)try{new FormData(document.createElement("form"),0),Fn=!1}catch{Fn=!0}return Fn}var jf=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ui(r){return r!=null&&!jf.has(r)?(Be(!1,`"${r}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ms}"`),null):r}function Of(r,e){let t,n,s,i,o;if(Cf(r)){let a=r.getAttribute("action");n=a?Qe(a,e):null,t=r.getAttribute("method")||ps,s=ui(r.getAttribute("enctype"))||ms,i=new FormData(r)}else if(kf(r)||Tf(r)&&(r.type==="submit"||r.type==="image")){let a=r.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=r.getAttribute("formaction")||a.getAttribute("action");if(n=c?Qe(c,e):null,t=r.getAttribute("formmethod")||a.getAttribute("method")||ps,s=ui(r.getAttribute("formenctype"))||ui(a.getAttribute("enctype"))||ms,i=new FormData(a,r),!If()){let{name:l,type:u,value:h}=r;if(u==="image"){let f=l?`${l}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else l&&i.append(l,h)}}else{if(Ws(r))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=ps,n=null,s=ms,o=r}return i&&s==="text/plain"&&(o=i,i=void 0),{action:n,method:t.toLowerCase(),encType:s,formData:i,body:o}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Ro(r,e){if(r===!1||r===null||typeof r>"u")throw new Error(e)}function Nf(r,e,t){let n=typeof r=="string"?new URL(r,typeof window>"u"?"server://singlefetch/":window.location.origin):r;return n.pathname==="/"?n.pathname=`_root.${t}`:e&&Qe(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${t}`,n}async function Rf(r,e){if(r.id in e)return e[r.id];try{let t=await ue(()=>import(r.module),[]);return e[r.id]=t,t}catch(t){return console.error(`Error loading route module \`${r.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function $f(r){return r!=null&&typeof r.page=="string"}function Lf(r){return r==null?!1:r.href==null?r.rel==="preload"&&typeof r.imageSrcSet=="string"&&typeof r.imageSizes=="string":typeof r.rel=="string"&&typeof r.href=="string"}async function Df(r,e,t){let n=await Promise.all(r.map(async s=>{let i=e.routes[s.route.id];if(i){let o=await Rf(i,t);return o.links?o.links():[]}return[]}));return Ff(n.flat(1).filter(Lf).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Aa(r,e,t,n,s,i){let o=(c,l)=>t[l]?c.route.id!==t[l].route.id:!0,a=(c,l)=>t[l].pathname!==c.pathname||t[l].route.path?.endsWith("*")&&t[l].params["*"]!==c.params["*"];return i==="assets"?e.filter((c,l)=>o(c,l)||a(c,l)):i==="data"?e.filter((c,l)=>{let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,l)||a(c,l))return!0;if(c.route.shouldRevalidate){let h=c.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(r,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof h=="boolean")return h}return!0}):[]}function Uf(r,e,{includeHydrateFallback:t}={}){return Bf(r.map(n=>{let s=e.routes[n.route.id];if(!s)return[];let i=[s.module];return s.clientActionModule&&(i=i.concat(s.clientActionModule)),s.clientLoaderModule&&(i=i.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(i=i.concat(s.hydrateFallbackModule)),s.imports&&(i=i.concat(s.imports)),i}).flat(1))}function Bf(r){return[...new Set(r)]}function Mf(r){let e={},t=Object.keys(r).sort();for(let n of t)e[n]=r[n];return e}function Ff(r,e){let t=new Set,n=new Set(e);return r.reduce((s,i)=>{if(e&&!$f(i)&&i.as==="script"&&i.href&&n.has(i.href))return s;let a=JSON.stringify(Mf(i));return t.has(a)||(t.add(a),s.push({key:a,link:i})),s},[])}function Il(){let r=y.useContext(Ar);return Ro(r,"You must render this element inside a <DataRouterContext.Provider> element"),r}function zf(){let r=y.useContext(qs);return Ro(r,"You must render this element inside a <DataRouterStateContext.Provider> element"),r}var $o=y.createContext(void 0);$o.displayName="FrameworkContext";function jl(){let r=y.useContext($o);return Ro(r,"You must render this element inside a <HydratedRouter> element"),r}function Vf(r,e){let t=y.useContext($o),[n,s]=y.useState(!1),[i,o]=y.useState(!1),{onFocus:a,onBlur:c,onMouseEnter:l,onMouseLeave:u,onTouchStart:h}=e,f=y.useRef(null);y.useEffect(()=>{if(r==="render"&&o(!0),r==="viewport"){let g=x=>{x.forEach(b=>{o(b.isIntersecting)})},m=new IntersectionObserver(g,{threshold:.5});return f.current&&m.observe(f.current),()=>{m.disconnect()}}},[r]),y.useEffect(()=>{if(n){let g=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(g)}}},[n]);let p=()=>{s(!0)},w=()=>{s(!1),o(!1)};return t?r!=="intent"?[i,f,{}]:[i,f,{onFocus:Dr(a,p),onBlur:Dr(c,w),onMouseEnter:Dr(l,p),onMouseLeave:Dr(u,w),onTouchStart:Dr(h,p)}]:[!1,f,{}]}function Dr(r,e){return t=>{r&&r(t),t.defaultPrevented||e(t)}}function qf({page:r,...e}){let{router:t}=Il(),n=y.useMemo(()=>bl(t.routes,r,t.basename),[t.routes,r,t.basename]);return n?y.createElement(Hf,{page:r,matches:n,...e}):null}function Wf(r){let{manifest:e,routeModules:t}=jl(),[n,s]=y.useState([]);return y.useEffect(()=>{let i=!1;return Df(r,e,t).then(o=>{i||s(o)}),()=>{i=!0}},[r,e,t]),n}function Hf({page:r,matches:e,...t}){let n=Te(),{manifest:s,routeModules:i}=jl(),{basename:o}=Il(),{loaderData:a,matches:c}=zf(),l=y.useMemo(()=>Aa(r,e,c,s,n,"data"),[r,e,c,s,n]),u=y.useMemo(()=>Aa(r,e,c,s,n,"assets"),[r,e,c,s,n]),h=y.useMemo(()=>{if(r===n.pathname+n.search+n.hash)return[];let w=new Set,g=!1;if(e.forEach(x=>{let b=s.routes[x.route.id];!b||!b.hasLoader||(!l.some(v=>v.route.id===x.route.id)&&x.route.id in a&&i[x.route.id]?.shouldRevalidate||b.hasClientLoader?g=!0:w.add(x.route.id))}),w.size===0)return[];let m=Nf(r,o,"data");return g&&w.size>0&&m.searchParams.set("_routes",e.filter(x=>w.has(x.route.id)).map(x=>x.route.id).join(",")),[m.pathname+m.search]},[o,a,n,s,l,e,r,i]),f=y.useMemo(()=>Uf(u,s),[u,s]),p=Wf(u);return y.createElement(y.Fragment,null,h.map(w=>y.createElement("link",{key:w,rel:"prefetch",as:"fetch",href:w,...t})),f.map(w=>y.createElement("link",{key:w,rel:"modulepreload",href:w,...t})),p.map(({key:w,link:g})=>y.createElement("link",{key:w,nonce:t.nonce,...g})))}function Gf(...r){return e=>{r.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var Ol=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ol&&(window.__reactRouterVersion="7.9.5")}catch{}function Kf({basename:r,children:e,window:t}){let n=y.useRef();n.current==null&&(n.current=Nh({window:t,v5Compat:!0}));let s=n.current,[i,o]=y.useState({action:s.action,location:s.location}),a=y.useCallback(c=>{y.startTransition(()=>o(c))},[o]);return y.useLayoutEffect(()=>s.listen(a),[s,a]),y.createElement(Ef,{basename:r,children:e,location:i.location,navigationType:i.action,navigator:s})}var Nl=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Rl=y.forwardRef(function({onClick:e,discover:t="render",prefetch:n="none",relative:s,reloadDocument:i,replace:o,state:a,target:c,to:l,preventScrollReset:u,viewTransition:h,...f},p){let{basename:w}=y.useContext(Fe),g=typeof l=="string"&&Nl.test(l),m,x=!1;if(typeof l=="string"&&g&&(m=l,Ol))try{let C=new URL(window.location.href),F=l.startsWith("//")?new URL(C.protocol+l):new URL(l),H=Qe(F.pathname,w);F.origin===C.origin&&H!=null?l=H+F.search+F.hash:x=!0}catch{Be(!1,`<Link to="${l}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let b=af(l,{relative:s}),[v,E,_]=Vf(n,f),S=Qf(l,{replace:o,state:a,target:c,preventScrollReset:u,relative:s,viewTransition:h});function k(C){e&&e(C),C.defaultPrevented||S(C)}let A=y.createElement("a",{...f,..._,href:m||b,onClick:x||i?e:k,ref:Gf(p,E),target:c,"data-discover":!g&&t==="render"?"true":void 0});return v&&!g?y.createElement(y.Fragment,null,A,y.createElement(qf,{page:b})):A});Rl.displayName="Link";var Zf=y.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:n="",end:s=!1,style:i,to:o,viewTransition:a,children:c,...l},u){let h=Ln(o,{relative:l.relative}),f=Te(),p=y.useContext(qs),{navigator:w,basename:g}=y.useContext(Fe),m=p!=null&&np(h)&&a===!0,x=w.encodeLocation?w.encodeLocation(h).pathname:h.pathname,b=f.pathname,v=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;t||(b=b.toLowerCase(),v=v?v.toLowerCase():null,x=x.toLowerCase()),v&&g&&(v=Qe(v,g)||v);const E=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let _=b===x||!s&&b.startsWith(x)&&b.charAt(E)==="/",S=v!=null&&(v===x||!s&&v.startsWith(x)&&v.charAt(x.length)==="/"),k={isActive:_,isPending:S,isTransitioning:m},A=_?e:void 0,C;typeof n=="function"?C=n(k):C=[n,_?"active":null,S?"pending":null,m?"transitioning":null].filter(Boolean).join(" ");let F=typeof i=="function"?i(k):i;return y.createElement(Rl,{...l,"aria-current":A,className:C,ref:u,style:F,to:o,viewTransition:a},typeof c=="function"?c(k):c)});Zf.displayName="NavLink";var Jf=y.forwardRef(({discover:r="render",fetcherKey:e,navigate:t,reloadDocument:n,replace:s,state:i,method:o=ps,action:a,onSubmit:c,relative:l,preventScrollReset:u,viewTransition:h,...f},p)=>{let w=tp(),g=rp(a,{relative:l}),m=o.toLowerCase()==="get"?"get":"post",x=typeof a=="string"&&Nl.test(a),b=v=>{if(c&&c(v),v.defaultPrevented)return;v.preventDefault();let E=v.nativeEvent.submitter,_=E?.getAttribute("formmethod")||o;w(E||v.currentTarget,{fetcherKey:e,method:_,navigate:t,replace:s,state:i,relative:l,preventScrollReset:u,viewTransition:h})};return y.createElement("form",{ref:p,method:m,action:g,onSubmit:n?c:b,...f,"data-discover":!x&&r==="render"?"true":void 0})});Jf.displayName="Form";function Yf(r){return`${r} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function $l(r){let e=y.useContext(Ar);return te(e,Yf(r)),e}function Qf(r,{target:e,replace:t,state:n,preventScrollReset:s,relative:i,viewTransition:o}={}){let a=Qt(),c=Te(),l=Ln(r,{relative:i});return y.useCallback(u=>{if(Pf(u,e)){u.preventDefault();let h=t!==void 0?t:sn(c)===sn(l);a(r,{replace:h,state:n,preventScrollReset:s,relative:i,viewTransition:o})}},[c,a,l,t,n,e,r,s,i,o])}var Xf=0,ep=()=>`__${String(++Xf)}__`;function tp(){let{router:r}=$l("useSubmit"),{basename:e}=y.useContext(Fe),t=bf();return y.useCallback(async(n,s={})=>{let{action:i,method:o,encType:a,formData:c,body:l}=Of(n,e);if(s.navigate===!1){let u=s.fetcherKey||ep();await r.fetch(u,t,s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:l,formMethod:s.method||o,formEncType:s.encType||a,flushSync:s.flushSync})}else await r.navigate(s.action||i,{preventScrollReset:s.preventScrollReset,formData:c,body:l,formMethod:s.method||o,formEncType:s.encType||a,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[r,e,t])}function rp(r,{relative:e}={}){let{basename:t}=y.useContext(Fe),n=y.useContext(ze);te(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),i={...Ln(r||".",{relative:e})},o=Te();if(r==null){i.search=o.search;let a=new URLSearchParams(i.search),c=a.getAll("index");if(c.some(u=>u==="")){a.delete("index"),c.filter(h=>h).forEach(h=>a.append("index",h));let u=a.toString();i.search=u?`?${u}`:""}}return(!r||r===".")&&s.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(i.pathname=i.pathname==="/"?t:Ye([t,i.pathname])),sn(i)}function np(r,{relative:e}={}){let t=y.useContext(kl);te(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=$l("useViewTransitionState"),s=Ln(r,{relative:e});if(!t.isTransitioning)return!1;let i=Qe(t.currentLocation.pathname,n)||t.currentLocation.pathname,o=Qe(t.nextLocation.pathname,n)||t.nextLocation.pathname;return Ss(s.pathname,o)!=null||Ss(s.pathname,i)!=null}function Dn(r,{strict:e=!0}={}){return!r||typeof r!="string"?!1:e?/^0x[0-9a-fA-F]*$/.test(r):r.startsWith("0x")}function bt(r){return Dn(r,{strict:!1})?Math.ceil((r.length-2)/2):r.length}const Ll="2.38.6";let di={getDocsUrl:({docsBaseUrl:r,docsPath:e="",docsSlug:t})=>e?`${r??"https://viem.sh"}${e}${t?`#${t}`:""}`:void 0,version:`viem@${Ll}`},R=class Bi extends Error{constructor(e,t={}){const n=(()=>t.cause instanceof Bi?t.cause.details:t.cause?.message?t.cause.message:t.details)(),s=(()=>t.cause instanceof Bi&&t.cause.docsPath||t.docsPath)(),i=di.getDocsUrl?.({...t,docsPath:s}),o=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...i?[`Docs: ${i}`]:[],...n?[`Details: ${n}`]:[],...di.version?[`Version: ${di.version}`]:[]].join(`
`);super(o,t.cause?{cause:t.cause}:void 0),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"version",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"BaseError"}),this.details=n,this.docsPath=s,this.metaMessages=t.metaMessages,this.name=t.name??this.name,this.shortMessage=e,this.version=Ll}walk(e){return Dl(this,e)}};function Dl(r,e){return e?.(r)?r:r&&typeof r=="object"&&"cause"in r&&r.cause!==void 0?Dl(r.cause,e):e?null:r}class vt extends R{constructor({address:e}){super(`Address "${e}" is invalid.`,{metaMessages:["- Address must be a hex value of 20 bytes (40 hex characters).","- Address must match its checksum counterpart."],name:"InvalidAddressError"})}}class Ul extends R{constructor({offset:e,position:t,size:n}){super(`Slice ${t==="start"?"starting":"ending"} at offset "${e}" is out-of-bounds (size: ${n}).`,{name:"SliceOffsetOutOfBoundsError"})}}class Bl extends R{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} size (${e}) exceeds padding size (${t}).`,{name:"SizeExceedsPaddingSizeError"})}}class SS extends R{constructor({size:e,targetSize:t,type:n}){super(`${n.charAt(0).toUpperCase()}${n.slice(1).toLowerCase()} is expected to be ${t} ${n} long, but is ${e} ${n} long.`,{name:"InvalidBytesLengthError"})}}function Pr(r,{dir:e,size:t=32}={}){return typeof r=="string"?sp(r,{dir:e,size:t}):ip(r,{dir:e,size:t})}function sp(r,{dir:e,size:t=32}={}){if(t===null)return r;const n=r.replace("0x","");if(n.length>t*2)throw new Bl({size:Math.ceil(n.length/2),targetSize:t,type:"hex"});return`0x${n[e==="right"?"padEnd":"padStart"](t*2,"0")}`}function ip(r,{dir:e,size:t=32}={}){if(t===null)return r;if(r.length>t)throw new Bl({size:r.length,targetSize:t,type:"bytes"});const n=new Uint8Array(t);for(let s=0;s<t;s++){const i=e==="right";n[i?s:t-s-1]=r[i?s:r.length-s-1]}return n}class op extends R{constructor({max:e,min:t,signed:n,size:s,value:i}){super(`Number "${i}" is not in safe ${s?`${s*8}-bit ${n?"signed":"unsigned"} `:""}integer range ${e?`(${t} to ${e})`:`(above ${t})`}`,{name:"IntegerOutOfRangeError"})}}class kS extends R{constructor(e){super(`Bytes value "${e}" is not a valid boolean. The bytes array must contain a single byte of either a 0 or 1 value.`,{name:"InvalidBytesBooleanError"})}}class ap extends R{constructor(e){super(`Hex value "${e}" is not a valid boolean. The hex value must be "0x0" (false) or "0x1" (true).`,{name:"InvalidHexBooleanError"})}}class cp extends R{constructor({givenSize:e,maxSize:t}){super(`Size cannot exceed ${t} bytes. Given size: ${e} bytes.`,{name:"SizeOverflowError"})}}function mt(r,{dir:e="left"}={}){let t=typeof r=="string"?r.replace("0x",""):r,n=0;for(let s=0;s<t.length-1&&t[e==="left"?s:t.length-s-1].toString()==="0";s++)n++;return t=e==="left"?t.slice(n):t.slice(0,t.length-n),typeof r=="string"?(t.length===1&&e==="right"&&(t=`${t}0`),`0x${t.length%2===1?`0${t}`:t}`):t}function Ct(r,{size:e}){if(bt(r)>e)throw new cp({givenSize:bt(r),maxSize:e})}function ur(r,e={}){const{signed:t}=e;e.size&&Ct(r,{size:e.size});const n=BigInt(r);if(!t)return n;const s=(r.length-2)/2,i=(1n<<BigInt(s)*8n-1n)-1n;return n<=i?n:n-BigInt(`0x${"f".padStart(s*2,"f")}`)-1n}function CS(r,e={}){let t=r;if(e.size&&(Ct(t,{size:e.size}),t=mt(t)),mt(t)==="0x00")return!1;if(mt(t)==="0x01")return!0;throw new ap(t)}function ks(r,e={}){return Number(ur(r,e))}function TS(r,e={}){let t=xt(r);return e.size&&(Ct(t,{size:e.size}),t=mt(t,{dir:"right"})),new TextDecoder().decode(t)}const lp=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Wt(r,e={}){return typeof r=="number"||typeof r=="bigint"?M(r,e):typeof r=="string"?Ml(r,e):typeof r=="boolean"?up(r,e):Tt(r,e)}function up(r,e={}){const t=`0x${Number(r)}`;return typeof e.size=="number"?(Ct(t,{size:e.size}),Pr(t,{size:e.size})):t}function Tt(r,e={}){let t="";for(let s=0;s<r.length;s++)t+=lp[r[s]];const n=`0x${t}`;return typeof e.size=="number"?(Ct(n,{size:e.size}),Pr(n,{dir:"right",size:e.size})):n}function M(r,e={}){const{signed:t,size:n}=e,s=BigInt(r);let i;n?t?i=(1n<<BigInt(n)*8n-1n)-1n:i=2n**(BigInt(n)*8n)-1n:typeof r=="number"&&(i=BigInt(Number.MAX_SAFE_INTEGER));const o=typeof i=="bigint"&&t?-i-1n:0;if(i&&s>i||s<o){const c=typeof r=="bigint"?"n":"";throw new op({max:i?`${i}${c}`:void 0,min:`${o}${c}`,signed:t,size:n,value:`${r}${c}`})}const a=`0x${(t&&s<0?(1n<<BigInt(n*8))+BigInt(s):s).toString(16)}`;return n?Pr(a,{size:n}):a}const dp=new TextEncoder;function Ml(r,e={}){const t=dp.encode(r);return Tt(t,e)}const hp=new TextEncoder;function Fl(r,e={}){return typeof r=="number"||typeof r=="bigint"?pp(r,e):typeof r=="boolean"?fp(r,e):Dn(r)?xt(r,e):zl(r,e)}function fp(r,e={}){const t=new Uint8Array(1);return t[0]=Number(r),typeof e.size=="number"?(Ct(t,{size:e.size}),Pr(t,{size:e.size})):t}const qe={zero:48,nine:57,A:65,F:70,a:97,f:102};function Pa(r){if(r>=qe.zero&&r<=qe.nine)return r-qe.zero;if(r>=qe.A&&r<=qe.F)return r-(qe.A-10);if(r>=qe.a&&r<=qe.f)return r-(qe.a-10)}function xt(r,e={}){let t=r;e.size&&(Ct(t,{size:e.size}),t=Pr(t,{dir:"right",size:e.size}));let n=t.slice(2);n.length%2&&(n=`0${n}`);const s=n.length/2,i=new Uint8Array(s);for(let o=0,a=0;o<s;o++){const c=Pa(n.charCodeAt(a++)),l=Pa(n.charCodeAt(a++));if(c===void 0||l===void 0)throw new R(`Invalid byte sequence ("${n[a-2]}${n[a-1]}" in "${n}").`);i[o]=c*16+l}return i}function pp(r,e){const t=M(r,e);return xt(t)}function zl(r,e={}){const t=hp.encode(r);return typeof e.size=="number"?(Ct(t,{size:e.size}),Pr(t,{dir:"right",size:e.size})):t}const zn=BigInt(2**32-1),Ia=BigInt(32);function mp(r,e=!1){return e?{h:Number(r&zn),l:Number(r>>Ia&zn)}:{h:Number(r>>Ia&zn)|0,l:Number(r&zn)|0}}function Vl(r,e=!1){const t=r.length;let n=new Uint32Array(t),s=new Uint32Array(t);for(let i=0;i<t;i++){const{h:o,l:a}=mp(r[i],e);[n[i],s[i]]=[o,a]}return[n,s]}const ja=(r,e,t)=>r>>>t,Oa=(r,e,t)=>r<<32-t|e>>>t,tr=(r,e,t)=>r>>>t|e<<32-t,rr=(r,e,t)=>r<<32-t|e>>>t,Vn=(r,e,t)=>r<<64-t|e>>>t-32,qn=(r,e,t)=>r>>>t-32|e<<64-t,gp=(r,e,t)=>r<<t|e>>>32-t,yp=(r,e,t)=>e<<t|r>>>32-t,wp=(r,e,t)=>e<<t-32|r>>>64-t,bp=(r,e,t)=>r<<t-32|e>>>64-t;function We(r,e,t,n){const s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}const vp=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),xp=(r,e,t,n)=>e+t+n+(r/2**32|0)|0,_p=(r,e,t,n)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0),Ep=(r,e,t,n,s)=>e+t+n+s+(r/2**32|0)|0,Sp=(r,e,t,n,s)=>(r>>>0)+(e>>>0)+(t>>>0)+(n>>>0)+(s>>>0),kp=(r,e,t,n,s,i)=>e+t+n+s+i+(r/2**32|0)|0,nr=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Cp(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function Cs(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function Kt(r,...e){if(!Cp(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function AS(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");Cs(r.outputLen),Cs(r.blockLen)}function Ts(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function ql(r,e){Kt(r);const t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function Tp(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function Zt(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function hi(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function Le(r,e){return r<<32-e|r>>>e}const Ap=(()=>new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68)();function Pp(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}function Ip(r){for(let e=0;e<r.length;e++)r[e]=Pp(r[e]);return r}const Na=Ap?r=>r:Ip,Wl=(()=>typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function")(),jp=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function PS(r){if(Kt(r),Wl)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=jp[r[t]];return e}const He={_0:48,_9:57,A:65,F:70,a:97,f:102};function Ra(r){if(r>=He._0&&r<=He._9)return r-He._0;if(r>=He.A&&r<=He.F)return r-(He.A-10);if(r>=He.a&&r<=He.f)return r-(He.a-10)}function IS(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(Wl)return Uint8Array.fromHex(r);const e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const n=new Uint8Array(t);for(let s=0,i=0;s<t;s++,i+=2){const o=Ra(r.charCodeAt(i)),a=Ra(r.charCodeAt(i+1));if(o===void 0||a===void 0){const c=r[i]+r[i+1];throw new Error('hex string expected, got non-hex character "'+c+'" at index '+i)}n[s]=o*16+a}return n}function Op(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function Lo(r){return typeof r=="string"&&(r=Op(r)),Kt(r),r}function jS(...r){let e=0;for(let n=0;n<r.length;n++){const s=r[n];Kt(s),e+=s.length}const t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){const i=r[n];t.set(i,s),s+=i.length}return t}class Hl{}function Hs(r){const e=n=>r().update(Lo(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function OS(r=32){if(nr&&typeof nr.getRandomValues=="function")return nr.getRandomValues(new Uint8Array(r));if(nr&&typeof nr.randomBytes=="function")return Uint8Array.from(nr.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}const Np=BigInt(0),Ur=BigInt(1),Rp=BigInt(2),$p=BigInt(7),Lp=BigInt(256),Dp=BigInt(113),Gl=[],Kl=[],Zl=[];for(let r=0,e=Ur,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],Gl.push(2*(5*n+t)),Kl.push((r+1)*(r+2)/2%64);let s=Np;for(let i=0;i<7;i++)e=(e<<Ur^(e>>$p)*Dp)%Lp,e&Rp&&(s^=Ur<<(Ur<<BigInt(i))-Ur);Zl.push(s)}const Jl=Vl(Zl,!0),Up=Jl[0],Bp=Jl[1],$a=(r,e,t)=>t>32?wp(r,e,t):gp(r,e,t),La=(r,e,t)=>t>32?bp(r,e,t):yp(r,e,t);function Mp(r,e=24){const t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)t[o]=r[o]^r[o+10]^r[o+20]^r[o+30]^r[o+40];for(let o=0;o<10;o+=2){const a=(o+8)%10,c=(o+2)%10,l=t[c],u=t[c+1],h=$a(l,u,1)^t[a],f=La(l,u,1)^t[a+1];for(let p=0;p<50;p+=10)r[o+p]^=h,r[o+p+1]^=f}let s=r[2],i=r[3];for(let o=0;o<24;o++){const a=Kl[o],c=$a(s,i,a),l=La(s,i,a),u=Gl[o];s=r[u],i=r[u+1],r[u]=c,r[u+1]=l}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)t[a]=r[o+a];for(let a=0;a<10;a++)r[o+a]^=~t[(a+2)%10]&t[(a+4)%10]}r[0]^=Up[n],r[1]^=Bp[n]}Zt(t)}class Do extends Hl{constructor(e,t,n,s=!1,i=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=i,Cs(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=Tp(this.state)}clone(){return this._cloneInto()}keccak(){Na(this.state32),Mp(this.state32,this.rounds),Na(this.state32),this.posOut=0,this.pos=0}update(e){Ts(this),e=Lo(e),Kt(e);const{blockLen:t,state:n}=this,s=e.length;for(let i=0;i<s;){const o=Math.min(t-this.pos,s-i);for(let a=0;a<o;a++)n[this.pos++]^=e[i++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;const{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,t&128&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Ts(this,!1),Kt(e),this.finish();const t=this.state,{blockLen:n}=this;for(let s=0,i=e.length;s<i;){this.posOut>=n&&this.keccak();const o=Math.min(n-this.posOut,i-s);e.set(t.subarray(this.posOut,this.posOut+o),s),this.posOut+=o,s+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return Cs(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ql(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,Zt(this.state)}_cloneInto(e){const{blockLen:t,suffix:n,outputLen:s,rounds:i,enableXOF:o}=this;return e||(e=new Do(t,n,s,o,i)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=i,e.suffix=n,e.outputLen=s,e.enableXOF=o,e.destroyed=this.destroyed,e}}const Fp=(r,e,t)=>Hs(()=>new Do(e,r,t)),zp=(()=>Fp(1,136,256/8))();function Vp(r,e){const t=e||"hex",n=zp(Dn(r,{strict:!1})?Fl(r):r);return t==="bytes"?n:Wt(n)}class Uo extends Map{constructor(e){super(),Object.defineProperty(this,"maxSize",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.maxSize=e}get(e){const t=super.get(e);return super.has(e)&&t!==void 0&&(this.delete(e),super.set(e,t)),t}set(e,t){if(super.set(e,t),this.maxSize&&this.size>this.maxSize){const n=this.keys().next().value;n&&this.delete(n)}return this}}const qp=/^0x[a-fA-F0-9]{40}$/,fi=new Uo(8192);function _t(r,e){const{strict:t=!0}=e??{},n=`${r}.${t}`;if(fi.has(n))return fi.get(n);const s=(()=>qp.test(r)?r.toLowerCase()===r?!0:t?Yl(r)===r:!0:!1)();return fi.set(n,s),s}const pi=new Uo(8192);function Yl(r,e){if(pi.has(`${r}.${e}`))return pi.get(`${r}.${e}`);const t=e?`${e}${r.toLowerCase()}`:r.substring(2).toLowerCase(),n=Vp(zl(t),"bytes"),s=(e?t.substring(`${e}0x`.length):t).split("");for(let o=0;o<40;o+=2)n[o>>1]>>4>=8&&s[o]&&(s[o]=s[o].toUpperCase()),(n[o>>1]&15)>=8&&s[o+1]&&(s[o+1]=s[o+1].toUpperCase());const i=`0x${s.join("")}`;return pi.set(`${r}.${e}`,i),i}function xe(r,e){if(!_t(r,{strict:!1}))throw new vt({address:r});return Yl(r,e)}class Da extends R{constructor({offset:e}){super(`Offset \`${e}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class Wp extends R{constructor({length:e,position:t}){super(`Position \`${t}\` is out of bounds (\`0 < position < ${e}\`).`,{name:"PositionOutOfBoundsError"})}}class Hp extends R{constructor({count:e,limit:t}){super(`Recursive read limit of \`${t}\` exceeded (recursive read count: \`${e}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Gp={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Hp({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(r){if(r<0||r>this.bytes.length-1)throw new Wp({length:this.bytes.length,position:r})},decrementPosition(r){if(r<0)throw new Da({offset:r});const e=this.position-r;this.assertPosition(e),this.position=e},getReadCount(r){return this.positionReadCount.get(r||this.position)||0},incrementPosition(r){if(r<0)throw new Da({offset:r});const e=this.position+r;this.assertPosition(e),this.position=e},inspectByte(r){const e=r??this.position;return this.assertPosition(e),this.bytes[e]},inspectBytes(r,e){const t=e??this.position;return this.assertPosition(t+r-1),this.bytes.subarray(t,t+r)},inspectUint8(r){const e=r??this.position;return this.assertPosition(e),this.bytes[e]},inspectUint16(r){const e=r??this.position;return this.assertPosition(e+1),this.dataView.getUint16(e)},inspectUint24(r){const e=r??this.position;return this.assertPosition(e+2),(this.dataView.getUint16(e)<<8)+this.dataView.getUint8(e+2)},inspectUint32(r){const e=r??this.position;return this.assertPosition(e+3),this.dataView.getUint32(e)},pushByte(r){this.assertPosition(this.position),this.bytes[this.position]=r,this.position++},pushBytes(r){this.assertPosition(this.position+r.length-1),this.bytes.set(r,this.position),this.position+=r.length},pushUint8(r){this.assertPosition(this.position),this.bytes[this.position]=r,this.position++},pushUint16(r){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,r),this.position+=2},pushUint24(r){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,r>>8),this.dataView.setUint8(this.position+2,r&255),this.position+=3},pushUint32(r){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,r),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const r=this.inspectByte();return this.position++,r},readBytes(r,e){this.assertReadLimit(),this._touch();const t=this.inspectBytes(r);return this.position+=e??r,t},readUint8(){this.assertReadLimit(),this._touch();const r=this.inspectUint8();return this.position+=1,r},readUint16(){this.assertReadLimit(),this._touch();const r=this.inspectUint16();return this.position+=2,r},readUint24(){this.assertReadLimit(),this._touch();const r=this.inspectUint24();return this.position+=3,r},readUint32(){this.assertReadLimit(),this._touch();const r=this.inspectUint32();return this.position+=4,r},get remaining(){return this.bytes.length-this.position},setPosition(r){const e=this.position;return this.assertPosition(r),this.position=r,()=>this.position=e},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const r=this.getReadCount();this.positionReadCount.set(this.position,r+1),r>0&&this.recursiveReadCount++}};function Ql(r,{recursiveReadLimit:e=8192}={}){const t=Object.create(Gp);return t.bytes=r,t.dataView=new DataView(r.buffer,r.byteOffset,r.byteLength),t.positionReadCount=new Map,t.recursiveReadLimit=e,t}function Kp(r,e,t,{strict:n}={}){return Dn(r,{strict:!1})?Jp(r,e,t,{strict:n}):Zp(r,e,t,{strict:n})}function Xl(r,e){if(typeof e=="number"&&e>0&&e>bt(r)-1)throw new Ul({offset:e,position:"start",size:bt(r)})}function eu(r,e,t){if(typeof e=="number"&&typeof t=="number"&&bt(r)!==t-e)throw new Ul({offset:t,position:"end",size:bt(r)})}function Zp(r,e,t,{strict:n}={}){Xl(r,e);const s=r.slice(e,t);return n&&eu(s,e,t),s}function Jp(r,e,t,{strict:n}={}){Xl(r,e);const s=`0x${r.replace("0x","").slice((e??0)*2,(t??r.length)*2)}`;return n&&eu(s,e,t),s}function NS(r){return typeof r[0]=="string"?Ir(r):Yp(r)}function Yp(r){let e=0;for(const s of r)e+=s.length;const t=new Uint8Array(e);let n=0;for(const s of r)t.set(s,n),n+=s.length;return t}function Ir(r){return`0x${r.reduce((e,t)=>e+t.replace("0x",""),"")}`}class RS extends R{constructor({blockNumber:e,chain:t,contract:n}){super(`Chain "${t.name}" does not support contract "${n.name}".`,{metaMessages:["This could be due to any of the following:",...e&&n.blockCreated&&n.blockCreated>e?[`- The contract "${n.name}" was not deployed until block ${n.blockCreated} (current block ${e}).`]:[`- The chain does not have the contract "${n.name}" configured.`]],name:"ChainDoesNotSupportContract"})}}class $S extends R{constructor({chain:e,currentChainId:t}){super(`The current chain of the wallet (id: ${t}) does not match the target chain for the transaction (id: ${e.id} â€“ ${e.name}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e.id} â€“ ${e.name}`],name:"ChainMismatchError"})}}class LS extends R{constructor(){super(["No chain was provided to the request.","Please provide a chain with the `chain` argument on the Action, or by supplying a `chain` to WalletClient."].join(`
`),{name:"ChainNotFoundError"})}}class DS extends R{constructor(){super("No chain was provided to the Client.",{name:"ClientChainNotConfiguredError"})}}class Gs extends R{constructor({chainId:e}){super(typeof e=="number"?`Chain ID "${e}" is invalid.`:"Chain ID is invalid.",{name:"InvalidChainIdError"})}}function Qp(r){return typeof r=="string"?{address:r,type:"json-rpc"}:r}const Ht=(r,e,t)=>JSON.stringify(r,(n,s)=>{const i=typeof s=="bigint"?s.toString():s;return typeof e=="function"?e(n,i):i},t),Xp={gwei:9,wei:18},em={ether:-9,wei:9};function tu(r,e){let t=r.toString();const n=t.startsWith("-");n&&(t=t.slice(1)),t=t.padStart(e,"0");let[s,i]=[t.slice(0,t.length-e),t.slice(t.length-e)];return i=i.replace(/(0+)$/,""),`${n?"-":""}${s||"0"}${i?`.${i}`:""}`}function tm(r,e="wei"){return tu(r,Xp[e])}function Gt(r,e="wei"){return tu(r,em[e])}function ru(r){const e=Object.entries(r).map(([n,s])=>s===void 0||s===!1?null:[n,s]).filter(Boolean),t=e.reduce((n,[s])=>Math.max(n,s.length),0);return e.map(([n,s])=>`  ${`${n}:`.padEnd(t+1)}  ${s}`).join(`
`)}class US extends R{constructor(){super(["Cannot specify both a `gasPrice` and a `maxFeePerGas`/`maxPriorityFeePerGas`.","Use `maxFeePerGas`/`maxPriorityFeePerGas` for EIP-1559 compatible networks, and `gasPrice` for others."].join(`
`),{name:"FeeConflictError"})}}class rm extends R{constructor({v:e}){super(`Invalid \`v\` value "${e}". Expected 27 or 28.`,{name:"InvalidLegacyVError"})}}class nm extends R{constructor({transaction:e}){super("Cannot infer a transaction type from provided transaction.",{metaMessages:["Provided Transaction:","{",ru(e),"}","","To infer the type, either provide:","- a `type` to the Transaction, or","- an EIP-1559 Transaction with `maxFeePerGas`, or","- an EIP-2930 Transaction with `gasPrice` & `accessList`, or","- an EIP-4844 Transaction with `blobs`, `blobVersionedHashes`, `sidecars`, or","- an EIP-7702 Transaction with `authorizationList`, or","- a Legacy Transaction with `gasPrice`"],name:"InvalidSerializableTransactionError"})}}class sm extends R{constructor({storageKey:e}){super(`Size for storage key "${e}" is invalid. Expected 32 bytes. Got ${Math.floor((e.length-2)/2)} bytes.`,{name:"InvalidStorageKeySizeError"})}}class BS extends R{constructor(e,{account:t,docsPath:n,chain:s,data:i,gas:o,gasPrice:a,maxFeePerGas:c,maxPriorityFeePerGas:l,nonce:u,to:h,value:f}){const p=ru({chain:s&&`${s?.name} (id: ${s?.id})`,from:t?.address,to:h,value:typeof f<"u"&&`${tm(f)} ${s?.nativeCurrency?.symbol||"ETH"}`,data:i,gas:o,gasPrice:typeof a<"u"&&`${Gt(a)} gwei`,maxFeePerGas:typeof c<"u"&&`${Gt(c)} gwei`,maxPriorityFeePerGas:typeof l<"u"&&`${Gt(l)} gwei`,nonce:u});super(e.shortMessage,{cause:e,docsPath:n,metaMessages:[...e.metaMessages?[...e.metaMessages," "]:[],"Request Arguments:",p].filter(Boolean),name:"TransactionExecutionError"}),Object.defineProperty(this,"cause",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.cause=e}}class MS extends R{constructor({blockHash:e,blockNumber:t,blockTag:n,hash:s,index:i}){let o="Transaction";n&&i!==void 0&&(o=`Transaction at block time "${n}" at index "${i}"`),e&&i!==void 0&&(o=`Transaction at block hash "${e}" at index "${i}"`),t&&i!==void 0&&(o=`Transaction at block number "${t}" at index "${i}"`),s&&(o=`Transaction with hash "${s}"`),super(`${o} could not be found.`,{name:"TransactionNotFoundError"})}}class FS extends R{constructor({hash:e}){super(`Transaction receipt with hash "${e}" could not be found. The Transaction may not be processed on a block yet.`,{name:"TransactionReceiptNotFoundError"})}}class zS extends R{constructor({receipt:e}){super(`Transaction with hash "${e.transactionHash}" reverted.`,{metaMessages:['The receipt marked the transaction as "reverted". This could mean that the function on the contract you are trying to call threw an error.'," ","You can attempt to extract the revert reason by:","- calling the `simulateContract` or `simulateCalls` Action with the `abi` and `functionName` of the contract","- using the `call` Action with raw `data`"],name:"TransactionReceiptRevertedError"}),Object.defineProperty(this,"receipt",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.receipt=e}}class VS extends R{constructor({hash:e}){super(`Timed out while waiting for transaction with hash "${e}" to be confirmed.`,{name:"WaitForTransactionReceiptTimeoutError"})}}const qS=r=>r,Bo=r=>r;class Qr extends R{constructor({body:e,cause:t,details:n,headers:s,status:i,url:o}){super("HTTP request failed.",{cause:t,details:n,metaMessages:[i&&`Status: ${i}`,`URL: ${Bo(o)}`,e&&`Request body: ${Ht(e)}`].filter(Boolean),name:"HttpRequestError"}),Object.defineProperty(this,"body",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"headers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"status",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"url",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.body=e,this.headers=s,this.status=i,this.url=o}}class nu extends R{constructor({body:e,error:t,url:n}){super("RPC Request failed.",{cause:t,details:t.message,metaMessages:[`URL: ${Bo(n)}`,`Request body: ${Ht(e)}`],name:"RpcRequestError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.code=t.code,this.data=t.data}}class Ua extends R{constructor({body:e,url:t}){super("The request took too long to respond.",{details:"The request timed out.",metaMessages:[`URL: ${Bo(t)}`,`Request body: ${Ht(e)}`],name:"TimeoutError"})}}const im=-1;class we extends R{constructor(e,{code:t,docsPath:n,metaMessages:s,name:i,shortMessage:o}){super(o,{cause:e,docsPath:n,metaMessages:s||e?.metaMessages,name:i||"RpcError"}),Object.defineProperty(this,"code",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=i||e.name,this.code=e instanceof nu?e.code:t??im}}class Ee extends we{constructor(e,t){super(e,t),Object.defineProperty(this,"data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.data=t.data}}class on extends we{constructor(e){super(e,{code:on.code,name:"ParseRpcError",shortMessage:"Invalid JSON was received by the server. An error occurred on the server while parsing the JSON text."})}}Object.defineProperty(on,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32700});class an extends we{constructor(e){super(e,{code:an.code,name:"InvalidRequestRpcError",shortMessage:"JSON is not a valid request object."})}}Object.defineProperty(an,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32600});class cn extends we{constructor(e,{method:t}={}){super(e,{code:cn.code,name:"MethodNotFoundRpcError",shortMessage:`The method${t?` "${t}"`:""} does not exist / is not available.`})}}Object.defineProperty(cn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32601});class ln extends we{constructor(e){super(e,{code:ln.code,name:"InvalidParamsRpcError",shortMessage:["Invalid parameters were provided to the RPC method.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(ln,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32602});class wr extends we{constructor(e){super(e,{code:wr.code,name:"InternalRpcError",shortMessage:"An internal error was received."})}}Object.defineProperty(wr,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32603});class un extends we{constructor(e){super(e,{code:un.code,name:"InvalidInputRpcError",shortMessage:["Missing or invalid parameters.","Double check you have provided the correct parameters."].join(`
`)})}}Object.defineProperty(un,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32e3});class dn extends we{constructor(e){super(e,{code:dn.code,name:"ResourceNotFoundRpcError",shortMessage:"Requested resource not found."}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ResourceNotFoundRpcError"})}}Object.defineProperty(dn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32001});class gt extends we{constructor(e){super(e,{code:gt.code,name:"ResourceUnavailableRpcError",shortMessage:"Requested resource not available."})}}Object.defineProperty(gt,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32002});class hn extends we{constructor(e){super(e,{code:hn.code,name:"TransactionRejectedRpcError",shortMessage:"Transaction creation failed."})}}Object.defineProperty(hn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32003});class Ft extends we{constructor(e,{method:t}={}){super(e,{code:Ft.code,name:"MethodNotSupportedRpcError",shortMessage:`Method${t?` "${t}"`:""} is not supported.`})}}Object.defineProperty(Ft,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32004});class br extends we{constructor(e){super(e,{code:br.code,name:"LimitExceededRpcError",shortMessage:"Request exceeds defined limit."})}}Object.defineProperty(br,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32005});class fn extends we{constructor(e){super(e,{code:fn.code,name:"JsonRpcVersionUnsupportedError",shortMessage:"Version of JSON-RPC protocol is not supported."})}}Object.defineProperty(fn,"code",{enumerable:!0,configurable:!0,writable:!0,value:-32006});class Q extends Ee{constructor(e){super(e,{code:Q.code,name:"UserRejectedRequestError",shortMessage:"User rejected the request."})}}Object.defineProperty(Q,"code",{enumerable:!0,configurable:!0,writable:!0,value:4001});class pn extends Ee{constructor(e){super(e,{code:pn.code,name:"UnauthorizedProviderError",shortMessage:"The requested method and/or account has not been authorized by the user."})}}Object.defineProperty(pn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4100});class mn extends Ee{constructor(e,{method:t}={}){super(e,{code:mn.code,name:"UnsupportedProviderMethodError",shortMessage:`The Provider does not support the requested method${t?` " ${t}"`:""}.`})}}Object.defineProperty(mn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4200});class gn extends Ee{constructor(e){super(e,{code:gn.code,name:"ProviderDisconnectedError",shortMessage:"The Provider is disconnected from all chains."})}}Object.defineProperty(gn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4900});class yn extends Ee{constructor(e){super(e,{code:yn.code,name:"ChainDisconnectedError",shortMessage:"The Provider is not connected to the requested chain."})}}Object.defineProperty(yn,"code",{enumerable:!0,configurable:!0,writable:!0,value:4901});class Ce extends Ee{constructor(e){super(e,{code:Ce.code,name:"SwitchChainError",shortMessage:"An error occurred when attempting to switch chain."})}}Object.defineProperty(Ce,"code",{enumerable:!0,configurable:!0,writable:!0,value:4902});class wn extends Ee{constructor(e){super(e,{code:wn.code,name:"UnsupportedNonOptionalCapabilityError",shortMessage:"This Wallet does not support a capability that was not marked as optional."})}}Object.defineProperty(wn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5700});class bn extends Ee{constructor(e){super(e,{code:bn.code,name:"UnsupportedChainIdError",shortMessage:"This Wallet does not support the requested chain ID."})}}Object.defineProperty(bn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5710});class vn extends Ee{constructor(e){super(e,{code:vn.code,name:"DuplicateIdError",shortMessage:"There is already a bundle submitted with this ID."})}}Object.defineProperty(vn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5720});class xn extends Ee{constructor(e){super(e,{code:xn.code,name:"UnknownBundleIdError",shortMessage:"This bundle id is unknown / has not been submitted"})}}Object.defineProperty(xn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5730});class _n extends Ee{constructor(e){super(e,{code:_n.code,name:"BundleTooLargeError",shortMessage:"The call bundle is too large for the Wallet to process."})}}Object.defineProperty(_n,"code",{enumerable:!0,configurable:!0,writable:!0,value:5740});class En extends Ee{constructor(e){super(e,{code:En.code,name:"AtomicReadyWalletRejectedUpgradeError",shortMessage:"The Wallet can support atomicity after an upgrade, but the user rejected the upgrade."})}}Object.defineProperty(En,"code",{enumerable:!0,configurable:!0,writable:!0,value:5750});class Sn extends Ee{constructor(e){super(e,{code:Sn.code,name:"AtomicityNotSupportedError",shortMessage:"The wallet does not support atomic execution but the request requires it."})}}Object.defineProperty(Sn,"code",{enumerable:!0,configurable:!0,writable:!0,value:5760});class om extends we{constructor(e){super(e,{name:"UnknownRpcError",shortMessage:"An unknown RPC error occurred."})}}class su extends R{constructor({cause:e,message:t}={}){const n=t?.replace("execution reverted: ","")?.replace("execution reverted","");super(`Execution reverted ${n?`with reason: ${n}`:"for an unknown reason"}.`,{cause:e,name:"ExecutionRevertedError"})}}Object.defineProperty(su,"code",{enumerable:!0,configurable:!0,writable:!0,value:3});Object.defineProperty(su,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/execution reverted/});class Ks extends R{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Gt(t)} gwei`:""}) cannot be higher than the maximum allowed value (2^256-1).`,{cause:e,name:"FeeCapTooHighError"})}}Object.defineProperty(Ks,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas higher than 2\^256-1|fee cap higher than 2\^256-1/});class am extends R{constructor({cause:e,maxFeePerGas:t}={}){super(`The fee cap (\`maxFeePerGas\`${t?` = ${Gt(t)}`:""} gwei) cannot be lower than the block base fee.`,{cause:e,name:"FeeCapTooLowError"})}}Object.defineProperty(am,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max fee per gas less than block base fee|fee cap less than block base fee|transaction is outdated/});class cm extends R{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}is higher than the next one expected.`,{cause:e,name:"NonceTooHighError"})}}Object.defineProperty(cm,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too high/});class lm extends R{constructor({cause:e,nonce:t}={}){super([`Nonce provided for the transaction ${t?`(${t}) `:""}is lower than the current nonce of the account.`,"Try increasing the nonce or find the latest nonce with `getTransactionCount`."].join(`
`),{cause:e,name:"NonceTooLowError"})}}Object.defineProperty(lm,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce too low|transaction already imported|already known/});class um extends R{constructor({cause:e,nonce:t}={}){super(`Nonce provided for the transaction ${t?`(${t}) `:""}exceeds the maximum allowed nonce.`,{cause:e,name:"NonceMaxValueError"})}}Object.defineProperty(um,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/nonce has max value/});class dm extends R{constructor({cause:e}={}){super(["The total cost (gas * gas fee + value) of executing this transaction exceeds the balance of the account."].join(`
`),{cause:e,metaMessages:["This error could arise when the account does not have enough funds to:"," - pay for the total gas fee,"," - pay for the value to send."," ","The cost of the transaction is calculated as `gas * gas fee + value`, where:"," - `gas` is the amount of gas needed for transaction to execute,"," - `gas fee` is the gas fee,"," - `value` is the amount of ether to send to the recipient."],name:"InsufficientFundsError"})}}Object.defineProperty(dm,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/insufficient funds|exceeds transaction sender account balance/});class hm extends R{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction exceeds the limit allowed for the block.`,{cause:e,name:"IntrinsicGasTooHighError"})}}Object.defineProperty(hm,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too high|gas limit reached/});class fm extends R{constructor({cause:e,gas:t}={}){super(`The amount of gas ${t?`(${t}) `:""}provided for the transaction is too low.`,{cause:e,name:"IntrinsicGasTooLowError"})}}Object.defineProperty(fm,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/intrinsic gas too low/});class pm extends R{constructor({cause:e}){super("The transaction type is not supported for this chain.",{cause:e,name:"TransactionTypeNotSupportedError"})}}Object.defineProperty(pm,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/transaction type not valid/});class iu extends R{constructor({cause:e,maxPriorityFeePerGas:t,maxFeePerGas:n}={}){super([`The provided tip (\`maxPriorityFeePerGas\`${t?` = ${Gt(t)} gwei`:""}) cannot be higher than the fee cap (\`maxFeePerGas\`${n?` = ${Gt(n)} gwei`:""}).`].join(`
`),{cause:e,name:"TipAboveFeeCapError"})}}Object.defineProperty(iu,"nodeMessage",{enumerable:!0,configurable:!0,writable:!0,value:/max priority fee per gas higher than max fee per gas|tip higher than fee cap/});class WS extends R{constructor({cause:e}){super(`An error occurred while executing: ${e?.shortMessage}`,{cause:e,name:"UnknownNodeError"})}}function Mo(r,e){return({exclude:t,format:n})=>({exclude:t,format:(s,i)=>{const o=e(s,i);if(t)for(const a of t)delete o[a];return{...o,...n(s,i)}},type:r})}function mm(){let r=()=>{},e=()=>{};return{promise:new Promise((n,s)=>{r=n,e=s}),resolve:r,reject:e}}const mi=new Map;function gm({fn:r,id:e,shouldSplitBatch:t,wait:n=0,sort:s}){const i=async()=>{const u=c();o();const h=u.map(({args:f})=>f);h.length!==0&&r(h).then(f=>{s&&Array.isArray(f)&&f.sort(s);for(let p=0;p<u.length;p++){const{resolve:w}=u[p];w?.([f[p],f])}}).catch(f=>{for(let p=0;p<u.length;p++){const{reject:w}=u[p];w?.(f)}})},o=()=>mi.delete(e),a=()=>c().map(({args:u})=>u),c=()=>mi.get(e)||[],l=u=>mi.set(e,[...c(),u]);return{flush:o,async schedule(u){const{promise:h,resolve:f,reject:p}=mm();return t?.([...a(),u])&&i(),c().length>0?(l({args:u,resolve:f,reject:p}),h):(l({args:u,resolve:f,reject:p}),setTimeout(i,n),h)}}}const Fo=2n**256n-1n;function Jt(r,e="hex"){const t=ou(r),n=Ql(new Uint8Array(t.length));return t.encode(n),e==="hex"?Tt(n.bytes):n.bytes}function ou(r){return Array.isArray(r)?ym(r.map(e=>ou(e))):wm(r)}function ym(r){const e=r.reduce((s,i)=>s+i.length,0),t=au(e);return{length:(()=>e<=55?1+e:1+t+e)(),encode(s){e<=55?s.pushByte(192+e):(s.pushByte(192+55+t),t===1?s.pushUint8(e):t===2?s.pushUint16(e):t===3?s.pushUint24(e):s.pushUint32(e));for(const{encode:i}of r)i(s)}}}function wm(r){const e=typeof r=="string"?xt(r):r,t=au(e.length);return{length:(()=>e.length===1&&e[0]<128?1:e.length<=55?1+e.length:1+t+e.length)(),encode(s){e.length===1&&e[0]<128?s.pushBytes(e):e.length<=55?(s.pushByte(128+e.length),s.pushBytes(e)):(s.pushByte(128+55+t),t===1?s.pushUint8(e.length):t===2?s.pushUint16(e.length):t===3?s.pushUint24(e.length):s.pushUint32(e.length),s.pushBytes(e))}}}function au(r){if(r<2**8)return 1;if(r<2**16)return 2;if(r<2**24)return 3;if(r<2**32)return 4;throw new R("Length is too large.")}const cu={"0x0":"legacy","0x1":"eip2930","0x2":"eip1559","0x3":"eip4844","0x4":"eip7702"};function zo(r,e){const t={...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,chainId:r.chainId?ks(r.chainId):void 0,gas:r.gas?BigInt(r.gas):void 0,gasPrice:r.gasPrice?BigInt(r.gasPrice):void 0,maxFeePerBlobGas:r.maxFeePerBlobGas?BigInt(r.maxFeePerBlobGas):void 0,maxFeePerGas:r.maxFeePerGas?BigInt(r.maxFeePerGas):void 0,maxPriorityFeePerGas:r.maxPriorityFeePerGas?BigInt(r.maxPriorityFeePerGas):void 0,nonce:r.nonce?ks(r.nonce):void 0,to:r.to?r.to:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,type:r.type?cu[r.type]:void 0,typeHex:r.type?r.type:void 0,value:r.value?BigInt(r.value):void 0,v:r.v?BigInt(r.v):void 0};return r.authorizationList&&(t.authorizationList=vm(r.authorizationList)),t.yParity=(()=>{if(r.yParity)return Number(r.yParity);if(typeof t.v=="bigint"){if(t.v===0n||t.v===27n)return 0;if(t.v===1n||t.v===28n)return 1;if(t.v>=35n)return t.v%2n===0n?1:0}})(),t.type==="legacy"&&(delete t.accessList,delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas,delete t.yParity),t.type==="eip2930"&&(delete t.maxFeePerBlobGas,delete t.maxFeePerGas,delete t.maxPriorityFeePerGas),t.type==="eip1559"&&delete t.maxFeePerBlobGas,t}const bm=Mo("transaction",zo);function vm(r){return r.map(e=>({address:e.address,chainId:Number(e.chainId),nonce:Number(e.nonce),r:e.r,s:e.s,yParity:Number(e.yParity)}))}function xm(r,e){const t=(r.transactions??[]).map(n=>typeof n=="string"?n:zo(n));return{...r,baseFeePerGas:r.baseFeePerGas?BigInt(r.baseFeePerGas):null,blobGasUsed:r.blobGasUsed?BigInt(r.blobGasUsed):void 0,difficulty:r.difficulty?BigInt(r.difficulty):void 0,excessBlobGas:r.excessBlobGas?BigInt(r.excessBlobGas):void 0,gasLimit:r.gasLimit?BigInt(r.gasLimit):void 0,gasUsed:r.gasUsed?BigInt(r.gasUsed):void 0,hash:r.hash?r.hash:null,logsBloom:r.logsBloom?r.logsBloom:null,nonce:r.nonce?r.nonce:null,number:r.number?BigInt(r.number):null,size:r.size?BigInt(r.size):void 0,timestamp:r.timestamp?BigInt(r.timestamp):void 0,transactions:t,totalDifficulty:r.totalDifficulty?BigInt(r.totalDifficulty):null}}const _m=Mo("block",xm);function lu(r){const{kzg:e}=r,t=r.to??(typeof r.blobs[0]=="string"?"hex":"bytes"),n=typeof r.blobs[0]=="string"?r.blobs.map(i=>xt(i)):r.blobs,s=[];for(const i of n)s.push(Uint8Array.from(e.blobToKzgCommitment(i)));return t==="bytes"?s:s.map(i=>Tt(i))}function uu(r){const{kzg:e}=r,t=r.to??(typeof r.blobs[0]=="string"?"hex":"bytes"),n=typeof r.blobs[0]=="string"?r.blobs.map(o=>xt(o)):r.blobs,s=typeof r.commitments[0]=="string"?r.commitments.map(o=>xt(o)):r.commitments,i=[];for(let o=0;o<n.length;o++){const a=n[o],c=s[o];i.push(Uint8Array.from(e.computeBlobKzgProof(a,c)))}return t==="bytes"?i:i.map(o=>Tt(o))}function Em(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);const s=BigInt(32),i=BigInt(4294967295),o=Number(t>>s&i),a=Number(t&i),c=n?4:0,l=n?0:4;r.setUint32(e+c,o,n),r.setUint32(e+l,a,n)}function Sm(r,e,t){return r&e^~r&t}function km(r,e,t){return r&e^r&t^e&t}class du extends Hl{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=hi(this.buffer)}update(e){Ts(this),e=Lo(e),Kt(e);const{view:t,buffer:n,blockLen:s}=this,i=e.length;for(let o=0;o<i;){const a=Math.min(s-this.pos,i-o);if(a===s){const c=hi(e);for(;s<=i-o;o+=s)this.process(c,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Ts(this),ql(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:i}=this;let{pos:o}=this;t[o++]=128,Zt(this.buffer.subarray(o)),this.padOffset>s-o&&(this.process(n,0),o=0);for(let h=o;h<s;h++)t[h]=0;Em(n,s-8,BigInt(this.length*8),i),this.process(n,0);const a=hi(e),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=c/4,u=this.get();if(l>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<l;h++)a.setUint32(4*h,u[h],i)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:s,finished:i,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=i,e.length=s,e.pos=a,s%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}}const rt=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),de=Uint32Array.from([3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]),he=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Cm=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),nt=new Uint32Array(64);class Tm extends du{constructor(e=32){super(64,e,8,!1),this.A=rt[0]|0,this.B=rt[1]|0,this.C=rt[2]|0,this.D=rt[3]|0,this.E=rt[4]|0,this.F=rt[5]|0,this.G=rt[6]|0,this.H=rt[7]|0}get(){const{A:e,B:t,C:n,D:s,E:i,F:o,G:a,H:c}=this;return[e,t,n,s,i,o,a,c]}set(e,t,n,s,i,o,a,c){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=i|0,this.F=o|0,this.G=a|0,this.H=c|0}process(e,t){for(let h=0;h<16;h++,t+=4)nt[h]=e.getUint32(t,!1);for(let h=16;h<64;h++){const f=nt[h-15],p=nt[h-2],w=Le(f,7)^Le(f,18)^f>>>3,g=Le(p,17)^Le(p,19)^p>>>10;nt[h]=g+nt[h-7]+w+nt[h-16]|0}let{A:n,B:s,C:i,D:o,E:a,F:c,G:l,H:u}=this;for(let h=0;h<64;h++){const f=Le(a,6)^Le(a,11)^Le(a,25),p=u+f+Sm(a,c,l)+Cm[h]+nt[h]|0,g=(Le(n,2)^Le(n,13)^Le(n,22))+km(n,s,i)|0;u=l,l=c,c=a,a=o+p|0,o=i,i=s,s=n,n=p+g|0}n=n+this.A|0,s=s+this.B|0,i=i+this.C|0,o=o+this.D|0,a=a+this.E|0,c=c+this.F|0,l=l+this.G|0,u=u+this.H|0,this.set(n,s,i,o,a,c,l,u)}roundClean(){Zt(nt)}destroy(){this.set(0,0,0,0,0,0,0,0),Zt(this.buffer)}}const hu=(()=>Vl(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(r=>BigInt(r))))(),Am=(()=>hu[0])(),Pm=(()=>hu[1])(),st=new Uint32Array(80),it=new Uint32Array(80);class fu extends du{constructor(e=64){super(128,e,16,!1),this.Ah=he[0]|0,this.Al=he[1]|0,this.Bh=he[2]|0,this.Bl=he[3]|0,this.Ch=he[4]|0,this.Cl=he[5]|0,this.Dh=he[6]|0,this.Dl=he[7]|0,this.Eh=he[8]|0,this.El=he[9]|0,this.Fh=he[10]|0,this.Fl=he[11]|0,this.Gh=he[12]|0,this.Gl=he[13]|0,this.Hh=he[14]|0,this.Hl=he[15]|0}get(){const{Ah:e,Al:t,Bh:n,Bl:s,Ch:i,Cl:o,Dh:a,Dl:c,Eh:l,El:u,Fh:h,Fl:f,Gh:p,Gl:w,Hh:g,Hl:m}=this;return[e,t,n,s,i,o,a,c,l,u,h,f,p,w,g,m]}set(e,t,n,s,i,o,a,c,l,u,h,f,p,w,g,m){this.Ah=e|0,this.Al=t|0,this.Bh=n|0,this.Bl=s|0,this.Ch=i|0,this.Cl=o|0,this.Dh=a|0,this.Dl=c|0,this.Eh=l|0,this.El=u|0,this.Fh=h|0,this.Fl=f|0,this.Gh=p|0,this.Gl=w|0,this.Hh=g|0,this.Hl=m|0}process(e,t){for(let v=0;v<16;v++,t+=4)st[v]=e.getUint32(t),it[v]=e.getUint32(t+=4);for(let v=16;v<80;v++){const E=st[v-15]|0,_=it[v-15]|0,S=tr(E,_,1)^tr(E,_,8)^ja(E,_,7),k=rr(E,_,1)^rr(E,_,8)^Oa(E,_,7),A=st[v-2]|0,C=it[v-2]|0,F=tr(A,C,19)^Vn(A,C,61)^ja(A,C,6),H=rr(A,C,19)^qn(A,C,61)^Oa(A,C,6),$=_p(k,H,it[v-7],it[v-16]),G=Ep($,S,F,st[v-7],st[v-16]);st[v]=G|0,it[v]=$|0}let{Ah:n,Al:s,Bh:i,Bl:o,Ch:a,Cl:c,Dh:l,Dl:u,Eh:h,El:f,Fh:p,Fl:w,Gh:g,Gl:m,Hh:x,Hl:b}=this;for(let v=0;v<80;v++){const E=tr(h,f,14)^tr(h,f,18)^Vn(h,f,41),_=rr(h,f,14)^rr(h,f,18)^qn(h,f,41),S=h&p^~h&g,k=f&w^~f&m,A=Sp(b,_,k,Pm[v],it[v]),C=kp(A,x,E,S,Am[v],st[v]),F=A|0,H=tr(n,s,28)^Vn(n,s,34)^Vn(n,s,39),$=rr(n,s,28)^qn(n,s,34)^qn(n,s,39),G=n&i^n&a^i&a,le=s&o^s&c^o&c;x=g|0,b=m|0,g=p|0,m=w|0,p=h|0,w=f|0,{h,l:f}=We(l|0,u|0,C|0,F|0),l=a|0,u=c|0,a=i|0,c=o|0,i=n|0,o=s|0;const Pe=vp(F,$,le);n=xp(Pe,C,H,G),s=Pe|0}({h:n,l:s}=We(this.Ah|0,this.Al|0,n|0,s|0)),{h:i,l:o}=We(this.Bh|0,this.Bl|0,i|0,o|0),{h:a,l:c}=We(this.Ch|0,this.Cl|0,a|0,c|0),{h:l,l:u}=We(this.Dh|0,this.Dl|0,l|0,u|0),{h,l:f}=We(this.Eh|0,this.El|0,h|0,f|0),{h:p,l:w}=We(this.Fh|0,this.Fl|0,p|0,w|0),{h:g,l:m}=We(this.Gh|0,this.Gl|0,g|0,m|0),{h:x,l:b}=We(this.Hh|0,this.Hl|0,x|0,b|0),this.set(n,s,i,o,a,c,l,u,h,f,p,w,g,m,x,b)}roundClean(){Zt(st,it)}destroy(){Zt(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}class Im extends fu{constructor(){super(48),this.Ah=de[0]|0,this.Al=de[1]|0,this.Bh=de[2]|0,this.Bl=de[3]|0,this.Ch=de[4]|0,this.Cl=de[5]|0,this.Dh=de[6]|0,this.Dl=de[7]|0,this.Eh=de[8]|0,this.El=de[9]|0,this.Fh=de[10]|0,this.Fl=de[11]|0,this.Gh=de[12]|0,this.Gl=de[13]|0,this.Hh=de[14]|0,this.Hl=de[15]|0}}const jm=Hs(()=>new Tm),HS=Hs(()=>new fu),GS=Hs(()=>new Im),Om=jm;function Nm(r,e){const t=e||"hex",n=Om(Dn(r,{strict:!1})?Fl(r):r);return t==="bytes"?n:Wt(n)}function Rm(r){const{commitment:e,version:t=1}=r,n=r.to??(typeof e=="string"?"hex":"bytes"),s=Nm(e,"bytes");return s.set([t],0),n==="bytes"?s:Tt(s)}function $m(r){const{commitments:e,version:t}=r,n=r.to??(typeof e[0]=="string"?"hex":"bytes"),s=[];for(const i of e)s.push(Rm({commitment:i,to:n,version:t}));return s}const Ba=6,pu=32,Vo=4096,mu=pu*Vo,Ma=mu*Ba-1-1*Vo*Ba,gu=1;class Lm extends R{constructor({maxSize:e,size:t}){super("Blob size is too large.",{metaMessages:[`Max: ${e} bytes`,`Given: ${t} bytes`],name:"BlobSizeTooLargeError"})}}class yu extends R{constructor(){super("Blob data must not be empty.",{name:"EmptyBlobError"})}}class Dm extends R{constructor({hash:e,size:t}){super(`Versioned hash "${e}" size is invalid.`,{metaMessages:["Expected: 32",`Received: ${t}`],name:"InvalidVersionedHashSizeError"})}}class Um extends R{constructor({hash:e,version:t}){super(`Versioned hash "${e}" version is invalid.`,{metaMessages:[`Expected: ${gu}`,`Received: ${t}`],name:"InvalidVersionedHashVersionError"})}}function Bm(r){const e=r.to??(typeof r.data=="string"?"hex":"bytes"),t=typeof r.data=="string"?xt(r.data):r.data,n=bt(t);if(!n)throw new yu;if(n>Ma)throw new Lm({maxSize:Ma,size:n});const s=[];let i=!0,o=0;for(;i;){const a=Ql(new Uint8Array(mu));let c=0;for(;c<Vo;){const l=t.slice(o,o+(pu-1));if(a.pushByte(0),a.pushBytes(l),l.length<31){a.pushByte(128),i=!1;break}c++,o+=31}s.push(a)}return e==="bytes"?s.map(a=>a.bytes):s.map(a=>Tt(a.bytes))}function Mm(r){const{data:e,kzg:t,to:n}=r,s=r.blobs??Bm({data:e,to:n}),i=r.commitments??lu({blobs:s,kzg:t,to:n}),o=r.proofs??uu({blobs:s,commitments:i,kzg:t,to:n}),a=[];for(let c=0;c<s.length;c++)a.push({blob:s[c],commitment:i[c],proof:o[c]});return a}function Fm(r){if(r.type)return r.type;if(typeof r.authorizationList<"u")return"eip7702";if(typeof r.blobs<"u"||typeof r.blobVersionedHashes<"u"||typeof r.maxFeePerBlobGas<"u"||typeof r.sidecars<"u")return"eip4844";if(typeof r.maxFeePerGas<"u"||typeof r.maxPriorityFeePerGas<"u")return"eip1559";if(typeof r.gasPrice<"u")return typeof r.accessList<"u"?"eip2930":"legacy";throw new nm({transaction:r})}function zm(r,{args:e,eventName:t}={}){return{...r,blockHash:r.blockHash?r.blockHash:null,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,logIndex:r.logIndex?Number(r.logIndex):null,transactionHash:r.transactionHash?r.transactionHash:null,transactionIndex:r.transactionIndex?Number(r.transactionIndex):null,...t?{args:e,eventName:t}:{}}}function Vm(r){const{authorizationList:e}=r;if(e)for(const t of e){const{chainId:n}=t,s=t.address;if(!_t(s))throw new vt({address:s});if(n<0)throw new Gs({chainId:n})}qo(r)}function qm(r){const{blobVersionedHashes:e}=r;if(e){if(e.length===0)throw new yu;for(const t of e){const n=bt(t),s=ks(Kp(t,0,1));if(n!==32)throw new Dm({hash:t,size:n});if(s!==gu)throw new Um({hash:t,version:s})}}qo(r)}function qo(r){const{chainId:e,maxPriorityFeePerGas:t,maxFeePerGas:n,to:s}=r;if(e<=0)throw new Gs({chainId:e});if(s&&!_t(s))throw new vt({address:s});if(n&&n>Fo)throw new Ks({maxFeePerGas:n});if(t&&n&&t>n)throw new iu({maxFeePerGas:n,maxPriorityFeePerGas:t})}function Wm(r){const{chainId:e,maxPriorityFeePerGas:t,gasPrice:n,maxFeePerGas:s,to:i}=r;if(e<=0)throw new Gs({chainId:e});if(i&&!_t(i))throw new vt({address:i});if(t||s)throw new R("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid EIP-2930 Transaction attribute.");if(n&&n>Fo)throw new Ks({maxFeePerGas:n})}function Hm(r){const{chainId:e,maxPriorityFeePerGas:t,gasPrice:n,maxFeePerGas:s,to:i}=r;if(i&&!_t(i))throw new vt({address:i});if(typeof e<"u"&&e<=0)throw new Gs({chainId:e});if(t||s)throw new R("`maxFeePerGas`/`maxPriorityFeePerGas` is not a valid Legacy Transaction attribute.");if(n&&n>Fo)throw new Ks({maxFeePerGas:n})}function Zs(r){if(!r||r.length===0)return[];const e=[];for(let t=0;t<r.length;t++){const{address:n,storageKeys:s}=r[t];for(let i=0;i<s.length;i++)if(s[i].length-2!==64)throw new sm({storageKey:s[i]});if(!_t(n,{strict:!1}))throw new vt({address:n});e.push([n,s])}return e}function Gm(r,e){const t=Fm(r);return t==="eip1559"?Jm(r,e):t==="eip2930"?Ym(r,e):t==="eip4844"?Zm(r,e):t==="eip7702"?Km(r,e):Qm(r,e)}function Km(r,e){const{authorizationList:t,chainId:n,gas:s,nonce:i,to:o,value:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:h}=r;Vm(r);const f=Zs(u),p=Xm(t);return Ir(["0x04",Jt([M(n),i?M(i):"0x",l?M(l):"0x",c?M(c):"0x",s?M(s):"0x",o??"0x",a?M(a):"0x",h??"0x",f,p,...Un(r,e)])])}function Zm(r,e){const{chainId:t,gas:n,nonce:s,to:i,value:o,maxFeePerBlobGas:a,maxFeePerGas:c,maxPriorityFeePerGas:l,accessList:u,data:h}=r;qm(r);let f=r.blobVersionedHashes,p=r.sidecars;if(r.blobs&&(typeof f>"u"||typeof p>"u")){const v=typeof r.blobs[0]=="string"?r.blobs:r.blobs.map(S=>Tt(S)),E=r.kzg,_=lu({blobs:v,kzg:E});if(typeof f>"u"&&(f=$m({commitments:_})),typeof p>"u"){const S=uu({blobs:v,commitments:_,kzg:E});p=Mm({blobs:v,commitments:_,proofs:S})}}const w=Zs(u),g=[M(t),s?M(s):"0x",l?M(l):"0x",c?M(c):"0x",n?M(n):"0x",i??"0x",o?M(o):"0x",h??"0x",w,a?M(a):"0x",f??[],...Un(r,e)],m=[],x=[],b=[];if(p)for(let v=0;v<p.length;v++){const{blob:E,commitment:_,proof:S}=p[v];m.push(E),x.push(_),b.push(S)}return Ir(["0x03",Jt(p?[g,m,x,b]:g)])}function Jm(r,e){const{chainId:t,gas:n,nonce:s,to:i,value:o,maxFeePerGas:a,maxPriorityFeePerGas:c,accessList:l,data:u}=r;qo(r);const h=Zs(l),f=[M(t),s?M(s):"0x",c?M(c):"0x",a?M(a):"0x",n?M(n):"0x",i??"0x",o?M(o):"0x",u??"0x",h,...Un(r,e)];return Ir(["0x02",Jt(f)])}function Ym(r,e){const{chainId:t,gas:n,data:s,nonce:i,to:o,value:a,accessList:c,gasPrice:l}=r;Wm(r);const u=Zs(c),h=[M(t),i?M(i):"0x",l?M(l):"0x",n?M(n):"0x",o??"0x",a?M(a):"0x",s??"0x",u,...Un(r,e)];return Ir(["0x01",Jt(h)])}function Qm(r,e){const{chainId:t=0,gas:n,data:s,nonce:i,to:o,value:a,gasPrice:c}=r;Hm(r);let l=[i?M(i):"0x",c?M(c):"0x",n?M(n):"0x",o??"0x",a?M(a):"0x",s??"0x"];if(e){const u=(()=>{if(e.v>=35n)return(e.v-35n)/2n>0?e.v:27n+(e.v===35n?0n:1n);if(t>0)return BigInt(t*2)+BigInt(35n+e.v-27n);const p=27n+(e.v===27n?0n:1n);if(e.v!==p)throw new rm({v:e.v});return p})(),h=mt(e.r),f=mt(e.s);l=[...l,M(u),h==="0x00"?"0x":h,f==="0x00"?"0x":f]}else t>0&&(l=[...l,M(t),"0x","0x"]);return Jt(l)}function Un(r,e){const t=e??r,{v:n,yParity:s}=t;if(typeof t.r>"u")return[];if(typeof t.s>"u")return[];if(typeof n>"u"&&typeof s>"u")return[];const i=mt(t.r),o=mt(t.s);return[(()=>typeof s=="number"?s?M(1):"0x":n===0n?"0x":n===1n?M(1):n===27n?"0x":M(1))(),i==="0x00"?"0x":i,o==="0x00"?"0x":o]}function Xm(r){if(!r||r.length===0)return[];const e=[];for(const t of r){const{chainId:n,nonce:s,...i}=t,o=t.address;e.push([n?Wt(n):"0x",o,s?Wt(s):"0x",...Un({},i)])}return e}const Wn=new Uo(8192);function eg(r,{enabled:e=!0,id:t}){if(!e||!t)return r();if(Wn.get(t))return Wn.get(t);const n=r().finally(()=>Wn.delete(t));return Wn.set(t,n),n}async function tg(r){return new Promise(e=>setTimeout(e,r))}function wu(r,{delay:e=100,retryCount:t=2,shouldRetry:n=()=>!0}={}){return new Promise((s,i)=>{const o=async({count:a=0}={})=>{const c=async({error:l})=>{const u=typeof e=="function"?e({count:a,error:l}):e;u&&await tg(u),o({count:a+1})};try{const l=await r();s(l)}catch(l){if(a<t&&await n({count:a,error:l}))return c({error:l});i(l)}};o()})}function rg(r,e={}){return async(t,n={})=>{const{dedupe:s=!1,methods:i,retryDelay:o=150,retryCount:a=3,uid:c}={...e,...n},{method:l}=t;if(i?.exclude?.includes(l))throw new Ft(new Error("method not supported"),{method:l});if(i?.include&&!i.include.includes(l))throw new Ft(new Error("method not supported"),{method:l});const u=s?Ml(`${c}.${Ht(t)}`):void 0;return eg(()=>wu(async()=>{try{return await r(t)}catch(h){const f=h;switch(f.code){case on.code:throw new on(f);case an.code:throw new an(f);case cn.code:throw new cn(f,{method:t.method});case ln.code:throw new ln(f);case wr.code:throw new wr(f);case un.code:throw new un(f);case dn.code:throw new dn(f);case gt.code:throw new gt(f);case hn.code:throw new hn(f);case Ft.code:throw new Ft(f,{method:t.method});case br.code:throw new br(f);case fn.code:throw new fn(f);case Q.code:throw new Q(f);case pn.code:throw new pn(f);case mn.code:throw new mn(f);case gn.code:throw new gn(f);case yn.code:throw new yn(f);case Ce.code:throw new Ce(f);case wn.code:throw new wn(f);case bn.code:throw new bn(f);case vn.code:throw new vn(f);case xn.code:throw new xn(f);case _n.code:throw new _n(f);case En.code:throw new En(f);case Sn.code:throw new Sn(f);case 5e3:throw new Q(f);default:throw h instanceof R?h:new om(f)}}},{delay:({count:h,error:f})=>{if(f&&f instanceof Qr){const p=f?.headers?.get("Retry-After");if(p?.match(/\d/))return Number.parseInt(p,10)*1e3}return~~(1<<h)*o},retryCount:a,shouldRetry:({error:h})=>ng(h)}),{enabled:s,id:u})}}function ng(r){return"code"in r&&typeof r.code=="number"?r.code===-1||r.code===br.code||r.code===wr.code:r instanceof Qr&&r.status?r.status===403||r.status===408||r.status===413||r.status===429||r.status===500||r.status===502||r.status===503||r.status===504:!0}function bu(r){return{formatters:void 0,fees:void 0,serializers:void 0,...r}}const sg={"0x0":"reverted","0x1":"success"};function ig(r,e){const t={...r,blockNumber:r.blockNumber?BigInt(r.blockNumber):null,contractAddress:r.contractAddress?r.contractAddress:null,cumulativeGasUsed:r.cumulativeGasUsed?BigInt(r.cumulativeGasUsed):null,effectiveGasPrice:r.effectiveGasPrice?BigInt(r.effectiveGasPrice):null,gasUsed:r.gasUsed?BigInt(r.gasUsed):null,logs:r.logs?r.logs.map(n=>zm(n)):null,to:r.to?r.to:null,transactionIndex:r.transactionIndex?ks(r.transactionIndex):null,status:r.status?sg[r.status]:null,type:r.type?cu[r.type]||r.type:null};return r.blobGasPrice&&(t.blobGasPrice=BigInt(r.blobGasPrice)),r.blobGasUsed&&(t.blobGasUsed=BigInt(r.blobGasUsed)),t}const og=Mo("transactionReceipt",ig);function vu(r,{errorInstance:e=new Error("timed out"),timeout:t,signal:n}){return new Promise((s,i)=>{(async()=>{let o;try{const a=new AbortController;t>0&&(o=setTimeout(()=>{n?a.abort():i(e)},t)),s(await r({signal:a?.signal||null}))}catch(a){a?.name==="AbortError"&&i(e),i(a)}finally{clearTimeout(o)}})()})}function ag(){return{current:0,take(){return this.current++},reset(){this.current=0}}}const Fa=ag();function cg(r,e={}){return{async request(t){const{body:n,fetchFn:s=e.fetchFn??fetch,onRequest:i=e.onRequest,onResponse:o=e.onResponse,timeout:a=e.timeout??1e4}=t,c={...e.fetchOptions??{},...t.fetchOptions??{}},{headers:l,method:u,signal:h}=c;try{const f=await vu(async({signal:w})=>{const g={...c,body:Array.isArray(n)?Ht(n.map(v=>({jsonrpc:"2.0",id:v.id??Fa.take(),...v}))):Ht({jsonrpc:"2.0",id:n.id??Fa.take(),...n}),headers:{"Content-Type":"application/json",...l},method:u||"POST",signal:h||(a>0?w:null)},m=new Request(r,g),x=await i?.(m,g)??{...g,url:r};return await s(x.url??r,x)},{errorInstance:new Ua({body:n,url:r}),timeout:a,signal:!0});o&&await o(f);let p;if(f.headers.get("Content-Type")?.startsWith("application/json"))p=await f.json();else{p=await f.text();try{p=JSON.parse(p||"{}")}catch(w){if(f.ok)throw w;p={error:p}}}if(!f.ok)throw new Qr({body:n,details:Ht(p.error)||f.statusText,headers:f.headers,status:f.status,url:r});return p}catch(f){throw f instanceof Qr||f instanceof Ua?f:new Qr({body:n,cause:f,url:r})}}}}const gs="2.22.1",lg=()=>`@wagmi/core@${gs}`;var xu=globalThis&&globalThis.__classPrivateFieldGet||function(r,e,t,n){if(t==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?r!==e||!n:!e.has(r))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t==="m"?n:t==="a"?n.call(r):n?n.value:e.get(r)},As,_u;let tt=class Mi extends Error{get docsBaseUrl(){return"https://wagmi.sh/core"}get version(){return lg()}constructor(e,t={}){super(),As.add(this),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiCoreError"});const n=t.cause instanceof Mi?t.cause.details:t.cause?.message?t.cause.message:t.details,s=t.cause instanceof Mi&&t.cause.docsPath||t.docsPath;this.message=[e||"An error occurred.","",...t.metaMessages?[...t.metaMessages,""]:[],...s?[`Docs: ${this.docsBaseUrl}${s}.html${t.docsSlug?`#${t.docsSlug}`:""}`]:[],...n?[`Details: ${n}`]:[],`Version: ${this.version}`].join(`
`),t.cause&&(this.cause=t.cause),this.details=n,this.docsPath=s,this.metaMessages=t.metaMessages,this.shortMessage=e}walk(e){return xu(this,As,"m",_u).call(this,this,e)}};As=new WeakSet,_u=function r(e,t){return t?.(e)?e:e.cause?xu(this,As,"m",r).call(this,e.cause,t):e};class vr extends tt{constructor(){super("Chain not configured."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ChainNotConfiguredError"})}}class ug extends tt{constructor(){super("Connector already connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAlreadyConnectedError"})}}class KS extends tt{constructor(){super("Connector not connected."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorNotConnectedError"})}}class ZS extends tt{constructor({address:e,connector:t}){super(`Account "${e}" not found for connector "${t.name}".`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorAccountNotFoundError"})}}class JS extends tt{constructor({connectionChainId:e,connectorChainId:t}){super(`The current chain of the connector (id: ${t}) does not match the connection's chain (id: ${e}).`,{metaMessages:[`Current Chain ID:  ${t}`,`Expected Chain ID: ${e}`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorChainMismatchError"})}}class YS extends tt{constructor({connector:e}){super(`Connector "${e.name}" unavailable while reconnecting.`,{details:["During the reconnection step, the only connector methods guaranteed to be available are: `id`, `name`, `type`, `uid`.","All other methods are not guaranteed to be available until reconnection completes and connectors are fully restored.","This error commonly occurs for connectors that asynchronously inject after reconnection has already started."].join(" ")}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ConnectorUnavailableReconnectingError"})}}async function dg(r,e){let t;if(typeof e.connector=="function"?t=r._internal.connectors.setup(e.connector):t=e.connector,t.uid===r.state.current)throw new ug;try{r.setState(o=>({...o,status:"connecting"})),t.emitter.emit("message",{type:"connecting"});const{connector:n,...s}=e,i=await t.connect(s);return t.emitter.off("connect",r._internal.events.connect),t.emitter.on("change",r._internal.events.change),t.emitter.on("disconnect",r._internal.events.disconnect),await r.storage?.setItem("recentConnectorId",t.id),r.setState(o=>({...o,connections:new Map(o.connections).set(t.uid,{accounts:s.withCapabilities?i.accounts.map(a=>typeof a=="object"?a.address:a):i.accounts,chainId:i.chainId,connector:t}),current:t.uid,status:"connected"})),{accounts:s.withCapabilities?i.accounts.map(o=>typeof o=="object"?o:{address:o,capabilities:{}}):i.accounts,chainId:i.chainId}}catch(n){throw r.setState(s=>({...s,status:s.current?"connected":"disconnected"})),n}}const Fi=256;let Hn=Fi,Gn;function Eu(r=11){if(!Gn||Hn+r>Fi*2){Gn="",Hn=0;for(let e=0;e<Fi;e++)Gn+=(256+Math.random()*256|0).toString(16).substring(1)}return Gn.substring(Hn,Hn+++r)}function hg(r){const{batch:e,chain:t,ccipRead:n,key:s="base",name:i="Base Client",type:o="base"}=r,a=r.experimental_blockTag??(typeof t?.experimental_preconfirmationTime=="number"?"pending":void 0),c=t?.blockTime??12e3,l=Math.min(Math.max(Math.floor(c/2),500),4e3),u=r.pollingInterval??l,h=r.cacheTime??u,f=r.account?Qp(r.account):void 0,{config:p,request:w,value:g}=r.transport({chain:t,pollingInterval:u}),m={...p,...g},x={account:f,batch:e,cacheTime:h,ccipRead:n,chain:t,key:s,name:i,pollingInterval:u,request:w,transport:m,type:o,uid:Eu(),...a?{experimental_blockTag:a}:{}};function b(v){return E=>{const _=E(v);for(const k in x)delete _[k];const S={...v,..._};return Object.assign(S,{extend:b(S)})}}return Object.assign(x,{extend:b(x)})}function fg({key:r,methods:e,name:t,request:n,retryCount:s=3,retryDelay:i=150,timeout:o,type:a},c){const l=Eu();return{config:{key:r,methods:e,name:t,request:n,retryCount:s,retryDelay:i,timeout:o,type:a},request:rg(n,{methods:e,retryCount:s,retryDelay:i,uid:l}),value:c}}class pg extends R{constructor(){super("No URL was provided to the Transport. Please provide a valid RPC URL to the Transport.",{docsPath:"/docs/clients/intro",name:"UrlRequiredError"})}}function mg(r,e={}){const{batch:t,fetchFn:n,fetchOptions:s,key:i="http",methods:o,name:a="HTTP JSON-RPC",onFetchRequest:c,onFetchResponse:l,retryDelay:u,raw:h}=e;return({chain:f,retryCount:p,timeout:w})=>{const{batchSize:g=1e3,wait:m=0}=typeof t=="object"?t:{},x=e.retryCount??p,b=w??e.timeout??1e4,v=r||f?.rpcUrls.default.http[0];if(!v)throw new pg;const E=cg(v,{fetchFn:n,fetchOptions:s,onRequest:c,onResponse:l,timeout:b});return fg({key:i,methods:o,name:a,async request({method:_,params:S}){const k={method:_,params:S},{schedule:A}=gm({id:v,wait:m,shouldSplitBatch($){return $.length>g},fn:$=>E.request({body:$}),sort:($,G)=>$.id-G.id}),C=async $=>t?A($):[await E.request({body:$})],[{error:F,result:H}]=await C(k);if(h)return{error:F,result:H};if(F)throw new nu({body:k,error:F,url:v});return H},retryCount:x,retryDelay:u,timeout:b,type:"http"},{fetchOptions:s,url:v})}}let Kn=[];function za(r){const e=r.connectors;return Kn.length===e.length&&Kn.every((t,n)=>t===e[n])?Kn:(Kn=e,e)}let gi=!1;async function gg(r,e={}){if(gi)return[];gi=!0,r.setState(l=>({...l,status:l.current?"reconnecting":"connecting"}));const t=[];if(e.connectors?.length)for(const l of e.connectors){let u;typeof l=="function"?u=r._internal.connectors.setup(l):u=l,t.push(u)}else t.push(...r.connectors);let n;try{n=await r.storage?.getItem("recentConnectorId")}catch{}const s={};for(const[,l]of r.state.connections)s[l.connector.id]=1;n&&(s[n]=0);const i=Object.keys(s).length>0?[...t].sort((l,u)=>(s[l.id]??10)-(s[u.id]??10)):t;let o=!1;const a=[],c=[];for(const l of i){const u=await l.getProvider().catch(()=>{});if(!u||c.some(p=>p===u)||!await l.isAuthorized())continue;const f=await l.connect({isReconnecting:!0}).catch(()=>null);f&&(l.emitter.off("connect",r._internal.events.connect),l.emitter.on("change",r._internal.events.change),l.emitter.on("disconnect",r._internal.events.disconnect),r.setState(p=>{const w=new Map(o?p.connections:new Map).set(l.uid,{accounts:f.accounts,chainId:f.chainId,connector:l});return{...p,current:o?p.current:l.uid,connections:w}}),a.push({accounts:f.accounts,chainId:f.chainId,connector:l}),c.push(u),o=!0)}return(r.state.status==="reconnecting"||r.state.status==="connecting")&&(o?r.setState(l=>({...l,status:"connected"})):r.setState(l=>({...l,connections:new Map,current:null,status:"disconnected"}))),gi=!1,a}class ut extends tt{constructor(){super("Provider not found."),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"ProviderNotFoundError"})}}class QS extends tt{constructor({connector:e}){super(`"${e.name}" does not support programmatic chain switching.`),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SwitchChainNotSupportedError"})}}function yg(r,e){const{onChange:t}=e;return r._internal.connectors.subscribe((n,s)=>{t(Object.values(n),s)})}Js.type="injected";function Js(r={}){const{shimDisconnect:e=!0,unstable_shimAsyncInject:t}=r;function n(){const c=r.target;if(typeof c=="function"){const l=c();if(l)return l}return typeof c=="object"?c:typeof c=="string"?{...wg[c]??{id:c,name:`${c[0].toUpperCase()}${c.slice(1)}`,provider:`is${c[0].toUpperCase()}${c.slice(1)}`}}:{id:"injected",name:"Injected",provider(l){return l?.ethereum}}}let s,i,o,a;return c=>({get icon(){return n().icon},get id(){return n().id},get name(){return n().name},get supportsSimulation(){return!0},type:Js.type,async setup(){const l=await this.getProvider();l?.on&&r.target&&(o||(o=this.onConnect.bind(this),l.on("connect",o)),s||(s=this.onAccountsChanged.bind(this),l.on("accountsChanged",s)))},async connect({chainId:l,isReconnecting:u,withCapabilities:h}={}){const f=await this.getProvider();if(!f)throw new ut;let p=[];if(u)p=await this.getAccounts().catch(()=>[]);else if(e)try{p=(await f.request({method:"wallet_requestPermissions",params:[{eth_accounts:{}}]}))[0]?.caveats?.[0]?.value?.map(g=>xe(g)),p.length>0&&(p=await this.getAccounts())}catch(w){const g=w;if(g.code===Q.code)throw new Q(g);if(g.code===gt.code)throw g}try{!p?.length&&!u&&(p=(await f.request({method:"eth_requestAccounts"})).map(m=>xe(m))),o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a));let w=await this.getChainId();return l&&w!==l&&(w=(await this.switchChain({chainId:l}).catch(m=>{if(m.code===Q.code)throw m;return{id:w}}))?.id??w),e&&await c.storage?.removeItem(`${this.id}.disconnected`),r.target||await c.storage?.setItem("injected.connected",!0),{accounts:h?p.map(g=>({address:g,capabilities:{}})):p,chainId:w}}catch(w){const g=w;throw g.code===Q.code?new Q(g):g.code===gt.code?new gt(g):g}},async disconnect(){const l=await this.getProvider();if(!l)throw new ut;i&&(l.removeListener("chainChanged",i),i=void 0),a&&(l.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),l.on("connect",o));try{await vu(()=>l.request({method:"wallet_revokePermissions",params:[{eth_accounts:{}}]}),{timeout:100})}catch{}e&&await c.storage?.setItem(`${this.id}.disconnected`,!0),r.target||await c.storage?.removeItem("injected.connected")},async getAccounts(){const l=await this.getProvider();if(!l)throw new ut;return(await l.request({method:"eth_accounts"})).map(h=>xe(h))},async getChainId(){const l=await this.getProvider();if(!l)throw new ut;const u=await l.request({method:"eth_chainId"});return Number(u)},async getProvider(){if(typeof window>"u")return;let l;const u=n();return typeof u.provider=="function"?l=u.provider(window):typeof u.provider=="string"?l=ys(window,u.provider):l=u.provider,l&&!l.removeListener&&("off"in l&&typeof l.off=="function"?l.removeListener=l.off:l.removeListener=()=>{}),l},async isAuthorized(){try{if(e&&await c.storage?.getItem(`${this.id}.disconnected`)||!r.target&&!await c.storage?.getItem("injected.connected"))return!1;if(!await this.getProvider()){if(t!==void 0&&t!==!1){const f=async()=>(typeof window<"u"&&window.removeEventListener("ethereum#initialized",f),!!await this.getProvider()),p=typeof t=="number"?t:1e3;if(await Promise.race([...typeof window<"u"?[new Promise(g=>window.addEventListener("ethereum#initialized",()=>g(f()),{once:!0}))]:[],new Promise(g=>setTimeout(()=>g(f()),p))]))return!0}throw new ut}return!!(await wu(()=>this.getAccounts())).length}catch{return!1}},async switchChain({addEthereumChainParameter:l,chainId:u}){const h=await this.getProvider();if(!h)throw new ut;const f=c.chains.find(w=>w.id===u);if(!f)throw new Ce(new vr);const p=new Promise(w=>{const g=m=>{"chainId"in m&&m.chainId===u&&(c.emitter.off("change",g),w())};c.emitter.on("change",g)});try{return await Promise.all([h.request({method:"wallet_switchEthereumChain",params:[{chainId:M(u)}]}).then(async()=>{await this.getChainId()===u&&c.emitter.emit("change",{chainId:u})}),p]),f}catch(w){const g=w;if(g.code===4902||g?.data?.originalError?.code===4902)try{const{default:m,...x}=f.blockExplorers??{};let b;l?.blockExplorerUrls?b=l.blockExplorerUrls:m&&(b=[m.url,...Object.values(x).map(_=>_.url)]);let v;l?.rpcUrls?.length?v=l.rpcUrls:v=[f.rpcUrls.default?.http[0]??""];const E={blockExplorerUrls:b,chainId:M(u),chainName:l?.chainName??f.name,iconUrls:l?.iconUrls,nativeCurrency:l?.nativeCurrency??f.nativeCurrency,rpcUrls:v};return await Promise.all([h.request({method:"wallet_addEthereumChain",params:[E]}).then(async()=>{if(await this.getChainId()===u)c.emitter.emit("change",{chainId:u});else throw new Q(new Error("User rejected switch after adding network."))}),p]),f}catch(m){throw new Q(m)}throw g.code===Q.code?new Q(g):new Ce(g)}},async onAccountsChanged(l){if(l.length===0)this.onDisconnect();else if(c.emitter.listenerCount("connect")){const u=(await this.getChainId()).toString();this.onConnect({chainId:u}),e&&await c.storage?.removeItem(`${this.id}.disconnected`)}else c.emitter.emit("change",{accounts:l.map(u=>xe(u))})},onChainChanged(l){const u=Number(l);c.emitter.emit("change",{chainId:u})},async onConnect(l){const u=await this.getAccounts();if(u.length===0)return;const h=Number(l.chainId);c.emitter.emit("connect",{accounts:u,chainId:h});const f=await this.getProvider();f&&(o&&(f.removeListener("connect",o),o=void 0),s||(s=this.onAccountsChanged.bind(this),f.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),f.on("chainChanged",i)),a||(a=this.onDisconnect.bind(this),f.on("disconnect",a)))},async onDisconnect(l){const u=await this.getProvider();l&&l.code===1013&&u&&(await this.getAccounts()).length||(c.emitter.emit("disconnect"),u&&(i&&(u.removeListener("chainChanged",i),i=void 0),a&&(u.removeListener("disconnect",a),a=void 0),o||(o=this.onConnect.bind(this),u.on("connect",o))))}})}const wg={coinbaseWallet:{id:"coinbaseWallet",name:"Coinbase Wallet",provider(r){return r?.coinbaseWalletExtension?r.coinbaseWalletExtension:ys(r,"isCoinbaseWallet")}},metaMask:{id:"metaMask",name:"MetaMask",provider(r){return ys(r,e=>{if(!e.isMetaMask||e.isBraveWallet&&!e._events&&!e._state)return!1;const t=["isApexWallet","isAvalanche","isBitKeep","isBlockWallet","isKuCoinWallet","isMathWallet","isOkxWallet","isOKExWallet","isOneInchIOSWallet","isOneInchAndroidWallet","isOpera","isPhantom","isPortal","isRabby","isTokenPocket","isTokenary","isUniswapWallet","isZerion"];for(const n of t)if(e[n])return!1;return!0})}},phantom:{id:"phantom",name:"Phantom",provider(r){return r?.phantom?.ethereum?r.phantom?.ethereum:ys(r,"isPhantom")}}};function ys(r,e){function t(s){return typeof e=="function"?e(s):typeof e=="string"?s[e]:!0}const n=r.ethereum;if(n?.providers)return n.providers.find(s=>t(s));if(n&&t(n))return n}function bg(r){if(typeof window>"u")return;const e=t=>r(t.detail);return window.addEventListener("eip6963:announceProvider",e),window.dispatchEvent(new CustomEvent("eip6963:requestProvider")),()=>window.removeEventListener("eip6963:announceProvider",e)}function vg(){const r=new Set;let e=[];const t=()=>bg(s=>{e.some(({info:i})=>i.uuid===s.info.uuid)||(e=[...e,s],r.forEach(i=>i(e,{added:[s]})))});let n=t();return{_listeners(){return r},clear(){r.forEach(s=>s([],{removed:[...e]})),e=[]},destroy(){this.clear(),r.clear(),n?.()},findProvider({rdns:s}){return e.find(i=>i.info.rdns===s)},getProviders(){return e},reset(){this.clear(),n?.(),n=t()},subscribe(s,{emitImmediately:i}={}){return r.add(s),i&&s(e,{added:e}),()=>r.delete(s)}}}const xg=r=>(e,t,n)=>{const s=n.subscribe;return n.subscribe=(o,a,c)=>{let l=o;if(a){const u=c?.equalityFn||Object.is;let h=o(n.getState());l=f=>{const p=o(f);if(!u(h,p)){const w=h;a(h=p,w)}},c?.fireImmediately&&a(h,h)}return s(l)},r(e,t,n)},_g=xg;function Eg(r,e){let t;try{t=r()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,e?.reviver),a=(i=t.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>t.setItem(s,JSON.stringify(i,e?.replacer)),removeItem:s=>t.removeItem(s)}}const zi=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return zi(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return zi(n)(t)}}}},Sg=(r,e)=>(t,n,s)=>{let i={storage:Eg(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return r((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...g)},n,s);const u=()=>{const g=i.partialize({...n()});return l.setItem(i.name,{state:g,version:i.version})},h=s.setState;s.setState=(g,m)=>{h(g,m),u()};const f=r((...g)=>{t(...g),u()},n,s);s.getInitialState=()=>f;let p;const w=()=>{var g,m;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=n())!=null?v:f)});const x=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=n())!=null?g:f))||void 0;return zi(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[E,_]=b;if(p=i.merge(_,(v=n())!=null?v:f),t(p,!0),E)return u()}).then(()=>{x?.(p,void 0),p=n(),o=!0,c.forEach(b=>b(p))}).catch(b=>{x?.(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||w(),p||f},kg=Sg,Va=r=>{let e;const t=new Set,n=(l,u)=>{const h=typeof l=="function"?l(e):l;if(!Object.is(h,e)){const f=e;e=u??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(p=>p(e,f))}},s=()=>e,a={setState:n,getState:s,getInitialState:()=>c,subscribe:l=>(t.add(l),()=>t.delete(l))},c=e=r(n,s,a);return a},yi=r=>r?Va(r):Va;var Su={exports:{}};(function(r){var e=Object.prototype.hasOwnProperty,t="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(t=!1));function s(c,l,u){this.fn=c,this.context=l,this.once=u||!1}function i(c,l,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new s(u,h||c,f),w=t?t+l:l;return c._events[w]?c._events[w].fn?c._events[w]=[c._events[w],p]:c._events[w].push(p):(c._events[w]=p,c._eventsCount++),c}function o(c,l){--c._eventsCount===0?c._events=new n:delete c._events[l]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var l=[],u,h;if(this._eventsCount===0)return l;for(h in u=this._events)e.call(u,h)&&l.push(t?h.slice(1):h);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(u)):l},a.prototype.listeners=function(l){var u=t?t+l:l,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,w=new Array(p);f<p;f++)w[f]=h[f].fn;return w},a.prototype.listenerCount=function(l){var u=t?t+l:l,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(l,u,h,f,p,w){var g=t?t+l:l;if(!this._events[g])return!1;var m=this._events[g],x=arguments.length,b,v;if(m.fn){switch(m.once&&this.removeListener(l,m.fn,void 0,!0),x){case 1:return m.fn.call(m.context),!0;case 2:return m.fn.call(m.context,u),!0;case 3:return m.fn.call(m.context,u,h),!0;case 4:return m.fn.call(m.context,u,h,f),!0;case 5:return m.fn.call(m.context,u,h,f,p),!0;case 6:return m.fn.call(m.context,u,h,f,p,w),!0}for(v=1,b=new Array(x-1);v<x;v++)b[v-1]=arguments[v];m.fn.apply(m.context,b)}else{var E=m.length,_;for(v=0;v<E;v++)switch(m[v].once&&this.removeListener(l,m[v].fn,void 0,!0),x){case 1:m[v].fn.call(m[v].context);break;case 2:m[v].fn.call(m[v].context,u);break;case 3:m[v].fn.call(m[v].context,u,h);break;case 4:m[v].fn.call(m[v].context,u,h,f);break;default:if(!b)for(_=1,b=new Array(x-1);_<x;_++)b[_-1]=arguments[_];m[v].fn.apply(m[v].context,b)}}return!0},a.prototype.on=function(l,u,h){return i(this,l,u,h,!1)},a.prototype.once=function(l,u,h){return i(this,l,u,h,!0)},a.prototype.removeListener=function(l,u,h,f){var p=t?t+l:l;if(!this._events[p])return this;if(!u)return o(this,p),this;var w=this._events[p];if(w.fn)w.fn===u&&(!f||w.once)&&(!h||w.context===h)&&o(this,p);else{for(var g=0,m=[],x=w.length;g<x;g++)(w[g].fn!==u||f&&!w[g].once||h&&w[g].context!==h)&&m.push(w[g]);m.length?this._events[p]=m.length===1?m[0]:m:o(this,p)}return this},a.prototype.removeAllListeners=function(l){var u;return l?(u=t?t+l:l,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=t,a.EventEmitter=a,r.exports=a})(Su);var Cg=Su.exports;const Tg=_h(Cg);let Ag=class{constructor(e){Object.defineProperty(this,"uid",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"_emitter",{enumerable:!0,configurable:!0,writable:!0,value:new Tg})}on(e,t){this._emitter.on(e,t)}once(e,t){this._emitter.once(e,t)}off(e,t){this._emitter.off(e,t)}emit(e,...t){const n=t[0];this._emitter.emit(e,{uid:this.uid,...n})}listenerCount(e){return this._emitter.listenerCount(e)}};function Pg(r){return new Ag(r)}function Ig(r,e){return JSON.parse(r,(t,n)=>{let s=n;return s?.__type==="bigint"&&(s=BigInt(s.value)),s?.__type==="Map"&&(s=new Map(s.value)),e?.(t,s)??s})}function qa(r,e){return r.slice(0,e).join(".")||"."}function Wa(r,e){const{length:t}=r;for(let n=0;n<t;++n)if(r[n]===e)return n+1;return 0}function jg(r,e){const t=typeof r=="function",n=typeof e=="function",s=[],i=[];return function(a,c){if(typeof c=="object")if(s.length){const l=Wa(s,this);l===0?s[s.length]=this:(s.splice(l),i.splice(l)),i[i.length]=a;const u=Wa(s,c);if(u!==0)return n?e.call(this,a,c,qa(i,u)):`[ref=${qa(i,u)}]`}else s[0]=c,i[0]=a;return t?r.call(this,a,c):c}}function Og(r,e,t,n){return JSON.stringify(r,jg((s,i)=>{let o=i;return typeof o=="bigint"&&(o={__type:"bigint",value:i.toString()}),o instanceof Map&&(o={__type:"Map",value:Array.from(i.entries())}),e?.(s,o)??o},n),t??void 0)}function Ng(r){const{deserialize:e=Ig,key:t="wagmi",serialize:n=Og,storage:s=ku}=r;function i(o){return o instanceof Promise?o.then(a=>a).catch(()=>null):o}return{...s,key:t,async getItem(o,a){const c=s.getItem(`${t}.${o}`),l=await i(c);return l?e(l)??null:a??null},async setItem(o,a){const c=`${t}.${o}`;a===null?await i(s.removeItem(c)):await i(s.setItem(c,n(a)))},async removeItem(o){await i(s.removeItem(`${t}.${o}`))}}}const ku={getItem:()=>null,setItem:()=>{},removeItem:()=>{}};function Rg(){const r=(()=>typeof window<"u"&&window.localStorage?window.localStorage:ku)();return{getItem(e){return r.getItem(e)},removeItem(e){r.removeItem(e)},setItem(e,t){try{r.setItem(e,t)}catch{}}}}const Vi=256;let Zn=Vi,Jn;function $g(r=11){if(!Jn||Zn+r>Vi*2){Jn="",Zn=0;for(let e=0;e<Vi;e++)Jn+=(256+Math.random()*256|0).toString(16).substring(1)}return Jn.substring(Zn,Zn+++r)}function Lg(r){const{multiInjectedProviderDiscovery:e=!0,storage:t=Ng({storage:Rg()}),syncConnectedChain:n=!0,ssr:s=!1,...i}=r,o=typeof window<"u"&&e?vg():void 0,a=yi(()=>i.chains),c=yi(()=>{const _=[],S=new Set;for(const k of i.connectors??[]){const A=l(k);if(_.push(A),!s&&A.rdns){const C=typeof A.rdns=="string"?[A.rdns]:A.rdns;for(const F of C)S.add(F)}}if(!s&&o){const k=o.getProviders();for(const A of k)S.has(A.info.rdns)||_.push(l(u(A)))}return _});function l(_){const S=Pg($g()),k={..._({emitter:S,chains:a.getState(),storage:t,transports:i.transports}),emitter:S,uid:S.uid};return S.on("connect",v),k.setup?.(),k}function u(_){const{info:S}=_,k=_.provider;return Js({target:{...S,id:S.rdns,provider:k}})}const h=new Map;function f(_={}){const S=_.chainId??m.getState().chainId,k=a.getState().find(C=>C.id===S);if(_.chainId&&!k)throw new vr;{const C=h.get(m.getState().chainId);if(C&&!k)return C;if(!k)throw new vr}{const C=h.get(S);if(C)return C}let A;if(i.client)A=i.client({chain:k});else{const C=k.id,F=a.getState().map(G=>G.id),H={},$=Object.entries(i);for(const[G,le]of $)if(!(G==="chains"||G==="client"||G==="connectors"||G==="transports"))if(typeof le=="object")if(C in le)H[G]=le[C];else{if(F.some(er=>er in le))continue;H[G]=le}else H[G]=le;A=hg({...H,chain:k,batch:H.batch??{multicall:!0},transport:G=>i.transports[C]({...G,connectors:c})})}return h.set(S,A),A}function p(){return{chainId:a.getState()[0].id,connections:new Map,current:null,status:"disconnected"}}let w;const g="0.0.0-canary-";gs.startsWith(g)?w=Number.parseInt(gs.replace(g,""),10):w=Number.parseInt(gs.split(".")[0]??"0",10);const m=yi(_g(t?kg(p,{migrate(_,S){if(S===w)return _;const k=p(),A=x(_,k.chainId);return{...k,chainId:A}},name:"store",partialize(_){return{connections:{__type:"Map",value:Array.from(_.connections.entries()).map(([S,k])=>{const{id:A,name:C,type:F,uid:H}=k.connector;return[S,{...k,connector:{id:A,name:C,type:F,uid:H}}]})},chainId:_.chainId,current:_.current}},merge(_,S){typeof _=="object"&&_&&"status"in _&&delete _.status;const k=x(_,S.chainId);return{...S,..._,chainId:k}},skipHydration:s,storage:t,version:w}):p));m.setState(p());function x(_,S){return _&&typeof _=="object"&&"chainId"in _&&typeof _.chainId=="number"&&a.getState().some(k=>k.id===_.chainId)?_.chainId:S}n&&m.subscribe(({connections:_,current:S})=>S?_.get(S)?.chainId:void 0,_=>{if(a.getState().some(k=>k.id===_))return m.setState(k=>({...k,chainId:_??k.chainId}))}),o?.subscribe(_=>{const S=new Set,k=new Set;for(const C of c.getState())if(S.add(C.id),C.rdns){const F=typeof C.rdns=="string"?[C.rdns]:C.rdns;for(const H of F)k.add(H)}const A=[];for(const C of _){if(k.has(C.info.rdns))continue;const F=l(u(C));S.has(F.id)||A.push(F)}t&&!m.persist.hasHydrated()||c.setState(C=>[...C,...A],!0)});function b(_){m.setState(S=>{const k=S.connections.get(_.uid);return k?{...S,connections:new Map(S.connections).set(_.uid,{accounts:_.accounts??k.accounts,chainId:_.chainId??k.chainId,connector:k.connector})}:S})}function v(_){m.getState().status==="connecting"||m.getState().status==="reconnecting"||m.setState(S=>{const k=c.getState().find(A=>A.uid===_.uid);return k?(k.emitter.listenerCount("connect")&&k.emitter.off("connect",b),k.emitter.listenerCount("change")||k.emitter.on("change",b),k.emitter.listenerCount("disconnect")||k.emitter.on("disconnect",E),{...S,connections:new Map(S.connections).set(_.uid,{accounts:_.accounts,chainId:_.chainId,connector:k}),current:_.uid,status:"connected"}):S})}function E(_){m.setState(S=>{const k=S.connections.get(_.uid);if(k){const C=k.connector;C.emitter.listenerCount("change")&&k.connector.emitter.off("change",b),C.emitter.listenerCount("disconnect")&&k.connector.emitter.off("disconnect",E),C.emitter.listenerCount("connect")||k.connector.emitter.on("connect",v)}if(S.connections.delete(_.uid),S.connections.size===0)return{...S,connections:new Map,current:null,status:"disconnected"};const A=S.connections.values().next().value;return{...S,connections:new Map(S.connections),current:A.connector.uid}})}return{get chains(){return a.getState()},get connectors(){return c.getState()},storage:t,getClient:f,get state(){return m.getState()},setState(_){let S;typeof _=="function"?S=_(m.getState()):S=_;const k=p();typeof S!="object"&&(S=k),Object.keys(k).some(C=>!(C in S))&&(S=k),m.setState(S,!0)},subscribe(_,S,k){return m.subscribe(_,S,k?{...k,fireImmediately:k.emitImmediately}:void 0)},_internal:{mipd:o,async revalidate(){const _=m.getState(),S=_.connections;let k=_.current;for(const[,A]of S){const C=A.connector;C.isAuthorized&&await C.isAuthorized()||(S.delete(C.uid),k===C.uid&&(k=null))}m.setState(A=>({...A,connections:S,current:k}))},store:m,ssr:!!s,syncConnectedChain:n,transports:i.transports,chains:{setState(_){const S=typeof _=="function"?_(a.getState()):_;if(S.length!==0)return a.setState(S,!0)},subscribe(_){return a.subscribe(_)}},connectors:{providerDetailToConnector:u,setup:l,setState(_){return c.setState(typeof _=="function"?_(c.getState()):_,!0)},subscribe(_){return c.subscribe(_)}},events:{change:b,connect:v,disconnect:E}}}}function Dg(r,e){const{initialState:t,reconnectOnMount:n}=e;return t&&!r._internal.store.persist.hasHydrated()&&r.setState({...t,chainId:r.chains.some(s=>s.id===t.chainId)?t.chainId:r.chains[0].id,connections:n?t.connections:new Map,status:n?"reconnecting":"disconnected"}),{async onMount(){r._internal.ssr&&(await r._internal.store.persist.rehydrate(),r._internal.mipd&&r._internal.connectors.setState(s=>{const i=new Set;for(const c of s??[])if(c.rdns){const l=Array.isArray(c.rdns)?c.rdns:[c.rdns];for(const u of l)i.add(u)}const o=[],a=r._internal.mipd?.getProviders()??[];for(const c of a){if(i.has(c.info.rdns))continue;const l=r._internal.connectors.providerDetailToConnector(c),u=r._internal.connectors.setup(l);o.push(u)}return[...s,...o]})),n?gg(r):r.storage&&r.setState(s=>({...s,connections:new Map}))}}}function Ug(r){const{chain:e}=r,t=e.rpcUrls.default.http[0];if(!r.transports)return[t];const n=r.transports?.[e.id]?.({chain:e});return(n?.value?.transports||[n]).map(({value:i})=>i?.url||t)}function Bg(r){const{children:e,config:t,initialState:n,reconnectOnMount:s=!0}=r,{onMount:i}=Dg(t,{initialState:n,reconnectOnMount:s});t._internal.ssr||i();const o=y.useRef(!0);return y.useEffect(()=>{if(o.current&&t._internal.ssr)return i(),()=>{o.current=!1}},[]),e}const Cu=y.createContext(void 0);function Mg(r){const{children:e,config:t}=r,n={value:t};return y.createElement(Bg,r,y.createElement(Cu.Provider,n,e))}const Fg="2.19.2",zg=()=>`wagmi@${Fg}`;class Vg extends tt{constructor(){super(...arguments),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiError"})}get docsBaseUrl(){return"https://wagmi.sh/react"}get version(){return zg()}}class qg extends Vg{constructor(){super("`useConfig` must be used within `WagmiProvider`.",{docsPath:"/api/WagmiProvider"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"WagmiProviderNotFoundError"})}}function Tu(r={}){const e=r.config??y.useContext(Cu);if(!e)throw new qg;return e}function Wg(r){return{mutationFn(e){return dg(r,e)},mutationKey:["connect"]}}function Hg(r={}){const e=Tu(r);return y.useSyncExternalStore(t=>yg(e,{onChange:t}),()=>za(e),()=>za(e))}function Gg(r={}){const{mutation:e}=r,t=Tu(r),n=Wg(t),{mutate:s,mutateAsync:i,...o}=kh({...e,...n});return y.useEffect(()=>t.subscribe(({status:a})=>a,(a,c)=>{c==="connected"&&a==="disconnected"&&o.reset()}),[t,o.reset]),{...o,connect:s,connectAsync:i,connectors:Hg({config:t})}}const Kg=r=>r?(...e)=>r(...e):(...e)=>fetch(...e);class Wo extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Ha extends Wo{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Ga extends Wo{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ka extends Wo{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var qi;(function(r){r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2"})(qi||(qi={}));class Zg{constructor(e,{headers:t={},customFetch:n,region:s=qi.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=Kg(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return O(this,arguments,void 0,function*(t,n={}){var s;try{const{headers:i,method:o,body:a,signal:c}=n;let l={},{region:u}=n;u||(u=this.region);const h=new URL(`${this.url}/${t}`);u&&u!=="any"&&(l["x-region"]=u,h.searchParams.set("forceFunctionRegion",u));let f;a&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",f=a):typeof a=="string"?(l["Content-Type"]="text/plain",f=a):typeof FormData<"u"&&a instanceof FormData?f=a:(l["Content-Type"]="application/json",f=JSON.stringify(a)):f=a;const p=yield this.fetch(h.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),i),body:f,signal:c}).catch(x=>{throw x.name==="AbortError"?x:new Ha(x)}),w=p.headers.get("x-relay-error");if(w&&w==="true")throw new Ga(p);if(!p.ok)throw new Ka(p);let g=((s=p.headers.get("Content-Type"))!==null&&s!==void 0?s:"text/plain").split(";")[0].trim(),m;return g==="application/json"?m=yield p.json():g==="application/octet-stream"||g==="application/pdf"?m=yield p.blob():g==="text/event-stream"?m=p:g==="multipart/form-data"?m=yield p.formData():m=yield p.text(),{data:m,error:null,response:p}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new Ha(i)}:{data:null,error:i,response:i instanceof Ka||i instanceof Ga?i.context:void 0}}})}}var ge={};const jr=Eh(fh);var Yn={},Qn={},Xn={},es={},ts={},rs={},Za;function Au(){if(Za)return rs;Za=1,Object.defineProperty(rs,"__esModule",{value:!0});class r extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}}return rs.default=r,rs}var Ja;function Pu(){if(Ja)return ts;Ja=1,Object.defineProperty(ts,"__esModule",{value:!0});const e=jr.__importDefault(Au());class t{constructor(s){var i,o;this.shouldThrowOnError=!1,this.method=s.method,this.url=s.url,this.headers=new Headers(s.headers),this.schema=s.schema,this.body=s.body,this.shouldThrowOnError=(i=s.shouldThrowOnError)!==null&&i!==void 0?i:!1,this.signal=s.signal,this.isMaybeSingle=(o=s.isMaybeSingle)!==null&&o!==void 0?o:!1,s.fetch?this.fetch=s.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(s,i){return this.headers=new Headers(this.headers),this.headers.set(s,i),this}then(s,i){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const o=this.fetch;let a=o(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async c=>{var l,u,h,f;let p=null,w=null,g=null,m=c.status,x=c.statusText;if(c.ok){if(this.method!=="HEAD"){const _=await c.text();_===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((l=this.headers.get("Accept"))===null||l===void 0)&&l.includes("application/vnd.pgrst.plan+text"))?w=_:w=JSON.parse(_))}const v=(u=this.headers.get("Prefer"))===null||u===void 0?void 0:u.match(/count=(exact|planned|estimated)/),E=(h=c.headers.get("content-range"))===null||h===void 0?void 0:h.split("/");v&&E&&E.length>1&&(g=parseInt(E[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(p={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,g=null,m=406,x="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const v=await c.text();try{p=JSON.parse(v),Array.isArray(p)&&c.status===404&&(w=[],p=null,m=200,x="OK")}catch{c.status===404&&v===""?(m=204,x="No Content"):p={message:v}}if(p&&this.isMaybeSingle&&(!((f=p?.details)===null||f===void 0)&&f.includes("0 rows"))&&(p=null,m=200,x="OK"),p&&this.shouldThrowOnError)throw new e.default(p)}return{error:p,data:w,count:g,status:m,statusText:x}});return this.shouldThrowOnError||(a=a.catch(c=>{var l,u,h;return{error:{message:`${(l=c?.name)!==null&&l!==void 0?l:"FetchError"}: ${c?.message}`,details:`${(u=c?.stack)!==null&&u!==void 0?u:""}`,hint:"",code:`${(h=c?.code)!==null&&h!==void 0?h:""}`},data:null,count:null,status:0,statusText:""}})),a.then(s,i)}returns(){return this}overrideTypes(){return this}}return ts.default=t,ts}var Ya;function Iu(){if(Ya)return es;Ya=1,Object.defineProperty(es,"__esModule",{value:!0});const e=jr.__importDefault(Pu());class t extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const l=c?`${c}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(l,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:l="text"}={}){var u;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return es.default=t,es}var Qa;function Ho(){if(Qa)return Xn;Qa=1,Object.defineProperty(Xn,"__esModule",{value:!0});const e=jr.__importDefault(Iu()),t=new RegExp("[,()]");class n extends e.default{eq(i,o){return this.url.searchParams.append(i,`eq.${o}`),this}neq(i,o){return this.url.searchParams.append(i,`neq.${o}`),this}gt(i,o){return this.url.searchParams.append(i,`gt.${o}`),this}gte(i,o){return this.url.searchParams.append(i,`gte.${o}`),this}lt(i,o){return this.url.searchParams.append(i,`lt.${o}`),this}lte(i,o){return this.url.searchParams.append(i,`lte.${o}`),this}like(i,o){return this.url.searchParams.append(i,`like.${o}`),this}likeAllOf(i,o){return this.url.searchParams.append(i,`like(all).{${o.join(",")}}`),this}likeAnyOf(i,o){return this.url.searchParams.append(i,`like(any).{${o.join(",")}}`),this}ilike(i,o){return this.url.searchParams.append(i,`ilike.${o}`),this}ilikeAllOf(i,o){return this.url.searchParams.append(i,`ilike(all).{${o.join(",")}}`),this}ilikeAnyOf(i,o){return this.url.searchParams.append(i,`ilike(any).{${o.join(",")}}`),this}is(i,o){return this.url.searchParams.append(i,`is.${o}`),this}in(i,o){const a=Array.from(new Set(o)).map(c=>typeof c=="string"&&t.test(c)?`"${c}"`:`${c}`).join(",");return this.url.searchParams.append(i,`in.(${a})`),this}contains(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cs.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cs.{${o.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(o)}`),this}containedBy(i,o){return typeof o=="string"?this.url.searchParams.append(i,`cd.${o}`):Array.isArray(o)?this.url.searchParams.append(i,`cd.{${o.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(o)}`),this}rangeGt(i,o){return this.url.searchParams.append(i,`sr.${o}`),this}rangeGte(i,o){return this.url.searchParams.append(i,`nxl.${o}`),this}rangeLt(i,o){return this.url.searchParams.append(i,`sl.${o}`),this}rangeLte(i,o){return this.url.searchParams.append(i,`nxr.${o}`),this}rangeAdjacent(i,o){return this.url.searchParams.append(i,`adj.${o}`),this}overlaps(i,o){return typeof o=="string"?this.url.searchParams.append(i,`ov.${o}`):this.url.searchParams.append(i,`ov.{${o.join(",")}}`),this}textSearch(i,o,{config:a,type:c}={}){let l="";c==="plain"?l="pl":c==="phrase"?l="ph":c==="websearch"&&(l="w");const u=a===void 0?"":`(${a})`;return this.url.searchParams.append(i,`${l}fts${u}.${o}`),this}match(i){return Object.entries(i).forEach(([o,a])=>{this.url.searchParams.append(o,`eq.${a}`)}),this}not(i,o,a){return this.url.searchParams.append(i,`not.${o}.${a}`),this}or(i,{foreignTable:o,referencedTable:a=o}={}){const c=a?`${a}.or`:"or";return this.url.searchParams.append(c,`(${i})`),this}filter(i,o,a){return this.url.searchParams.append(i,`${o}.${a}`),this}}return Xn.default=n,Xn}var Xa;function ju(){if(Xa)return Qn;Xa=1,Object.defineProperty(Qn,"__esModule",{value:!0});const e=jr.__importDefault(Ho());class t{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,i){const{head:o=!1,count:a}=i??{},c=o?"HEAD":"GET";let l=!1;const u=(s??"*").split("").map(h=>/\s/.test(h)&&!l?"":(h==='"'&&(l=!l),h)).join("");return this.url.searchParams.set("select",u),a&&this.headers.append("Prefer",`count=${a}`),new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const l=s.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Qn.default=t,Qn}var ec;function Jg(){if(ec)return Yn;ec=1,Object.defineProperty(Yn,"__esModule",{value:!0});const r=jr,e=r.__importDefault(ju()),t=r.__importDefault(Ho());class n{constructor(i,{headers:o={},schema:a,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:c=!1,count:l}={}){var u;let h;const f=new URL(`${this.url}/rpc/${i}`);let p;a||c?(h=a?"HEAD":"GET",Object.entries(o).filter(([g,m])=>m!==void 0).map(([g,m])=>[g,Array.isArray(m)?`{${m.join(",")}}`:`${m}`]).forEach(([g,m])=>{f.searchParams.append(g,m)})):(h="POST",p=o);const w=new Headers(this.headers);return l&&w.set("Prefer",`count=${l}`),new t.default({method:h,url:f,headers:w,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return Yn.default=n,Yn}Object.defineProperty(ge,"__esModule",{value:!0});var Ou=ge.PostgrestError=zu=ge.PostgrestBuilder=Mu=ge.PostgrestTransformBuilder=Uu=ge.PostgrestFilterBuilder=Lu=ge.PostgrestQueryBuilder=Ru=ge.PostgrestClient=void 0;const Or=jr,Nu=Or.__importDefault(Jg());var Ru=ge.PostgrestClient=Nu.default;const $u=Or.__importDefault(ju());var Lu=ge.PostgrestQueryBuilder=$u.default;const Du=Or.__importDefault(Ho());var Uu=ge.PostgrestFilterBuilder=Du.default;const Bu=Or.__importDefault(Iu());var Mu=ge.PostgrestTransformBuilder=Bu.default;const Fu=Or.__importDefault(Pu());var zu=ge.PostgrestBuilder=Fu.default;const Vu=Or.__importDefault(Au());Ou=ge.PostgrestError=Vu.default;var qu=ge.default={PostgrestClient:Nu.default,PostgrestQueryBuilder:$u.default,PostgrestFilterBuilder:Du.default,PostgrestTransformBuilder:Bu.default,PostgrestBuilder:Fu.default,PostgrestError:Vu.default};const Yg=Ih({__proto__:null,get PostgrestBuilder(){return zu},get PostgrestClient(){return Ru},get PostgrestError(){return Ou},get PostgrestFilterBuilder(){return Uu},get PostgrestQueryBuilder(){return Lu},get PostgrestTransformBuilder(){return Mu},default:qu},[ge]),{PostgrestClient:Qg,PostgrestQueryBuilder:ek,PostgrestFilterBuilder:tk,PostgrestTransformBuilder:rk,PostgrestBuilder:nk,PostgrestError:sk}=qu||Yg;class Xg{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const t=process.versions;if(t&&t.node){const n=t.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const n=this.getWebSocketConstructor();return new n(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const ey="2.79.0",ty=`realtime-js/${ey}`,ry="1.0.0",Wi=1e4,ny=1e3,sy=100;var Xr;(function(r){r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed"})(Xr||(Xr={}));var ie;(function(r){r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving"})(ie||(ie={}));var Re;(function(r){r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token"})(Re||(Re={}));var Hi;(function(r){r.websocket="websocket"})(Hi||(Hi={}));var Lt;(function(r){r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed"})(Lt||(Lt={}));class iy{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),i=t.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class Wu{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var J;(function(r){r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange"})(J||(J={}));const tc=(r,e,t={})=>{var n;const s=(n=t.skipTypes)!==null&&n!==void 0?n:[];return e?Object.keys(e).reduce((i,o)=>(i[o]=oy(o,r,e,s),i),{}):{}},oy=(r,e,t,n)=>{const s=e.find(a=>a.name===r),i=s?.type,o=t[r];return i&&!n.includes(i)?Hu(i,o):Gi(o)},Hu=(r,e)=>{if(r.charAt(0)==="_"){const t=r.slice(1,r.length);return uy(e,t)}switch(r){case J.bool:return ay(e);case J.float4:case J.float8:case J.int2:case J.int4:case J.int8:case J.numeric:case J.oid:return cy(e);case J.json:case J.jsonb:return ly(e);case J.timestamp:return dy(e);case J.abstime:case J.date:case J.daterange:case J.int4range:case J.int8range:case J.money:case J.reltime:case J.text:case J.time:case J.timestamptz:case J.timetz:case J.tsrange:case J.tstzrange:return Gi(e);default:return Gi(e)}},Gi=r=>r,ay=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},cy=r=>{if(typeof r=="string"){const e=parseFloat(r);if(!Number.isNaN(e))return e}return r},ly=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(e){return console.log(`JSON parse error: ${e}`),r}return r},uy=(r,e)=>{if(typeof r!="string")return r;const t=r.length-1,n=r[t];if(r[0]==="{"&&n==="}"){let i;const o=r.slice(1,t);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>Hu(e,a))}return r},dy=r=>typeof r=="string"?r.replace(" ","T"):r,Gu=r=>{const e=new URL(r);return e.protocol=e.protocol.replace(/^ws/i,"http"),e.pathname=e.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),e.pathname===""||e.pathname==="/"?e.pathname="/api/broadcast":e.pathname=e.pathname+"/api/broadcast",e.href};class wi{constructor(e,t,n={},s=Wi){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var rc;(function(r){r.SYNC="sync",r.JOIN="join",r.LEAVE="leave"})(rc||(rc={}));class en{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=en.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=en.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=en.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const i=this.cloneDeep(e),o=this.transformState(t),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const h=i[l];if(h){const f=u.map(m=>m.presence_ref),p=h.map(m=>m.presence_ref),w=u.filter(m=>p.indexOf(m.presence_ref)<0),g=h.filter(m=>f.indexOf(m.presence_ref)<0);w.length>0&&(a[l]=w),g.length>0&&(c[l]=g)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},n,s)}static syncDiff(e,t,n,s){const{joins:i,leaves:o}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const h=e[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return"metas"in s?t[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[n]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var nc;(function(r){r.ALL="*",r.INSERT="INSERT",r.UPDATE="UPDATE",r.DELETE="DELETE"})(nc||(nc={}));var tn;(function(r){r.BROADCAST="broadcast",r.PRESENCE="presence",r.POSTGRES_CHANGES="postgres_changes",r.SYSTEM="system"})(tn||(tn={}));var Je;(function(r){r.SUBSCRIBED="SUBSCRIBED",r.TIMED_OUT="TIMED_OUT",r.CLOSED="CLOSED",r.CHANNEL_ERROR="CHANNEL_ERROR"})(Je||(Je={}));class Go{constructor(e,t={config:{}},n){var s,i;if(this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=ie.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new wi(this,Re.join,this.params,this.timeout),this.rejoinTimer=new Wu(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ie.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ie.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=ie.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Re.reply,{},(o,a)=>{this._trigger(this._replyEventName(a),o)}),this.presence=new en(this),this.broadcastEndpointURL=Gu(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(s=this.params.config)===null||s===void 0?void 0:s.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==ie.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[tn.PRESENCE]&&this.bindings[tn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e?.(Je.CHANNEL_ERROR,p)),this._onClose(()=>e?.(Je.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:p})=>{var w;if(this.socket.setAuth(),p===void 0){e?.(Je.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,m=(w=g?.length)!==null&&w!==void 0?w:0,x=[];for(let b=0;b<m;b++){const v=g[b],{filter:{event:E,schema:_,table:S,filter:k}}=v,A=p&&p[b];if(A&&A.event===E&&A.schema===_&&A.table===S&&A.filter===k)x.push(Object.assign(Object.assign({},v),{id:A.id}));else{this.unsubscribe(),this.state=ie.errored,e?.(Je.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=x,e&&e(Je.SUBSCRIBED);return}}).receive("error",p=>{this.state=ie.errored,e?.(Je.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e?.(Je.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this.state===ie.joined&&e===tn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,n)}async httpSend(e,t,n={}){var s;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(t==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},a=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(s=n.timeout)!==null&&s!==void 0?s:this.timeout);if(a.status===202)return{success:!0};let c=a.statusText;try{const l=await a.json();c=l.error||l.message||c}catch{}return Promise.reject(new Error(c))}async send(e,t={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=t.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=ie.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Re.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new wi(this,Re.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ie.closed,this.bindings={}}async _fetchWithTimeout(e,t,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),o}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new wi(this,e,t,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>sy){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=Re;if(n&&[a,c,l,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,t,n);if(t&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var w,g,m;return((w=p.filter)===null||w===void 0?void 0:w.event)==="*"||((m=(g=p.filter)===null||g===void 0?void 0:g.event)===null||m===void 0?void 0:m.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var w,g,m,x,b,v;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const E=p.id,_=(w=p.filter)===null||w===void 0?void 0:w.event;return E&&((g=t.ids)===null||g===void 0?void 0:g.includes(E))&&(_==="*"||_?.toLocaleLowerCase()===((m=t.data)===null||m===void 0?void 0:m.type.toLocaleLowerCase()))}else{const E=(b=(x=p?.filter)===null||x===void 0?void 0:x.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return E==="*"||E===((v=t?.event)===null||v===void 0?void 0:v.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const w=f.data,{schema:g,table:m,commit_timestamp:x,type:b,errors:v}=w;f=Object.assign(Object.assign({},{schema:g,table:m,commit_timestamp:x,eventType:b,new:{},old:{},errors:v}),this._getPayloadRecords(w))}p.callback(f,n)})}_isClosed(){return this.state===ie.closed}_isJoined(){return this.state===ie.joined}_isJoining(){return this.state===ie.joining}_isLeaving(){return this.state===ie.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Go.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(Re.close,{},e)}_onError(e){this._on(Re.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ie.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=tc(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=tc(e.columns,e.old_record)),t}}const bi=()=>{},ns={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},hy=[1e3,2e3,5e3,1e4],fy=1e4,py=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class my{constructor(e,t){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Wi,this.transport=null,this.heartbeatIntervalMs=ns.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=bi,this.ref=0,this.reconnectTimer=null,this.logger=bi,this.conn=null,this.sendBuffer=[],this.serializer=new iy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>s?(...i)=>s(...i):(...i)=>fetch(...i),!(!((n=t?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${Hi.websocket}`,this.httpEndpoint=Gu(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Xg.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:ry}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Xr.connecting:return Lt.Connecting;case Xr.open:return Lt.Open;case Xr.closing:return Lt.Closing;default:return Lt.Closed}}isConnected(){return this.connectionState()===Lt.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Go(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${t} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(ny,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},ns.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{if(t.topic==="phoenix"&&t.event==="phx_reply")try{this.heartbeatCallback(t.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=t,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${a}`.trim(),i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(Re.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${n}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const n=new Blob([py],{type:"application/javascript"});t=URL.createObjectURL(n)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(n=>{const s={access_token:t,version:ty};t&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(Re.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new Wu(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},ns.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,n,s,i,o,a,c,l,u;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(n=e?.timeout)!==null&&n!==void 0?n:Wi,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:ns.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e?.heartbeatCallback)!==null&&a!==void 0?a:bi,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e?.reconnectAfterMs)!==null&&c!==void 0?c:h=>hy[h-1]||fy,this.encode=(l=e?.encode)!==null&&l!==void 0?l:(h,f)=>f(JSON.stringify(h)),this.decode=(u=e?.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class Ko extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ee(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}class gy extends Ko{constructor(e,t,n){super(e),this.name="StorageApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Ki extends Ko{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const Zo=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),yy=()=>Response,Zi=r=>{if(Array.isArray(r))return r.map(t=>Zi(t));if(typeof r=="function"||r!==Object(r))return r;const e={};return Object.entries(r).forEach(([t,n])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Zi(n)}),e},wy=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},vi=r=>{var e;return r.msg||r.message||r.error_description||(typeof r.error=="string"?r.error:(e=r.error)===null||e===void 0?void 0:e.message)||JSON.stringify(r)},by=(r,e,t)=>O(void 0,void 0,void 0,function*(){const n=yield yy();r instanceof n&&!t?.noResolveJson?r.json().then(s=>{const i=r.status||500,o=s?.statusCode||i+"";e(new gy(vi(s),i,o))}).catch(s=>{e(new Ki(vi(s),s))}):e(new Ki(vi(r),r))}),vy=(r,e,t,n)=>{const s={method:r,headers:e?.headers||{}};return r==="GET"||!n?s:(wy(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Bn(r,e,t,n,s,i){return O(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,vy(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n?.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>by(c,a,n))})})}function kn(r,e,t,n){return O(this,void 0,void 0,function*(){return Bn(r,"GET",e,t,n)})}function Ne(r,e,t,n,s){return O(this,void 0,void 0,function*(){return Bn(r,"POST",e,n,s,t)})}function Ji(r,e,t,n,s){return O(this,void 0,void 0,function*(){return Bn(r,"PUT",e,n,s,t)})}function xy(r,e,t,n){return O(this,void 0,void 0,function*(){return Bn(r,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),n)})}function Jo(r,e,t,n,s){return O(this,void 0,void 0,function*(){return Bn(r,"DELETE",e,n,s,t)})}class _y{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return O(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ee(e))return{data:null,error:e};throw e}})}}var Ku;class Ey{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ku]="BlobDownloadBuilder",this.promise=null}asStream(){return new _y(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return O(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ee(e))return{data:null,error:e};throw e}})}}Ku=Symbol.toStringTag;const Sy=Ey,ky={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},sc={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Cy{constructor(e,t={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=n,this.fetch=Zo(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,n,s){return O(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},sc),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.has("cacheControl")||i.append("cacheControl",o.cacheControl),c&&!i.has("metadata")&&i.append("metadata",this.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c))),(typeof ReadableStream<"u"&&i instanceof ReadableStream||i&&typeof i=="object"&&"pipe"in i&&typeof i.pipe=="function")&&!o.duplex&&(o.duplex="half")),s?.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(t),u=this._getFinalPath(l),h=yield(e=="PUT"?Ji:Ne)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:l,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(ee(i))return{data:null,error:i};throw i}})}upload(e,t,n){return O(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return O(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",t);try{let c;const l=Object.assign({upsert:sc.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield Ji(this.fetch,a.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(ee(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return O(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);t?.upsert&&(s["x-upsert"]="true");const i=yield Ne(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new Ko("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}})}update(e,t,n){return O(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return O(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}copy(e,t,n){return O(this,void 0,void 0,function*(){try{return{data:{path:(yield Ne(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return O(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield Ne(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return O(this,void 0,void 0,function*(){try{const s=yield Ne(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}download(e,t){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),o=i?`?${i}`:"",a=this._getFinalPath(e),c=()=>kn(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0});return new Sy(c,this.shouldThrowOnError)}info(e){return O(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const n=yield kn(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Zi(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}})}exists(e){return O(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield xy(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n)&&n instanceof Ki){const s=n.originalError;if([400,404].includes(s?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const a=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${l}`)}}}remove(e){return O(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}})}list(e,t,n){return O(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ky),t),{prefix:e||""});return{data:yield Ne(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}listV2(e,t){return O(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield Ne(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},t),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Zu="2.79.0",Ju={"X-Client-Info":`storage-js/${Zu}`};class Ty{constructor(e,t={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ju),t),this.fetch=Zo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return O(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield kn(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}})}getBucket(e){return O(this,void 0,void 0,function*(){try{return{data:yield kn(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}})}createBucket(e){return O(this,arguments,void 0,function*(t,n={public:!1}){try{return{data:yield Ne(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ee(s))return{data:null,error:s};throw s}})}updateBucket(e,t){return O(this,void 0,void 0,function*(){try{return{data:yield Ji(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ee(n))return{data:null,error:n};throw n}})}emptyBucket(e){return O(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}})}deleteBucket(e){return O(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Ay{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Ju),t),this.fetch=Zo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return O(this,void 0,void 0,function*(){try{return{data:yield Ne(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}})}listBuckets(e){return O(this,void 0,void 0,function*(){try{const t=new URLSearchParams;e?.limit!==void 0&&t.set("limit",e.limit.toString()),e?.offset!==void 0&&t.set("offset",e.offset.toString()),e?.sortColumn&&t.set("sortColumn",e.sortColumn),e?.sortOrder&&t.set("sortOrder",e.sortOrder),e?.search&&t.set("search",e.search);const n=t.toString(),s=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`;return{data:yield kn(this.fetch,s,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}})}deleteBucket(e){return O(this,void 0,void 0,function*(){try{return{data:yield Jo(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ee(t))return{data:null,error:t};throw t}})}}const Yo={"X-Client-Info":`storage-js/${Zu}`,"Content-Type":"application/json"};class Yu extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function be(r){return typeof r=="object"&&r!==null&&"__isStorageVectorsError"in r}class xi extends Yu{constructor(e,t,n){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Py extends Yu{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var ic;(function(r){r.InternalError="InternalError",r.S3VectorConflictException="S3VectorConflictException",r.S3VectorNotFoundException="S3VectorNotFoundException",r.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",r.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",r.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(ic||(ic={}));const Qo=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Iy=r=>{if(typeof r!="object"||r===null)return!1;const e=Object.getPrototypeOf(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in r)&&!(Symbol.iterator in r)},oc=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),jy=(r,e,t)=>O(void 0,void 0,void 0,function*(){if(r&&typeof r=="object"&&"status"in r&&"ok"in r&&typeof r.status=="number"&&!t?.noResolveJson){const s=r.status||500,i=r;if(typeof i.json=="function")i.json().then(o=>{const a=o?.statusCode||o?.code||s+"";e(new xi(oc(o),s,a))}).catch(()=>{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new xi(a,s,o))});else{const o=s+"",a=i.statusText||`HTTP ${s} error`;e(new xi(a,s,o))}}else e(new Py(oc(r),r))}),Oy=(r,e,t,n)=>{const s={method:r,headers:e?.headers||{}};return r==="GET"||!n?s:(Iy(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),t))};function Ny(r,e,t,n,s,i){return O(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(t,Oy(e,n,s,i)).then(c=>{if(!c.ok)throw c;if(n?.noResolveJson)return c;const l=c.headers.get("content-type");return!l||!l.includes("application/json")?{}:c.json()}).then(c=>o(c)).catch(c=>jy(c,a,n))})})}function ve(r,e,t,n,s){return O(this,void 0,void 0,function*(){return Ny(r,"POST",e,n,s,t)})}class Ry{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yo),t),this.fetch=Qo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return O(this,void 0,void 0,function*(){try{return{data:(yield ve(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}getIndex(e,t){return O(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}listIndexes(e){return O(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return O(this,void 0,void 0,function*(){try{return{data:(yield ve(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(be(n))return{data:null,error:n};throw n}})}}class $y{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yo),t),this.fetch=Qo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return O(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ve(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}getVectors(e){return O(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}listVectors(e){return O(this,void 0,void 0,function*(){try{if(e.segmentCount!==void 0){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(e.segmentIndex!==void 0&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error(`segmentIndex must be between 0 and ${e.segmentCount-1}`)}return{data:yield ve(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}queryVectors(e){return O(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}deleteVectors(e){return O(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ve(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}}class Ly{constructor(e,t={},n){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Yo),t),this.fetch=Qo(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return O(this,void 0,void 0,function*(){try{return{data:(yield ve(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}getBucket(e){return O(this,void 0,void 0,function*(){try{return{data:yield ve(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}listBuckets(){return O(this,arguments,void 0,function*(e={}){try{return{data:yield ve(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}deleteBucket(e){return O(this,void 0,void 0,function*(){try{return{data:(yield ve(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(be(t))return{data:null,error:t};throw t}})}}class Dy extends Ly{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new Uy(this.url,this.headers,e,this.fetch)}}class Uy extends Ry{constructor(e,t,n,s){super(e,t,s),this.vectorBucketName=n}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return O(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return O(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return O(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return O(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new By(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class By extends $y{constructor(e,t,n,s,i){super(e,t,i),this.vectorBucketName=n,this.indexName=s}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return O(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return O(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return O(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return O(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return O(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class My extends Ty{constructor(e,t={},n,s){super(e,t,n,s)}from(e){return new Cy(this.url,this.headers,e,this.fetch)}get vectors(){return new Dy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ay(this.url+"/iceberg",this.headers,this.fetch)}}const Fy="2.79.0";let qr="";typeof Deno<"u"?qr="deno":typeof document<"u"?qr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?qr="react-native":qr="node";const zy={"X-Client-Info":`supabase-js-${qr}/${Fy}`},Vy={headers:zy},qy={schema:"public"},Wy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Hy={},Gy=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),Ky=()=>Headers,Zy=(r,e,t)=>{const n=Gy(t),s=Ky();return async(i,o)=>{var a;const c=(a=await e())!==null&&a!==void 0?a:r;let l=new s(o?.headers);return l.has("apikey")||l.set("apikey",r),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:l}))}};function Jy(r){return r.endsWith("/")?r:r+"/"}function Yy(r,e){var t,n;const{db:s,auth:i,realtime:o,global:a}=r,{db:c,auth:l,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(t=h?.headers)!==null&&t!==void 0?t:{}),(n=a?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return r.accessToken?f.accessToken=r.accessToken:delete f.accessToken,f}function Qy(r){const e=r?.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(Jy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const Qu="2.79.0",dr=30*1e3,Yi=3,_i=Yi*dr,Xy="http://localhost:9999",e0="supabase.auth.token",t0={"X-Client-Info":`gotrue-js/${Qu}`},Qi="X-Supabase-Api-Version",Xu={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},r0=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,n0=10*60*1e3;class Cn extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function N(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}class s0 extends Cn{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}function i0(r){return N(r)&&r.name==="AuthApiError"}class Dt extends Cn{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class At extends Cn{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Ie extends At{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function o0(r){return N(r)&&r.name==="AuthSessionMissingError"}class sr extends At{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ss extends At{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class is extends At{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function a0(r){return N(r)&&r.name==="AuthImplicitGrantRedirectError"}class ac extends At{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Xi extends At{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ei(r){return N(r)&&r.name==="AuthRetryableFetchError"}class cc extends At{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class eo extends At{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ps="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),lc=` 	
\r=`.split(""),c0=(()=>{const r=new Array(128);for(let e=0;e<r.length;e+=1)r[e]=-1;for(let e=0;e<lc.length;e+=1)r[lc[e].charCodeAt(0)]=-2;for(let e=0;e<Ps.length;e+=1)r[Ps[e].charCodeAt(0)]=e;return r})();function uc(r,e,t){if(r!==null)for(e.queue=e.queue<<8|r,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Ps[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;t(Ps[n]),e.queuedBits-=6}}function ed(r,e,t){const n=c0[r];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(r)}"`)}}function dc(r){const e=[],t=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{d0(o,n,t)};for(let o=0;o<r.length;o+=1)ed(r.charCodeAt(o),s,i);return e.join("")}function l0(r,e){if(r<=127){e(r);return}else if(r<=2047){e(192|r>>6),e(128|r&63);return}else if(r<=65535){e(224|r>>12),e(128|r>>6&63),e(128|r&63);return}else if(r<=1114111){e(240|r>>18),e(128|r>>12&63),e(128|r>>6&63),e(128|r&63);return}throw new Error(`Unrecognized Unicode codepoint: ${r.toString(16)}`)}function u0(r,e){for(let t=0;t<r.length;t+=1){let n=r.charCodeAt(t);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(r.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}l0(n,e)}}function d0(r,e,t){if(e.utf8seq===0){if(r<=127){t(r);return}for(let n=1;n<6;n+=1)if(!(r>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=r&31;else if(e.utf8seq===3)e.codepoint=r&15;else if(e.utf8seq===4)e.codepoint=r&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(r<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|r&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function mr(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<r.length;s+=1)ed(r.charCodeAt(s),t,n);return new Uint8Array(e)}function h0(r){const e=[];return u0(r,t=>e.push(t)),new Uint8Array(e)}function zt(r){const e=[],t={queue:0,queuedBits:0},n=s=>{e.push(s)};return r.forEach(s=>uc(s,t,n)),uc(null,t,n),e.join("")}function f0(r){return Math.round(Date.now()/1e3)+r}function p0(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){const e=Math.random()*16|0;return(r=="x"?e:e&3|8).toString(16)})}const pe=()=>typeof window<"u"&&typeof document<"u",It={tested:!1,writable:!1},td=()=>{if(!pe())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(It.tested)return It.writable;const r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),It.tested=!0,It.writable=!0}catch{It.tested=!0,It.writable=!1}return It.writable};function m0(r){const e={},t=new URL(r);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((n,s)=>{e[s]=n}),e}const rd=r=>r?(...e)=>r(...e):(...e)=>fetch(...e),g0=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",hr=async(r,e,t)=>{await r.setItem(e,JSON.stringify(t))},jt=async(r,e)=>{const t=await r.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},ot=async(r,e)=>{await r.removeItem(e)};class Ys{constructor(){this.promise=new Ys.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ys.promiseConstructor=Promise;function Si(r){const e=r.split(".");if(e.length!==3)throw new eo("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!r0.test(e[n]))throw new eo("JWT not in base64url format");return{header:JSON.parse(dc(e[0])),payload:JSON.parse(dc(e[1])),signature:mr(e[2]),raw:{header:e[0],payload:e[1]}}}async function y0(r){return await new Promise(e=>{setTimeout(()=>e(null),r)})}function w0(r,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await r(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function b0(r){return("0"+r.toString(16)).substr(-2)}function v0(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,b0).join("")}async function x0(r){const t=new TextEncoder().encode(r),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function _0(r){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;const t=await x0(r);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ir(r,e,t=!1){const n=v0();let s=n;t&&(s+="/PASSWORD_RECOVERY"),await hr(r,`${e}-code-verifier`,s);const i=await _0(n);return[i,n===i?"plain":"s256"]}const E0=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function S0(r){const e=r.headers.get(Qi);if(!e||!e.match(E0))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function k0(r){if(!r)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(r<=e)throw new Error("JWT has expired")}function C0(r){switch(r){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const T0=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function or(r){if(!T0.test(r))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ki(){const r={};return new Proxy(r,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const n=t.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function A0(r,e){return new Proxy(r,{get:(t,n,s)=>{if(n==="__isInsecureUserWarningProxy")return!0;if(typeof n=="symbol"){const i=n.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)"||i==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(t,n,s)}return!e.value&&typeof n=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),e.value=!0),Reflect.get(t,n,s)}})}function hc(r){return JSON.parse(JSON.stringify(r))}const Rt=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),P0=[502,503,504];async function fc(r){var e;if(!g0(r))throw new Xi(Rt(r),0);if(P0.includes(r.status))throw new Xi(Rt(r),r.status);let t;try{t=await r.json()}catch(i){throw new Dt(Rt(i),i)}let n;const s=S0(r);if(s&&s.getTime()>=Xu["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?n=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(n=t.error_code),n){if(n==="weak_password")throw new cc(Rt(t),r.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ie}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new cc(Rt(t),r.status,t.weak_password.reasons);throw new s0(Rt(t),r.status||500,n)}const I0=(r,e,t,n)=>{const s={method:r,headers:e?.headers||{}};return r==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),t))};async function L(r,e,t,n){var s;const i=Object.assign({},n?.headers);i[Qi]||(i[Qi]=Xu["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n?.query)!==null&&s!==void 0?s:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await j0(r,e,t+a,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(c):{data:Object.assign({},c),error:null}}async function j0(r,e,t,n,s,i){const o=I0(e,n,s,i);let a;try{a=await r(t,Object.assign({},o))}catch(c){throw console.error(c),new Xi(Rt(c),0)}if(a.ok||await fc(a),n?.noResolveJson)return a;try{return await a.json()}catch(c){await fc(c)}}function je(r){var e;let t=null;R0(r)&&(t=Object.assign({},r),r.expires_at||(t.expires_at=f0(r.expires_in)));const n=(e=r.user)!==null&&e!==void 0?e:r;return{data:{session:t,user:n},error:null}}function pc(r){const e=je(r);return!e.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((t,n)=>t&&typeof n=="string",!0)&&(e.data.weak_password=r.weak_password),e}function ht(r){var e;return{data:{user:(e=r.user)!==null&&e!==void 0?e:r},error:null}}function O0(r){return{data:r,error:null}}function N0(r){const{action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i}=r,o=zs(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:t,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function mc(r){return r}function R0(r){return r.access_token&&r.refresh_token&&r.expires_in}const Ci=["global","local","others"];class $0{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=rd(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=Ci[0]){if(Ci.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ci.join(", ")}`);try{return await L(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await L(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ht})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=zs(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=n?.newEmail,delete s.newEmail),await L(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:N0,redirectTo:t?.redirectTo})}catch(t){if(N(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await L(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ht})}catch(t){if(N(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await L(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:mc});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(w.split(";")[1].split("=")[1]);l[`${m}Page`]=g}),l.total=parseInt(f)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(N(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){or(e);try{return await L(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ht})}catch(t){if(N(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){or(e);try{return await L(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ht})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){or(e);try{return await L(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ht})}catch(n){if(N(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){or(e.userId);try{const{data:t,error:n}=await L(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:n}}catch(t){if(N(t))return{data:null,error:t};throw t}}async _deleteFactor(e){or(e.userId),or(e.id);try{return{data:await L(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,n,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await L(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:mc});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(w=>{const g=parseInt(w.split(";")[0].split("=")[1].substring(0,1)),m=JSON.parse(w.split(";")[1].split("=")[1]);l[`${m}Page`]=g}),l.total=parseInt(f)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(N(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(N(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await L(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(N(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await L(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:n=>({data:n,error:null})})}catch(n){if(N(n))return{data:null,error:n};throw n}}async _deleteOAuthClient(e){try{return await L(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await L(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:t=>({data:t,error:null})})}catch(t){if(N(t))return{data:null,error:t};throw t}}}function gc(r={}){return{getItem:e=>r[e]||null,setItem:(e,t)=>{r[e]=t},removeItem:e=>{delete r[e]}}}const ar={debug:!!(globalThis&&td()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class nd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class L0 extends nd{}async function D0(r,e,t){ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),ar.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(r,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,s.name);try{return await t()}finally{ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,s.name)}}else{if(e===0)throw ar.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new L0(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(ar.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}function U0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function sd(r){if(!/^0x[a-fA-F0-9]{40}$/.test(r))throw new Error(`@supabase/auth-js: Address "${r}" is invalid.`);return r.toLowerCase()}function B0(r){return parseInt(r,16)}function M0(r){const e=new TextEncoder().encode(r);return"0x"+Array.from(e,n=>n.toString(16).padStart(2,"0")).join("")}function F0(r){var e;const{chainId:t,domain:n,expirationTime:s,issuedAt:i=new Date,nonce:o,notBefore:a,requestId:c,resources:l,scheme:u,uri:h,version:f}=r;{if(!Number.isInteger(t))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${t}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!h)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(f!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${f}`);if(!((e=r.statement)===null||e===void 0)&&e.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${r.statement}`)}const p=sd(r.address),w=u?`${u}://${n}`:n,g=r.statement?`${r.statement}
`:"",m=`${w} wants you to sign in with your Ethereum account:
${p}

${g}`;let x=`URI: ${h}
Version: ${f}
Chain ID: ${t}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(s&&(x+=`
Expiration Time: ${s.toISOString()}`),a&&(x+=`
Not Before: ${a.toISOString()}`),c&&(x+=`
Request ID: ${c}`),l){let b=`
Resources:`;for(const v of l){if(!v||typeof v!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${v}`);b+=`
- ${v}`}x+=b}return`${m}
${x}`}class ne extends Error{constructor({message:e,code:t,cause:n,name:s}){var i;super(e,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=s??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=t}}class Is extends ne{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function z0({error:r,options:e}){var t,n,s;const{publicKey:i}=e;if(!i)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ne({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else if(r.name==="ConstraintError"){if(((t=i.authenticatorSelection)===null||t===void 0?void 0:t.requireResidentKey)===!0)return new ne({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:r});if(e.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new ne({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:r});if(((s=i.authenticatorSelection)===null||s===void 0?void 0:s.userVerification)==="required")return new ne({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:r})}else{if(r.name==="InvalidStateError")return new ne({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:r});if(r.name==="NotAllowedError")return new ne({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="NotSupportedError")return i.pubKeyCredParams.filter(a=>a.type==="public-key").length===0?new ne({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:r}):new ne({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:r});if(r.name==="SecurityError"){const o=window.location.hostname;if(id(o)){if(i.rp.id!==o)return new ne({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new ne({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:r})}else if(r.name==="UnknownError")return new ne({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}function V0({error:r,options:e}){const{publicKey:t}=e;if(!t)throw Error("options was missing required publicKey property");if(r.name==="AbortError"){if(e.signal instanceof AbortSignal)return new ne({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:r})}else{if(r.name==="NotAllowedError")return new ne({message:r.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r});if(r.name==="SecurityError"){const n=window.location.hostname;if(id(n)){if(t.rpId!==n)return new ne({message:`The RP ID "${t.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:r})}else return new ne({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:r})}else if(r.name==="UnknownError")return new ne({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:r})}return new ne({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r})}class q0{createNewAbortSignal(){if(this.controller){const t=new Error("Cancelling existing WebAuthn API call for new one");t.name="AbortError",this.controller.abort(t)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}}const W0=new q0;function H0(r){if(!r)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(r);const{challenge:e,user:t,excludeCredentials:n}=r,s=zs(r,["challenge","user","excludeCredentials"]),i=mr(e).buffer,o=Object.assign(Object.assign({},t),{id:mr(t.id).buffer}),a=Object.assign(Object.assign({},s),{challenge:i,user:o});if(n&&n.length>0){a.excludeCredentials=new Array(n.length);for(let c=0;c<n.length;c++){const l=n[c];a.excludeCredentials[c]=Object.assign(Object.assign({},l),{id:mr(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function G0(r){if(!r)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(r);const{challenge:e,allowCredentials:t}=r,n=zs(r,["challenge","allowCredentials"]),s=mr(e).buffer,i=Object.assign(Object.assign({},n),{challenge:s});if(t&&t.length>0){i.allowCredentials=new Array(t.length);for(let o=0;o<t.length;o++){const a=t[o];i.allowCredentials[o]=Object.assign(Object.assign({},a),{id:mr(a.id).buffer,type:a.type||"public-key",transports:a.transports})}}return i}function K0(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r;return{id:r.id,rawId:r.id,response:{attestationObject:zt(new Uint8Array(r.response.attestationObject)),clientDataJSON:zt(new Uint8Array(r.response.clientDataJSON))},type:"public-key",clientExtensionResults:r.getClientExtensionResults(),authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function Z0(r){var e;if("toJSON"in r&&typeof r.toJSON=="function")return r.toJSON();const t=r,n=r.getClientExtensionResults(),s=r.response;return{id:r.id,rawId:r.id,response:{authenticatorData:zt(new Uint8Array(s.authenticatorData)),clientDataJSON:zt(new Uint8Array(s.clientDataJSON)),signature:zt(new Uint8Array(s.signature)),userHandle:s.userHandle?zt(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(e=t.authenticatorAttachment)!==null&&e!==void 0?e:void 0}}function id(r){return r==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(r)}function yc(){var r,e;return!!(pe()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.create)=="function"&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.get)=="function")}async function J0(r){try{const e=await navigator.credentials.create(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Is("Browser returned unexpected credential type",e)}:{data:null,error:new Is("Empty credential response",e)}}catch(e){return{data:null,error:z0({error:e,options:r})}}}async function Y0(r){try{const e=await navigator.credentials.get(r);return e?e instanceof PublicKeyCredential?{data:e,error:null}:{data:null,error:new Is("Browser returned unexpected credential type",e)}:{data:null,error:new Is("Empty credential response",e)}}catch(e){return{data:null,error:V0({error:e,options:r})}}}const Q0={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},X0={userVerification:"preferred",hints:["security-key"]};function js(...r){const e=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),t=s=>s instanceof ArrayBuffer||ArrayBuffer.isView(s),n={};for(const s of r)if(s)for(const i in s){const o=s[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(t(o))n[i]=o;else if(e(o)){const a=n[i];e(a)?n[i]=js(a,o):n[i]=js(o)}else n[i]=o}return n}function ew(r,e){return js(Q0,r,e||{})}function tw(r,e){return js(X0,r,e||{})}class rw{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:n,signal:s},i){try{const{data:o,error:a}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!o)return{data:null,error:a};const c=s??W0.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:l}=o.webauthn.credential_options.publicKey;l.name||(l.name=`${l.id}:${n}`),l.displayName||(l.displayName=l.name)}switch(o.webauthn.type){case"create":{const l=ew(o.webauthn.credential_options.publicKey,i?.create),{data:u,error:h}=await J0({publicKey:l,signal:c});return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}case"request":{const l=tw(o.webauthn.credential_options.publicKey,i?.request),{data:u,error:h}=await Y0(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:l,signal:c}));return u?{data:{factorId:e,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:u}},error:null}:{data:null,error:h}}}}catch(o){return N(o)?{data:null,error:o}:{data:null,error:new Dt("Unexpected error in challenge",o)}}}async _verify({challengeId:e,factorId:t,webauthn:n}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:n})}async _authenticate({factorId:e,webauthn:{rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s}},i){if(!t)return{data:null,error:new Cn("rpId is required for WebAuthn authentication")};try{if(!yc())return{data:null,error:new Dt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:n},signal:s},{request:i});if(!o)return{data:null,error:a};const{webauthn:c}=o;return this._verify({factorId:e,challengeId:o.challengeId,webauthn:{type:c.type,rpId:t,rpOrigins:n,credential_response:c.credential_response}})}catch(o){return N(o)?{data:null,error:o}:{data:null,error:new Dt("Unexpected error in authenticate",o)}}}async _register({friendlyName:e,rpId:t=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:s},i){if(!t)return{data:null,error:new Cn("rpId is required for WebAuthn registration")};try{if(!yc())return{data:null,error:new Dt("Browser does not support WebAuthn",null)};const{data:o,error:a}=await this._enroll({friendlyName:e});if(!o)return await this.client.mfa.listFactors().then(u=>{var h;return(h=u.data)===null||h===void 0?void 0:h.all.find(f=>f.factor_type==="webauthn"&&f.friendly_name===e&&f.status!=="unverified")}).then(u=>u?this.client.mfa.unenroll({factorId:u?.id}):void 0),{data:null,error:a};const{data:c,error:l}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:t,rpOrigins:n},signal:s},{create:i});return c?this._verify({factorId:o.id,challengeId:c.challengeId,webauthn:{rpId:t,rpOrigins:n,type:c.webauthn.type,credential_response:c.webauthn.credential_response}}):{data:null,error:l}}catch(o){return N(o)?{data:null,error:o}:{data:null,error:new Dt("Unexpected error in register",o)}}}}U0();const nw={url:Xy,storageKey:e0,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:t0,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function wc(r,e,t){return await t()}const cr={};class Tn{get jwks(){var e,t;return(t=(e=cr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){cr[this.storageKey]=Object.assign(Object.assign({},cr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=cr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){cr[this.storageKey]=Object.assign(Object.assign({},cr[this.storageKey]),{cachedAt:e})}constructor(e){var t,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Tn.nextInstanceID,Tn.nextInstanceID+=1,this.instanceID>0&&pe()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},nw),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new $0({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=rd(s.fetch),this.lock=s.lock||wc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:pe()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=D0:this.lock=wc,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rw(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:td()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=gc(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=gc(this.memoryStorage)),pe()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Qu}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{let t={},n="none";if(pe()&&(t=m0(window.location.href),this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce")),pe()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),a0(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return N(t)?this._returnResult({error:t}):this._returnResult({error:new Dt("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:je}),{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(i){if(N(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signUp(e){var t,n,s;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,w=null;this.flowType==="pkce"&&([p,w]=await ir(this.storage,this.storageKey)),i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f?.emailRedirectTo,body:{email:u,password:h,data:(t=f?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:f?.captchaToken},code_challenge:p,code_challenge_method:w},xform:je})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await L(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f?.data)!==null&&n!==void 0?n:{},channel:(s=f?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f?.captchaToken}},xform:je})}else throw new ss("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return this._returnResult({data:{user:null,session:null},error:a});const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(i){if(N(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:o,options:a}=e;t=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:pc})}else if("phone"in e){const{phone:i,password:o,options:a}=e;t=await L(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a?.captchaToken}},xform:pc})}else throw new ss("You must provide either an email or phone number and a password");const{data:n,error:s}=t;if(s)return this._returnResult({data:{user:null,session:null},error:s});if(!n||!n.session||!n.user){const i=new sr;return this._returnResult({data:{user:null,session:null},error:i})}return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),this._returnResult({data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(t){if(N(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,n,s,i,o,a,c,l,u,h,f;let p,w;if("message"in e)p=e.message,w=e.signature;else{const{chain:g,wallet:m,statement:x,options:b}=e;let v;if(pe())if(typeof m=="object")v=m;else{const C=window;if("ethereum"in C&&typeof C.ethereum=="object"&&"request"in C.ethereum&&typeof C.ethereum.request=="function")v=C.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof m!="object"||!b?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");v=m}const E=new URL((t=b?.url)!==null&&t!==void 0?t:window.location.href),_=await v.request({method:"eth_requestAccounts"}).then(C=>C).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!_||_.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const S=sd(_[0]);let k=(n=b?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!k){const C=await v.request({method:"eth_chainId"});k=B0(C)}const A={domain:E.host,address:S,statement:x,uri:E.href,version:"1",chainId:k,nonce:(s=b?.signInWithEthereum)===null||s===void 0?void 0:s.nonce,issuedAt:(o=(i=b?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(a=b?.signInWithEthereum)===null||a===void 0?void 0:a.expirationTime,notBefore:(c=b?.signInWithEthereum)===null||c===void 0?void 0:c.notBefore,requestId:(l=b?.signInWithEthereum)===null||l===void 0?void 0:l.requestId,resources:(u=b?.signInWithEthereum)===null||u===void 0?void 0:u.resources};p=F0(A),w=await v.request({method:"personal_sign",params:[M0(p),S]})}try{const{data:g,error:m}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:p,signature:w},!((h=e.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:je});if(m)throw m;if(!g||!g.session||!g.user){const x=new sr;return this._returnResult({data:{user:null,session:null},error:x})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:Object.assign({},g),error:m})}catch(g){if(N(g))return this._returnResult({data:{user:null,session:null},error:g});throw g}}async signInWithSolana(e){var t,n,s,i,o,a,c,l,u,h,f,p;let w,g;if("message"in e)w=e.message,g=e.signature;else{const{chain:m,wallet:x,statement:b,options:v}=e;let E;if(pe())if(typeof x=="object")E=x;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))E=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!v?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=x}const _=new URL((t=v?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in E&&E.signIn){const S=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},v?.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),b?{statement:b}:null));let k;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")k=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)k=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)w=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),g=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");w=[`${_.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(s=(n=v?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=v?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${v.signInWithSolana.notBefore}`]:[],...!((o=v?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${v.signInWithSolana.expirationTime}`]:[],...!((a=v?.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${v.signInWithSolana.chainId}`]:[],...!((c=v?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${v.signInWithSolana.nonce}`]:[],...!((l=v?.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${v.signInWithSolana.requestId}`]:[],...!((h=(u=v?.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...v.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const S=await E.signMessage(new TextEncoder().encode(w),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");g=S}}try{const{data:m,error:x}=await L(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:w,signature:zt(g)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:je});if(x)throw x;if(!m||!m.session||!m.user){const b=new sr;return this._returnResult({data:{user:null,session:null},error:b})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign({},m),error:x})}catch(m){if(N(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await jt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(t??"").split("/");try{const{data:i,error:o}=await L(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:je});if(await ot(this.storage,`${this.storageKey}-code-verifier`),o)throw o;if(!i||!i.session||!i.user){const a=new sr;return this._returnResult({data:{user:null,session:null,redirectType:null},error:a})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(N(i))return this._returnResult({data:{user:null,session:null,redirectType:null},error:i});throw i}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:i,nonce:o}=e,a=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:je}),{data:c,error:l}=a;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!c||!c.session||!c.user){const u=new sr;return this._returnResult({data:{user:null,session:null},error:u})}return c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),this._returnResult({data:c,error:l})}catch(t){if(N(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,n,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await ir(this.storage,this.storageKey));const{error:h}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(n=c?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:h})}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await L(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(o=c?.channel)!==null&&o!==void 0?o:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:l?.message_id},error:u})}throw new ss("You must provide either an email or phone number.")}catch(a){if(N(a))return this._returnResult({data:{user:null,session:null},error:a});throw a}}async verifyOtp(e){var t,n;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await L(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:je});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),this._returnResult({data:{user:l,session:c},error:null})}catch(s){if(N(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithSSO(e){var t,n,s;try{let i=null,o=null;this.flowType==="pkce"&&([i,o]=await ir(this.storage,this.storageKey));const a=await L(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:O0});return this._returnResult(a)}catch(i){if(N(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Ie;const{error:s}=await L(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:s})})}catch(e){if(N(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await L(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await L(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:o?.message_id},error:a})}throw new ss("You must provide either an email or phone number and a type")}catch(t){if(N(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=t();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await jt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<_i:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await jt(this.userStorage,this.storageKey+"-user");o?.user?e.user=o.user:e.user=ki()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const o={value:this.suppressGetSessionWarning};e.user=A0(e.user,o),o.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{session:null},error:i}):this._returnResult({data:{session:s},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ht}):await this._useSession(async t=>{var n,s,i;const{data:o,error:a}=t;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ie}:await L(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ht})})}catch(t){if(N(t))return o0(t)&&(await this._removeSession(),await ot(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Ie;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await ir(this.storage,this.storageKey));const{data:l,error:u}=await L(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:ht});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),this._returnResult({data:{user:o.user},error:null})})}catch(n){if(N(n))return this._returnResult({data:{user:null},error:n});throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ie;const t=Date.now()/1e3;let n=t,s=!0,i=null;const{payload:o}=Si(e.access_token);if(o.exp&&(n=o.exp,s=n<=t),s){const{data:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return this._returnResult({data:{user:null,session:null},error:c});if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return this._returnResult({data:{user:i.user,session:i},error:null})}catch(t){if(N(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:o,error:a}=t;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!e?.refresh_token)throw new Ie;const{data:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?this._returnResult({data:{user:null,session:null},error:i}):s?this._returnResult({data:{user:s.user,session:s},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(N(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!pe())throw new is("No browser detected.");if(e.error||e.error_description||e.error_code)throw new is(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new ac("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new is("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ac("No code detected.");const{data:b,error:v}=await this._exchangeCodeForSession(e.code);if(v)throw v;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new is("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;c&&(f=parseInt(c));const p=f-u;p*1e3<=dr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const w=f-h;u-w>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",w,f,u):u-w<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",w,f,u);const{data:g,error:m}=await this._getUser(i);if(m)throw m;const x={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:l,user:g.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:x,redirectType:e.type},error:null})}catch(n){if(N(n))return this._returnResult({data:{session:null,redirectType:null},error:n});throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await jt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return this._returnResult({error:i});const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(i0(a)&&(a.status===404||a.status===401||a.status===403)))return this._returnResult({error:a})}return e!=="others"&&(await this._removeSession(),await ot(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=p0(),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:i},error:o}=t;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await ir(this.storage,this.storageKey,!0));try{return await L(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(N(i))return this._returnResult({data:null,error:i});throw i}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return this._returnResult({data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null})}catch(t){if(N(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await L(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return pe()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(n?.url),this._returnResult({data:{provider:e.provider,url:n?.url},error:null})}catch(n){if(N(n))return this._returnResult({data:{provider:e.provider,url:null},error:n});throw n}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var n;try{const{error:s,data:{session:i}}=t;if(s)throw s;const{options:o,provider:a,token:c,access_token:l,nonce:u}=e,h=await L(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:a,id_token:c,access_token:l,nonce:u,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:je}),{data:f,error:p}=h;return p?this._returnResult({data:{user:null,session:null},error:p}):!f||!f.session||!f.user?this._returnResult({data:{user:null,session:null},error:new sr}):(f.session&&(await this._saveSession(f.session),await this._notifyAllSubscribers("USER_UPDATED",f.session)),this._returnResult({data:f,error:p}))}catch(s){if(N(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)throw o;return await L(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(N(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const n=Date.now();return await w0(async s=>(s>0&&await y0(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await L(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:je})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Ei(i)&&Date.now()+o-n<dr})}catch(n){if(this._debug(t,"error",n),N(n))return this._returnResult({data:{session:null,user:null},error:n});throw n}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),pe()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,t;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await jt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await jt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await hr(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o?.user)!==null&&e!==void 0?e:ki()}else if(s&&!s.user&&!s.user){const o=await jt(this.storage,this.storageKey+"-user");o&&o?.user?(s.user=o.user,await ot(this.storage,this.storageKey+"-user"),await hr(this.storage,this.storageKey,s)):s.user=ki()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<_i;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${_i}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Ei(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&o?.user?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Ie;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ys;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ie;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={data:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),N(i)){const o={data:null,error:i};return Ei(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),n=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&t.user&&await hr(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=hc(s);await hr(this.storage,this.storageKey,i)}else{const s=hc(t);await hr(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await ot(this.storage,this.storageKey),await ot(this.storage,this.storageKey+"-code-verifier"),await ot(this.storage,this.storageKey+"-user"),this.userStorage&&await ot(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&pe()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),dr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:n}}=t;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/dr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${dr}ms, refresh threshold is ${Yi} ticks`),s<=Yi&&await this._callRefreshToken(n.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof nd)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!pe()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if(n?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ir(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n?.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;return i?this._returnResult({data:null,error:i}):await L(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token})})}catch(t){if(N(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:i,error:o}=t;if(o)return this._returnResult({data:null,error:o});const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:e.factorType==="totp"?{issuer:e.issuer}:{}),{data:c,error:l}=await L(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return l?this._returnResult({data:null,error:l}):(e.factorType==="totp"&&c.type==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),this._returnResult({data:c,error:null}))})}catch(t){if(N(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:e.webauthn.type==="create"?K0(e.webauthn.credential_response):Z0(e.webauthn.credential_response)})}:{code:e.code}),{data:a,error:c}=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});return c?this._returnResult({data:null,error:c}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),this._returnResult({data:a,error:c}))})}catch(t){if(N(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:i}=t;if(i)return this._returnResult({data:null,error:i});const o=await L(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:(n=s?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:a}=o;if(a.type!=="webauthn")return{data:a,error:null};switch(a.webauthn.type){case"create":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:H0(a.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},a),{webauthn:Object.assign(Object.assign({},a.webauthn),{credential_options:Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:G0(a.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(N(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?this._returnResult({data:null,error:n}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:n}=await this.getUser();if(n)return{data:null,error:n};const s={all:[],phone:[],totp:[],webauthn:[]};for(const i of(e=t?.factors)!==null&&e!==void 0?e:[])s.all.push(i),i.status==="verified"&&s[i.factor_type].push(i);return{data:s,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:n},error:s}=await this.getSession();if(s)return this._returnResult({data:null,error:s});if(!n)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Si(n.access_token);let o=null;i.aal&&(o=i.aal);let a=o;((t=(e=n.user.factors)===null||e===void 0?void 0:e.filter(u=>u.status==="verified"))!==null&&t!==void 0?t:[]).length>0&&(a="aal2");const l=i.amr||[];return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:l},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:n},error:s}=t;return s?this._returnResult({data:null,error:s}):n?await L(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:n.access_token,xform:i=>({data:i,error:null})}):this._returnResult({data:null,error:new Ie})})}catch(t){if(N(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ie});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"approve"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&pe()&&!t?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}async _denyAuthorization(e,t){try{return await this._useSession(async n=>{const{data:{session:s},error:i}=n;if(i)return this._returnResult({data:null,error:i});if(!s)return this._returnResult({data:null,error:new Ie});const o=await L(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:s.access_token,body:{action:"deny"},xform:a=>({data:a,error:null})});return o.data&&o.data.redirect_url&&pe()&&!t?.skipBrowserRedirect&&window.location.assign(o.data.redirect_url),o})}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+n0>s)return n;const{data:i,error:o}=await L(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,t={}){try{let n=e;if(!n){const{data:p,error:w}=await this.getSession();if(w||!p.session)return this._returnResult({data:null,error:w});n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=Si(n);t?.allowExpired||k0(i.exp);const l=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!l){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=C0(s.alg),h=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,h0(`${a}.${c}`)))throw new eo("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(N(n))return this._returnResult({data:null,error:n});throw n}}}Tn.nextInstanceID=0;const sw=Tn;class iw extends sw{constructor(e){super(e)}}class ow{constructor(e,t,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=t;const a=Qy(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:qy,realtime:Hy,auth:Object.assign(Object.assign({},Wy),{storageKey:c}),global:Vy},u=Yy(n??{},l);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Zy(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Qg(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new My(this.storageUrl.href,this.headers,this.fetch,n?.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new Zg(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(t=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:c,debug:l,throwOnError:u},h,f){const p={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new iw({url:this.authUrl.href,headers:Object.assign(Object.assign({},p),h),storageKey:o,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:c,debug:l,throwOnError:u,fetch:f,hasCustomAuthorizationHeader:Object.keys(this.headers).some(w=>w.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new my(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,n)=>{this._handleTokenChanged(t,"CLIENT",n?.access_token)})}_handleTokenChanged(e,t,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const aw=(r,e,t)=>new ow(r,e,t);function cw(){if(typeof window<"u"||typeof process>"u")return!1;const r=process.version;if(r==null)return!1;const e=r.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}cw()&&console.warn("âš ï¸  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");/*! Capacitor: https://capacitorjs.com/ - MIT License */var xr;(function(r){r.Unimplemented="UNIMPLEMENTED",r.Unavailable="UNAVAILABLE"})(xr||(xr={}));class Ti extends Error{constructor(e,t,n){super(e),this.message=e,this.code=t,this.data=n}}const lw=r=>{var e,t;return r?.androidBridge?"android":!((t=(e=r?.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||t===void 0)&&t.bridge?"ios":"web"},uw=r=>{const e=r.CapacitorCustomPlatform||null,t=r.Capacitor||{},n=t.Plugins=t.Plugins||{},s=()=>e!==null?e.name:lw(r),i=()=>s()!=="web",o=h=>{const f=l.get(h);return!!(f?.platforms.has(s())||a(h))},a=h=>{var f;return(f=t.PluginHeaders)===null||f===void 0?void 0:f.find(p=>p.name===h)},c=h=>r.console.error(h),l=new Map,u=(h,f={})=>{const p=l.get(h);if(p)return console.warn(`Capacitor plugin "${h}" already registered. Cannot register plugins twice.`),p.proxy;const w=s(),g=a(h);let m;const x=async()=>(!m&&w in f?m=typeof f[w]=="function"?m=await f[w]():m=f[w]:e!==null&&!m&&"web"in f&&(m=typeof f.web=="function"?m=await f.web():m=f.web),m),b=(A,C)=>{var F,H;if(g){const $=g?.methods.find(G=>C===G.name);if($)return $.rtype==="promise"?G=>t.nativePromise(h,C.toString(),G):(G,le)=>t.nativeCallback(h,C.toString(),G,le);if(A)return(F=A[C])===null||F===void 0?void 0:F.bind(A)}else{if(A)return(H=A[C])===null||H===void 0?void 0:H.bind(A);throw new Ti(`"${h}" plugin is not implemented on ${w}`,xr.Unimplemented)}},v=A=>{let C;const F=(...H)=>{const $=x().then(G=>{const le=b(G,A);if(le){const Pe=le(...H);return C=Pe?.remove,Pe}else throw new Ti(`"${h}.${A}()" is not implemented on ${w}`,xr.Unimplemented)});return A==="addListener"&&($.remove=async()=>C()),$};return F.toString=()=>`${A.toString()}() { [capacitor code] }`,Object.defineProperty(F,"name",{value:A,writable:!1,configurable:!1}),F},E=v("addListener"),_=v("removeListener"),S=(A,C)=>{const F=E({eventName:A},C),H=async()=>{const G=await F;_({eventName:A,callbackId:G},C)},$=new Promise(G=>F.then(()=>G({remove:H})));return $.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await H()},$},k=new Proxy({},{get(A,C){switch(C){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return g?S:E;case"removeListener":return _;default:return v(C)}}});return n[h]=k,l.set(h,{name:h,proxy:k,platforms:new Set([...Object.keys(f),...g?[w]:[]])}),k};return t.convertFileSrc||(t.convertFileSrc=h=>h),t.getPlatform=s,t.handleError=c,t.isNativePlatform=i,t.isPluginAvailable=o,t.registerPlugin=u,t.Exception=Ti,t.DEBUG=!!t.DEBUG,t.isLoggingEnabled=!!t.isLoggingEnabled,t},dw=r=>r.Capacitor=uw(r),_r=dw(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),Qs=_r.registerPlugin;class od{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,t){let n=!1;this.listeners[e]||(this.listeners[e]=[],n=!0),this.listeners[e].push(t);const i=this.windowListeners[e];i&&!i.registered&&this.addWindowListener(i),n&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,t);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t,n){const s=this.listeners[e];if(!s){if(n){let i=this.retainedEventArguments[e];i||(i=[]),i.push(t),this.retainedEventArguments[e]=i}return}s.forEach(i=>i(t))}hasListeners(e){var t;return!!(!((t=this.listeners[e])===null||t===void 0)&&t.length)}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:n=>{this.notifyListeners(t,n)}}}unimplemented(e="not implemented"){return new _r.Exception(e,xr.Unimplemented)}unavailable(e="not available"){return new _r.Exception(e,xr.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const s=n.indexOf(t);this.listeners[e].splice(s,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const t=this.retainedEventArguments[e];t&&(delete this.retainedEventArguments[e],t.forEach(n=>{this.notifyListeners(e,n)}))}}const bc=r=>encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),vc=r=>r.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class hw extends od{async getCookies(){const e=document.cookie,t={};return e.split(";").forEach(n=>{if(n.length<=0)return;let[s,i]=n.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");s=vc(s).trim(),i=vc(i).trim(),t[s]=i}),t}async setCookie(e){try{const t=bc(e.key),n=bc(e.value),s=`; expires=${(e.expires||"").replace("expires=","")}`,i=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${t}=${n||""}${s}; path=${i}; ${o};`}catch(t){return Promise.reject(t)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(t){return Promise.reject(t)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const t of e)document.cookie=t.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}Qs("CapacitorCookies",{web:()=>new hw});const fw=async r=>new Promise((e,t)=>{const n=new FileReader;n.onload=()=>{const s=n.result;e(s.indexOf(",")>=0?s.split(",")[1]:s)},n.onerror=s=>t(s),n.readAsDataURL(r)}),pw=(r={})=>{const e=Object.keys(r);return Object.keys(r).map(s=>s.toLocaleLowerCase()).reduce((s,i,o)=>(s[i]=r[e[o]],s),{})},mw=(r,e=!0)=>r?Object.entries(r).reduce((n,s)=>{const[i,o]=s;let a,c;return Array.isArray(o)?(c="",o.forEach(l=>{a=e?encodeURIComponent(l):l,c+=`${i}=${a}&`}),c.slice(0,-1)):(a=e?encodeURIComponent(o):o,c=`${i}=${a}`),`${n}&${c}`},"").substr(1):null,gw=(r,e={})=>{const t=Object.assign({method:r.method||"GET",headers:r.headers},e),s=pw(r.headers)["content-type"]||"";if(typeof r.data=="string")t.body=r.data;else if(s.includes("application/x-www-form-urlencoded")){const i=new URLSearchParams;for(const[o,a]of Object.entries(r.data||{}))i.set(o,a);t.body=i.toString()}else if(s.includes("multipart/form-data")||r.data instanceof FormData){const i=new FormData;if(r.data instanceof FormData)r.data.forEach((a,c)=>{i.append(c,a)});else for(const a of Object.keys(r.data))i.append(a,r.data[a]);t.body=i;const o=new Headers(t.headers);o.delete("content-type"),t.headers=o}else(s.includes("application/json")||typeof r.data=="object")&&(t.body=JSON.stringify(r.data));return t};class yw extends od{async request(e){const t=gw(e,e.webFetchExtra),n=mw(e.params,e.shouldEncodeUrlParams),s=n?`${e.url}?${n}`:e.url,i=await fetch(s,t),o=i.headers.get("content-type")||"";let{responseType:a="text"}=i.ok?e:{};o.includes("application/json")&&(a="json");let c,l;switch(a){case"arraybuffer":case"blob":l=await i.blob(),c=await fw(l);break;case"json":c=await i.json();break;case"document":case"text":default:c=await i.text()}const u={};return i.headers.forEach((h,f)=>{u[f]=h}),{data:c,headers:u,status:i.status,url:i.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}Qs("CapacitorHttp",{web:()=>new yw});const ww=Qs("App",{web:()=>ue(()=>import("./web-c7719ca6.js"),["assets/web-c7719ca6.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/utils-17ec81d9.js"]).then(r=>new r.AppWeb)}),ad=Qs("Browser",{web:()=>ue(()=>import("./web-6157753c.js"),["assets/web-6157753c.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/utils-17ec81d9.js"]).then(r=>new r.BrowserWeb)});var K;(function(r){r.assertEqual=s=>{};function e(s){}r.assertIs=e;function t(s){throw new Error}r.assertNever=t,r.arrayToEnum=s=>{const i={};for(const o of s)i[o]=o;return i},r.getValidEnumValues=s=>{const i=r.objectKeys(s).filter(a=>typeof s[s[a]]!="number"),o={};for(const a of i)o[a]=s[a];return r.objectValues(o)},r.objectValues=s=>r.objectKeys(s).map(function(i){return s[i]}),r.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const i=[];for(const o in s)Object.prototype.hasOwnProperty.call(s,o)&&i.push(o);return i},r.find=(s,i)=>{for(const o of s)if(i(o))return o},r.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&Number.isFinite(s)&&Math.floor(s)===s;function n(s,i=" | "){return s.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}r.joinValues=n,r.jsonStringifyReplacer=(s,i)=>typeof i=="bigint"?i.toString():i})(K||(K={}));var xc;(function(r){r.mergeShapes=(e,t)=>({...e,...t})})(xc||(xc={}));const I=K.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),dt=r=>{switch(typeof r){case"undefined":return I.undefined;case"string":return I.string;case"number":return Number.isNaN(r)?I.nan:I.number;case"boolean":return I.boolean;case"function":return I.function;case"bigint":return I.bigint;case"symbol":return I.symbol;case"object":return Array.isArray(r)?I.array:r===null?I.null:r.then&&typeof r.then=="function"&&r.catch&&typeof r.catch=="function"?I.promise:typeof Map<"u"&&r instanceof Map?I.map:typeof Set<"u"&&r instanceof Set?I.set:typeof Date<"u"&&r instanceof Date?I.date:I.object;default:return I.unknown}},T=K.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Xe extends Error{get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}format(e){const t=e||function(i){return i.message},n={_errors:[]},s=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(s);else if(o.code==="invalid_return_type")s(o.returnTypeError);else if(o.code==="invalid_arguments")s(o.argumentsError);else if(o.path.length===0)n._errors.push(t(o));else{let a=n,c=0;for(;c<o.path.length;){const l=o.path[c];c===o.path.length-1?(a[l]=a[l]||{_errors:[]},a[l]._errors.push(t(o))):a[l]=a[l]||{_errors:[]},a=a[l],c++}}};return s(this),n}static assert(e){if(!(e instanceof Xe))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,K.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const s of this.issues)if(s.path.length>0){const i=s.path[0];t[i]=t[i]||[],t[i].push(e(s))}else n.push(e(s));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}}Xe.create=r=>new Xe(r);const bw=(r,e)=>{let t;switch(r.code){case T.invalid_type:r.received===I.undefined?t="Required":t=`Expected ${r.expected}, received ${r.received}`;break;case T.invalid_literal:t=`Invalid literal value, expected ${JSON.stringify(r.expected,K.jsonStringifyReplacer)}`;break;case T.unrecognized_keys:t=`Unrecognized key(s) in object: ${K.joinValues(r.keys,", ")}`;break;case T.invalid_union:t="Invalid input";break;case T.invalid_union_discriminator:t=`Invalid discriminator value. Expected ${K.joinValues(r.options)}`;break;case T.invalid_enum_value:t=`Invalid enum value. Expected ${K.joinValues(r.options)}, received '${r.received}'`;break;case T.invalid_arguments:t="Invalid function arguments";break;case T.invalid_return_type:t="Invalid function return type";break;case T.invalid_date:t="Invalid date";break;case T.invalid_string:typeof r.validation=="object"?"includes"in r.validation?(t=`Invalid input: must include "${r.validation.includes}"`,typeof r.validation.position=="number"&&(t=`${t} at one or more positions greater than or equal to ${r.validation.position}`)):"startsWith"in r.validation?t=`Invalid input: must start with "${r.validation.startsWith}"`:"endsWith"in r.validation?t=`Invalid input: must end with "${r.validation.endsWith}"`:K.assertNever(r.validation):r.validation!=="regex"?t=`Invalid ${r.validation}`:t="Invalid";break;case T.too_small:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at least":"more than"} ${r.minimum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at least":"over"} ${r.minimum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="bigint"?t=`Number must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${r.minimum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly equal to ":r.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(r.minimum))}`:t="Invalid input";break;case T.too_big:r.type==="array"?t=`Array must contain ${r.exact?"exactly":r.inclusive?"at most":"less than"} ${r.maximum} element(s)`:r.type==="string"?t=`String must contain ${r.exact?"exactly":r.inclusive?"at most":"under"} ${r.maximum} character(s)`:r.type==="number"?t=`Number must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="bigint"?t=`BigInt must be ${r.exact?"exactly":r.inclusive?"less than or equal to":"less than"} ${r.maximum}`:r.type==="date"?t=`Date must be ${r.exact?"exactly":r.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(r.maximum))}`:t="Invalid input";break;case T.custom:t="Invalid input";break;case T.invalid_intersection_types:t="Intersection results could not be merged";break;case T.not_multiple_of:t=`Number must be a multiple of ${r.multipleOf}`;break;case T.not_finite:t="Number must be finite";break;default:t=e.defaultError,K.assertNever(r)}return{message:t}},to=bw;let vw=to;function xw(){return vw}const _w=r=>{const{data:e,path:t,errorMaps:n,issueData:s}=r,i=[...t,...s.path||[]],o={...s,path:i};if(s.message!==void 0)return{...s,path:i,message:s.message};let a="";const c=n.filter(l=>!!l).slice().reverse();for(const l of c)a=l(o,{data:e,defaultError:a}).message;return{...s,path:i,message:a}};function P(r,e){const t=xw(),n=_w({issueData:e,data:r.data,path:r.path,errorMaps:[r.common.contextualErrorMap,r.schemaErrorMap,t,t===to?void 0:to].filter(s=>!!s)});r.common.issues.push(n)}class _e{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,t){const n=[];for(const s of t){if(s.status==="aborted")return U;s.status==="dirty"&&e.dirty(),n.push(s.value)}return{status:e.value,value:n}}static async mergeObjectAsync(e,t){const n=[];for(const s of t){const i=await s.key,o=await s.value;n.push({key:i,value:o})}return _e.mergeObjectSync(e,n)}static mergeObjectSync(e,t){const n={};for(const s of t){const{key:i,value:o}=s;if(i.status==="aborted"||o.status==="aborted")return U;i.status==="dirty"&&e.dirty(),o.status==="dirty"&&e.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||s.alwaysSet)&&(n[i.value]=o.value)}return{status:e.value,value:n}}}const U=Object.freeze({status:"aborted"}),Wr=r=>({status:"dirty",value:r}),Ae=r=>({status:"valid",value:r}),_c=r=>r.status==="aborted",Ec=r=>r.status==="dirty",Er=r=>r.status==="valid",Os=r=>typeof Promise<"u"&&r instanceof Promise;var j;(function(r){r.errToObj=e=>typeof e=="string"?{message:e}:e||{},r.toString=e=>typeof e=="string"?e:e?.message})(j||(j={}));class Et{constructor(e,t,n,s){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=s}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Sc=(r,e)=>{if(Er(e))return{success:!0,data:e.value};if(!r.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const t=new Xe(r.common.issues);return this._error=t,this._error}}};function V(r){if(!r)return{};const{errorMap:e,invalid_type_error:t,required_error:n,description:s}=r;if(e&&(t||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:s}:{errorMap:(o,a)=>{const{message:c}=r;return o.code==="invalid_enum_value"?{message:c??a.defaultError}:typeof a.data>"u"?{message:c??n??a.defaultError}:o.code!=="invalid_type"?{message:a.defaultError}:{message:c??t??a.defaultError}},description:s}}class W{get description(){return this._def.description}_getType(e){return dt(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:dt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new _e,ctx:{common:e.parent.common,data:e.data,parsedType:dt(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(Os(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){const n={common:{issues:[],async:t?.async??!1,contextualErrorMap:t?.errorMap},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dt(e)},s=this._parseSync({data:e,path:n.path,parent:n});return Sc(n,s)}"~validate"(e){const t={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dt(e)};if(!this["~standard"].async)try{const n=this._parseSync({data:e,path:[],parent:t});return Er(n)?{value:n.value}:{issues:t.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),t.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:t}).then(n=>Er(n)?{value:n.value}:{issues:t.common.issues})}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t?.errorMap,async:!0},path:t?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:dt(e)},s=this._parse({data:e,path:n.path,parent:n}),i=await(Os(s)?s:Promise.resolve(s));return Sc(n,i)}refine(e,t){const n=s=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(s):t;return this._refinement((s,i)=>{const o=e(s),a=()=>i.addIssue({code:T.custom,...n(s)});return typeof Promise<"u"&&o instanceof Promise?o.then(c=>c?!0:(a(),!1)):o?!0:(a(),!1)})}refinement(e,t){return this._refinement((n,s)=>e(n)?!0:(s.addIssue(typeof t=="function"?t(n,s):t),!1))}_refinement(e){return new kr({schema:this,typeName:B.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:t=>this["~validate"](t)}}optional(){return yt.create(this,this._def)}nullable(){return Cr.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ue.create(this)}promise(){return Ls.create(this,this._def)}or(e){return Rs.create([this,e],this._def)}and(e){return $s.create(this,e,this._def)}transform(e){return new kr({...V(this._def),schema:this,typeName:B.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new no({...V(this._def),innerType:this,defaultValue:t,typeName:B.ZodDefault})}brand(){return new Ww({typeName:B.ZodBranded,type:this,...V(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new so({...V(this._def),innerType:this,catchValue:t,typeName:B.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return Xo.create(this,e)}readonly(){return io.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const Ew=/^c[^\s-]{8,}$/i,Sw=/^[0-9a-z]+$/,kw=/^[0-9A-HJKMNP-TV-Z]{26}$/i,Cw=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,Tw=/^[a-z0-9_-]{21}$/i,Aw=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,Pw=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,Iw=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jw="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let Ai;const Ow=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,Nw=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,Rw=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,$w=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,Lw=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Dw=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,cd="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",Uw=new RegExp(`^${cd}$`);function ld(r){let e="[0-5]\\d";r.precision?e=`${e}\\.\\d{${r.precision}}`:r.precision==null&&(e=`${e}(\\.\\d+)?`);const t=r.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${e})${t}`}function Bw(r){return new RegExp(`^${ld(r)}$`)}function Mw(r){let e=`${cd}T${ld(r)}`;const t=[];return t.push(r.local?"Z?":"Z"),r.offset&&t.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${t.join("|")})`,new RegExp(`^${e}$`)}function Fw(r,e){return!!((e==="v4"||!e)&&Ow.test(r)||(e==="v6"||!e)&&Rw.test(r))}function zw(r,e){if(!Aw.test(r))return!1;try{const[t]=r.split(".");if(!t)return!1;const n=t.replace(/-/g,"+").replace(/_/g,"/").padEnd(t.length+(4-t.length%4)%4,"="),s=JSON.parse(atob(n));return!(typeof s!="object"||s===null||"typ"in s&&s?.typ!=="JWT"||!s.alg||e&&s.alg!==e)}catch{return!1}}function Vw(r,e){return!!((e==="v4"||!e)&&Nw.test(r)||(e==="v6"||!e)&&$w.test(r))}class pt extends W{_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==I.string){const i=this._getOrReturnCtx(e);return P(i,{code:T.invalid_type,expected:I.string,received:i.parsedType}),U}const n=new _e;let s;for(const i of this._def.checks)if(i.kind==="min")e.data.length<i.value&&(s=this._getOrReturnCtx(e,s),P(s,{code:T.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")e.data.length>i.value&&(s=this._getOrReturnCtx(e,s),P(s,{code:T.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=e.data.length>i.value,a=e.data.length<i.value;(o||a)&&(s=this._getOrReturnCtx(e,s),o?P(s,{code:T.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):a&&P(s,{code:T.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")Iw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"email",code:T.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")Ai||(Ai=new RegExp(jw,"u")),Ai.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"emoji",code:T.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")Cw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"uuid",code:T.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")Tw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"nanoid",code:T.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")Ew.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"cuid",code:T.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")Sw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"cuid2",code:T.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")kw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"ulid",code:T.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(e.data)}catch{s=this._getOrReturnCtx(e,s),P(s,{validation:"url",code:T.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"regex",code:T.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?e.data=e.data.trim():i.kind==="includes"?e.data.includes(i.value,i.position)||(s=this._getOrReturnCtx(e,s),P(s,{code:T.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?e.data=e.data.toLowerCase():i.kind==="toUpperCase"?e.data=e.data.toUpperCase():i.kind==="startsWith"?e.data.startsWith(i.value)||(s=this._getOrReturnCtx(e,s),P(s,{code:T.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?e.data.endsWith(i.value)||(s=this._getOrReturnCtx(e,s),P(s,{code:T.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?Mw(i).test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{code:T.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?Uw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{code:T.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?Bw(i).test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{code:T.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?Pw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"duration",code:T.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?Fw(e.data,i.version)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"ip",code:T.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?zw(e.data,i.alg)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"jwt",code:T.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?Vw(e.data,i.version)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"cidr",code:T.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?Lw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"base64",code:T.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?Dw.test(e.data)||(s=this._getOrReturnCtx(e,s),P(s,{validation:"base64url",code:T.invalid_string,message:i.message}),n.dirty()):K.assertNever(i);return{status:n.value,value:e.data}}_regex(e,t,n){return this.refinement(s=>e.test(s),{validation:t,code:T.invalid_string,...j.errToObj(n)})}_addCheck(e){return new pt({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...j.errToObj(e)})}url(e){return this._addCheck({kind:"url",...j.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...j.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...j.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...j.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...j.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...j.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...j.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...j.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...j.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...j.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...j.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...j.errToObj(e)})}datetime(e){return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:e?.offset??!1,local:e?.local??!1,...j.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...j.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...j.errToObj(e)})}regex(e,t){return this._addCheck({kind:"regex",regex:e,...j.errToObj(t)})}includes(e,t){return this._addCheck({kind:"includes",value:e,position:t?.position,...j.errToObj(t?.message)})}startsWith(e,t){return this._addCheck({kind:"startsWith",value:e,...j.errToObj(t)})}endsWith(e,t){return this._addCheck({kind:"endsWith",value:e,...j.errToObj(t)})}min(e,t){return this._addCheck({kind:"min",value:e,...j.errToObj(t)})}max(e,t){return this._addCheck({kind:"max",value:e,...j.errToObj(t)})}length(e,t){return this._addCheck({kind:"length",value:e,...j.errToObj(t)})}nonempty(e){return this.min(1,j.errToObj(e))}trim(){return new pt({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new pt({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new pt({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxLength(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}pt.create=r=>new pt({checks:[],typeName:B.ZodString,coerce:r?.coerce??!1,...V(r)});function qw(r,e){const t=(r.toString().split(".")[1]||"").length,n=(e.toString().split(".")[1]||"").length,s=t>n?t:n,i=Number.parseInt(r.toFixed(s).replace(".","")),o=Number.parseInt(e.toFixed(s).replace(".",""));return i%o/10**s}class An extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==I.number){const i=this._getOrReturnCtx(e);return P(i,{code:T.invalid_type,expected:I.number,received:i.parsedType}),U}let n;const s=new _e;for(const i of this._def.checks)i.kind==="int"?K.isInteger(e.data)||(n=this._getOrReturnCtx(e,n),P(n,{code:T.invalid_type,expected:"integer",received:"float",message:i.message}),s.dirty()):i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),P(n,{code:T.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),P(n,{code:T.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),s.dirty()):i.kind==="multipleOf"?qw(e.data,i.value)!==0&&(n=this._getOrReturnCtx(e,n),P(n,{code:T.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):i.kind==="finite"?Number.isFinite(e.data)||(n=this._getOrReturnCtx(e,n),P(n,{code:T.not_finite,message:i.message}),s.dirty()):K.assertNever(i);return{status:s.value,value:e.data}}gte(e,t){return this.setLimit("min",e,!0,j.toString(t))}gt(e,t){return this.setLimit("min",e,!1,j.toString(t))}lte(e,t){return this.setLimit("max",e,!0,j.toString(t))}lt(e,t){return this.setLimit("max",e,!1,j.toString(t))}setLimit(e,t,n,s){return new An({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:j.toString(s)}]})}_addCheck(e){return new An({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:j.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:j.toString(t)})}finite(e){return this._addCheck({kind:"finite",message:j.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:j.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:j.toString(e)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&K.isInteger(e.value))}get isFinite(){let e=null,t=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(t===null||n.value>t)&&(t=n.value):n.kind==="max"&&(e===null||n.value<e)&&(e=n.value)}return Number.isFinite(t)&&Number.isFinite(e)}}An.create=r=>new An({checks:[],typeName:B.ZodNumber,coerce:r?.coerce||!1,...V(r)});class Pn extends W{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==I.bigint)return this._getInvalidInput(e);let n;const s=new _e;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?e.data<i.value:e.data<=i.value)&&(n=this._getOrReturnCtx(e,n),P(n,{code:T.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="max"?(i.inclusive?e.data>i.value:e.data>=i.value)&&(n=this._getOrReturnCtx(e,n),P(n,{code:T.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),s.dirty()):i.kind==="multipleOf"?e.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(e,n),P(n,{code:T.not_multiple_of,multipleOf:i.value,message:i.message}),s.dirty()):K.assertNever(i);return{status:s.value,value:e.data}}_getInvalidInput(e){const t=this._getOrReturnCtx(e);return P(t,{code:T.invalid_type,expected:I.bigint,received:t.parsedType}),U}gte(e,t){return this.setLimit("min",e,!0,j.toString(t))}gt(e,t){return this.setLimit("min",e,!1,j.toString(t))}lte(e,t){return this.setLimit("max",e,!0,j.toString(t))}lt(e,t){return this.setLimit("max",e,!1,j.toString(t))}setLimit(e,t,n,s){return new Pn({...this._def,checks:[...this._def.checks,{kind:e,value:t,inclusive:n,message:j.toString(s)}]})}_addCheck(e){return new Pn({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:j.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:j.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:j.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:j.toString(e)})}multipleOf(e,t){return this._addCheck({kind:"multipleOf",value:e,message:j.toString(t)})}get minValue(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e}get maxValue(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e}}Pn.create=r=>new Pn({checks:[],typeName:B.ZodBigInt,coerce:r?.coerce??!1,...V(r)});class kc extends W{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==I.boolean){const n=this._getOrReturnCtx(e);return P(n,{code:T.invalid_type,expected:I.boolean,received:n.parsedType}),U}return Ae(e.data)}}kc.create=r=>new kc({typeName:B.ZodBoolean,coerce:r?.coerce||!1,...V(r)});class Ns extends W{_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==I.date){const i=this._getOrReturnCtx(e);return P(i,{code:T.invalid_type,expected:I.date,received:i.parsedType}),U}if(Number.isNaN(e.data.getTime())){const i=this._getOrReturnCtx(e);return P(i,{code:T.invalid_date}),U}const n=new _e;let s;for(const i of this._def.checks)i.kind==="min"?e.data.getTime()<i.value&&(s=this._getOrReturnCtx(e,s),P(s,{code:T.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?e.data.getTime()>i.value&&(s=this._getOrReturnCtx(e,s),P(s,{code:T.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):K.assertNever(i);return{status:n.value,value:new Date(e.data.getTime())}}_addCheck(e){return new Ns({...this._def,checks:[...this._def.checks,e]})}min(e,t){return this._addCheck({kind:"min",value:e.getTime(),message:j.toString(t)})}max(e,t){return this._addCheck({kind:"max",value:e.getTime(),message:j.toString(t)})}get minDate(){let e=null;for(const t of this._def.checks)t.kind==="min"&&(e===null||t.value>e)&&(e=t.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(const t of this._def.checks)t.kind==="max"&&(e===null||t.value<e)&&(e=t.value);return e!=null?new Date(e):null}}Ns.create=r=>new Ns({checks:[],coerce:r?.coerce||!1,typeName:B.ZodDate,...V(r)});class Cc extends W{_parse(e){if(this._getType(e)!==I.symbol){const n=this._getOrReturnCtx(e);return P(n,{code:T.invalid_type,expected:I.symbol,received:n.parsedType}),U}return Ae(e.data)}}Cc.create=r=>new Cc({typeName:B.ZodSymbol,...V(r)});class Tc extends W{_parse(e){if(this._getType(e)!==I.undefined){const n=this._getOrReturnCtx(e);return P(n,{code:T.invalid_type,expected:I.undefined,received:n.parsedType}),U}return Ae(e.data)}}Tc.create=r=>new Tc({typeName:B.ZodUndefined,...V(r)});class Ac extends W{_parse(e){if(this._getType(e)!==I.null){const n=this._getOrReturnCtx(e);return P(n,{code:T.invalid_type,expected:I.null,received:n.parsedType}),U}return Ae(e.data)}}Ac.create=r=>new Ac({typeName:B.ZodNull,...V(r)});class Pc extends W{constructor(){super(...arguments),this._any=!0}_parse(e){return Ae(e.data)}}Pc.create=r=>new Pc({typeName:B.ZodAny,...V(r)});class Ic extends W{constructor(){super(...arguments),this._unknown=!0}_parse(e){return Ae(e.data)}}Ic.create=r=>new Ic({typeName:B.ZodUnknown,...V(r)});class St extends W{_parse(e){const t=this._getOrReturnCtx(e);return P(t,{code:T.invalid_type,expected:I.never,received:t.parsedType}),U}}St.create=r=>new St({typeName:B.ZodNever,...V(r)});class jc extends W{_parse(e){if(this._getType(e)!==I.undefined){const n=this._getOrReturnCtx(e);return P(n,{code:T.invalid_type,expected:I.void,received:n.parsedType}),U}return Ae(e.data)}}jc.create=r=>new jc({typeName:B.ZodVoid,...V(r)});class Ue extends W{_parse(e){const{ctx:t,status:n}=this._processInputParams(e),s=this._def;if(t.parsedType!==I.array)return P(t,{code:T.invalid_type,expected:I.array,received:t.parsedType}),U;if(s.exactLength!==null){const o=t.data.length>s.exactLength.value,a=t.data.length<s.exactLength.value;(o||a)&&(P(t,{code:o?T.too_big:T.too_small,minimum:a?s.exactLength.value:void 0,maximum:o?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),n.dirty())}if(s.minLength!==null&&t.data.length<s.minLength.value&&(P(t,{code:T.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),n.dirty()),s.maxLength!==null&&t.data.length>s.maxLength.value&&(P(t,{code:T.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),n.dirty()),t.common.async)return Promise.all([...t.data].map((o,a)=>s.type._parseAsync(new Et(t,o,t.path,a)))).then(o=>_e.mergeArray(n,o));const i=[...t.data].map((o,a)=>s.type._parseSync(new Et(t,o,t.path,a)));return _e.mergeArray(n,i)}get element(){return this._def.type}min(e,t){return new Ue({...this._def,minLength:{value:e,message:j.toString(t)}})}max(e,t){return new Ue({...this._def,maxLength:{value:e,message:j.toString(t)}})}length(e,t){return new Ue({...this._def,exactLength:{value:e,message:j.toString(t)}})}nonempty(e){return this.min(1,e)}}Ue.create=(r,e)=>new Ue({type:r,minLength:null,maxLength:null,exactLength:null,typeName:B.ZodArray,...V(e)});function fr(r){if(r instanceof re){const e={};for(const t in r.shape){const n=r.shape[t];e[t]=yt.create(fr(n))}return new re({...r._def,shape:()=>e})}else return r instanceof Ue?new Ue({...r._def,type:fr(r.element)}):r instanceof yt?yt.create(fr(r.unwrap())):r instanceof Cr?Cr.create(fr(r.unwrap())):r instanceof Yt?Yt.create(r.items.map(e=>fr(e))):r}class re extends W{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const e=this._def.shape(),t=K.objectKeys(e);return this._cached={shape:e,keys:t},this._cached}_parse(e){if(this._getType(e)!==I.object){const l=this._getOrReturnCtx(e);return P(l,{code:T.invalid_type,expected:I.object,received:l.parsedType}),U}const{status:n,ctx:s}=this._processInputParams(e),{shape:i,keys:o}=this._getCached(),a=[];if(!(this._def.catchall instanceof St&&this._def.unknownKeys==="strip"))for(const l in s.data)o.includes(l)||a.push(l);const c=[];for(const l of o){const u=i[l],h=s.data[l];c.push({key:{status:"valid",value:l},value:u._parse(new Et(s,h,s.path,l)),alwaysSet:l in s.data})}if(this._def.catchall instanceof St){const l=this._def.unknownKeys;if(l==="passthrough")for(const u of a)c.push({key:{status:"valid",value:u},value:{status:"valid",value:s.data[u]}});else if(l==="strict")a.length>0&&(P(s,{code:T.unrecognized_keys,keys:a}),n.dirty());else if(l!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const l=this._def.catchall;for(const u of a){const h=s.data[u];c.push({key:{status:"valid",value:u},value:l._parse(new Et(s,h,s.path,u)),alwaysSet:u in s.data})}}return s.common.async?Promise.resolve().then(async()=>{const l=[];for(const u of c){const h=await u.key,f=await u.value;l.push({key:h,value:f,alwaysSet:u.alwaysSet})}return l}).then(l=>_e.mergeObjectSync(n,l)):_e.mergeObjectSync(n,c)}get shape(){return this._def.shape()}strict(e){return j.errToObj,new re({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:(t,n)=>{const s=this._def.errorMap?.(t,n).message??n.defaultError;return t.code==="unrecognized_keys"?{message:j.errToObj(e).message??s}:{message:s}}}:{}})}strip(){return new re({...this._def,unknownKeys:"strip"})}passthrough(){return new re({...this._def,unknownKeys:"passthrough"})}extend(e){return new re({...this._def,shape:()=>({...this._def.shape(),...e})})}merge(e){return new re({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:()=>({...this._def.shape(),...e._def.shape()}),typeName:B.ZodObject})}setKey(e,t){return this.augment({[e]:t})}catchall(e){return new re({...this._def,catchall:e})}pick(e){const t={};for(const n of K.objectKeys(e))e[n]&&this.shape[n]&&(t[n]=this.shape[n]);return new re({...this._def,shape:()=>t})}omit(e){const t={};for(const n of K.objectKeys(this.shape))e[n]||(t[n]=this.shape[n]);return new re({...this._def,shape:()=>t})}deepPartial(){return fr(this)}partial(e){const t={};for(const n of K.objectKeys(this.shape)){const s=this.shape[n];e&&!e[n]?t[n]=s:t[n]=s.optional()}return new re({...this._def,shape:()=>t})}required(e){const t={};for(const n of K.objectKeys(this.shape))if(e&&!e[n])t[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof yt;)i=i._def.innerType;t[n]=i}return new re({...this._def,shape:()=>t})}keyof(){return ud(K.objectKeys(this.shape))}}re.create=(r,e)=>new re({shape:()=>r,unknownKeys:"strip",catchall:St.create(),typeName:B.ZodObject,...V(e)});re.strictCreate=(r,e)=>new re({shape:()=>r,unknownKeys:"strict",catchall:St.create(),typeName:B.ZodObject,...V(e)});re.lazycreate=(r,e)=>new re({shape:r,unknownKeys:"strip",catchall:St.create(),typeName:B.ZodObject,...V(e)});class Rs extends W{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function s(i){for(const a of i)if(a.result.status==="valid")return a.result;for(const a of i)if(a.result.status==="dirty")return t.common.issues.push(...a.ctx.common.issues),a.result;const o=i.map(a=>new Xe(a.ctx.common.issues));return P(t,{code:T.invalid_union,unionErrors:o}),U}if(t.common.async)return Promise.all(n.map(async i=>{const o={...t,common:{...t.common,issues:[]},parent:null};return{result:await i._parseAsync({data:t.data,path:t.path,parent:o}),ctx:o}})).then(s);{let i;const o=[];for(const c of n){const l={...t,common:{...t.common,issues:[]},parent:null},u=c._parseSync({data:t.data,path:t.path,parent:l});if(u.status==="valid")return u;u.status==="dirty"&&!i&&(i={result:u,ctx:l}),l.common.issues.length&&o.push(l.common.issues)}if(i)return t.common.issues.push(...i.ctx.common.issues),i.result;const a=o.map(c=>new Xe(c));return P(t,{code:T.invalid_union,unionErrors:a}),U}}get options(){return this._def.options}}Rs.create=(r,e)=>new Rs({options:r,typeName:B.ZodUnion,...V(e)});function ro(r,e){const t=dt(r),n=dt(e);if(r===e)return{valid:!0,data:r};if(t===I.object&&n===I.object){const s=K.objectKeys(e),i=K.objectKeys(r).filter(a=>s.indexOf(a)!==-1),o={...r,...e};for(const a of i){const c=ro(r[a],e[a]);if(!c.valid)return{valid:!1};o[a]=c.data}return{valid:!0,data:o}}else if(t===I.array&&n===I.array){if(r.length!==e.length)return{valid:!1};const s=[];for(let i=0;i<r.length;i++){const o=r[i],a=e[i],c=ro(o,a);if(!c.valid)return{valid:!1};s.push(c.data)}return{valid:!0,data:s}}else return t===I.date&&n===I.date&&+r==+e?{valid:!0,data:r}:{valid:!1}}class $s extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=(i,o)=>{if(_c(i)||_c(o))return U;const a=ro(i.value,o.value);return a.valid?((Ec(i)||Ec(o))&&t.dirty(),{status:t.value,value:a.data}):(P(n,{code:T.invalid_intersection_types}),U)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>s(i,o)):s(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}$s.create=(r,e,t)=>new $s({left:r,right:e,typeName:B.ZodIntersection,...V(t)});class Yt extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.array)return P(n,{code:T.invalid_type,expected:I.array,received:n.parsedType}),U;if(n.data.length<this._def.items.length)return P(n,{code:T.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),U;!this._def.rest&&n.data.length>this._def.items.length&&(P(n,{code:T.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),t.dirty());const i=[...n.data].map((o,a)=>{const c=this._def.items[a]||this._def.rest;return c?c._parse(new Et(n,o,n.path,a)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>_e.mergeArray(t,o)):_e.mergeArray(t,i)}get items(){return this._def.items}rest(e){return new Yt({...this._def,rest:e})}}Yt.create=(r,e)=>{if(!Array.isArray(r))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Yt({items:r,typeName:B.ZodTuple,rest:null,...V(e)})};class Oc extends W{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.map)return P(n,{code:T.invalid_type,expected:I.map,received:n.parsedType}),U;const s=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([a,c],l)=>({key:s._parse(new Et(n,a,n.path,[l,"key"])),value:i._parse(new Et(n,c,n.path,[l,"value"]))}));if(n.common.async){const a=new Map;return Promise.resolve().then(async()=>{for(const c of o){const l=await c.key,u=await c.value;if(l.status==="aborted"||u.status==="aborted")return U;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(l.value,u.value)}return{status:t.value,value:a}})}else{const a=new Map;for(const c of o){const l=c.key,u=c.value;if(l.status==="aborted"||u.status==="aborted")return U;(l.status==="dirty"||u.status==="dirty")&&t.dirty(),a.set(l.value,u.value)}return{status:t.value,value:a}}}}Oc.create=(r,e,t)=>new Oc({valueType:e,keyType:r,typeName:B.ZodMap,...V(t)});class In extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==I.set)return P(n,{code:T.invalid_type,expected:I.set,received:n.parsedType}),U;const s=this._def;s.minSize!==null&&n.data.size<s.minSize.value&&(P(n,{code:T.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),t.dirty()),s.maxSize!==null&&n.data.size>s.maxSize.value&&(P(n,{code:T.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),t.dirty());const i=this._def.valueType;function o(c){const l=new Set;for(const u of c){if(u.status==="aborted")return U;u.status==="dirty"&&t.dirty(),l.add(u.value)}return{status:t.value,value:l}}const a=[...n.data.values()].map((c,l)=>i._parse(new Et(n,c,n.path,l)));return n.common.async?Promise.all(a).then(c=>o(c)):o(a)}min(e,t){return new In({...this._def,minSize:{value:e,message:j.toString(t)}})}max(e,t){return new In({...this._def,maxSize:{value:e,message:j.toString(t)}})}size(e,t){return this.min(e,t).max(e,t)}nonempty(e){return this.min(1,e)}}In.create=(r,e)=>new In({valueType:r,minSize:null,maxSize:null,typeName:B.ZodSet,...V(e)});class Nc extends W{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}}Nc.create=(r,e)=>new Nc({getter:r,typeName:B.ZodLazy,...V(e)});class Rc extends W{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return P(t,{received:t.data,code:T.invalid_literal,expected:this._def.value}),U}return{status:"valid",value:e.data}}get value(){return this._def.value}}Rc.create=(r,e)=>new Rc({value:r,typeName:B.ZodLiteral,...V(e)});function ud(r,e){return new Sr({values:r,typeName:B.ZodEnum,...V(e)})}class Sr extends W{_parse(e){if(typeof e.data!="string"){const t=this._getOrReturnCtx(e),n=this._def.values;return P(t,{expected:K.joinValues(n),received:t.parsedType,code:T.invalid_type}),U}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(e.data)){const t=this._getOrReturnCtx(e),n=this._def.values;return P(t,{received:t.data,code:T.invalid_enum_value,options:n}),U}return Ae(e.data)}get options(){return this._def.values}get enum(){const e={};for(const t of this._def.values)e[t]=t;return e}get Values(){const e={};for(const t of this._def.values)e[t]=t;return e}get Enum(){const e={};for(const t of this._def.values)e[t]=t;return e}extract(e,t=this._def){return Sr.create(e,{...this._def,...t})}exclude(e,t=this._def){return Sr.create(this.options.filter(n=>!e.includes(n)),{...this._def,...t})}}Sr.create=ud;class $c extends W{_parse(e){const t=K.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==I.string&&n.parsedType!==I.number){const s=K.objectValues(t);return P(n,{expected:K.joinValues(s),received:n.parsedType,code:T.invalid_type}),U}if(this._cache||(this._cache=new Set(K.getValidEnumValues(this._def.values))),!this._cache.has(e.data)){const s=K.objectValues(t);return P(n,{received:n.data,code:T.invalid_enum_value,options:s}),U}return Ae(e.data)}get enum(){return this._def.values}}$c.create=(r,e)=>new $c({values:r,typeName:B.ZodNativeEnum,...V(e)});class Ls extends W{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==I.promise&&t.common.async===!1)return P(t,{code:T.invalid_type,expected:I.promise,received:t.parsedType}),U;const n=t.parsedType===I.promise?t.data:Promise.resolve(t.data);return Ae(n.then(s=>this._def.type.parseAsync(s,{path:t.path,errorMap:t.common.contextualErrorMap})))}}Ls.create=(r,e)=>new Ls({type:r,typeName:B.ZodPromise,...V(e)});class kr extends W{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===B.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),s=this._def.effect||null,i={addIssue:o=>{P(n,o),o.fatal?t.abort():t.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),s.type==="preprocess"){const o=s.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async a=>{if(t.value==="aborted")return U;const c=await this._def.schema._parseAsync({data:a,path:n.path,parent:n});return c.status==="aborted"?U:c.status==="dirty"||t.value==="dirty"?Wr(c.value):c});{if(t.value==="aborted")return U;const a=this._def.schema._parseSync({data:o,path:n.path,parent:n});return a.status==="aborted"?U:a.status==="dirty"||t.value==="dirty"?Wr(a.value):a}}if(s.type==="refinement"){const o=a=>{const c=s.refinement(a,i);if(n.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return a};if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?U:(a.status==="dirty"&&t.dirty(),o(a.value),{status:t.value,value:a.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>a.status==="aborted"?U:(a.status==="dirty"&&t.dirty(),o(a.value).then(()=>({status:t.value,value:a.value}))))}if(s.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Er(o))return U;const a=s.transform(o.value,i);if(a instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:a}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Er(o)?Promise.resolve(s.transform(o.value,i)).then(a=>({status:t.value,value:a})):U);K.assertNever(s)}}kr.create=(r,e,t)=>new kr({schema:r,typeName:B.ZodEffects,effect:e,...V(t)});kr.createWithPreprocess=(r,e,t)=>new kr({schema:e,effect:{type:"preprocess",transform:r},typeName:B.ZodEffects,...V(t)});class yt extends W{_parse(e){return this._getType(e)===I.undefined?Ae(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}yt.create=(r,e)=>new yt({innerType:r,typeName:B.ZodOptional,...V(e)});class Cr extends W{_parse(e){return this._getType(e)===I.null?Ae(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}}Cr.create=(r,e)=>new Cr({innerType:r,typeName:B.ZodNullable,...V(e)});class no extends W{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===I.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}}no.create=(r,e)=>new no({innerType:r,typeName:B.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...V(e)});class so extends W{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},s=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Os(s)?s.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Xe(n.common.issues)},input:n.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Xe(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}so.create=(r,e)=>new so({innerType:r,typeName:B.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...V(e)});class Lc extends W{_parse(e){if(this._getType(e)!==I.nan){const n=this._getOrReturnCtx(e);return P(n,{code:T.invalid_type,expected:I.nan,received:n.parsedType}),U}return{status:"valid",value:e.data}}}Lc.create=r=>new Lc({typeName:B.ZodNaN,...V(r)});class Ww extends W{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}}class Xo extends W{_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?U:i.status==="dirty"?(t.dirty(),Wr(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const s=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return s.status==="aborted"?U:s.status==="dirty"?(t.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:n.path,parent:n})}}static create(e,t){return new Xo({in:e,out:t,typeName:B.ZodPipeline})}}class io extends W{_parse(e){const t=this._def.innerType._parse(e),n=s=>(Er(s)&&(s.value=Object.freeze(s.value)),s);return Os(t)?t.then(s=>n(s)):n(t)}unwrap(){return this._def.innerType}}io.create=(r,e)=>new io({innerType:r,typeName:B.ZodReadonly,...V(e)});re.lazycreate;var B;(function(r){r.ZodString="ZodString",r.ZodNumber="ZodNumber",r.ZodNaN="ZodNaN",r.ZodBigInt="ZodBigInt",r.ZodBoolean="ZodBoolean",r.ZodDate="ZodDate",r.ZodSymbol="ZodSymbol",r.ZodUndefined="ZodUndefined",r.ZodNull="ZodNull",r.ZodAny="ZodAny",r.ZodUnknown="ZodUnknown",r.ZodNever="ZodNever",r.ZodVoid="ZodVoid",r.ZodArray="ZodArray",r.ZodObject="ZodObject",r.ZodUnion="ZodUnion",r.ZodDiscriminatedUnion="ZodDiscriminatedUnion",r.ZodIntersection="ZodIntersection",r.ZodTuple="ZodTuple",r.ZodRecord="ZodRecord",r.ZodMap="ZodMap",r.ZodSet="ZodSet",r.ZodFunction="ZodFunction",r.ZodLazy="ZodLazy",r.ZodLiteral="ZodLiteral",r.ZodEnum="ZodEnum",r.ZodEffects="ZodEffects",r.ZodNativeEnum="ZodNativeEnum",r.ZodOptional="ZodOptional",r.ZodNullable="ZodNullable",r.ZodDefault="ZodDefault",r.ZodCatch="ZodCatch",r.ZodPromise="ZodPromise",r.ZodBranded="ZodBranded",r.ZodPipeline="ZodPipeline",r.ZodReadonly="ZodReadonly"})(B||(B={}));const Dc=pt.create;St.create;Ue.create;const Hw=re.create;re.strictCreate;Rs.create;$s.create;Yt.create;const Uc=Sr.create;Ls.create;yt.create;Cr.create;const Gw=Hw({MODE:Uc(["development","production","test"]),VITE_API_BASE:Dc().optional(),VITE_IMAGES_FEATURE_FLAG:Dc().optional(),VITE_IMAGES_PROVIDER:Uc(["none","pexels","unsplash"]).default("none")}),Kw=Gw.parse({MODE:"production",VITE_API_BASE:"/api",VITE_IMAGES_FEATURE_FLAG:{}.VITE_IMAGES_FEATURE_FLAG,VITE_IMAGES_PROVIDER:{}.VITE_IMAGES_PROVIDER}),ce={...Kw,DEV:!1,PROD:!0,SSR:!1,VITE_SUPABASE_URL:"https://ihtnsyhknvltgrksffun.supabase.co",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlodG5zeWhrbnZsdGdya3NmZnVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2NzA2MzYsImV4cCI6MjA2OTI0NjYzNn0.ZmoZ5cGVHfhDwTvkmaw9LSVHm_awoyMOTyQKewr7rYo",VITE_FRONTEND_URL:{}.VITE_FRONTEND_URL,VITE_FCZ_UNIFIED_HEADER:{}.VITE_FCZ_UNIFIED_HEADER,VITE_FCZ_DISCOVER_V2:{}.VITE_FCZ_DISCOVER_V2,VITE_FCZ_PREDICTION_DETAILS_V2:{}.VITE_FCZ_PREDICTION_DETAILS_V2,VITE_FCZ_SHARED_CARDS:{}.VITE_FCZ_SHARED_CARDS,VITE_FCZ_AUTH_GATE:{}.VITE_FCZ_AUTH_GATE,VITE_FCZ_COMMENTS_V2:{}.VITE_FCZ_COMMENTS_V2,VITE_FCZ_UNIFIED_CARDS:"1",VITE_FCZ_COMMENTS_SORT:{}.VITE_FCZ_COMMENTS_SORT,VITE_DEBUG:{}.VITE_DEBUG,VITE_VAPID_PUBLIC_KEY:{}.VITE_VAPID_PUBLIC_KEY,VITE_ESCROW_CONTRACT_ADDRESS:{}.VITE_ESCROW_CONTRACT_ADDRESS,VITE_GOOGLE_ANALYTICS_ID:{}.VITE_GOOGLE_ANALYTICS_ID},ea=ce.DEV,jn=ce.PROD,Ds=ce.MODE,Hr=ce.VITE_API_BASE,dd=ce.VITE_SUPABASE_URL,hd=ce.VITE_SUPABASE_ANON_KEY,fd=ce.VITE_FRONTEND_URL,pd=ce.VITE_FCZ_UNIFIED_HEADER==="1",Zw=ce.VITE_FCZ_DISCOVER_V2==="1",Jw=ce.VITE_FCZ_PREDICTION_DETAILS_V2==="1",Yw=ce.VITE_FCZ_SHARED_CARDS==="1",Qw=ce.VITE_FCZ_AUTH_GATE==="1",Xw=ce.VITE_FCZ_COMMENTS_V2==="1",eb=ce.VITE_FCZ_UNIFIED_CARDS==="1",tb=ce.VITE_FCZ_COMMENTS_SORT==="1",Oe=ce.VITE_DEBUG==="true",md=ce.VITE_VAPID_PUBLIC_KEY,rb=ce.VITE_ESCROW_CONTRACT_ADDRESS,nb=ce.VITE_GOOGLE_ANALYTICS_ID;function Nr(){const r=window.location.hostname,e=window.location.protocol,t=typeof window<"u"&&!!_r?.isNativePlatform?.(),n="https://fan-club-z.onrender.com";if(Oe&&(console.log("ðŸŒ Environment Detection:"),console.log("  - Hostname:",r),console.log("  - Protocol:",e),console.log("  - VITE_API_BASE:",Hr),console.log("  - MODE:",Ds)),r==="app.fanclubz.app"||r==="fanclubz.app"||r==="www.fanclubz.app"){const i={apiUrl:n,socketUrl:n,environment:"production",isDevelopment:!1,isProduction:!0};return Oe&&console.log("ðŸš€ Production environment detected (single service):",i),i}if(r==="dev.fanclubz.app"){const i={apiUrl:"https://fan-club-z.onrender.com",socketUrl:"https://fan-club-z.onrender.com",environment:"staging",isDevelopment:!1,isProduction:!1};return Oe&&console.log("ðŸ§ª Development environment detected (single service):",i),i}if(r.includes("vercel.app")){const i={apiUrl:n,socketUrl:n,environment:"production",isDevelopment:!1,isProduction:!0};return Oe&&console.log("ðŸš€ Vercel deployment detected, using single service:",i),i}if(t&&!ea){const i={apiUrl:n,socketUrl:n,environment:"production",isDevelopment:!1,isProduction:!0};return Oe&&console.log("ðŸ“± Native shell detected -> using production API:",i),i}if(Ds==="development"){const o=r==="localhost"||r.startsWith("127.")?"localhost":r,a=`${e}//${o}:3001`,c={apiUrl:a,socketUrl:a,environment:"development",isDevelopment:!0,isProduction:!1};return Oe&&console.log("ðŸ  Development mode detected (dynamic host for LAN):",c),c}if(Hr){const i={apiUrl:Hr,socketUrl:Hr,environment:"production",isDevelopment:!jn,isProduction:jn};return Oe&&console.log("ðŸ”§ Using VITE_API_BASE:",i),i}if(!t&&(r==="localhost"||r.startsWith("127.0.0.1")||r.startsWith("192.168."))){const i={apiUrl:"http://localhost:3001",socketUrl:"http://localhost:3001",environment:"development",isDevelopment:!0,isProduction:!1};return Oe&&console.log("ðŸ  Local development detected:",i),i}const s={apiUrl:n,socketUrl:n,environment:"production",isDevelopment:!1,isProduction:!0};return Oe&&console.log("ðŸ”„ Unknown hostname, falling back to single service:",s),s}function sb(){return Nr().apiUrl}function gd(){const r=Nr();return Oe&&console.log("ðŸ”§ Socket URL configuration:",{hostname:window.location.hostname,configuredUrl:r.socketUrl,environment:r.environment,isDevelopment:r.isDevelopment,isProduction:r.isProduction}),r.socketUrl}function ib(){return Nr().isDevelopment}function ob(){return Nr().isProduction}const ik=Object.freeze(Object.defineProperty({__proto__:null,API_BASE:Hr,DEBUG_ENABLED:Oe,ESCROW_CONTRACT_ADDRESS:rb,FCZ_AUTH_GATE:Qw,FCZ_COMMENTS_SORT:tb,FCZ_COMMENTS_V2:Xw,FCZ_DISCOVER_V2:Zw,FCZ_PREDICTION_DETAILS_V2:Jw,FCZ_SHARED_CARDS:Yw,FCZ_UNIFIED_CARDS:eb,FCZ_UNIFIED_HEADER:pd,FRONTEND_URL:fd,GOOGLE_ANALYTICS_ID:nb,SUPABASE_ANON_KEY:hd,SUPABASE_URL:dd,VAPID_PUBLIC_KEY:md,getApiUrl:sb,getEnvironmentConfig:Nr,getSocketUrl:gd,isDev:ea,isDevelopment:ib,isProd:jn,isProduction:ob,mode:Ds},Symbol.toStringTag,{value:"Module"})),ab=dd,cb=hd;console.log("ðŸ”§ Supabase Config Check:");console.log("URL:","âœ… Present");console.log("Anon Key:","âœ… Present");const ta=()=>typeof window<"u"&&!!_r?.isNativePlatform?.();function oo(r){return(t=>{if(!r)return t;const n=t.includes("?")?"&":"?";return`${t}${n}next=${encodeURIComponent(r)}`})("https://app.fanclubz.app/auth/callback")}const Bc=r=>oo(r);let Mc=null;const yd=()=>{!ta()||Mc||(Mc=ww.addListener("appUrlOpen",async({url:r})=>{try{if(!r||!r.includes("app.fanclubz.app/auth/callback")&&!r.includes("localhost")&&!r.includes("127.0.0.1"))return;console.log("ðŸ” Native auth callback received:",r),await ad.close().catch(()=>{})}catch(e){console.error("âŒ Native auth listener exception:",e)}}))},D=aw(ab,cb,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"pkce"},db:{schema:"public"},global:{headers:{"X-Client-Info":"fanclubz-web@1.0.0"}}}),Gr={signUp:async(r,e,t={})=>{try{const{data:n,error:s}=await D.auth.signUp({email:r,password:e,options:{data:t,emailRedirectTo:oo()}});return s&&console.error("Auth signUp error:",s),{data:n,error:s}}catch(n){return console.error("Auth signUp exception:",n),{data:null,error:{message:n.message||"An unexpected error occurred"}}}},signIn:async(r,e)=>{try{const{data:t,error:n}=await D.auth.signInWithPassword({email:r,password:e});return n&&console.error("Auth signIn error:",n),{data:t,error:n}}catch(t){return console.error("Auth signIn exception:",t),{data:null,error:{message:t.message||"An unexpected error occurred"}}}},signInWithOAuth:async(r,e)=>{const t=ta();t&&yd();try{const n=oo(e?.next);console.log("ðŸ” OAuth redirect URL:",n);const{data:s,error:i}=await D.auth.signInWithOAuth({provider:r,options:{redirectTo:n,skipBrowserRedirect:t,queryParams:{access_type:"offline",prompt:"consent"}}});return i?console.error("Auth signInWithOAuth error:",i):t&&s?.url&&await ad.open({url:s.url,presentationStyle:"fullscreen"}),{data:s,error:i}}catch(n){return console.error("Auth signInWithOAuth exception:",n),{data:null,error:{message:n.message||"An unexpected error occurred"}}}},signOut:async()=>{try{const{error:r}=await D.auth.signOut();return r&&console.error("Auth signOut error:",r),{error:r}}catch(r){return console.error("Auth signOut exception:",r),{error:{message:r.message||"An unexpected error occurred"}}}},getCurrentUser:async()=>{try{const{data:{user:r},error:e}=await D.auth.getUser();return e&&console.error("Auth getCurrentUser error:",e),{user:r,error:e}}catch(r){return console.error("Auth getCurrentUser exception:",r),{user:null,error:{message:r.message||"An unexpected error occurred"}}}},onAuthStateChange:r=>D.auth.onAuthStateChange(r)},lb={predictions:{async getAll(r={}){try{let e=D.from("predictions").select(`
            *,
            creator:users!creator_id(id, username, full_name, avatar_url),
            options:prediction_options!prediction_options_prediction_id_fkey(*),
          `);r.category&&(e=e.eq("category",r.category)),r.status&&(e=e.eq("status",r.status)),r.search&&(e=e.or(`title.ilike.%${r.search}%,description.ilike.%${r.search}%`));const{data:t,error:n}=await e.order("created_at",{ascending:!1}).limit(r.limit||20);return n&&!n.message.includes("relation")&&!n.message.includes("does not exist")&&console.error("Database error in predictions.getAll:",n),{data:t,error:n}}catch(e){return console.error("Exception in predictions.getAll:",e),{data:null,error:{message:e.message||"An unexpected error occurred"}}}},async getById(r){try{const{data:e,error:t}=await D.from("predictions").select(`
            *,
            creator:users!creator_id(id, username, full_name, avatar_url),
            options:prediction_options!prediction_options_prediction_id_fkey(*),
          `).eq("id",r).single();return t&&!t.message.includes("relation")&&!t.message.includes("does not exist")&&console.error("Database error in predictions.getById:",t),{data:e,error:t}}catch(e){return console.error("Exception in predictions.getById:",e),{data:null,error:{message:e.message||"An unexpected error occurred"}}}},async create(r){try{const{data:e,error:t}=await D.from("predictions").insert(r).select().single();return t&&console.error("Database error in predictions.create:",t),{data:e,error:t}}catch(e){return console.error("Exception in predictions.create:",e),{data:null,error:{message:e.message||"An unexpected error occurred"}}}}},users:{async getProfile(r){try{const{data:e,error:t}=await D.from("users").select("*").eq("id",r).single();return t&&!t.message.includes("relation")&&!t.message.includes("does not exist")&&console.error("Database error in users.getProfile:",t),{data:e,error:t}}catch(e){return console.error("Exception in users.getProfile:",e),{data:null,error:{message:e.message||"An unexpected error occurred"}}}},async updateProfile(r,e){try{const{data:t,error:n}=await D.from("users").update(e).eq("id",r).select().single();return n&&console.error("Database error in users.updateProfile:",n),{data:t,error:n}}catch(t){return console.error("Exception in users.updateProfile:",t),{data:null,error:{message:t.message||"An unexpected error occurred"}}}}},wallets:{async getBalance(r,e="NGN"){try{const{data:t,error:n}=await D.from("wallets").select("*").eq("user_id",r).eq("currency",e).single();return n&&!n.message.includes("relation")&&!n.message.includes("does not exist")&&console.error("Database error in wallets.getBalance:",n),{data:t,error:n}}catch(t){return console.error("Exception in wallets.getBalance:",t),{data:null,error:{message:t.message||"An unexpected error occurred"}}}},async getTransactions(r,e=20){try{const{data:t,error:n}=await D.from("wallet_transactions").select("*").eq("user_id",r).order("created_at",{ascending:!1}).limit(e);return n&&!n.message.includes("relation")&&!n.message.includes("does not exist")&&console.error("Database error in wallets.getTransactions:",n),{data:t,error:n}}catch(t){return console.error("Exception in wallets.getTransactions:",t),{data:null,error:{message:t.message||"An unexpected error occurred"}}}}},comments:{async getByPredictionId(r,e=20){try{const{data:t,error:n}=await D.from("comments").select(`
            *,
            user:users(id, username, full_name, avatar_url)
          `).eq("prediction_id",r).is("parent_comment_id",null).order("created_at",{ascending:!1}).limit(e);return n&&!n.message.includes("relation")&&!n.message.includes("does not exist")&&console.error("Database error in comments.getByPredictionId:",n),{data:t,error:n}}catch(t){return console.error("Exception in comments.getByPredictionId:",t),{data:null,error:{message:t.message||"An unexpected error occurred"}}}},async create(r){try{const{data:e,error:t}=await D.from("comments").insert(r).select(`
            *,
            user:users(id, username, full_name, avatar_url)
          `).single();return t&&console.error("Database error in comments.create:",t),{data:e,error:t}}catch(e){return console.error("Exception in comments.create:",e),{data:null,error:{message:e.message||"An unexpected error occurred"}}}}}};ta()&&yd();const ub=Vs()((r,e)=>({balances:[],transactions:[],isLoading:!1,error:null,walletSummary:null,get balance(){return e().balances.find(s=>s.currency==="USD")?.available||0},get totalBalance(){return e().balances.find(s=>s.currency==="USD")?.total||0},get reservedBalance(){return e().balances.find(s=>s.currency==="USD")?.reserved||0},initializeWallet:async()=>{console.log("[FCZ-PAY] initializeWallet() called but disabled - use on-chain hooks instead"),r({balances:[],transactions:[],isLoading:!1,error:null})},refreshWalletData:async()=>{await e().initializeWallet()},lockFunds:async(t,n="USD")=>{try{if(isNaN(t)||t<=0)throw new Error("Please enter a valid amount");const i=e().balances.find(l=>l.currency===n);if(!i||i.available<t)throw new Error("Insufficient funds");const o=i.available-t,a=i.reserved+t,c={id:`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"bet_lock",amount:t,description:"Funds locked for prediction",date:new Date,status:"completed",reference:`LOCK_${Date.now()}`,currency:n,fee:0};r(l=>({balances:l.balances.map(u=>u.currency===n?{...u,available:o,reserved:a,total:o+a}:u),transactions:[c,...l.transactions],error:null})),console.log("âœ… Funds locked successfully with transaction record:",t,n);try{const{data:{user:l}}=await D.auth.getUser();l&&(await D.from("wallets").upsert({user_id:l.id,currency:n,available_balance:o,reserved_balance:a,updated_at:new Date().toISOString()},{onConflict:"user_id,currency"}),await D.from("wallet_transactions").insert({user_id:l.id,type:c.type,currency:c.currency,amount:c.amount,status:c.status,reference:c.reference,description:c.description,created_at:new Date().toISOString()}))}catch{console.log("âš ï¸ Could not update database, using local state only")}}catch(s){const i=s instanceof Error?s.message:"Failed to lock funds";throw r({error:i}),s}},addFunds:async(t,n="USD",s="Bank Transfer")=>{r({isLoading:!0,error:null});try{if(isNaN(t)||t<=0)throw new Error("Please enter a valid amount");const o=e().balances.find(u=>u.currency===n),a=(o?.available||0)+t,c=a+(o?.reserved||0),l={id:`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"deposit",amount:t,description:`${s} Deposit`,date:new Date,status:"completed",reference:`DEP_${Date.now()}`,currency:n,fee:0};r(u=>({balances:u.balances.map(h=>h.currency===n?{...h,available:a,total:c}:h),transactions:[l,...u.transactions],isLoading:!1,error:null}));try{const{data:{user:u}}=await D.auth.getUser();u&&(await D.from("wallets").upsert({user_id:u.id,currency:n,available_balance:a,reserved_balance:o?.reserved||0,total_deposited:(o?.available||0)+t,updated_at:new Date().toISOString()},{onConflict:"user_id,currency"}),await D.from("wallet_transactions").insert({user_id:u.id,type:l.type,currency:l.currency,amount:l.amount,status:l.status,reference:l.reference,description:l.description,created_at:new Date().toISOString()}),console.log("âœ… Funds added and saved to database:",t,n))}catch(u){console.error("âŒ Failed to save to database:",u)}return l}catch(i){const o=i instanceof Error?i.message:"Failed to add funds";throw r({isLoading:!1,error:o}),i}},withdraw:async(t,n="USD",s="Bank Account")=>{r({isLoading:!0,error:null});try{if(isNaN(t)||t<=0)throw new Error("Please enter a valid amount");const o=e().balances.find(u=>u.currency===n);if(!o||o.available<t)throw new Error("Insufficient funds");const a=o.available-t,c=a+o.reserved,l={id:`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"withdraw",amount:t,description:`Withdrawal to ${s}`,date:new Date,status:"completed",reference:`WTH_${Date.now()}`,currency:n,fee:0};r(u=>({balances:u.balances.map(h=>h.currency===n?{...h,available:a,total:c}:h),transactions:[l,...u.transactions],isLoading:!1,error:null}));try{const{data:{user:u}}=await D.auth.getUser();u&&(await D.from("wallets").upsert({user_id:u.id,currency:n,available_balance:a,reserved_balance:o.reserved,updated_at:new Date().toISOString()},{onConflict:"user_id,currency"}),await D.from("wallet_transactions").insert({user_id:u.id,type:l.type,currency:l.currency,amount:l.amount,status:l.status,reference:l.reference,description:l.description,created_at:new Date().toISOString()}))}catch(u){console.error("âŒ Failed to persist withdrawal:",u)}return console.log("âœ… Withdrawal successful:",t,n),l}catch(i){const o=i instanceof Error?i.message:"Failed to withdraw funds";throw r({isLoading:!1,error:o}),i}},makePrediction:async(t,n,s,i="USD")=>{r({isLoading:!0,error:null});try{if(isNaN(t)||t<=0)throw new Error("Please enter a valid amount");const a=e().balances.find(f=>f.currency===i);if(!a||a.available<t)throw new Error("Insufficient funds");const c=a.available-t,l=a.reserved+t,u=c+l,h={id:`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"bet_lock",amount:t,description:n,date:new Date,status:"completed",reference:`PRED_${Date.now()}`,currency:i,fee:0,predictionId:s};r(f=>({balances:f.balances.map(p=>p.currency===i?{...p,available:c,reserved:l,total:u}:p),transactions:[h,...f.transactions],isLoading:!1,error:null}));try{const{data:{user:f}}=await D.auth.getUser();f&&(await D.from("wallets").upsert({user_id:f.id,currency:i,available_balance:c,reserved_balance:l,updated_at:new Date().toISOString()},{onConflict:"user_id,currency"}),await D.from("wallet_transactions").insert({user_id:f.id,type:h.type,currency:h.currency,amount:h.amount,status:h.status,reference:h.reference,description:h.description,created_at:new Date().toISOString()}))}catch(f){console.error("âŒ Failed to persist prediction lock:",f)}return console.log("âœ… Prediction made successfully:",t,i),h}catch(o){const a=o instanceof Error?o.message:"Failed to make prediction";throw r({isLoading:!1,error:a}),o}},recordWin:async(t,n,s,i="USD")=>{r({isLoading:!0,error:null});try{const a=e().balances.find(f=>f.currency===i),c=(a?.available||0)+t,l=Math.max(0,(a?.reserved||0)-t),u=c+l,h={id:`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"win",amount:t,description:n,date:new Date,status:"completed",reference:`WIN_${Date.now()}`,currency:i,fee:0,predictionId:s};r(f=>({balances:f.balances.map(p=>p.currency===i?{...p,available:c,reserved:l,total:u}:p),transactions:[h,...f.transactions],isLoading:!1,error:null}));try{const{data:{user:f}}=await D.auth.getUser();f&&(await D.from("wallets").upsert({user_id:f.id,currency:i,available_balance:c,reserved_balance:l,updated_at:new Date().toISOString()},{onConflict:"user_id,currency"}),await D.from("wallet_transactions").insert({user_id:f.id,type:"bet_release",currency:h.currency,amount:h.amount,status:h.status,reference:h.reference,description:h.description,prediction_id:s,created_at:new Date().toISOString()}))}catch(f){console.error("âŒ Failed to persist win:",f)}return console.log("âœ… Win recorded successfully:",t,i),h}catch(o){const a=o instanceof Error?o.message:"Failed to record win";throw r({isLoading:!1,error:a}),o}},recordLoss:async(t,n,s,i="USD")=>{r({isLoading:!0,error:null});try{const a=e().balances.find(h=>h.currency===i),c=Math.max(0,(a?.reserved||0)-t),l=(a?.available||0)+c,u={id:`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"loss",amount:t,description:n,date:new Date,status:"completed",reference:`LOSS_${Date.now()}`,currency:i,fee:0,predictionId:s};r(h=>({balances:h.balances.map(f=>f.currency===i?{...f,reserved:c,total:l}:f),transactions:[u,...h.transactions],isLoading:!1,error:null}));try{const{data:{user:h}}=await D.auth.getUser();h&&(await D.from("wallets").upsert({user_id:h.id,currency:i,available_balance:a?.available||0,reserved_balance:c,updated_at:new Date().toISOString()},{onConflict:"user_id,currency"}),await D.from("wallet_transactions").insert({user_id:h.id,type:"loss",currency:u.currency,amount:u.amount,status:u.status,reference:u.reference,description:u.description,prediction_id:s,created_at:new Date().toISOString()}))}catch(h){console.error("âŒ Failed to persist loss:",h)}return console.log("âœ… Loss recorded successfully:",t,i),u}catch(o){const a=o instanceof Error?o.message:"Failed to record loss";throw r({isLoading:!1,error:a}),o}},transferFunds:async(t,n,s,i="USD")=>{r({isLoading:!0,error:null});try{if(isNaN(t)||t<=0)throw new Error("Please enter a valid amount");const a=e().balances.find(h=>h.currency===i);if(!a||a.available<t)throw new Error("Insufficient funds");const c=a.available-t,l=c+a.reserved,u={id:`tx_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,type:"transfer_out",amount:t,description:s||`Transfer to ${n}`,date:new Date,status:"completed",reference:`TRF_${Date.now()}`,currency:i,fee:0,toUser:n};r(h=>({balances:h.balances.map(f=>f.currency===i?{...f,available:c,total:l}:f),transactions:[u,...h.transactions],isLoading:!1,error:null}));try{const{data:{user:h}}=await D.auth.getUser();h&&(await D.from("wallets").upsert({user_id:h.id,currency:i,available_balance:c,reserved_balance:a.reserved,updated_at:new Date().toISOString()},{onConflict:"user_id,currency"}),await D.from("wallet_transactions").insert({user_id:h.id,type:u.type,currency:u.currency,amount:u.amount,status:u.status,reference:u.reference,description:u.description,to_user:n,created_at:new Date().toISOString()}))}catch(h){console.error("âŒ Failed to persist transfer:",h)}return console.log("âœ… Transfer successful:",t,i),u}catch(o){const a=o instanceof Error?o.message:"Failed to transfer funds";throw r({isLoading:!1,error:a}),o}},getBalance:(t="USD")=>e().balances.find(i=>i.currency===t)?.available||0,getTransactionHistory:t=>{let s=[...e().transactions];return t?.type&&(s=s.filter(i=>i.type===t.type)),t?.currency&&(s=s.filter(i=>i.currency===t.currency)),t?.limit&&(s=s.slice(0,t.limit)),s},clearError:()=>{r({error:null})}}));const ao=new Map,os=r=>{const e=ao.get(r);return e?Object.fromEntries(Object.entries(e.stores).map(([t,n])=>[t,n.getState()])):{}},db=(r,e,t)=>{if(r===void 0)return{type:"untracked",connection:e.connect(t)};const n=ao.get(t.name);if(n)return{type:"tracked",store:r,...n};const s={connection:e.connect(t),stores:{}};return ao.set(t.name,s),{type:"tracked",store:r,...s}},hb=(r,e={})=>(t,n,s)=>{const{enabled:i,anonymousActionType:o,store:a,...c}=e;let l;try{l=(i??!1)&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!l)return r(t,n,s);const{connection:u,...h}=db(a,l,c);let f=!0;s.setState=(g,m,x)=>{const b=t(g,m);if(!f)return b;const v=x===void 0?{type:o||"anonymous"}:typeof x=="string"?{type:x}:x;return a===void 0?(u?.send(v,n()),b):(u?.send({...v,type:`${a}/${v.type}`},{...os(c.name),[a]:s.getState()}),b)};const p=(...g)=>{const m=f;f=!1,t(...g),f=m},w=r(s.setState,n,s);if(h.type==="untracked"?u?.init(w):(h.stores[h.store]=s,u?.init(Object.fromEntries(Object.entries(h.stores).map(([g,m])=>[g,g===h.store?w:m.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let g=!1;const m=s.dispatch;s.dispatch=(...x)=>{m(...x)}}return u.subscribe(g=>{var m;switch(g.type){case"ACTION":if(typeof g.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return Pi(g.payload,x=>{if(x.type==="__setState"){if(a===void 0){p(x.state);return}Object.keys(x.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const b=x.state[a];if(b==null)return;JSON.stringify(s.getState())!==JSON.stringify(b)&&p(b);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(x)});case"DISPATCH":switch(g.payload.type){case"RESET":return p(w),a===void 0?u?.init(s.getState()):u?.init(os(c.name));case"COMMIT":if(a===void 0){u?.init(s.getState());return}return u?.init(os(c.name));case"ROLLBACK":return Pi(g.state,x=>{if(a===void 0){p(x),u?.init(s.getState());return}p(x[a]),u?.init(os(c.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return Pi(g.state,x=>{if(a===void 0){p(x);return}JSON.stringify(s.getState())!==JSON.stringify(x[a])&&p(x[a])});case"IMPORT_STATE":{const{nextLiftedState:x}=g.payload,b=(m=x.computedStates.slice(-1)[0])==null?void 0:m.state;if(!b)return;p(a===void 0?b:b[a]),u?.send(null,x);return}case"PAUSE_RECORDING":return f=!f}return}}),w},ok=hb,Pi=(r,e)=>{let t;try{t=JSON.parse(r)}catch(n){console.error("[zustand devtools middleware] Could not parse the received json",n)}t!==void 0&&e(t)};function wd(r,e){let t;try{t=r()}catch{return}return{getItem:s=>{var i;const o=c=>c===null?null:JSON.parse(c,e?.reviver),a=(i=t.getItem(s))!=null?i:null;return a instanceof Promise?a.then(o):o(a)},setItem:(s,i)=>t.setItem(s,JSON.stringify(i,e?.replacer)),removeItem:s=>t.removeItem(s)}}const On=r=>e=>{try{const t=r(e);return t instanceof Promise?t:{then(n){return On(n)(t)},catch(n){return this}}}catch(t){return{then(n){return this},catch(n){return On(n)(t)}}}},fb=(r,e)=>(t,n,s)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:m=>m,version:0,merge:(m,x)=>({...x,...m}),...e},o=!1;const a=new Set,c=new Set;let l;try{l=i.getStorage()}catch{}if(!l)return r((...m)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...m)},n,s);const u=On(i.serialize),h=()=>{const m=i.partialize({...n()});let x;const b=u({state:m,version:i.version}).then(v=>l.setItem(i.name,v)).catch(v=>{x=v});if(x)throw x;return b},f=s.setState;s.setState=(m,x)=>{f(m,x),h()};const p=r((...m)=>{t(...m),h()},n,s);let w;const g=()=>{var m;if(!l)return;o=!1,a.forEach(b=>b(n()));const x=((m=i.onRehydrateStorage)==null?void 0:m.call(i,n()))||void 0;return On(l.getItem.bind(l))(i.name).then(b=>{if(b)return i.deserialize(b)}).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return i.migrate(b.state,b.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return b.state}).then(b=>{var v;return w=i.merge(b,(v=n())!=null?v:p),t(w,!0),h()}).then(()=>{x?.(w,void 0),o=!0,c.forEach(b=>b(w))}).catch(b=>{x?.(void 0,b)})};return s.persist={setOptions:m=>{i={...i,...m},m.getStorage&&(l=m.getStorage())},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>g(),hasHydrated:()=>o,onHydrate:m=>(a.add(m),()=>{a.delete(m)}),onFinishHydration:m=>(c.add(m),()=>{c.delete(m)})},g(),w||p},pb=(r,e)=>(t,n,s)=>{let i={storage:wd(()=>localStorage),partialize:g=>g,version:0,merge:(g,m)=>({...m,...g}),...e},o=!1;const a=new Set,c=new Set;let l=i.storage;if(!l)return r((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),t(...g)},n,s);const u=()=>{const g=i.partialize({...n()});return l.setItem(i.name,{state:g,version:i.version})},h=s.setState;s.setState=(g,m)=>{h(g,m),u()};const f=r((...g)=>{t(...g),u()},n,s);s.getInitialState=()=>f;let p;const w=()=>{var g,m;if(!l)return;o=!1,a.forEach(b=>{var v;return b((v=n())!=null?v:f)});const x=((m=i.onRehydrateStorage)==null?void 0:m.call(i,(g=n())!=null?g:f))||void 0;return On(l.getItem.bind(l))(i.name).then(b=>{if(b)if(typeof b.version=="number"&&b.version!==i.version){if(i.migrate)return[!0,i.migrate(b.state,b.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,b.state];return[!1,void 0]}).then(b=>{var v;const[E,_]=b;if(p=i.merge(_,(v=n())!=null?v:f),t(p,!0),E)return u()}).then(()=>{x?.(p,void 0),p=n(),o=!0,c.forEach(b=>b(p))}).catch(b=>{x?.(void 0,b)})};return s.persist={setOptions:g=>{i={...i,...g},g.storage&&(l=g.storage)},clearStorage:()=>{l?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>w(),hasHydrated:()=>o,onHydrate:g=>(a.add(g),()=>{a.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||w(),p||f},mb=(r,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?fb(r,e):pb(r,e),bd=mb,ra=Vs()(bd((r,e)=>({notifications:[],unreadCount:0,toasts:[],settings:{predictionOutcomes:!0,comments:!0,marketClosing:!0,payouts:!0,pushNotifications:!0,emailNotifications:!1,frequency:"immediate"},addNotification:t=>{const n={...t,id:crypto.randomUUID(),createdAt:new Date().toISOString(),read:!1};r(s=>({notifications:[n,...s.notifications],unreadCount:s.unreadCount+1})),["prediction_outcome","payout"].includes(n.type)&&e().addToast({type:"success",title:n.title,message:n.message,duration:5e3}),e().settings.pushNotifications&&e().sendPushNotification(n)},markAsRead:t=>{r(n=>({notifications:n.notifications.map(s=>s.id===t?{...s,read:!0}:s),unreadCount:Math.max(0,n.unreadCount-1)}))},markAllAsRead:()=>{r(t=>({notifications:t.notifications.map(n=>({...n,read:!0})),unreadCount:0}))},deleteNotification:t=>{r(n=>{const s=n.notifications.find(o=>o.id===t),i=s&&!s.read;return{notifications:n.notifications.filter(o=>o.id!==t),unreadCount:i?Math.max(0,n.unreadCount-1):n.unreadCount}})},clearAllNotifications:()=>{r({notifications:[],unreadCount:0})},updateSettings:t=>{r(n=>({settings:{...n.settings,...t}}))},addToast:t=>{const n={...t,id:crypto.randomUUID()};r(s=>({toasts:[...s.toasts,n]}))},removeToast:t=>{r(n=>({toasts:n.toasts.filter(s=>s.id!==t)}))},clearToasts:()=>{r({toasts:[]})},requestPermission:async()=>"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.warn("This browser does not support notifications"),!1),subscribeToPush:async()=>{if(!await e().requestPermission())throw new Error("Notification permission denied");console.log("Push notifications subscribed"),r(n=>({settings:{...n.settings,pushNotifications:!0}}))},unsubscribeFromPush:async()=>{console.log("Push notifications unsubscribed"),r(t=>({settings:{...t.settings,pushNotifications:!1}}))},sendPushNotification:t=>{if(!("Notification"in window)||Notification.permission!=="granted")return;const n={body:t.message,icon:"/icon-192x192.png",badge:"/icon-badge.png",tag:t.id,renotify:!1},s=new Notification(t.title,n);s.onclick=()=>{window.focus(),s.close(),t.data?.predictionId&&(window.location.href=`/predictions/${t.data.predictionId}`)},setTimeout(()=>{s.close()},5e3)},notifySettlementReady:(t,n)=>{const{addNotification:s,addToast:i}=e();s({type:"settlement_ready",title:"Settlement Required",message:`"${n}" needs your validation. Tap to review the outcome.`,data:{predictionId:t,action:"validate_settlement"}}),i({type:"info",title:"âš–ï¸ Settlement Ready",message:`Tap to validate the outcome of "${n}"`,duration:8e3})},notifySettlementCompleted:(t,n,s,i)=>{const{addNotification:o,addToast:a}=e(),c=s==="won"?`You won ${i?`$${i}`:""} on "${n}"!`:`Settlement completed for "${n}". Better luck next time!`;o({type:"settlement_completed",title:s==="won"?"You Won!":"Settlement Complete",message:c,data:{predictionId:t,outcome:s,payout:i}}),a({type:s==="won"?"success":"info",title:s==="won"?"ðŸŽ‰ You Won!":"ðŸ“‹ Settlement Complete",message:c,duration:s==="won"?1e4:6e3})},showSuccess:(t,n)=>{e().addToast({type:"success",title:n||"Success",message:t,duration:3e3})},showError:(t,n)=>{e().addToast({type:"error",title:n||"Error",message:t,duration:5e3})}}),{name:"fanclubz-notifications",partialize:r=>({notifications:r.notifications,settings:r.settings})})),Ot=(r,e)=>{ra.getState().addToast({type:"success",title:e||"Success",message:r,duration:3e3})},Nt=(r,e)=>{ra.getState().addToast({type:"error",title:e||"Error",message:r,duration:5e3})},co="auth:returnTo",lo=r=>{try{const e=r??`${window.location.pathname}${window.location.search}${window.location.hash}`;sessionStorage.setItem(co,e),console.log("ðŸ“Œ Captured return URL:",e)}catch(e){console.warn("Failed to capture return URL:",e)}},ak=()=>{try{const r=sessionStorage.getItem(co);return sessionStorage.removeItem(co),console.log("ðŸ“ Consumed return URL:",r),r}catch{return null}},ck=r=>!r||!r.startsWith("/")?"/":r,$t=r=>{if(!r)return null;const e=r.user_metadata||{},t=r.app_metadata||{};let n="",s="",i="";if(e.full_name){const c=e.full_name.split(" ");n=c[0]||"",s=c.slice(1).join(" ")||""}else n=e.firstName||e.first_name||e.given_name||"User",s=e.lastName||e.last_name||e.family_name||"";e.avatar_url?i=e.avatar_url:e.picture?i=e.picture:e.photo&&(i=e.photo);const o=e.username||e.preferred_username||e.full_name||r.email?.split("@")[0]||"",a=e.full_name||`${n} ${s}`.trim();return{id:r.id,email:r.email||"",firstName:n,lastName:s,phone:r.phone,avatar:i,avatar_url:i,provider:t.provider||"email",bio:e.bio,totalEarnings:e.totalEarnings||0,totalInvested:e.totalInvested||0,winRate:e.winRate||0,activePredictions:e.activePredictions||0,totalPredictions:e.totalPredictions||0,rank:e.rank||0,level:e.level||"New Predictor",createdAt:r.created_at||new Date().toISOString(),username:o,full_name:a,is_verified:!!(e.is_verified||e.verified)}};let Fc=!1,Ii=!1,zc="",Vc=0;const ye=Vs()(bd((r,e)=>({isAuthenticated:!1,user:null,token:null,loading:!1,initialized:!1,lastAuthCheck:0,initializeAuth:async()=>{const t=e(),n=Date.now();if(Ii){console.log("ðŸ”„ Auth initialization already in progress, waiting...");return}if(t.initialized&&n-t.lastAuthCheck<3e4){console.log("ðŸ”„ Auth recently checked, skipping initialization");return}if(t.isAuthenticated&&t.user&&t.token&&n-t.lastAuthCheck<3e5){t.initialized||console.log("âœ… Using cached auth state for:",t.user.firstName),r({loading:!1,initialized:!0,lastAuthCheck:n});return}if(t.loading){console.log("ðŸ”„ Auth check already in progress...");return}Ii=!0,r({loading:!0,lastAuthCheck:n});try{console.log("ðŸ” Initializing authentication...");const{data:{session:s},error:i}=await D.auth.getSession();if(i){console.log("âš ï¸ Session check error:",i.message),r({isAuthenticated:!1,user:null,token:null,loading:!1,initialized:!0,lastAuthCheck:n});return}if(s?.user){const o=$t(s.user);t.initialized||console.log("âœ… Found active session for:",o?.firstName),r({isAuthenticated:!0,user:o,token:s.access_token,loading:!1,initialized:!0,lastAuthCheck:n})}else t.initialized||console.log("â„¹ï¸ No active session found"),r({isAuthenticated:!1,user:null,token:null,loading:!1,initialized:!0,lastAuthCheck:n})}catch(s){console.error("âŒ Auth initialization error:",s.message),r({isAuthenticated:!1,user:null,token:null,loading:!1,initialized:!0,lastAuthCheck:n})}finally{Ii=!1}},login:async(t,n)=>{r({loading:!0});try{console.log("ðŸ”‘ Logging in user:",t);const{data:s,error:i}=await Gr.signIn(t,n);if(i){console.error("âŒ Login error:",i.message);let c="Login failed. Please check your credentials.";throw i.message.includes("Invalid login credentials")?c="Invalid email or password. Please try again.":i.message.includes("Email not confirmed")&&(c="Please check your email and click the confirmation link."),r({loading:!1}),Nt(c),new Error(c)}const o=s?.user,a=s?.session;if(o&&a){const c=$t(o);console.log("âœ… Login successful for:",c?.firstName),r({isAuthenticated:!0,user:c,token:a.access_token,loading:!1,initialized:!0,lastAuthCheck:Date.now()}),Ot(`Welcome back, ${c?.firstName}!`)}}catch(s){throw console.error("âŒ Login exception:",s.message),r({loading:!1}),s}},register:async(t,n,s,i)=>{r({loading:!0});try{if(console.log("ðŸ“ Registering user:",t),n.length<6)throw new Error("Password must be at least 6 characters long");const o={data:{firstName:s,lastName:i,first_name:s,last_name:i,full_name:`${s} ${i}`}},{data:a,error:c}=await Gr.signUp(t,n,o);if(c){console.error("âŒ Registration error:",c.message);let u="Registration failed. Please try again.";throw c.message.includes("User already registered")?u="An account with this email already exists. Please sign in instead.":c.message.includes("Password should be at least")&&(u="Password must be at least 6 characters long."),r({loading:!1}),Nt(u),new Error(u)}const l=a?.user;if(l){const u=$t(l);console.log("âœ… Registration successful for:",u?.firstName),a?.session?(r({isAuthenticated:!0,user:u,token:a.session.access_token,loading:!1,initialized:!0,lastAuthCheck:Date.now()}),Ot(`Welcome to Fan Club Z, ${u?.firstName}!`)):(r({isAuthenticated:!0,user:u,token:null,loading:!1,initialized:!0,lastAuthCheck:Date.now()}),Ot(`Welcome to Fan Club Z, ${u?.firstName}! Please check your email to verify your account.`))}}catch(o){throw console.error("âŒ Registration exception:",o.message),r({loading:!1}),o}},loginWithOAuth:async t=>{r({loading:!0});try{console.log(`ðŸ”‘ Starting ${t} OAuth login...`);const n=`${window.location.pathname}${window.location.search}${window.location.hash}`;lo(n);const{data:s,error:i}=await Gr.signInWithOAuth(t,{next:n});if(i)throw console.error(`âŒ ${t} OAuth error:`,i.message),r({loading:!1}),Nt(`${t} sign-in failed. Please try again.`),new Error(i.message);console.log(`âœ… ${t} OAuth initiated, redirecting...`)}catch(n){throw console.error(`âŒ ${t} OAuth exception:`,n.message),r({loading:!1}),n}},handleOAuthCallback:async()=>{try{console.log("ðŸ”„ Handling OAuth callback...");const{data:t,error:n}=await D.auth.getSession();if(n)throw console.error("âŒ OAuth callback error:",n.message),Nt("Authentication failed. Please try again."),new Error(n.message);if(t.session?.user){const s=$t(t.session.user);console.log("âœ… OAuth authentication successful for:",s?.firstName),r({isAuthenticated:!0,user:s,token:t.session.access_token,loading:!1,initialized:!0,lastAuthCheck:Date.now()});const i=s?.provider||"email",o=i.charAt(0).toUpperCase()+i.slice(1);return Ot(`Welcome ${s?.firstName}! Signed in with ${o}.`),s}else throw new Error("No user session found after OAuth callback")}catch(t){throw console.error("âŒ OAuth callback exception:",t.message),r({loading:!1}),t}},logout:async()=>{r({loading:!0});try{console.log("ðŸšª Logging out...");const{error:t}=await Gr.signOut();t&&console.error("âŒ Logout error:",t.message),r({isAuthenticated:!1,user:null,token:null,loading:!1,initialized:!0,lastAuthCheck:0}),Ot("Signed out successfully")}catch(t){console.error("âŒ Logout exception:",t.message),r({isAuthenticated:!1,user:null,token:null,loading:!1,initialized:!0,lastAuthCheck:0})}},updateProfile:async t=>{r({loading:!0});try{const n=e().user;if(!n)throw new Error("No user logged in");console.log("ðŸ“ Updating profile...");const{data:s,error:i}=await D.auth.updateUser({data:{firstName:t.firstName||n.firstName,lastName:t.lastName||n.lastName,bio:t.bio!==void 0?t.bio:n.bio}});if(i)throw new Error(i.message);if(s?.user){const o=$t(s.user);r({user:o,loading:!1,lastAuthCheck:Date.now()}),Ot("Profile updated successfully!")}}catch(n){throw console.error("âŒ Profile update error:",n.message),r({loading:!1}),Nt(n.message||"Failed to update profile"),n}},uploadAvatar:async t=>{const n=e();if(!n.user)throw new Error("No user logged in");const s=n.user.id,i=t.name.split(".").pop()?.toLowerCase()||"jpg",o=`${s}/${Date.now()}.${i}`,{data:a,error:c}=await D.storage.from("avatars").upload(o,t,{cacheControl:"3600",upsert:!0,contentType:t.type});if(c)throw Nt("Failed to upload image."),c;const{data:l}=D.storage.from("avatars").getPublicUrl(a.path),u=l.publicUrl,{data:h,error:f}=await D.auth.updateUser({data:{avatar_url:u}});if(f)throw Nt("Failed to save avatar to profile."),f;await lb.users.updateProfile(s,{avatar_url:u});const p=h?.user?$t(h.user):null;return p&&r({user:p,lastAuthCheck:Date.now()}),Ot("Profile photo updated."),u}}),{name:"fanclubz-auth-storage",storage:wd(()=>localStorage),partialize:r=>({isAuthenticated:r.isAuthenticated,user:r.user,token:r.token,initialized:r.initialized,lastAuthCheck:r.lastAuthCheck}),version:5}));typeof window<"u"&&!Fc&&(Fc=!0,console.log("ðŸ”§ Setting up auth state listener..."),D.auth.onAuthStateChange((r,e)=>{const t=Date.now();if(!(zc===r&&t-Vc<1e3)){if(zc=r,Vc=t,console.log("ðŸ”„ Auth state change:",r),r==="SIGNED_OUT")console.log("ðŸ”“ User signed out"),ye.setState({isAuthenticated:!1,user:null,token:null,lastAuthCheck:0});else if(r==="TOKEN_REFRESHED"&&e?.user){console.log("ðŸ”„ Token refreshed");const n=$t(e.user);ye.setState({user:n,token:e.access_token,lastAuthCheck:t})}}}));const qc=()=>{},gb=[],yb=()=>({initializeLikes:qc,toggleLike:qc,checkIfLiked:()=>!1,getLikeCount:()=>0,likes:gb}),na={view_wallet:{title:"Sign in to view your wallet",description:"See your balance, deposits, and transactions.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.view_wallet"},view_my_bets:{title:"Sign in to view your predictions",description:"Track your predictions and manage your portfolio.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.view_my_bets"},edit_profile:{title:"Sign in to edit your profile",description:"Customize your handle and avatar.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.edit_profile"},place_prediction:{title:"Sign in to place a prediction",description:"Stake, share, and compete on the leaderboard.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.place_prediction"},comment_prediction:{title:"Sign in to comment",description:"Join the discussion and share your take.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.comment_prediction"},like_prediction:{title:"Sign in to like predictions",description:"Save your favorites and get better recommendations.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.like_prediction"},add_funds:{title:"Sign in to add funds",description:"Securely top up your balance to start predicting.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.add_funds"},withdraw_funds:{title:"Sign in to withdraw funds",description:"For your security, we need to verify your account.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.withdraw_funds"},follow_creator:{title:"Follow creators you like",description:"Get alerts when your favorites make a move.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.follow_creator"},share_private:{title:"Share privately",description:"Keep your insights within your circle.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.share_private"},view_settlements:{title:"Sign in to view settlements",description:"See outcomes and claim rewards on resolved markets.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.view_settlements"}},wb={title:"Sign in",description:"Continue to unlock this action.",primaryCta:"Continue with Google",secondaryCta:"Continue with Email",analyticsKey:"auth.fallback"};Object.entries(na).reduce((r,[e,t])=>({...r,[e]:{key:e,title:t.title,description:t.description,primaryCta:"google",secondaryCta:"email_link",analyticsEvent:t.analyticsKey}}),{});const sa="fcz.pendingAuth",bb="fcz.returnUrl";let Vt={isOpen:!1,pendingIntent:null,intentMeta:null,payload:void 0,resolver:null};const uo=new Set,vb=()=>{uo.forEach(r=>r())},ia=r=>{Vt={...Vt,...r},vb()},xb=(r,e)=>{try{sessionStorage.setItem(sa,JSON.stringify({intent:r,payload:e}));const t=window.location.pathname+window.location.search;console.log("ðŸ“Œ Storing return URL:",t),sessionStorage.setItem(bb,t),console.log("âœ… Return URL stored successfully")}catch(t){console.warn("Failed to persist pending auth:",t)}},_b=()=>{try{const r=sessionStorage.getItem(sa);if(r)return JSON.parse(r)}catch(r){console.warn("Failed to get persisted auth:",r)}return null},Eb=()=>{const[,r]=y.useState({});return y.useEffect(()=>{const e=()=>r({});return uo.add(e),()=>{uo.delete(e)}},[]),{isOpen:Vt.isOpen,pendingIntent:Vt.pendingIntent,intentMeta:Vt.intentMeta,payload:Vt.payload}},lk=r=>new Promise(e=>{const t=na[r.intent],n=r.metaOverride?{...t,...r.metaOverride}:t;xb(r.intent,r.payload),ia({isOpen:!0,pendingIntent:r.intent,intentMeta:n,payload:r.payload,resolver:e})}),Br=r=>{const{resolver:e,pendingIntent:t,payload:n}=Vt;try{sessionStorage.removeItem(sa)}catch(s){console.warn("Failed to clear auth intent:",s)}ia({isOpen:!1,pendingIntent:null,intentMeta:null,payload:void 0,resolver:null}),r.status==="success"&&t&&t!=="edit_profile"&&Sb(t,n),e&&e(r)},Sb=(r,e)=>{switch(r){case"view_wallet":break;case"view_my_bets":break;case"comment_prediction":setTimeout(()=>{const t=document.querySelector(".comment-textarea");t&&t.focus()},100);break;case"place_prediction":e?.predictionId&&setTimeout(()=>{const t=document.querySelector('[data-qa="bet-amount"]');t&&t.focus()},100);break}},kb=()=>{const r=_b();return r?(ia({pendingIntent:r.intent,payload:r.payload}),r):null},vd=y.createContext(void 0),Cb=()=>{const r=y.useContext(vd);if(r===void 0)throw new Error("useSupabase must be used within a SupabaseProvider");return r},xd=({children:r})=>{const e={supabase:D};return d.jsx(vd.Provider,{value:e,children:r})},_d=y.createContext(void 0),Xs=()=>{const r=y.useContext(_d);if(r===void 0)throw new Error("useAuthSession must be used within an AuthSessionProvider");return r},Ed=({children:r})=>{const{supabase:e}=Cb(),[t,n]=y.useState(null),[s,i]=y.useState(null),[o,a]=y.useState(!0),[c,l]=y.useState(!1);y.useEffect(()=>{(async()=>{try{const{data:{session:b},error:v}=await e.auth.getSession();v?console.error("Error getting initial session:",v):(i(b),n(b?.user??null))}catch(b){console.error("Exception getting initial session:",b)}finally{a(!1),l(!0)}})();const{data:{subscription:x}}=e.auth.onAuthStateChange(async(b,v)=>{switch(console.log("ðŸ” Auth state change:",b,v?.user?.email),console.log("ðŸ” Full auth event details:",{event:b,session:v}),b){case"SIGNED_IN":console.log("âœ… User signed in successfully");break;case"SIGNED_OUT":console.log("ðŸ‘‹ User signed out");break;case"TOKEN_REFRESHED":console.log("ðŸ”„ Token refreshed");break;case"PASSWORD_RECOVERY":console.log("ðŸ”‘ Password recovery initiated");break;default:console.log(`ðŸ” Auth event: ${b}`)}i(v),n(v?.user??null),a(!1)});return()=>{x.unsubscribe()}},[e]);const g={user:t,session:s,loading:o,initialized:c,isAuthenticated:!!t,signIn:async(m,x)=>{try{const{error:b}=await e.auth.signInWithPassword({email:m,password:x});return{error:b}}catch(b){return{error:{message:b.message||"An unexpected error occurred"}}}},signUp:async(m,x,b={})=>{try{const{error:v}=await e.auth.signUp({email:m,password:x,options:{data:b,emailRedirectTo:"https://app.fanclubz.app/"}});return{error:v}}catch(v){return{error:{message:v.message||"An unexpected error occurred"}}}},signOut:async()=>{try{const{error:m}=await e.auth.signOut();return{error:m}}catch(m){return{error:{message:m.message||"An unexpected error occurred"}}}},signInWithGoogle:async()=>{try{lo();const m=`${window.location.pathname}${window.location.search}${window.location.hash}`,x=m,b=Bc(x);console.log("ðŸ” Google OAuth redirect URL:",b),console.log("ðŸ” Current path:",m),console.log("ðŸ” Next param:",x);const{error:v}=await Gr.signInWithOAuth("google",{next:x});return v&&console.error("ðŸ” Google OAuth error:",v),{error:v}}catch(m){return console.error("ðŸ” Google OAuth exception:",m),{error:{message:m.message||"An unexpected error occurred"}}}},signInWithEmailLink:async m=>{try{lo();const b=`${window.location.pathname}${window.location.search}${window.location.hash}`,v=Bc(b),{error:E}=await e.auth.signInWithOtp({email:m,options:{emailRedirectTo:v}});return{error:E}}catch(x){return{error:{message:x.message||"An unexpected error occurred"}}}}};return d.jsx(_d.Provider,{value:g,children:r})},Me=Object.create(null);Me.open="0";Me.close="1";Me.ping="2";Me.pong="3";Me.message="4";Me.upgrade="5";Me.noop="6";const ws=Object.create(null);Object.keys(Me).forEach(r=>{ws[Me[r]]=r});const ho={type:"error",data:"parser error"},Sd=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",kd=typeof ArrayBuffer=="function",Cd=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r&&r.buffer instanceof ArrayBuffer,oa=({type:r,data:e},t,n)=>Sd&&e instanceof Blob?t?n(e):Wc(e,n):kd&&(e instanceof ArrayBuffer||Cd(e))?t?n(e):Wc(new Blob([e]),n):n(Me[r]+(e||"")),Wc=(r,e)=>{const t=new FileReader;return t.onload=function(){const n=t.result.split(",")[1];e("b"+(n||""))},t.readAsDataURL(r)};function Hc(r){return r instanceof Uint8Array?r:r instanceof ArrayBuffer?new Uint8Array(r):new Uint8Array(r.buffer,r.byteOffset,r.byteLength)}let ji;function Tb(r,e){if(Sd&&r.data instanceof Blob)return r.data.arrayBuffer().then(Hc).then(e);if(kd&&(r.data instanceof ArrayBuffer||Cd(r.data)))return e(Hc(r.data));oa(r,!1,t=>{ji||(ji=new TextEncoder),e(ji.encode(t))})}const Gc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Kr=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let r=0;r<Gc.length;r++)Kr[Gc.charCodeAt(r)]=r;const Ab=r=>{let e=r.length*.75,t=r.length,n,s=0,i,o,a,c;r[r.length-1]==="="&&(e--,r[r.length-2]==="="&&e--);const l=new ArrayBuffer(e),u=new Uint8Array(l);for(n=0;n<t;n+=4)i=Kr[r.charCodeAt(n)],o=Kr[r.charCodeAt(n+1)],a=Kr[r.charCodeAt(n+2)],c=Kr[r.charCodeAt(n+3)],u[s++]=i<<2|o>>4,u[s++]=(o&15)<<4|a>>2,u[s++]=(a&3)<<6|c&63;return l},Pb=typeof ArrayBuffer=="function",aa=(r,e)=>{if(typeof r!="string")return{type:"message",data:Td(r,e)};const t=r.charAt(0);return t==="b"?{type:"message",data:Ib(r.substring(1),e)}:ws[t]?r.length>1?{type:ws[t],data:r.substring(1)}:{type:ws[t]}:ho},Ib=(r,e)=>{if(Pb){const t=Ab(r);return Td(t,e)}else return{base64:!0,data:r}},Td=(r,e)=>{switch(e){case"blob":return r instanceof Blob?r:new Blob([r]);case"arraybuffer":default:return r instanceof ArrayBuffer?r:r.buffer}},Ad=String.fromCharCode(30),jb=(r,e)=>{const t=r.length,n=new Array(t);let s=0;r.forEach((i,o)=>{oa(i,!1,a=>{n[o]=a,++s===t&&e(n.join(Ad))})})},Ob=(r,e)=>{const t=r.split(Ad),n=[];for(let s=0;s<t.length;s++){const i=aa(t[s],e);if(n.push(i),i.type==="error")break}return n};function Nb(){return new TransformStream({transform(r,e){Tb(r,t=>{const n=t.length;let s;if(n<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,n);else if(n<65536){s=new Uint8Array(3);const i=new DataView(s.buffer);i.setUint8(0,126),i.setUint16(1,n)}else{s=new Uint8Array(9);const i=new DataView(s.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(n))}r.data&&typeof r.data!="string"&&(s[0]|=128),e.enqueue(s),e.enqueue(t)})}})}let Oi;function as(r){return r.reduce((e,t)=>e+t.length,0)}function cs(r,e){if(r[0].length===e)return r.shift();const t=new Uint8Array(e);let n=0;for(let s=0;s<e;s++)t[s]=r[0][n++],n===r[0].length&&(r.shift(),n=0);return r.length&&n<r[0].length&&(r[0]=r[0].slice(n)),t}function Rb(r,e){Oi||(Oi=new TextDecoder);const t=[];let n=0,s=-1,i=!1;return new TransformStream({transform(o,a){for(t.push(o);;){if(n===0){if(as(t)<1)break;const c=cs(t,1);i=(c[0]&128)===128,s=c[0]&127,s<126?n=3:s===126?n=1:n=2}else if(n===1){if(as(t)<2)break;const c=cs(t,2);s=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),n=3}else if(n===2){if(as(t)<8)break;const c=cs(t,8),l=new DataView(c.buffer,c.byteOffset,c.length),u=l.getUint32(0);if(u>Math.pow(2,53-32)-1){a.enqueue(ho);break}s=u*Math.pow(2,32)+l.getUint32(4),n=3}else{if(as(t)<s)break;const c=cs(t,s);a.enqueue(aa(i?c:Oi.decode(c),e)),n=0}if(s===0||s>r){a.enqueue(ho);break}}}})}const Pd=4;function se(r){if(r)return $b(r)}function $b(r){for(var e in se.prototype)r[e]=se.prototype[e];return r}se.prototype.on=se.prototype.addEventListener=function(r,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+r]=this._callbacks["$"+r]||[]).push(e),this};se.prototype.once=function(r,e){function t(){this.off(r,t),e.apply(this,arguments)}return t.fn=e,this.on(r,t),this};se.prototype.off=se.prototype.removeListener=se.prototype.removeAllListeners=se.prototype.removeEventListener=function(r,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+r];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+r],this;for(var n,s=0;s<t.length;s++)if(n=t[s],n===e||n.fn===e){t.splice(s,1);break}return t.length===0&&delete this._callbacks["$"+r],this};se.prototype.emit=function(r){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),t=this._callbacks["$"+r],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,s=t.length;n<s;++n)t[n].apply(this,e)}return this};se.prototype.emitReserved=se.prototype.emit;se.prototype.listeners=function(r){return this._callbacks=this._callbacks||{},this._callbacks["$"+r]||[]};se.prototype.hasListeners=function(r){return!!this.listeners(r).length};const ei=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,t)=>t(e,0))(),ke=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())(),Lb="arraybuffer";function Id(r,...e){return e.reduce((t,n)=>(r.hasOwnProperty(n)&&(t[n]=r[n]),t),{})}const Db=ke.setTimeout,Ub=ke.clearTimeout;function ti(r,e){e.useNativeTimers?(r.setTimeoutFn=Db.bind(ke),r.clearTimeoutFn=Ub.bind(ke)):(r.setTimeoutFn=ke.setTimeout.bind(ke),r.clearTimeoutFn=ke.clearTimeout.bind(ke))}const Bb=1.33;function Mb(r){return typeof r=="string"?Fb(r):Math.ceil((r.byteLength||r.size)*Bb)}function Fb(r){let e=0,t=0;for(let n=0,s=r.length;n<s;n++)e=r.charCodeAt(n),e<128?t+=1:e<2048?t+=2:e<55296||e>=57344?t+=3:(n++,t+=4);return t}function jd(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function zb(r){let e="";for(let t in r)r.hasOwnProperty(t)&&(e.length&&(e+="&"),e+=encodeURIComponent(t)+"="+encodeURIComponent(r[t]));return e}function Vb(r){let e={},t=r.split("&");for(let n=0,s=t.length;n<s;n++){let i=t[n].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}class qb extends Error{constructor(e,t,n){super(e),this.description=t,this.context=n,this.type="TransportError"}}class ca extends se{constructor(e){super(),this.writable=!1,ti(this,e),this.opts=e,this.query=e.query,this.socket=e.socket,this.supportsBinary=!e.forceBase64}onError(e,t,n){return super.emitReserved("error",new qb(e,t,n)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const t=aa(e,this.socket.binaryType);this.onPacket(t)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,t={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(t)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const t=zb(e);return t.length?"?"+t:""}}class Wb extends ca{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(e){this.readyState="pausing";const t=()=>{this.readyState="paused",e()};if(this._polling||!this.writable){let n=0;this._polling&&(n++,this.once("pollComplete",function(){--n||t()})),this.writable||(n++,this.once("drain",function(){--n||t()}))}else t()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const t=n=>{if(this.readyState==="opening"&&n.type==="open"&&this.onOpen(),n.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(n)};Ob(e,this.socket.binaryType).forEach(t),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,jb(e,t=>{this.doWrite(t,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",t=this.query||{};return this.opts.timestampRequests!==!1&&(t[this.opts.timestampParam]=jd()),!this.supportsBinary&&!t.sid&&(t.b64=1),this.createUri(e,t)}}let Od=!1;try{Od=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Hb=Od;function Gb(){}class Kb extends Wb{constructor(e){if(super(e),typeof location<"u"){const t=location.protocol==="https:";let n=location.port;n||(n=t?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||n!==e.port}}doWrite(e,t){const n=this.request({method:"POST",data:e});n.on("success",t),n.on("error",(s,i)=>{this.onError("xhr post error",s,i)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(t,n)=>{this.onError("xhr poll error",t,n)}),this.pollXhr=e}}let gr=class bs extends se{constructor(e,t,n){super(),this.createRequest=e,ti(this,n),this._opts=n,this._method=n.method||"GET",this._uri=t,this._data=n.data!==void 0?n.data:null,this._create()}_create(){var e;const t=Id(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this._opts.xd;const n=this._xhr=this.createRequest(t);try{n.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){n.setDisableHeaderCheck&&n.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&n.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{n.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{n.setRequestHeader("Accept","*/*")}catch{}(e=this._opts.cookieJar)===null||e===void 0||e.addCookies(n),"withCredentials"in n&&(n.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(n.timeout=this._opts.requestTimeout),n.onreadystatechange=()=>{var s;n.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(n.getResponseHeader("set-cookie"))),n.readyState===4&&(n.status===200||n.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof n.status=="number"?n.status:0)},0))},n.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=bs.requestsCount++,bs.requests[this._index]=this)}_onError(e){this.emitReserved("error",e,this._xhr),this._cleanup(!0)}_cleanup(e){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=Gb,e)try{this._xhr.abort()}catch{}typeof document<"u"&&delete bs.requests[this._index],this._xhr=null}}_onLoad(){const e=this._xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};gr.requestsCount=0;gr.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Kc);else if(typeof addEventListener=="function"){const r="onpagehide"in ke?"pagehide":"unload";addEventListener(r,Kc,!1)}}function Kc(){for(let r in gr.requests)gr.requests.hasOwnProperty(r)&&gr.requests[r].abort()}const Zb=function(){const r=Nd({xdomain:!1});return r&&r.responseType!==null}();class Jb extends Kb{constructor(e){super(e);const t=e&&e.forceBase64;this.supportsBinary=Zb&&!t}request(e={}){return Object.assign(e,{xd:this.xd},this.opts),new gr(Nd,this.uri(),e)}}function Nd(r){const e=r.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Hb))return new XMLHttpRequest}catch{}if(!e)try{return new ke[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Rd=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class Yb extends ca{get name(){return"websocket"}doOpen(){const e=this.uri(),t=this.opts.protocols,n=Rd?{}:Id(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(n.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(e,t,n)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;oa(n,this.supportsBinary,i=>{try{this.doWrite(n,i)}catch{}s&&ei(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",t=this.query||{};return this.opts.timestampRequests&&(t[this.opts.timestampParam]=jd()),this.supportsBinary||(t.b64=1),this.createUri(e,t)}}const Ni=ke.WebSocket||ke.MozWebSocket;class Qb extends Yb{createSocket(e,t,n){return Rd?new Ni(e,t,n):t?new Ni(e,t):new Ni(e)}doWrite(e,t){this.ws.send(t)}}class Xb extends ca{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(e){return this.emitReserved("error",e)}this._transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(e=>{const t=Rb(Number.MAX_SAFE_INTEGER,this.socket.binaryType),n=e.readable.pipeThrough(t).getReader(),s=Nb();s.readable.pipeTo(e.writable),this._writer=s.writable.getWriter();const i=()=>{n.read().then(({done:a,value:c})=>{a||(this.onPacket(c),i())}).catch(a=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(e){this.writable=!1;for(let t=0;t<e.length;t++){const n=e[t],s=t===e.length-1;this._writer.write(n).then(()=>{s&&ei(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var e;(e=this._transport)===null||e===void 0||e.close()}}const ev={websocket:Qb,webtransport:Xb,polling:Jb},tv=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,rv=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function fo(r){if(r.length>8e3)throw"URI too long";const e=r,t=r.indexOf("["),n=r.indexOf("]");t!=-1&&n!=-1&&(r=r.substring(0,t)+r.substring(t,n).replace(/:/g,";")+r.substring(n,r.length));let s=tv.exec(r||""),i={},o=14;for(;o--;)i[rv[o]]=s[o]||"";return t!=-1&&n!=-1&&(i.source=e,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=nv(i,i.path),i.queryKey=sv(i,i.query),i}function nv(r,e){const t=/\/{2,9}/g,n=e.replace(t,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&n.splice(0,1),e.slice(-1)=="/"&&n.splice(n.length-1,1),n}function sv(r,e){const t={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(n,s,i){s&&(t[s]=i)}),t}const po=typeof addEventListener=="function"&&typeof removeEventListener=="function",vs=[];po&&addEventListener("offline",()=>{vs.forEach(r=>r())},!1);class wt extends se{constructor(e,t){if(super(),this.binaryType=Lb,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,e&&typeof e=="object"&&(t=e,e=null),e){const n=fo(e);t.hostname=n.host,t.secure=n.protocol==="https"||n.protocol==="wss",t.port=n.port,n.query&&(t.query=n.query)}else t.host&&(t.hostname=fo(t.host).host);ti(this,t),this.secure=t.secure!=null?t.secure:typeof location<"u"&&location.protocol==="https:",t.hostname&&!t.port&&(t.port=this.secure?"443":"80"),this.hostname=t.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=t.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},t.transports.forEach(n=>{const s=n.prototype.name;this.transports.push(s),this._transportsByName[s]=n}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},t),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Vb(this.opts.query)),po&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},vs.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(e){const t=Object.assign({},this.opts.query);t.EIO=Pd,t.transport=e,this.id&&(t.sid=this.id);const n=Object.assign({},this.opts,{query:t,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new this._transportsByName[e](n)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const e=this.opts.rememberUpgrade&&wt.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const t=this.createTransport(e);t.open(),this.setTransport(t)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",t=>this._onClose("transport close",t))}onOpen(){this.readyState="open",wt.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const t=new Error("server error");t.code=e.data,this._onError(t);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this._pingInterval=e.pingInterval,this._pingTimeout=e.pingTimeout,this._maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const e=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+e,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},e),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this._getWritablePackets();this.transport.send(e),this._prevBufferLen=e.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let n=0;n<this.writeBuffer.length;n++){const s=this.writeBuffer[n].data;if(s&&(t+=Mb(s)),n>0&&t>this._maxPayload)return this.writeBuffer.slice(0,n);t+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const e=Date.now()>this._pingTimeoutTime;return e&&(this._pingTimeoutTime=0,ei(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),e}write(e,t,n){return this._sendPacket("message",e,t,n),this}send(e,t,n){return this._sendPacket("message",e,t,n),this}_sendPacket(e,t,n,s){if(typeof t=="function"&&(s=t,t=void 0),typeof n=="function"&&(s=n,n=null),this.readyState==="closing"||this.readyState==="closed")return;n=n||{},n.compress=n.compress!==!1;const i={type:e,data:t,options:n};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),s&&this.once("flush",s),this.flush()}close(){const e=()=>{this._onClose("forced close"),this.transport.close()},t=()=>{this.off("upgrade",t),this.off("upgradeError",t),e()},n=()=>{this.once("upgrade",t),this.once("upgradeError",t)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?n():e()}):this.upgrading?n():e()),this}_onError(e){if(wt.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",e),this._onClose("transport error",e)}_onClose(e,t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),po&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const n=vs.indexOf(this._offlineEventListener);n!==-1&&vs.splice(n,1)}this.readyState="closed",this.id=null,this.emitReserved("close",e,t),this.writeBuffer=[],this._prevBufferLen=0}}}wt.protocol=Pd;class iv extends wt{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let e=0;e<this._upgrades.length;e++)this._probe(this._upgrades[e])}_probe(e){let t=this.createTransport(e),n=!1;wt.priorWebsocketSuccess=!1;const s=()=>{n||(t.send([{type:"ping",data:"probe"}]),t.once("packet",h=>{if(!n)if(h.type==="pong"&&h.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",t),!t)return;wt.priorWebsocketSuccess=t.name==="websocket",this.transport.pause(()=>{n||this.readyState!=="closed"&&(u(),this.setTransport(t),t.send([{type:"upgrade"}]),this.emitReserved("upgrade",t),t=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=t.name,this.emitReserved("upgradeError",f)}}))};function i(){n||(n=!0,u(),t.close(),t=null)}const o=h=>{const f=new Error("probe error: "+h);f.transport=t.name,i(),this.emitReserved("upgradeError",f)};function a(){o("transport closed")}function c(){o("socket closed")}function l(h){t&&h.name!==t.name&&i()}const u=()=>{t.removeListener("open",s),t.removeListener("error",o),t.removeListener("close",a),this.off("close",c),this.off("upgrading",l)};t.once("open",s),t.once("error",o),t.once("close",a),this.once("close",c),this.once("upgrading",l),this._upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{n||t.open()},200):t.open()}onHandshake(e){this._upgrades=this._filterUpgrades(e.upgrades),super.onHandshake(e)}_filterUpgrades(e){const t=[];for(let n=0;n<e.length;n++)~this.transports.indexOf(e[n])&&t.push(e[n]);return t}}let ov=class extends iv{constructor(e,t={}){const n=typeof e=="object"?e:t;(!n.transports||n.transports&&typeof n.transports[0]=="string")&&(n.transports=(n.transports||["polling","websocket","webtransport"]).map(s=>ev[s]).filter(s=>!!s)),super(e,n)}};function av(r,e="",t){let n=r;t=t||typeof location<"u"&&location,r==null&&(r=t.protocol+"//"+t.host),typeof r=="string"&&(r.charAt(0)==="/"&&(r.charAt(1)==="/"?r=t.protocol+r:r=t.host+r),/^(https?|wss?):\/\//.test(r)||(typeof t<"u"?r=t.protocol+"//"+r:r="https://"+r),n=fo(r)),n.port||(/^(http|ws)$/.test(n.protocol)?n.port="80":/^(http|ws)s$/.test(n.protocol)&&(n.port="443")),n.path=n.path||"/";const i=n.host.indexOf(":")!==-1?"["+n.host+"]":n.host;return n.id=n.protocol+"://"+i+":"+n.port+e,n.href=n.protocol+"://"+i+(t&&t.port===n.port?"":":"+n.port),n}const cv=typeof ArrayBuffer=="function",lv=r=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(r):r.buffer instanceof ArrayBuffer,$d=Object.prototype.toString,uv=typeof Blob=="function"||typeof Blob<"u"&&$d.call(Blob)==="[object BlobConstructor]",dv=typeof File=="function"||typeof File<"u"&&$d.call(File)==="[object FileConstructor]";function la(r){return cv&&(r instanceof ArrayBuffer||lv(r))||uv&&r instanceof Blob||dv&&r instanceof File}function xs(r,e){if(!r||typeof r!="object")return!1;if(Array.isArray(r)){for(let t=0,n=r.length;t<n;t++)if(xs(r[t]))return!0;return!1}if(la(r))return!0;if(r.toJSON&&typeof r.toJSON=="function"&&arguments.length===1)return xs(r.toJSON(),!0);for(const t in r)if(Object.prototype.hasOwnProperty.call(r,t)&&xs(r[t]))return!0;return!1}function hv(r){const e=[],t=r.data,n=r;return n.data=mo(t,e),n.attachments=e.length,{packet:n,buffers:e}}function mo(r,e){if(!r)return r;if(la(r)){const t={_placeholder:!0,num:e.length};return e.push(r),t}else if(Array.isArray(r)){const t=new Array(r.length);for(let n=0;n<r.length;n++)t[n]=mo(r[n],e);return t}else if(typeof r=="object"&&!(r instanceof Date)){const t={};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=mo(r[n],e));return t}return r}function fv(r,e){return r.data=go(r.data,e),delete r.attachments,r}function go(r,e){if(!r)return r;if(r&&r._placeholder===!0){if(typeof r.num=="number"&&r.num>=0&&r.num<e.length)return e[r.num];throw new Error("illegal attachments")}else if(Array.isArray(r))for(let t=0;t<r.length;t++)r[t]=go(r[t],e);else if(typeof r=="object")for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&(r[t]=go(r[t],e));return r}const pv=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],mv=5;var q;(function(r){r[r.CONNECT=0]="CONNECT",r[r.DISCONNECT=1]="DISCONNECT",r[r.EVENT=2]="EVENT",r[r.ACK=3]="ACK",r[r.CONNECT_ERROR=4]="CONNECT_ERROR",r[r.BINARY_EVENT=5]="BINARY_EVENT",r[r.BINARY_ACK=6]="BINARY_ACK"})(q||(q={}));class gv{constructor(e){this.replacer=e}encode(e){return(e.type===q.EVENT||e.type===q.ACK)&&xs(e)?this.encodeAsBinary({type:e.type===q.EVENT?q.BINARY_EVENT:q.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let t=""+e.type;return(e.type===q.BINARY_EVENT||e.type===q.BINARY_ACK)&&(t+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(t+=e.nsp+","),e.id!=null&&(t+=e.id),e.data!=null&&(t+=JSON.stringify(e.data,this.replacer)),t}encodeAsBinary(e){const t=hv(e),n=this.encodeAsString(t.packet),s=t.buffers;return s.unshift(n),s}}function Zc(r){return Object.prototype.toString.call(r)==="[object Object]"}class ua extends se{constructor(e){super(),this.reviver=e}add(e){let t;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");t=this.decodeString(e);const n=t.type===q.BINARY_EVENT;n||t.type===q.BINARY_ACK?(t.type=n?q.EVENT:q.ACK,this.reconstructor=new yv(t),t.attachments===0&&super.emitReserved("decoded",t)):super.emitReserved("decoded",t)}else if(la(e)||e.base64)if(this.reconstructor)t=this.reconstructor.takeBinaryData(e),t&&(this.reconstructor=null,super.emitReserved("decoded",t));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let t=0;const n={type:Number(e.charAt(0))};if(q[n.type]===void 0)throw new Error("unknown packet type "+n.type);if(n.type===q.BINARY_EVENT||n.type===q.BINARY_ACK){const i=t+1;for(;e.charAt(++t)!=="-"&&t!=e.length;);const o=e.substring(i,t);if(o!=Number(o)||e.charAt(t)!=="-")throw new Error("Illegal attachments");n.attachments=Number(o)}if(e.charAt(t+1)==="/"){const i=t+1;for(;++t&&!(e.charAt(t)===","||t===e.length););n.nsp=e.substring(i,t)}else n.nsp="/";const s=e.charAt(t+1);if(s!==""&&Number(s)==s){const i=t+1;for(;++t;){const o=e.charAt(t);if(o==null||Number(o)!=o){--t;break}if(t===e.length)break}n.id=Number(e.substring(i,t+1))}if(e.charAt(++t)){const i=this.tryParse(e.substr(t));if(ua.isPayloadValid(n.type,i))n.data=i;else throw new Error("invalid payload")}return n}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,t){switch(e){case q.CONNECT:return Zc(t);case q.DISCONNECT:return t===void 0;case q.CONNECT_ERROR:return typeof t=="string"||Zc(t);case q.EVENT:case q.BINARY_EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&pv.indexOf(t[0])===-1);case q.ACK:case q.BINARY_ACK:return Array.isArray(t)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class yv{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const t=fv(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wv=Object.freeze(Object.defineProperty({__proto__:null,Decoder:ua,Encoder:gv,get PacketType(){return q},protocol:mv},Symbol.toStringTag,{value:"Module"}));function $e(r,e,t){return r.on(e,t),function(){r.off(e,t)}}const bv=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Ld extends se{constructor(e,t,n){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=t,n&&n.auth&&(this.auth=n.auth),this._opts=Object.assign({},n),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[$e(e,"open",this.onopen.bind(this)),$e(e,"packet",this.onpacket.bind(this)),$e(e,"error",this.onerror.bind(this)),$e(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...t){var n,s,i;if(bv.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(t.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(t),this;const o={type:q.EVENT,data:t};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof t[t.length-1]=="function"){const u=this.ids++,h=t.pop();this._registerAckCallback(u,h),o.id=u}const a=(s=(n=this.io.engine)===null||n===void 0?void 0:n.transport)===null||s===void 0?void 0:s.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!a||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(e,t){var n;const s=(n=this.flags.timeout)!==null&&n!==void 0?n:this._opts.ackTimeout;if(s===void 0){this.acks[e]=t;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let a=0;a<this.sendBuffer.length;a++)this.sendBuffer[a].id===e&&this.sendBuffer.splice(a,1);t.call(this,new Error("operation has timed out"))},s),o=(...a)=>{this.io.clearTimeoutFn(i),t.apply(this,a)};o.withError=!0,this.acks[e]=o}emitWithAck(e,...t){return new Promise((n,s)=>{const i=(o,a)=>o?s(o):n(a);i.withError=!0,t.push(i),this.emit(e,...t)})}_addToQueue(e){let t;typeof e[e.length-1]=="function"&&(t=e.pop());const n={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((s,...i)=>n!==this._queue[0]?void 0:(s!==null?n.tryCount>this._opts.retries&&(this._queue.shift(),t&&t(s)):(this._queue.shift(),t&&t(null,...i)),n.pending=!1,this._drainQueue())),this._queue.push(n),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const t=this._queue[0];t.pending&&!e||(t.pending=!0,t.tryCount++,this.flags=t.flags,this.emit.apply(this,t.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:q.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,t){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,t),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(e=>{if(!this.sendBuffer.some(n=>String(n.id)===e)){const n=this.acks[e];delete this.acks[e],n.withError&&n.call(this,new Error("socket has been disconnected"))}})}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case q.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case q.EVENT:case q.BINARY_EVENT:this.onevent(e);break;case q.ACK:case q.BINARY_ACK:this.onack(e);break;case q.DISCONNECT:this.ondisconnect();break;case q.CONNECT_ERROR:this.destroy();const n=new Error(e.data.message);n.data=e.data.data,this.emitReserved("connect_error",n);break}}onevent(e){const t=e.data||[];e.id!=null&&t.push(this.ack(e.id)),this.connected?this.emitEvent(t):this.receiveBuffer.push(Object.freeze(t))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const t=this._anyListeners.slice();for(const n of t)n.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const t=this;let n=!1;return function(...s){n||(n=!0,t.packet({type:q.ACK,id:e,data:s}))}}onack(e){const t=this.acks[e.id];typeof t=="function"&&(delete this.acks[e.id],t.withError&&e.data.unshift(null),t.apply(this,e.data))}onconnect(e,t){this.id=e,this.recovered=t&&this._pid===t,this._pid=t,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:q.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const t=this._anyListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const t=this._anyOutgoingListeners;for(let n=0;n<t.length;n++)if(e===t[n])return t.splice(n,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const t=this._anyOutgoingListeners.slice();for(const n of t)n.apply(this,e.data)}}}function Rr(r){r=r||{},this.ms=r.min||100,this.max=r.max||1e4,this.factor=r.factor||2,this.jitter=r.jitter>0&&r.jitter<=1?r.jitter:0,this.attempts=0}Rr.prototype.duration=function(){var r=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),t=Math.floor(e*this.jitter*r);r=Math.floor(e*10)&1?r+t:r-t}return Math.min(r,this.max)|0};Rr.prototype.reset=function(){this.attempts=0};Rr.prototype.setMin=function(r){this.ms=r};Rr.prototype.setMax=function(r){this.max=r};Rr.prototype.setJitter=function(r){this.jitter=r};class yo extends se{constructor(e,t){var n;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(t=e,e=void 0),t=t||{},t.path=t.path||"/socket.io",this.opts=t,ti(this,t),this.reconnection(t.reconnection!==!1),this.reconnectionAttempts(t.reconnectionAttempts||1/0),this.reconnectionDelay(t.reconnectionDelay||1e3),this.reconnectionDelayMax(t.reconnectionDelayMax||5e3),this.randomizationFactor((n=t.randomizationFactor)!==null&&n!==void 0?n:.5),this.backoff=new Rr({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(t.timeout==null?2e4:t.timeout),this._readyState="closed",this.uri=e;const s=t.parser||wv;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=t.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,e||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var t;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(t=this.backoff)===null||t===void 0||t.setMin(e),this)}randomizationFactor(e){var t;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(t=this.backoff)===null||t===void 0||t.setJitter(e),this)}reconnectionDelayMax(e){var t;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(t=this.backoff)===null||t===void 0||t.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new ov(this.uri,this.opts);const t=this.engine,n=this;this._readyState="opening",this.skipReconnect=!1;const s=$e(t,"open",function(){n.onopen(),e&&e()}),i=a=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",a),e?e(a):this.maybeReconnectOnOpen()},o=$e(t,"error",i);if(this._timeout!==!1){const a=this._timeout,c=this.setTimeoutFn(()=>{s(),i(new Error("timeout")),t.close()},a);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(s),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push($e(e,"ping",this.onping.bind(this)),$e(e,"data",this.ondata.bind(this)),$e(e,"error",this.onerror.bind(this)),$e(e,"close",this.onclose.bind(this)),$e(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(t){this.onclose("parse error",t)}}ondecoded(e){ei(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,t){let n=this.nsps[e];return n?this._autoConnect&&!n.active&&n.connect():(n=new Ld(this,e,t),this.nsps[e]=n),n}_destroy(e){const t=Object.keys(this.nsps);for(const n of t)if(this.nsps[n].active)return;this._close()}_packet(e){const t=this.encoder.encode(e);for(let n=0;n<t.length;n++)this.engine.write(t[n],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(e,t){var n;this.cleanup(),(n=this.engine)===null||n===void 0||n.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const t=this.backoff.duration();this._reconnecting=!0;const n=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(s=>{s?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",s)):e.onreconnect()}))},t);this.opts.autoUnref&&n.unref(),this.subs.push(()=>{this.clearTimeoutFn(n)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const Mr={};function _s(r,e){typeof r=="object"&&(e=r,r=void 0),e=e||{};const t=av(r,e.path||"/socket.io"),n=t.source,s=t.id,i=t.path,o=Mr[s]&&i in Mr[s].nsps,a=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let c;return a?c=new yo(n,e):(Mr[s]||(Mr[s]=new yo(n,e)),c=Mr[s]),t.query&&!e.query&&(e.query=t.queryKey),c.socket(t.path,e)}Object.assign(_s,{Manager:yo,Socket:Ld,io:_s,connect:_s});const at={walletSummary:(r,e)=>["wallet","summary",r,(e??"").toLowerCase()],walletActivity:(r,e=25)=>["wallet","activity",r,e],escrowBalance:r=>["escrow-balance",r],onchainUSDC:(r,e)=>["onchain-usdc",r??"0x0",e],predictionEntries:r=>["prediction-entries",r],prediction:r=>["prediction",r],readContract:(r,e,t)=>["readContract",r,e,t??[]],onchainActivity:(r,e=20)=>["onchain-activity",r,e]},vv="@fanclubz/client",xv="2.0.78",_v="Fan Club Z React Client Application",Ev="module",Sv={dev:"vite",clean:"rimraf dist .turbo .vite .cache",typecheck:"tsc -p tsconfig.json --noEmit",lint:"eslint .",build:"vite build",preview:"vite preview --port 5175",preflight:"pnpm clean && pnpm lint && pnpm typecheck && pnpm check:dupes && pnpm build","vercel-build":"vite build","lint:fix":"eslint . --ext ts,tsx --fix","type-check":"tsc --noEmit","env:check":"ts-node --transpile-only ../scripts/check-env.ts","generate-icons":"bash ../generate-pwa-icons.sh","pwa-audit":"lighthouse --view --chrome-flags='--headless' --only-categories=pwa http://localhost:5173","check-manifest":`node -e "console.log('Checking manifest...'); fetch('http://localhost:5173/manifest.json').then(r=>r.json()).then(console.log).catch(console.error)"`,"check:dupes":"node scripts/check-duplicates.mjs"},kv={"@capacitor/app":"^7.0.0","@capacitor/browser":"^7.0.0","@capacitor/core":"^7.4.4","@coinbase/wallet-sdk":"^4.3.7","@fanclubz/shared":"file:../shared","@hookform/resolvers":"^3.3.2","@radix-ui/react-avatar":"^1.0.4","@radix-ui/react-dialog":"^1.0.5","@radix-ui/react-dropdown-menu":"^2.0.6","@radix-ui/react-select":"^2.0.0","@radix-ui/react-slot":"^1.0.2","@radix-ui/react-switch":"^1.0.3","@radix-ui/react-tabs":"^1.0.4","@radix-ui/react-toast":"^1.1.5","@supabase/supabase-js":"^2.39.1","@tailwindcss/forms":"^0.5.7","@tailwindcss/typography":"^0.5.10","@tanstack/react-query":"^5.14.2","@types/react-router-dom":"^5.3.3","@vitejs/plugin-react":"^4.1.1","@wagmi/connectors":"^5.11.2","@wagmi/core":"^2.22.1","@walletconnect/ethereum-provider":"^2.23.0","@walletconnect/modal":"^2.7.0",autoprefixer:"^10.4.16","class-variance-authority":"^0.7.0",clsx:"^2.1.1","date-fns":"^3.6.0","framer-motion":"^10.16.16","html-to-image":"^1.11.13","lucide-react":"^0.303.0",postcss:"^8.4.32",react:"^18.2.0","react-dom":"^18.2.0","react-hook-form":"^7.48.2","react-hot-toast":"^2.4.1","react-intersection-observer":"^9.5.3","react-router-dom":"^7.9.1","socket.io-client":"^4.7.4","tailwind-merge":"^2.6.0",tailwindcss:"^3.4.0",uuid:"^13.0.0",viem:"^2.38.6",vite:"^4.4.9","vite-plugin-pwa":"^0.17.4",vitest:"^4.0.9",wagmi:"^2.19.2",wouter:"^3.0.0",zod:"^3.25.76",zustand:"^4.4.7"},Cv={"@capacitor/android":"^7.4.4","@capacitor/cli":"^7.4.4","@types/node":"^24.5.2","@types/react":"^18.2.45","@types/react-dom":"^18.2.18","@typescript-eslint/eslint-plugin":"^6.16.0","@typescript-eslint/parser":"^6.16.0",eslint:"^8.56.0","eslint-plugin-react-hooks":"^4.6.0","eslint-plugin-react-refresh":"^0.4.5",globby:"^13.2.2",rimraf:"^3.0.2",typescript:"^5.3.3"},Tv={node:">=18.0.0",npm:">=9.0.0"},Dd={name:vv,version:xv,description:_v,type:Ev,scripts:Sv,dependencies:kv,devDependencies:Cv,engines:Tv},Av=Dd.version,kt={version:Av,name:"Fan Club Z",description:"Social Prediction Platform",api:{url:Nr().apiUrl,timeout:15e3,retries:3},frontend:{url:fd||"https://app.fanclubz.app"},features:{realTimeUpdates:!0,socialEngagement:!0,walletIntegration:!0,settlementSystem:!0},limits:{maxStakeAmount:1e4,minStakeAmount:1,maxDescriptionLength:500,maxCommentLength:280},ui:{theme:{primaryColor:"#22c55e",brandColors:{green:{50:"#f0fdf4",500:"#22c55e",600:"#16a34a",700:"#15803d"}}},animations:{duration:{fast:200,normal:300,slow:500}}}},Pv=()=>ea,Iv=()=>jn,me=()=>kt.api.url,jv=()=>kt.frontend.url,Ov=()=>kt.version,Nv=()=>`${kt.name} v${kt.version}`,Rv=r=>kt.features[r],$v=Object.freeze(Object.defineProperty({__proto__:null,APP_CONFIG:kt,default:kt,getApiUrl:me,getFrontendUrl:jv,getFullVersion:Nv,getVersion:Ov,isDevelopment:Pv,isFeatureEnabled:Rv,isProduction:Iv},Symbol.toStringTag,{value:"Module"})),Jc={maxRetries:3,initialDelay:1e3,maxDelay:1e4,backoffFactor:2},Lv=r=>new Promise(e=>setTimeout(e,r)),Dv=(r,e,t)=>e>=t?!1:!!(r.name==="TypeError"&&r.message.includes("Failed to fetch")||r.name==="HTTPError"&&r.status>=500||r.name==="AbortError"||r.name==="TimeoutError"),Uv=(r,e)=>{const t=e.initialDelay*Math.pow(e.backoffFactor,r-1);return Math.min(t,e.maxDelay)},ls=async(r,e={})=>{const{timeout:t=15e3,retryOptions:n=Jc,...s}=e,i={...Jc,...n};let o;for(let a=1;a<=i.maxRetries+1;a++)try{console.log(`ðŸŒ API Request (attempt ${a}/${i.maxRetries+1}): ${r}`);const c=new AbortController,l=setTimeout(()=>c.abort(),t),u=await fetch(r,{...s,signal:c.signal,headers:{"Content-Type":"application/json",Accept:"application/json",...s.headers}});if(clearTimeout(l),!u.ok){const h=new Error(`HTTP error! status: ${u.status} ${u.statusText}`);throw h.name="HTTPError",h.status=u.status,h.response=u,h}return console.log(`âœ… API Success (attempt ${a}): ${u.status} ${u.statusText}`),u}catch(c){if(o=c,console.warn(`âš ï¸ API Error (attempt ${a}):`,c.message),Dv(c,a,i.maxRetries)){const l=Uv(a,i);console.log(`ðŸ”„ Retrying in ${l}ms...`),await Lv(l);continue}break}throw console.error(`âŒ API Failed after ${i.maxRetries+1} attempts:`,o),o},us={get:async(r,e={})=>{const t=`${me()}${r}`;return(await ls(t,{method:"GET",...e})).json()},post:async(r,e,t={})=>{const n=`${me()}${r}`;return(await ls(n,{method:"POST",body:e?JSON.stringify(e):void 0,...t})).json()},put:async(r,e,t={})=>{const n=`${me()}${r}`;return(await ls(n,{method:"PUT",body:e?JSON.stringify(e):void 0,...t})).json()},delete:async(r,e={})=>{const t=`${me()}${r}`;return(await ls(t,{method:"DELETE",...e})).json()}};function Yc(r,e,t,n){return`bet:${r||"anon"}:${e}:${t}:${n}`}function Bv(r,e=2*60*1e3){try{const t=sessionStorage.getItem(r),n=Date.now();if(t){const i=JSON.parse(t);if(i&&i.id&&n-i.ts<e)return i.id}const s=typeof crypto<"u"&&"randomUUID"in crypto?crypto.randomUUID():`${n}-${Math.random().toString(16).slice(2)}`;return sessionStorage.setItem(r,JSON.stringify({id:s,ts:n})),s}catch{return`${Date.now()}-${Math.random().toString(16).slice(2)}`}}const Mv=(r={})=>{const e=r.totalStaked??r.total_staked??0,t=r.currentOdds??r.current_odds??r.odds??1;return{id:r.id??"",prediction_id:r.prediction_id??r.predictionId??"",label:r.label??r.text??"Option",total_staked:r.total_staked??e,current_odds:r.current_odds??t,percentage:r.percentage??r.share??0,totalStaked:e,currentOdds:t}},wo=(r={})=>{const e=Array.isArray(r.options)?r.options.map(Mv):[],t=r.pool_total??r.poolTotal??r.totalPool??0,n=r.stake_min??r.stakeMin??r.minimum_stake??0,s=r.entry_deadline??r.entryDeadline??r.deadline,i=r.settlement_method??r.settlementMethod??"manual",o=r.participant_count??r.participantCount??r.participants??0,a=r.likes_count??r.likeCount??(Array.isArray(r.likes)?r.likes.length:Number(r.likes??0)),c=r.comments_count??r.commentCount??(Array.isArray(r.comments)?r.comments.length:Number(r.comments??0));return{...r,options:e,pool_total:r.pool_total??t,poolTotal:t,stake_min:r.stake_min??n,stakeMin:n,entry_deadline:r.entry_deadline??s,entryDeadline:s,settlement_method:r.settlement_method??i,settlementMethod:i,participant_count:r.participant_count??o,participantCount:o,likes_count:r.likes_count??a,likeCount:a,comments_count:r.comments_count??c,commentCount:c}},ds=(r=[])=>r.map(wo),hs={predictions:[],trendingPredictions:[],userPredictions:[],createdPredictions:[],completedPredictions:[],userPredictionEntries:[],userCreatedPredictions:[],loading:!1,loadingMore:!1,error:null,initialized:!1,lastFetchTime:0,platformStats:null,statsLoading:!1,pagination:{page:1,limit:20,total:0,hasNext:!1,hasPrev:!1},filters:{category:"all",search:""},inFlightBets:{}},Fv=Vs((r,e)=>({...hs,fetchPredictions:async(t={})=>{const{page:n=1,category:s=e().filters.category,search:i=e().filters.search,append:o=!1}=t,a=Date.now(),{lastFetchTime:c,predictions:l}=e();if(!o&&n===1&&a-c<3e4&&l.length>0){console.log("ðŸ“‹ Using cached predictions");return}const u=o&&n>1;r({[u?"loadingMore":"loading"]:!0,error:null});try{console.log(`ðŸ“¡ Fetching predictions: page=${n}, category=${s}, search=${i}, append=${o}`);const h=new URLSearchParams({page:n.toString(),limit:"20",...s!=="all"&&{category:s},...i.trim()&&{search:i.trim()}}),f=await us.get(`/api/v2/predictions?${h}`,{timeout:1e4,retryOptions:{maxRetries:3}}),p=ds(f.data||[]),w=f.pagination||{};console.log(`âœ… Predictions fetched successfully: ${p.length} items (${w.total} total)`),r(g=>({predictions:o?[...g.predictions,...p]:p,loading:!1,loadingMore:!1,error:null,initialized:!0,lastFetchTime:a,pagination:{page:w.page||n,limit:w.limit||20,total:w.total||0,hasNext:w.hasNext||!1,hasPrev:w.hasPrev||!1},filters:{category:s,search:i}}))}catch(h){console.error("âŒ Error fetching predictions:",h),r({loading:!1,loadingMore:!1,error:h instanceof Error?h.message:"Failed to fetch predictions"})}},loadMorePredictions:async()=>{const{pagination:t,loadingMore:n}=e();if(n||!t.hasNext){console.log("ðŸ“‹ Load more skipped:",{loadingMore:n,hasNext:t.hasNext});return}console.log(`ðŸ“‹ Loading more predictions: page ${t.page+1}`),await e().fetchPredictions({page:t.page+1,append:!0})},setFilters:t=>{const s={...e().filters,...t};console.log("ðŸ” Setting filters:",s),r(i=>({filters:s,pagination:{...i.pagination,page:1},predictions:[]})),e().fetchPredictions({category:s.category,search:s.search})},resetPagination:()=>{console.log("ðŸ”„ Resetting pagination"),r(t=>({pagination:{...hs.pagination},filters:{...hs.filters},predictions:[]}))},refreshPredictions:async(t=!1)=>{const{lastFetchTime:n}=e(),s=Date.now();if(!t&&s-n<1e4){console.log("ðŸ“‹ Using cached predictions (refresh)");return}r(i=>({lastFetchTime:0,pagination:{...i.pagination,page:1},predictions:[]}));try{await e().fetchPredictions(),console.log("ðŸ”„ Predictions refreshed successfully")}catch(i){throw console.error("âŒ Error refreshing predictions:",i),i}},fetchTrendingPredictions:async()=>{r({loading:!0});try{const t=await fetch(`${me()}/api/v2/predictions/trending`);if(!t.ok)throw new Error(`Failed to fetch trending predictions: ${t.statusText}`);const n=await t.json(),s=ds(n.data||[]);r({trendingPredictions:s,loading:!1,error:null}),console.log("âœ… Trending predictions fetched:",s.length)}catch(t){console.error("âŒ Error fetching trending predictions:",t),r({loading:!1,error:t instanceof Error?t.message:"Failed to fetch trending predictions"})}},fetchUserPredictions:async t=>{r({loading:!0});try{const n=await fetch(`${me()}/api/v2/predictions/user/${t}`);if(!n.ok)throw new Error(`Failed to fetch user predictions: ${n.statusText}`);const s=await n.json(),i=ds(s.data||[]);r({userPredictions:i,loading:!1,error:null})}catch(n){console.error("âŒ Error fetching user predictions:",n),r({loading:!1,error:n instanceof Error?n.message:"Failed to fetch user predictions"})}},fetchCreatedPredictions:async t=>{r({loading:!0});try{const n=await fetch(`${me()}/api/v2/predictions/created/${t}`);if(!n.ok)throw new Error(`Failed to fetch created predictions: ${n.statusText}`);const s=await n.json(),i=ds(s.data||[]);r({createdPredictions:i,loading:!1,error:null})}catch(n){console.error("âŒ Error fetching created predictions:",n),r({loading:!1,error:n instanceof Error?n.message:"Failed to fetch created predictions"})}},fetchPredictionById:async t=>{try{console.log(`ðŸ” Fetching prediction by ID: ${t}`);const{predictions:n}=e(),s=n.find(c=>c.id===t)||null,i=await fetch(`${me()}/api/v2/predictions/${t}`);if(!i.ok)return i.status===404?console.log(`â„¹ï¸ Prediction ${t} not found (archived or deleted)`):console.error(`âŒ Failed to fetch prediction ${t}:`,i.status),s;const o=await i.json(),a=wo(o.data);return a?(console.log("âœ… Fetched prediction from API:",a.title),console.log("ðŸ” Prediction options:",a.options?.length||0),r(c=>{const l=h=>h.id===t?{...h,...a}:h;return{predictions:(h=>h.some(f=>f.id===t)?h.map(l):[...h,a])(c.predictions),userPredictions:c.userPredictions.map(l),createdPredictions:c.createdPredictions.map(l),userCreatedPredictions:c.userCreatedPredictions.map(l),trendingPredictions:c.trendingPredictions.map(l),completedPredictions:c.completedPredictions.map(l)}}),a):s}catch{console.log(`â„¹ï¸ Could not fetch prediction ${t}`);const{predictions:s}=e();return s.find(i=>i.id===t)||null}},createPrediction:async t=>{r({loading:!0,error:null});try{const n=await fetch(`${me()}/api/v2/predictions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok)throw new Error(`Failed to create prediction: ${n.statusText}`);const s=await n.json();if(!s.data)throw new Error("Invalid response: no prediction data returned");const i=wo(s.data);if(!i||!i.id)throw new Error("Invalid prediction data: missing required fields");r(o=>({predictions:[i,...o.predictions],loading:!1,error:null})),setTimeout(()=>{e().fetchPredictions()},100),r(o=>({userCreatedPredictions:[i,...o.userCreatedPredictions]}));try{const{user:o}=ye.getState();o?.id&&setTimeout(()=>{e().fetchUserCreatedPredictions(o.id)},1e3)}catch(o){console.warn("âš ï¸ Failed to refresh user created predictions:",o)}return console.log("âœ… Prediction created successfully:",i.id),i}catch(n){throw console.error("âŒ Error creating prediction:",n),r({loading:!1,error:n instanceof Error?n.message:"Failed to create prediction"}),n}},placePrediction:async(t,n,s,i,o)=>{r({loading:!0,error:null});try{console.log("[FCZ-BET] mode detection",{FLAG_BASE_BETS:!0,FLAG_DEMO:!1,isCryptoMode:!0,predictionId:t,optionId:n,amount:s,userId:i});{console.log("[FCZ-BET] Placing bet via unified endpoint...",{predictionId:t,optionId:n,amount:s,userId:i});const u=Yc(i,t,n,s);if((e().inFlightBets||{})[u]){console.log("[FCZ-BET] Duplicate click prevented (in-flight):",u),r({loading:!1});return}r(x=>({inFlightBets:{...x.inFlightBets||{},[u]:!0}}));const f=Bv(u),p=await fetch(`${me()}/api/predictions/${t}/place-bet`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({optionId:n,amountUSD:s,userId:i,walletAddress:o||void 0,requestId:f})});if(!p.ok){const x=await p.json().catch(()=>({}));throw x.error==="INSUFFICIENT_ESCROW"?new Error("INSUFFICIENT_ESCROW"):x.error==="BETTING_DISABLED"?new Error("Betting is temporarily unavailable. Please try again later."):new Error(x.message||"Unable to place bet. Please try again.")}const w=await p.json();console.log("[FCZ-BET] Bet placed successfully:",w);const g=w?.data?.prediction,m=w?.data?.entry;r(x=>{const b=v=>!v||v.id!==t?v:g?{...v,...g}:{...v,pool_total:(v.pool_total||0)+s,participant_count:(v.participant_count||0)+1};return{predictions:x.predictions.map(b),userPredictions:x.userPredictions.map(b),createdPredictions:x.createdPredictions.map(b),userCreatedPredictions:x.userCreatedPredictions.map(b),userPredictionEntries:m?[...x.userPredictionEntries.filter(v=>v.id!==m.id),m]:x.userPredictionEntries,loading:!1,error:null}});try{const{user:x}=ye.getState();x?.id&&await Promise.all([e().fetchUserCreatedPredictions(x.id),e().fetchUserPredictionEntries(x.id)])}catch(x){console.warn("[FCZ-BET] Post-bet refresh encountered an issue:",x)}return r(x=>{const b={...x.inFlightBets||{}};return delete b[u],{inFlightBets:b}}),w}}catch(a){console.error("âŒ Error placing prediction:",a);let c="Failed to place prediction";throw a instanceof Error&&(a.message.includes("already been used")||a.message.includes("already been consumed")?c="Previous bet attempt was not completed. Please refresh the page and try again.":c=a.message),r({loading:!1,error:c}),a}finally{try{const a=Yc(i,t,n,s);r(c=>{const l={...c.inFlightBets||{}};return delete l[a],{inFlightBets:l}})}catch{}}},fetchPlatformStats:async()=>{r({statsLoading:!0});try{console.log("ðŸ“Š Fetching platform stats with retry logic...");const t=await us.get("/api/v2/predictions/stats/platform",{timeout:8e3,retryOptions:{maxRetries:3}});if(t.success&&t.data)r({platformStats:t.data,statsLoading:!1}),console.log("âœ… Platform stats fetched:",t.data);else throw new Error("Invalid stats response format")}catch(t){console.error("âŒ Error fetching platform stats:",t);const{predictions:n}=e(),s={totalVolume:n.reduce((i,o)=>i+(o.pool_total||0),0).toFixed(2),activePredictions:n.filter(i=>i.status==="open").length,totalUsers:n.length>0?"5":"0",rawVolume:n.reduce((i,o)=>i+(o.pool_total||0),0),rawUsers:n.length>0?5:0};r({platformStats:s,statsLoading:!1}),console.log("ðŸ“Š Using fallback stats:",s)}},getActivityForPrediction:t=>[],getParticipantsForPrediction:t=>[],clearError:()=>{r({error:null})},fetchUserPredictionEntries:async t=>{try{console.log("ðŸ“‹ Fetching user prediction entries with retry logic for:",t);const s=(await us.get(`/api/v2/prediction-entries/user/${t}`,{timeout:1e4,retryOptions:{maxRetries:3}})).data||[];r({userPredictionEntries:s}),console.log("âœ… User prediction entries fetched:",s.length)}catch(n){console.error("âŒ Error fetching user prediction entries:",n)}},fetchUserCreatedPredictions:async t=>{try{console.log("ðŸ“‹ Fetching user created predictions with retry logic for:",t);const s=(await us.get(`/api/v2/predictions/created/${t}`,{timeout:1e4,retryOptions:{maxRetries:3}})).data||[];r({userCreatedPredictions:s}),console.log("âœ… User created predictions fetched:",s.length)}catch(n){console.error("âŒ Error fetching user created predictions:",n)}},getUserPredictionEntries:t=>{const{userPredictionEntries:n}=e();return n.filter(s=>s.user_id===t)},getUserCreatedPredictions:t=>{const{userCreatedPredictions:n}=e();return n.filter(s=>s.creator_id===t)},updatePrediction:async(t,n)=>{try{console.log("ðŸ”„ Updating prediction:",t,n);const s=await fetch(`${me()}/api/v2/predictions/${t}`,{method:"PUT",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(n)});if(!s.ok)throw new Error(`Failed to update prediction: ${s.statusText}`);const o=(await s.json()).data;r(a=>({predictions:a.predictions.map(c=>c.id===t?{...c,...o}:c),userCreatedPredictions:a.userCreatedPredictions.map(c=>c.id===t?{...c,...o}:c)})),console.log("âœ… Prediction updated successfully")}catch(s){throw console.error("âŒ Error updating prediction:",s),s}},deletePrediction:async t=>{try{console.log("ðŸ—‘ï¸ Deleting prediction:",t);const n=await fetch(`${me()}/api/v2/predictions/${t}`,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Failed to delete prediction: ${n.statusText}`);r(s=>({predictions:s.predictions.filter(i=>i.id!==t),createdPredictions:s.createdPredictions.filter(i=>i.id!==t),userCreatedPredictions:s.userCreatedPredictions.filter(i=>i.id!==t),trendingPredictions:s.trendingPredictions.filter(i=>i.id!==t),completedPredictions:s.completedPredictions.filter(i=>i.id!==t)}));try{const{user:s}=ye.getState();await e().refreshPredictions(!0),await e().fetchTrendingPredictions(),s?.id&&(await e().fetchUserCreatedPredictions(s.id),await e().fetchUserPredictionEntries(s.id))}catch(s){console.warn("âš ï¸ Post-delete refresh had an issue:",s)}console.log("âœ… Prediction deleted successfully")}catch(n){throw console.error("âŒ Error deleting prediction:",n),n}},closePrediction:async t=>{try{console.log("ðŸ”’ Closing prediction:",t);const n=await fetch(`${me()}/api/v2/predictions/${t}/close`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"}});if(!n.ok)throw new Error(`Failed to close prediction: ${n.statusText}`);const i=(await n.json()).data;r(o=>{const a=c=>c.id===t?{...c,...i,status:"closed"}:c;return{predictions:o.predictions.map(a),userCreatedPredictions:o.userCreatedPredictions.map(a),createdPredictions:o.createdPredictions.map(a),userPredictions:o.userPredictions.map(a),trendingPredictions:o.trendingPredictions.map(a),completedPredictions:o.completedPredictions.map(a)}}),console.log("âœ… Prediction closed successfully")}catch(n){throw console.error("âŒ Error closing prediction:",n),n}},fetchPredictionActivity:async t=>{try{console.log("ðŸ“‹ Fetching prediction activity:",t);const n=await fetch(`${me()}/api/v2/predictions/${t}/activity`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});return n.ok?(await n.json()).data||[]:(console.warn(`Activity endpoint not available: ${n.statusText}`),[])}catch(n){return console.warn("Activity endpoint not implemented yet:",n),[]}},fetchPredictionParticipants:async t=>{try{console.log("ðŸ“‹ Fetching prediction participants:",t);const n=await fetch(`${me()}/api/v2/predictions/${t}/participants`,{method:"GET",headers:{"Content-Type":"application/json",Accept:"application/json"}});return n.ok?(await n.json()).data||[]:(console.warn(`Participants endpoint not available: ${n.statusText}`),[])}catch(n){return console.warn("Participants endpoint not implemented yet:",n),[]}},reset:()=>{r(hs)}})),Qc=async()=>{const{refreshPredictions:r}=Fv.getState();if(typeof r=="function")try{console.log("[REALTIME] Refreshing prediction store (forced)"),await r(!0)}catch(e){console.warn("[REALTIME] Failed to refresh predictions after realtime update:",e)}},zv=({children:r})=>{const{user:e}=Xs(),t=Ch(),n=y.useRef(null);return y.useEffect(()=>{const s=gd().replace(/\/$/,""),i=_s(s,{transports:["websocket"],withCredentials:!0,autoConnect:!0,reconnection:!0,reconnectionAttempts:10,reconnectionDelay:500});n.current=i;const o=l=>{!e?.id||l.userId!==e.id||(t.invalidateQueries({queryKey:at.walletSummary(e.id)}),t.invalidateQueries({queryKey:at.walletActivity(e.id)}),t.invalidateQueries({queryKey:at.escrowBalance(e.id)}),t.invalidateQueries({queryKey:["readContract"]}))},a=l=>{l.predictionId&&(t.invalidateQueries({queryKey:at.prediction(l.predictionId)}),t.invalidateQueries({queryKey:at.predictionEntries(l.predictionId)}),Qc())},c=l=>{l.predictionId&&(t.invalidateQueries({queryKey:at.prediction(l.predictionId)}),t.invalidateQueries({queryKey:at.predictionEntries(l.predictionId)}),e?.id&&t.invalidateQueries({queryKey:at.walletSummary(e.id)}),Qc())};return i.on("wallet:update",o),i.on("prediction:update",a),i.on("settlement:complete",c),()=>{i.off("wallet:update",o),i.off("prediction:update",a),i.off("settlement:complete",c),i.close()}},[e?.id,t]),d.jsx(d.Fragment,{children:r})};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Vv={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Z=(r,e)=>{const t=y.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:c,...l},u)=>y.createElement("svg",{ref:u,...Vv,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${qv(r)}`,a].join(" "),...l},[...e.map(([h,f])=>y.createElement(h,f)),...Array.isArray(c)?c:[c]]));return t.displayName=`${r}`,t};/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=Z("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zr=Z("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hv=Z("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ud=Z("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=Z("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=Z("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=Z("ChevronsRight",[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jv=Z("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=Z("Compass",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"16.24 7.76 14.12 14.12 7.76 16.24 9.88 9.88 16.24 7.76",key:"m9r19z"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xc=Z("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bo=Z("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const el=Z("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ri=Z("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=Z("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vo=Z("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=Z("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ni=Z("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Z("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bd=Z("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=Z("Share",[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Md=Z("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const da=Z("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tx=Z("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rn=Z("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rx=Z("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _o=Z("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Us=Z("Wallet",[["path",{d:"M21 12V7H5a2 2 0 0 1 0-4h14v4",key:"195gfw"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h16v-5",key:"195n9w"}],["path",{d:"M18 12a2 2 0 0 0 0 4h4v-4Z",key:"vllfpd"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xt=Z("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nx=Z("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]);class Fd{constructor(e){X(this,"element");X(this,"focusableElements");X(this,"firstFocusableElement",null);X(this,"lastFocusableElement",null);X(this,"previousActiveElement",null);X(this,"handleKeyDown",e=>{if(e.key==="Tab"){if(this.updateFocusableElements(),this.focusableElements.length===0){e.preventDefault();return}if(this.focusableElements.length===1){e.preventDefault(),this.firstFocusableElement?.focus();return}e.shiftKey?document.activeElement===this.firstFocusableElement&&(e.preventDefault(),this.lastFocusableElement?.focus()):document.activeElement===this.lastFocusableElement&&(e.preventDefault(),this.firstFocusableElement?.focus())}});this.element=e,this.focusableElements=[],this.updateFocusableElements()}updateFocusableElements(){const e=["button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","a[href]",'[tabindex]:not([tabindex="-1"])','[contenteditable="true"]'].join(",");this.focusableElements=Array.from(this.element.querySelectorAll(e)),this.firstFocusableElement=this.focusableElements[0]||null,this.lastFocusableElement=this.focusableElements[this.focusableElements.length-1]||null}activate(){this.previousActiveElement=document.activeElement,this.updateFocusableElements(),setTimeout(()=>{this.firstFocusableElement&&this.firstFocusableElement.focus()},50),document.addEventListener("keydown",this.handleKeyDown)}deactivate(){document.removeEventListener("keydown",this.handleKeyDown),this.previousActiveElement&&"focus"in this.previousActiveElement&&this.previousActiveElement.focus()}}const zd={handleArrowKeys:(r,e,t,n,s="vertical")=>{const i=s==="vertical",o=i?"ArrowUp":"ArrowLeft",a=i?"ArrowDown":"ArrowRight";switch(r.key){case o:r.preventDefault(),n(e>0?e-1:t-1);break;case a:r.preventDefault(),n(e<t-1?e+1:0);break;case"Home":r.preventDefault(),n(0);break;case"End":r.preventDefault(),n(t-1);break}},handleEscape:(r,e)=>{r.key==="Escape"&&(r.preventDefault(),e())},handleActivation:(r,e)=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),e())}},Bs={generateId:(r="fcz")=>`${r}-${Math.random().toString(36).substr(2,9)}`,announce:(r,e="polite")=>{const t=document.createElement("div");t.setAttribute("aria-live",e),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.textContent=r,document.body.appendChild(t),setTimeout(()=>{t.parentNode&&document.body.removeChild(t)},1e3)},setExpanded:(r,e)=>{r.setAttribute("aria-expanded",e.toString())},setSelected:(r,e)=>{r.setAttribute("aria-selected",e.toString())},setPressed:(r,e)=>{r.setAttribute("aria-pressed",e.toString())}},dk=()=>window.matchMedia("(prefers-reduced-motion: reduce)").matches,Vd=y.createContext(void 0),sx=()=>{const r=y.useContext(Vd);if(r===void 0)throw new Error("useNetworkStatus must be used within a NetworkStatusProvider");return r},qd=({children:r})=>{const[e,t]=y.useState(navigator.onLine),[n,s]=y.useState(!1);y.useEffect(()=>{const o=()=>{t(!0),console.log("ðŸŒ Network: Online")},a=()=>{t(!1),console.log("ðŸŒ Network: Offline")};return window.addEventListener("online",o),window.addEventListener("offline",a),(()=>{if("connection"in navigator){const l=navigator.connection;if(l){const u=l.effectiveType==="slow-2g"||l.effectiveType==="2g";s(u),u&&console.log("ðŸŒ Network: Slow connection detected")}}})(),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",a)}},[]);const i={isOnline:e,isSlowConnection:n};return d.jsx(Vd.Provider,{value:i,children:r})},ix=({isOpen:r,onClose:e,onSubmit:t,title:n="Enter your email address",description:s="We'll send you a secure sign-in link.",submitLabel:i="Send Link"})=>{const[o,a]=y.useState(""),[c,l]=y.useState(!1),[u,h]=y.useState(""),[f,p]=y.useState(!1),w=y.useRef(null),g=y.useRef(null),m=y.useRef(null),[x]=y.useState(()=>Bs.generateId("email-modal"));y.useEffect(()=>{if(r&&w.current)return a(""),h(""),l(!1),p(!1),m.current=new Fd(w.current),m.current.activate(),Bs.announce(`${n} dialog opened`),()=>{m.current&&(m.current.deactivate(),m.current=null)}},[r,n]),y.useEffect(()=>{if(!r)return;const E=_=>{zd.handleEscape(_,e)};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[r,e]);const b=E=>E?/\S+@\S+\.\S+/.test(E)?null:"Please enter a valid email address.":"Email is required.",v=async E=>{E.preventDefault();const _=b(o);if(_){h(_);return}l(!0),h("");try{await t(o.trim()),p(!0),setTimeout(()=>{e()},3e3)}catch(S){h(S instanceof Error?S.message:"Failed to send email"),l(!1)}};return r?d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{pointerEvents:r?"auto":"none"},children:[d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:f?void 0:e}),d.jsxs("div",{ref:w,className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl overflow-hidden",role:"dialog","aria-modal":"true","aria-labelledby":`${x}-title`,"aria-describedby":`${x}-description`,"aria-live":"polite",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[d.jsxs("div",{children:[d.jsx("h2",{id:`${x}-title`,className:"text-xl font-semibold text-gray-900",children:f?"Check your email!":n}),d.jsx("p",{id:`${x}-description`,className:"text-sm text-gray-600 mt-1",children:f?`We sent a sign-in link to ${o}`:s})]}),d.jsx("button",{onClick:e,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",disabled:c,children:d.jsx(Xt,{className:"w-5 h-5"})})]}),f?d.jsxs("div",{className:"p-6 text-center",children:[d.jsx("div",{className:"mx-auto flex items-center justify-center w-16 h-16 bg-emerald-100 rounded-full mb-4",children:d.jsx(Ud,{className:"w-8 h-8 text-emerald-600"})}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Sign-in link sent!"}),d.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:"Click the link in your email to sign in. The link will expire in 1 hour for security."}),d.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:d.jsxs("p",{className:"text-sm text-gray-700",children:[d.jsx("strong",{children:"Sent to:"})," ",o]})}),d.jsx("p",{className:"text-xs text-gray-500",children:"Didn't receive it? Check your spam folder or close this to try again."})]}):d.jsx("form",{onSubmit:v,className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email-input",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:d.jsx(vo,{className:"h-5 w-5 text-gray-400"})}),d.jsx("input",{ref:g,id:"email-input",type:"email",value:o,onChange:E=>a(E.target.value),className:`block w-full pl-10 pr-3 py-3 border rounded-xl focus:ring-2 focus:ring-emerald-500 transition-colors ${u?"border-red-500 focus:border-red-500":"border-gray-300 focus:border-emerald-500"}`,placeholder:"your@email.com",disabled:c,autoComplete:"email"})]}),u&&d.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:u})]}),d.jsx("button",{type:"submit",disabled:c||!o.trim(),className:"w-full flex items-center justify-center gap-3 bg-emerald-500 hover:bg-emerald-600 disabled:bg-gray-300 disabled:cursor-not-allowed text-white py-3 px-6 rounded-xl font-semibold transition-colors shadow-lg",children:c?d.jsxs(d.Fragment,{children:[d.jsx(Qv,{className:"w-5 h-5 animate-spin"}),"Sending..."]}):d.jsxs(d.Fragment,{children:[d.jsx(vo,{className:"w-5 h-5"}),i]})})]})}),!f&&d.jsx("div",{className:"px-6 pb-6",children:d.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})})]})]}):null},ox=()=>{const{isOpen:r,pendingIntent:e,intentMeta:t}=Eb(),{signInWithGoogle:n,signInWithEmailLink:s,user:i}=Xs(),{isOnline:o}=sx(),[a,c]=y.useState(!1),l=y.useRef(null),u=y.useRef(null),h=y.useRef(null),[f]=y.useState(()=>Bs.generateId("auth-modal")),p=t??(e?na[e]:void 0)??wb;y.useEffect(()=>{if(r&&l.current)return h.current=new Fd(l.current),h.current.activate(),Bs.announce(`${p.title} dialog opened`),()=>{h.current&&(h.current.deactivate(),h.current=null)}},[r,p.title]),y.useEffect(()=>{const v=E=>{r&&zd.handleEscape(E,w)};if(r)return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),y.useEffect(()=>{i&&r&&Br({status:"success"})},[i,r]);const w=()=>{Br({status:"cancel"})},g=async()=>{try{const{error:v}=await n();v&&(console.error("Google sign in error:",v),Br({status:"error",reason:v.message||"Google sign in failed"}))}catch(v){console.error("Google sign in exception:",v),Br({status:"error",reason:v instanceof Error?v.message:"Unknown error"})}},m=()=>{c(!0)},x=async v=>{try{const{error:E}=await s(v);if(E)throw console.error("Email sign in error:",E),new Error(E.message||"Email sign in failed");c(!1),Br({status:"success"})}catch(E){throw console.error("Email sign in exception:",E),E}};if(!r)return null;const b=!o;return d.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",style:{pointerEvents:r?"auto":"none"},children:[d.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:w}),d.jsxs("div",{ref:l,className:"relative w-full max-w-md bg-white rounded-2xl shadow-2xl",role:"dialog","aria-modal":"true","aria-labelledby":`${f}-title`,"aria-describedby":`${f}-description`,"aria-live":"polite",children:[d.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-100",children:[d.jsxs("div",{children:[d.jsx("h2",{id:`${f}-title`,className:"text-xl font-semibold text-gray-900",children:p.title}),d.jsx("p",{id:`${f}-description`,className:"text-sm text-gray-600 mt-1",children:p.description})]}),d.jsx("button",{onClick:w,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Close modal",children:d.jsx(Xt,{className:"w-5 h-5"})})]}),d.jsx("div",{className:"p-6",children:d.jsxs("div",{className:"space-y-4",children:[d.jsxs("button",{ref:u,onClick:g,disabled:b,className:"w-full flex items-center justify-center gap-3 bg-emerald-500 hover:bg-emerald-600 disabled:bg-gray-300 text-white py-4 px-6 rounded-xl font-semibold transition-colors disabled:cursor-not-allowed shadow-lg","data-qa":"auth-gate-google",children:[d.jsx(Jv,{className:"w-5 h-5"}),p.primaryCta]}),d.jsxs("div",{className:"relative",children:[d.jsx("div",{className:"absolute inset-0 flex items-center",children:d.jsx("div",{className:"w-full border-t border-gray-200"})}),d.jsx("div",{className:"relative flex justify-center text-sm",children:d.jsx("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),d.jsxs("button",{onClick:m,disabled:b,className:"w-full flex items-center justify-center gap-3 bg-white border-2 border-gray-200 hover:bg-gray-50 hover:border-gray-300 disabled:bg-gray-100 disabled:border-gray-200 text-gray-700 py-4 px-6 rounded-xl font-semibold transition-colors disabled:cursor-not-allowed","data-qa":"auth-gate-email",children:[d.jsx(vo,{className:"w-5 h-5"}),p.secondaryCta]}),b&&d.jsx("div",{className:"text-center py-2",children:d.jsx("p",{className:"text-sm text-orange-600 bg-orange-50 px-3 py-2 rounded-lg",children:"You're offline. Try again when you're back online."})})]})}),d.jsx("div",{className:"px-6 pb-6",children:d.jsx("p",{className:"text-xs text-gray-500 text-center",children:"By continuing, you agree to our Terms of Service and Privacy Policy."})})]}),d.jsx(ix,{isOpen:a,onClose:()=>c(!1),onSubmit:x,title:"Continue with Email",description:"Enter your email address and we'll send you a secure sign-in link.",submitLabel:"Send Sign-in Link"})]})};let ax={data:""},cx=r=>{if(typeof window=="object"){let e=(r?r.querySelector("#_goober"):window._goober)||Object.assign(document.createElement("style"),{innerHTML:" ",id:"_goober"});return e.nonce=window.__nonce__,e.parentNode||(r||document.head).appendChild(e),e.firstChild}return r||ax},lx=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,ux=/\/\*[^]*?\*\/|  +/g,tl=/\n+/g,ft=(r,e)=>{let t="",n="",s="";for(let i in r){let o=r[i];i[0]=="@"?i[1]=="i"?t=i+" "+o+";":n+=i[1]=="f"?ft(o,i):i+"{"+ft(o,i[1]=="k"?"":e)+"}":typeof o=="object"?n+=ft(o,e?e.replace(/([^,])+/g,a=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,a):a?a+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),s+=ft.p?ft.p(i,o):i+":"+o+";")}return t+(e&&s?e+"{"+s+"}":s)+n},Ge={},Wd=r=>{if(typeof r=="object"){let e="";for(let t in r)e+=t+Wd(r[t]);return e}return r},dx=(r,e,t,n,s)=>{let i=Wd(r),o=Ge[i]||(Ge[i]=(c=>{let l=0,u=11;for(;l<c.length;)u=101*u+c.charCodeAt(l++)>>>0;return"go"+u})(i));if(!Ge[o]){let c=i!==r?r:(l=>{let u,h,f=[{}];for(;u=lx.exec(l.replace(ux,""));)u[4]?f.shift():u[3]?(h=u[3].replace(tl," ").trim(),f.unshift(f[0][h]=f[0][h]||{})):f[0][u[1]]=u[2].replace(tl," ").trim();return f[0]})(r);Ge[o]=ft(s?{["@keyframes "+o]:c}:c,t?"":"."+o)}let a=t&&Ge.g?Ge.g:null;return t&&(Ge.g=Ge[o]),((c,l,u,h)=>{h?l.data=l.data.replace(h,c):l.data.indexOf(c)===-1&&(l.data=u?c+l.data:l.data+c)})(Ge[o],e,n,a),o},hx=(r,e,t)=>r.reduce((n,s,i)=>{let o=e[i];if(o&&o.call){let a=o(t),c=a&&a.props&&a.props.className||/^go/.test(a)&&a;o=c?"."+c:a&&typeof a=="object"?a.props?"":ft(a,""):a===!1?"":a}return n+s+(o??"")},"");function si(r){let e=this||{},t=r.call?r(e.p):r;return dx(t.unshift?t.raw?hx(t,[].slice.call(arguments,1),e.p):t.reduce((n,s)=>Object.assign(n,s&&s.call?s(e.p):s),{}):t,cx(e.target),e.g,e.o,e.k)}let Hd,Eo,So;si.bind({g:1});let et=si.bind({k:1});function fx(r,e,t,n){ft.p=e,Hd=r,Eo=t,So=n}function Pt(r,e){let t=this||{};return function(){let n=arguments;function s(i,o){let a=Object.assign({},i),c=a.className||s.className;t.p=Object.assign({theme:Eo&&Eo()},a),t.o=/ *go\d+/.test(c),a.className=si.apply(t,n)+(c?" "+c:""),e&&(a.ref=o);let l=r;return r[0]&&(l=a.as||r,delete a.as),So&&l[0]&&So(a),Hd(l,a)}return e?e(s):s}}var px=r=>typeof r=="function",Ms=(r,e)=>px(r)?r(e):r,mx=(()=>{let r=0;return()=>(++r).toString()})(),Gd=(()=>{let r;return()=>{if(r===void 0&&typeof window<"u"){let e=matchMedia("(prefers-reduced-motion: reduce)");r=!e||e.matches}return r}})(),gx=20,ha="default",Kd=(r,e)=>{let{toastLimit:t}=r.settings;switch(e.type){case 0:return{...r,toasts:[e.toast,...r.toasts].slice(0,t)};case 1:return{...r,toasts:r.toasts.map(o=>o.id===e.toast.id?{...o,...e.toast}:o)};case 2:let{toast:n}=e;return Kd(r,{type:r.toasts.find(o=>o.id===n.id)?1:0,toast:n});case 3:let{toastId:s}=e;return{...r,toasts:r.toasts.map(o=>o.id===s||s===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return e.toastId===void 0?{...r,toasts:[]}:{...r,toasts:r.toasts.filter(o=>o.id!==e.toastId)};case 5:return{...r,pausedAt:e.time};case 6:let i=e.time-(r.pausedAt||0);return{...r,pausedAt:void 0,toasts:r.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+i}))}}},Es=[],Zd={toasts:[],pausedAt:void 0,settings:{toastLimit:gx}},De={},Jd=(r,e=ha)=>{De[e]=Kd(De[e]||Zd,r),Es.forEach(([t,n])=>{t===e&&n(De[e])})},Yd=r=>Object.keys(De).forEach(e=>Jd(r,e)),yx=r=>Object.keys(De).find(e=>De[e].toasts.some(t=>t.id===r)),ii=(r=ha)=>e=>{Jd(e,r)},wx={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},bx=(r={},e=ha)=>{let[t,n]=y.useState(De[e]||Zd),s=y.useRef(De[e]);y.useEffect(()=>(s.current!==De[e]&&n(De[e]),Es.push([e,n]),()=>{let o=Es.findIndex(([a])=>a===e);o>-1&&Es.splice(o,1)}),[e]);let i=t.toasts.map(o=>{var a,c,l;return{...r,...r[o.type],...o,removeDelay:o.removeDelay||((a=r[o.type])==null?void 0:a.removeDelay)||r?.removeDelay,duration:o.duration||((c=r[o.type])==null?void 0:c.duration)||r?.duration||wx[o.type],style:{...r.style,...(l=r[o.type])==null?void 0:l.style,...o.style}}});return{...t,toasts:i}},vx=(r,e="blank",t)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:e,ariaProps:{role:"status","aria-live":"polite"},message:r,pauseDuration:0,...t,id:t?.id||mx()}),Mn=r=>(e,t)=>{let n=vx(e,r,t);return ii(n.toasterId||yx(n.id))({type:2,toast:n}),n.id},ae=(r,e)=>Mn("blank")(r,e);ae.error=Mn("error");ae.success=Mn("success");ae.loading=Mn("loading");ae.custom=Mn("custom");ae.dismiss=(r,e)=>{let t={type:3,toastId:r};e?ii(e)(t):Yd(t)};ae.dismissAll=r=>ae.dismiss(void 0,r);ae.remove=(r,e)=>{let t={type:4,toastId:r};e?ii(e)(t):Yd(t)};ae.removeAll=r=>ae.remove(void 0,r);ae.promise=(r,e,t)=>{let n=ae.loading(e.loading,{...t,...t?.loading});return typeof r=="function"&&(r=r()),r.then(s=>{let i=e.success?Ms(e.success,s):void 0;return i?ae.success(i,{id:n,...t,...t?.success}):ae.dismiss(n),s}).catch(s=>{let i=e.error?Ms(e.error,s):void 0;i?ae.error(i,{id:n,...t,...t?.error}):ae.dismiss(n)}),r};var xx=1e3,_x=(r,e="default")=>{let{toasts:t,pausedAt:n}=bx(r,e),s=y.useRef(new Map).current,i=y.useCallback((h,f=xx)=>{if(s.has(h))return;let p=setTimeout(()=>{s.delete(h),o({type:4,toastId:h})},f);s.set(h,p)},[]);y.useEffect(()=>{if(n)return;let h=Date.now(),f=t.map(p=>{if(p.duration===1/0)return;let w=(p.duration||0)+p.pauseDuration-(h-p.createdAt);if(w<0){p.visible&&ae.dismiss(p.id);return}return setTimeout(()=>ae.dismiss(p.id,e),w)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[t,n,e]);let o=y.useCallback(ii(e),[e]),a=y.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=y.useCallback((h,f)=>{o({type:1,toast:{id:h,height:f}})},[o]),l=y.useCallback(()=>{n&&o({type:6,time:Date.now()})},[n,o]),u=y.useCallback((h,f)=>{let{reverseOrder:p=!1,gutter:w=8,defaultPosition:g}=f||{},m=t.filter(v=>(v.position||g)===(h.position||g)&&v.height),x=m.findIndex(v=>v.id===h.id),b=m.filter((v,E)=>E<x&&v.visible).length;return m.filter(v=>v.visible).slice(...p?[b+1]:[0,b]).reduce((v,E)=>v+(E.height||0)+w,0)},[t]);return y.useEffect(()=>{t.forEach(h=>{if(h.dismissed)i(h.id,h.removeDelay);else{let f=s.get(h.id);f&&(clearTimeout(f),s.delete(h.id))}})},[t,i]),{toasts:t,handlers:{updateHeight:c,startPause:a,endPause:l,calculateOffset:u}}},Ex=et`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Sx=et`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,kx=et`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Cx=Pt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ex} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Sx} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${r=>r.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${kx} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Tx=et`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ax=Pt("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${r=>r.secondary||"#e0e0e0"};
  border-right-color: ${r=>r.primary||"#616161"};
  animation: ${Tx} 1s linear infinite;
`,Px=et`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ix=et`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,jx=Pt("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${r=>r.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Px} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ix} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${r=>r.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Ox=Pt("div")`
  position: absolute;
`,Nx=Pt("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Rx=et`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,$x=Pt("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Rx} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,Lx=({toast:r})=>{let{icon:e,type:t,iconTheme:n}=r;return e!==void 0?typeof e=="string"?y.createElement($x,null,e):e:t==="blank"?null:y.createElement(Nx,null,y.createElement(Ax,{...n}),t!=="loading"&&y.createElement(Ox,null,t==="error"?y.createElement(Cx,{...n}):y.createElement(jx,{...n})))},Dx=r=>`
0% {transform: translate3d(0,${r*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Ux=r=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${r*-150}%,-1px) scale(.6); opacity:0;}
`,Bx="0%{opacity:0;} 100%{opacity:1;}",Mx="0%{opacity:1;} 100%{opacity:0;}",Fx=Pt("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,zx=Pt("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,Vx=(r,e)=>{let t=r.includes("top")?1:-1,[n,s]=Gd()?[Bx,Mx]:[Dx(t),Ux(t)];return{animation:e?`${et(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${et(s)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},qx=y.memo(({toast:r,position:e,style:t,children:n})=>{let s=r.height?Vx(r.position||e||"top-center",r.visible):{opacity:0},i=y.createElement(Lx,{toast:r}),o=y.createElement(zx,{...r.ariaProps},Ms(r.message,r));return y.createElement(Fx,{className:r.className,style:{...s,...t,...r.style}},typeof n=="function"?n({icon:i,message:o}):y.createElement(y.Fragment,null,i,o))});fx(y.createElement);var Wx=({id:r,className:e,style:t,onHeightUpdate:n,children:s})=>{let i=y.useCallback(o=>{if(o){let a=()=>{let c=o.getBoundingClientRect().height;n(r,c)};a(),new MutationObserver(a).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[r,n]);return y.createElement("div",{ref:i,className:e,style:t},s)},Hx=(r,e)=>{let t=r.includes("top"),n=t?{top:0}:{bottom:0},s=r.includes("center")?{justifyContent:"center"}:r.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Gd()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${e*(t?1:-1)}px)`,...n,...s}},Gx=si`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,fs=16,Kx=({reverseOrder:r,position:e="top-center",toastOptions:t,gutter:n,children:s,toasterId:i,containerStyle:o,containerClassName:a})=>{let{toasts:c,handlers:l}=_x(t,i);return y.createElement("div",{"data-rht-toaster":i||"",style:{position:"fixed",zIndex:9999,top:fs,left:fs,right:fs,bottom:fs,pointerEvents:"none",...o},className:a,onMouseEnter:l.startPause,onMouseLeave:l.endPause},c.map(u=>{let h=u.position||e,f=l.calculateOffset(u,{reverseOrder:r,gutter:n,defaultPosition:e}),p=Hx(h,f);return y.createElement(Wx,{id:u.id,key:u.id,onHeightUpdate:l.updateHeight,className:u.visible?Gx:"",style:p},u.type==="custom"?Ms(u.message,u):s?s(u):y.createElement(qx,{toast:u,position:h}))}))},qt=ae;const Ut=class Ut{constructor(){X(this,"scrollPositions",new Map);X(this,"currentRoute","");X(this,"scrollTimeout",null);X(this,"isNavigating",!1);X(this,"restoreTimeout",null);typeof window<"u"&&(this.currentRoute=window.location.pathname,this.setupNavigationListeners())}static getInstance(){return Ut.instance||(Ut.instance=new Ut),Ut.instance}setupNavigationListeners(){let e=window.location.pathname;new MutationObserver(()=>{const n=window.location.pathname;n!==e&&(console.log(`ðŸ”„ Route change detected: ${e} â†’ ${n}`),this.handleRouteChange(e,n),e=n)}).observe(document.documentElement,{subtree:!0,childList:!0}),window.addEventListener("popstate",()=>{console.log("â¬…ï¸ Browser navigation detected"),this.isNavigating=!0,setTimeout(()=>{this.restoreScrollPosition(window.location.pathname),this.isNavigating=!1},100)}),window.addEventListener("beforeunload",()=>{this.saveCurrentScrollPosition()})}handleRouteChange(e,t){e!==t&&(this.saveScrollPosition(e),this.currentRoute=t,this.scheduleScrollRestore(t))}scheduleScrollRestore(e){this.restoreTimeout&&clearTimeout(this.restoreTimeout),this.restoreTimeout=window.setTimeout(()=>{this.isNavigating||this.restoreScrollPosition(e)},150)}saveScrollPosition(e){const t=e||this.currentRoute,n=this.getCurrentScrollPosition();n>50&&(this.scrollPositions.set(t,{scrollY:n,timestamp:Date.now(),route:t}),console.log(`ðŸ’¾ Saved scroll position for ${t}: ${n}px`))}saveCurrentScrollPosition(){this.saveScrollPosition(this.currentRoute)}restoreScrollPosition(e){const t=this.scrollPositions.get(e);return t?Date.now()-t.timestamp<10*60*1e3?(console.log(`ðŸ”„ Restoring scroll position for ${e}: ${t.scrollY}px`),this.scrollToPosition(t.scrollY,"smooth"),!0):(console.log(`â° Scroll position for ${e} is too old, ignoring`),this.scrollPositions.delete(e),!1):(console.log(`ðŸ“ No saved scroll position for ${e}`),!1)}getCurrentScrollPosition(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0}scrollToPosition(e,t="smooth"){try{requestAnimationFrame(()=>{window.scrollTo({top:e,left:0,behavior:t}),t==="smooth"&&setTimeout(()=>{const n=this.getCurrentScrollPosition();Math.abs(n-e)>100&&window.scrollTo(0,e)},300)})}catch(n){console.warn("Scroll API failed, using fallback:",n),window.scrollTo(0,e),document.documentElement.scrollTop=e,document.body.scrollTop=e}}scrollToTop(e={}){const{behavior:t="smooth",delay:n=0}=e;this.scrollTimeout&&window.clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{this.scrollToPosition(0,t),this.scrollTimeout=null},n)}scrollToElement(e,t={}){const{behavior:n="smooth",offset:s=0}=t;this.scrollTimeout&&window.clearTimeout(this.scrollTimeout),this.scrollTimeout=window.setTimeout(()=>{const i=document.getElementById(e);if(i){const o=i.offsetTop-s;this.scrollToPosition(o,n)}this.scrollTimeout=null},50)}clearOldPositions(){const e=Date.now(),t=10*60*1e3;for(const[n,s]of this.scrollPositions.entries())e-s.timestamp>t&&(this.scrollPositions.delete(n),console.log(`ðŸ—‘ï¸ Cleared old scroll position for ${n}`))}markNavigationAsIntentional(){this.isNavigating=!0,setTimeout(()=>{this.isNavigating=!1},500)}getDebugInfo(){return{currentRoute:this.currentRoute,savedPositions:Array.from(this.scrollPositions.entries()).map(([e,t])=>({route:e,scrollY:t.scrollY,age:Date.now()-t.timestamp})),isNavigating:this.isNavigating}}destroy(){this.scrollTimeout&&window.clearTimeout(this.scrollTimeout),this.restoreTimeout&&window.clearTimeout(this.restoreTimeout),this.scrollPositions.clear()}};X(Ut,"instance");let ko=Ut;const oi=ko.getInstance(),Zx=r=>{oi.scrollToTop(r)},Nn=r=>{oi.saveScrollPosition(r)},Fs=()=>{oi.markNavigationAsIntentional()};setInterval(()=>{oi.clearOldPositions()},5*60*1e3);const Jx=({type:r,message:e,duration:t=5e3,onClose:n,show:s=!0})=>{const[i,o]=y.useState(s);if(y.useEffect(()=>{o(s)},[s]),y.useEffect(()=>{if(i&&t>0){const l=setTimeout(()=>{o(!1),n?.()},t);return()=>clearTimeout(l)}},[i,t,n]),!i)return null;const a=()=>{switch(r){case"success":return d.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return d.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return d.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})});case"info":return d.jsx("svg",{width:"20",height:"20",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}},c=()=>{const l={position:"fixed",top:"20px",right:"20px",zIndex:9999,padding:"16px 20px",borderRadius:"16px",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.15)",display:"flex",alignItems:"center",gap:"12px",maxWidth:"400px",minWidth:"300px",animation:"slideIn 0.3s ease-out",border:"1px solid",backdropFilter:"blur(10px)",fontSize:"14px",fontWeight:"600",fontFamily:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif'};switch(r){case"success":return{...l,backgroundColor:"rgba(16, 185, 129, 0.95)",color:"white",borderColor:"rgba(16, 185, 129, 0.3)"};case"error":return{...l,backgroundColor:"rgba(239, 68, 68, 0.95)",color:"white",borderColor:"rgba(239, 68, 68, 0.3)"};case"warning":return{...l,backgroundColor:"rgba(245, 158, 11, 0.95)",color:"white",borderColor:"rgba(245, 158, 11, 0.3)"};case"info":return{...l,backgroundColor:"rgba(59, 130, 246, 0.95)",color:"white",borderColor:"rgba(59, 130, 246, 0.3)"}}};return d.jsxs(d.Fragment,{children:[d.jsx("style",{children:`
          @keyframes slideIn {
            from {
              transform: translateX(100%);
              opacity: 0;
            }
            to {
              transform: translateX(0);
              opacity: 1;
            }
          }
          
          @keyframes slideOut {
            from {
              transform: translateX(0);
              opacity: 1;
            }
            to {
              transform: translateX(100%);
              opacity: 0;
            }
          }
        `}),d.jsxs("div",{style:c(),children:[d.jsx("div",{style:{flexShrink:0},children:a()}),d.jsx("div",{style:{flex:1},children:e})]})]})},Yx={success:"success",error:"error",warning:"warning",info:"info",prediction_outcome:"success",payout:"success",comment:"info",market_close:"warning",like:"info",follow:"info",settlement_ready:"warning",settlement_completed:"success"},Qx=()=>{const{toasts:r,removeToast:e}=ra();return d.jsx(d.Fragment,{children:r.map(t=>d.jsx(Jx,{type:Yx[t.type]??"info",message:t.message,duration:t.duration,onClose:()=>e(t.id),show:!0},t.id))})},Bt=class Bt{constructor(){X(this,"deferredPrompt",null);X(this,"isInstalled",!1);this.init()}static getInstance(){return Bt.instance||(Bt.instance=new Bt),Bt.instance}init(){this.registerServiceWorker(),this.checkInstallStatus(),this.setupInstallPrompt()}async registerServiceWorker(){if("serviceWorker"in navigator)try{const e=await navigator.serviceWorker.register("/sw.js");console.log("Service Worker registered successfully:",e),e.addEventListener("updatefound",()=>{const t=e.installing;t&&t.addEventListener("statechange",()=>{t.state==="installed"&&navigator.serviceWorker.controller&&this.showUpdateAvailable()})})}catch(e){console.error("Service Worker registration failed:",e)}}checkInstallStatus(){this.isInstalled=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}setupInstallPrompt(){window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),this.deferredPrompt=e,window.dispatchEvent(new CustomEvent("pwa-installable",{detail:{canInstall:!0}}))}),window.addEventListener("appinstalled",()=>{this.isInstalled=!0,this.deferredPrompt=null,this.trackInstallation(),window.dispatchEvent(new CustomEvent("pwa-installed"))})}async promptInstall(){if(!this.deferredPrompt)return!1;try{await this.deferredPrompt.prompt();const e=await this.deferredPrompt.userChoice;return this.deferredPrompt=null,e.outcome==="accepted"}catch(e){return console.error("Install prompt failed:",e),!1}}canInstall(){return!!this.deferredPrompt&&!this.isInstalled}isAppInstalled(){return this.isInstalled}isIOSDevice(){return/iPad|iPhone|iPod/.test(navigator.userAgent)}isAndroidDevice(){return/Android/.test(navigator.userAgent)}showUpdateAvailable(){const e=new CustomEvent("pwa-update-available",{detail:{message:"A new version of Fan Club Z is available. Refresh to update.",action:()=>window.location.reload()}});window.dispatchEvent(e)}trackInstallation(){typeof window<"u"&&window.gtag&&window.gtag("event","pwa_install",{event_category:"engagement",event_label:"app_install"})}async requestNotificationPermission(){return"Notification"in window?Notification.permission==="granted"?!0:Notification.permission==="denied"?!1:await Notification.requestPermission()==="granted":!1}async subscribeToPushNotifications(){try{const e=await navigator.serviceWorker.ready,t=await e.pushManager.getSubscription();if(t)return t;const n=await e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:this.urlBase64ToUint8Array(md||"")});return await this.sendSubscriptionToServer(n),n}catch(e){return console.error("Push subscription failed:",e),null}}urlBase64ToUint8Array(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),s=window.atob(n),i=new Uint8Array(s.length);for(let o=0;o<s.length;++o){const a=s.charCodeAt(o);i[o]=a}return i}async sendSubscriptionToServer(e){try{await fetch("/api/notifications/subscribe",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(t){console.error("Failed to send subscription to server:",t)}}};X(Bt,"instance");let Co=Bt;const Se=Co.getInstance(),Xx=()=>{const[r,e]=y.useState(!1),[t,n]=y.useState(!1);y.useEffect(()=>{const a=()=>{if(Se.isAppInstalled()){e(!1);return}const u=Se.isIOSDevice(),h=localStorage.getItem(u?"ios-install-dismissed":"pwa-banner-dismissed"),f=h?parseInt(h):0,p=(Date.now()-f)/(24*60*60*1e3),g=!h||p>(u?3:1),m=sessionStorage.getItem("pwa-banner-session-dismissed");g&&!m&&(u?setTimeout(()=>e(!0),5e3):n(Se.canInstall()))},c=()=>{n(!0),localStorage.getItem("pwa-banner-dismissed")||e(!0)},l=()=>{e(!1),n(!1)};return window.addEventListener("pwa-installable",c),window.addEventListener("pwa-installed",l),a(),()=>{window.removeEventListener("pwa-installable",c),window.removeEventListener("pwa-installed",l)}},[]);const s=async()=>{Se.isIOSDevice()?(window.dispatchEvent(new CustomEvent("show-ios-install")),e(!1)):(await Se.promptInstall()||localStorage.setItem("pwa-banner-dismissed",Date.now().toString()),e(!1))},i=()=>{e(!1);const a=Se.isIOSDevice()?"ios-install-dismissed":"pwa-banner-dismissed";localStorage.setItem(a,Date.now().toString()),sessionStorage.setItem("pwa-banner-session-dismissed","true")};if(!r)return null;const o=Se.isIOSDevice();return d.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-purple-500 to-teal-600 text-white shadow-lg animate-in slide-in-from-top duration-300",children:d.jsxs("div",{className:"flex items-center justify-between px-4 py-3 max-w-md mx-auto",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"bg-white/20 p-2 rounded-lg backdrop-blur-sm",children:d.jsx(Md,{className:"w-5 h-5"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-semibold text-sm",children:o?"Add to Home Screen":"Install Fan Club Z"}),d.jsx("p",{className:"text-xs text-green-100",children:o?"Get quick access and offline features":"Faster loading â€¢ Offline access â€¢ Notifications"})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsxs("button",{onClick:s,className:"bg-white text-teal-600 px-3 py-1.5 rounded-md text-sm font-medium hover:bg-teal-50 active:bg-teal-100 transition-colors flex items-center space-x-1 shadow-sm",children:[d.jsx(bo,{className:"w-4 h-4"}),d.jsx("span",{children:o?"How To":"Install"})]}),d.jsx("button",{onClick:i,className:"text-green-100 hover:text-white transition-colors p-1 rounded","aria-label":"Dismiss install banner",children:d.jsx(Xt,{className:"w-5 h-5"})})]})]})})},e_=({isOpen:r,onClose:e})=>r?d.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex flex-col ios-install-modal",onClick:e,style:{zIndex:1e4},children:d.jsx("div",{className:"flex-1 flex items-center justify-center p-4 pb-24",children:d.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-md shadow-2xl animate-in zoom-in-95 duration-200 flex flex-col max-h-[calc(100vh-8rem)]",onClick:t=>t.stopPropagation(),style:{zIndex:10001},children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-emerald-600 p-4 text-center text-white relative rounded-t-2xl flex-shrink-0",children:[d.jsx("button",{onClick:e,className:"absolute top-3 right-3 text-white/80 hover:text-white transition-colors p-1 rounded-full hover:bg-white/20","aria-label":"Close modal",children:d.jsx(Xt,{className:"w-5 h-5"})}),d.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 bg-white/20 rounded-full mb-3",children:d.jsx(Md,{className:"w-6 h-6"})}),d.jsx("h2",{className:"text-lg font-bold mb-1",children:"Install Fan Club Z"}),d.jsx("p",{className:"text-green-100 text-sm",children:"Get the full app experience with offline access and notifications"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto overscroll-contain",children:d.jsxs("div",{className:"p-4 space-y-4",children:[d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"1"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-900 mb-2 text-base",children:"Tap the Share button"}),d.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[d.jsx(ex,{className:"w-4 h-4"}),d.jsx("span",{children:"Usually found at the bottom of Safari"})]})]})]}),d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"2"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-900 mb-2 text-base",children:'Select "Add to Home Screen"'}),d.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[d.jsx(ni,{className:"w-4 h-4"}),d.jsx("span",{children:"Scroll down in the share menu to find this option"})]})]})]}),d.jsxs("div",{className:"flex items-start space-x-3",children:[d.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:d.jsx("span",{className:"text-blue-600 font-bold text-sm",children:"3"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-medium text-gray-900 mb-2 text-base",children:'Tap "Add" to confirm'}),d.jsx("p",{className:"text-sm text-gray-600",children:"Fan Club Z will appear on your home screen like a native app"})]})]})]}),d.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[d.jsx("h3",{className:"font-medium text-gray-900 mb-3 text-base",children:"Why install?"}),d.jsxs("ul",{className:"text-sm text-gray-600 space-y-2",children:[d.jsx("li",{children:"â€¢ Faster loading and smoother experience"}),d.jsx("li",{children:"â€¢ Works offline for viewing your predictions"}),d.jsx("li",{children:"â€¢ Push notifications for important updates"}),d.jsx("li",{children:"â€¢ Easy access from your home screen"})]})]}),d.jsx("div",{className:"h-4"})]})}),d.jsx("div",{className:"border-t border-gray-100 p-4 flex-shrink-0 rounded-b-2xl",children:d.jsxs("div",{className:"flex space-x-3",children:[d.jsx("button",{onClick:e,className:"flex-1 px-4 py-3 text-gray-700 bg-gray-100 rounded-lg font-medium hover:bg-gray-200 transition-colors text-base",children:"Maybe Later"}),d.jsx("button",{onClick:()=>{e(),localStorage.setItem("ios-install-dismissed",Date.now().toString())},className:"flex-1 px-4 py-3 bg-emerald-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors text-base",children:"Got It!"})]})})]})})}):null,t_=({onInstall:r,onDismiss:e})=>{const[t,n]=y.useState(!1);y.useEffect(()=>{const o=setTimeout(()=>n(!0),100);return()=>clearTimeout(o)},[]);const s=()=>{n(!1),setTimeout(r,300)},i=()=>{n(!1),setTimeout(e,300)};return d.jsx("div",{className:`
      fixed inset-x-4 top-20 max-w-sm mx-auto transition-all duration-300 ease-out pwa-install-prompt
      ${t?"opacity-100 transform translate-y-0":"opacity-0 transform -translate-y-4"}
    `,style:{zIndex:1e4},children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden",children:[d.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-teal-600 p-4 text-white",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-lg flex items-center justify-center",children:d.jsx(bo,{className:"w-4 h-4"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-sm",children:"Install Fan Club Z"}),d.jsx("p",{className:"text-xs text-green-100",children:"Get the full app experience"})]})]}),d.jsx("button",{onClick:i,className:"text-green-100 hover:text-white transition-colors p-1 rounded",children:d.jsx(Xt,{className:"w-4 h-4"})})]})}),d.jsxs("div",{className:"p-4 space-y-3",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-teal-500 rounded-lg flex items-center justify-center",children:d.jsx(nx,{className:"w-4 h-4 text-teal-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Faster Performance"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Lightning-fast loading and smooth animations"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:d.jsx(Hv,{className:"w-4 h-4 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Push Notifications"}),d.jsx("p",{className:"text-xs text-gray-600",children:"Get notified about prediction results and updates"})]})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:d.jsx(da,{className:"w-4 h-4 text-purple-600"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Offline Access"}),d.jsx("p",{className:"text-xs text-gray-600",children:"View your predictions even without internet"})]})]})]}),d.jsxs("div",{className:"p-4 pt-0 flex space-x-2",children:[d.jsx("button",{onClick:i,className:"flex-1 py-2.5 px-4 text-gray-700 bg-gray-100 rounded-lg font-medium text-sm hover:bg-gray-200 transition-colors",children:"Maybe Later"}),d.jsxs("button",{onClick:s,className:"flex-1 py-2.5 px-4 bg-teal-600 text-white rounded-lg font-medium text-sm hover:bg-green-700 transition-colors flex items-center justify-center space-x-1",children:[d.jsx(bo,{className:"w-4 h-4"}),d.jsx("span",{children:"Install"})]})]})]})})},r_=()=>{const[r,e]=y.useState(!1),[t,n]=y.useState(0);y.useEffect(()=>{let a=0;const c=["click","scroll","touchstart","keydown"],l=()=>{a++,n(a),a>=5&&!localStorage.getItem("install-prompt-shown")&&s()};return c.forEach(u=>{document.addEventListener(u,l,{passive:!0})}),()=>{c.forEach(u=>{document.removeEventListener(u,l)})}},[]);const s=()=>{if(Se.isAppInstalled())return;const a=localStorage.getItem("install-prompt-dismissed"),c=a?parseInt(a):0,l=24*60*60*1e3;if(!a||Date.now()-c>l){const u=Date.now()-parseInt(localStorage.getItem("session-start")||"0"),h=localStorage.getItem("has-created-prediction"),f=localStorage.getItem("has-placed-prediction");u>3e4&&(h||f)&&(e(!0),localStorage.setItem("install-prompt-shown","true"))}},i=async()=>{Se.isIOSDevice()?window.dispatchEvent(new CustomEvent("show-ios-install")):await Se.promptInstall()||localStorage.setItem("install-prompt-dismissed",Date.now().toString()),e(!1)},o=()=>{e(!1),localStorage.setItem("install-prompt-dismissed",Date.now().toString())};return r?d.jsx(t_,{onInstall:i,onDismiss:o}):null},n_=({isVisible:r,onUpdate:e,onDismiss:t})=>{const[n,s]=y.useState(!1),i=()=>{s(!0),setTimeout(t,300)},o=()=>{s(!0),setTimeout(e,200)};return!r&&!n?null:d.jsxs(d.Fragment,{children:[d.jsx("div",{className:`
        fixed inset-0 bg-black/10 backdrop-blur-sm transition-opacity duration-300 update-notification
        ${r&&!n?"opacity-100":"opacity-0"}
      `,style:{zIndex:1e4}}),d.jsx("div",{className:`
        fixed top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 update-notification
        w-[calc(100vw-32px)] max-w-sm max-h-[90vh] overflow-y-auto
        transition-all duration-300 ease-out
        ${r&&!n?"opacity-100 scale-100":"opacity-0 scale-95"}
      `,style:{zIndex:10001},children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-200 overflow-hidden",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-teal-600 p-4 text-white relative",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:d.jsx(xo,{className:"w-5 h-5"})}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("h3",{className:"font-bold text-base flex items-center space-x-2",children:[d.jsx("span",{children:"Update Available!"}),d.jsx(da,{className:"w-4 h-4"})]}),d.jsx("p",{className:"text-sm text-green-100",children:"New features and improvements ready"})]})]}),d.jsx("button",{onClick:i,className:"absolute top-3 right-3 text-green-100 hover:text-white transition-colors p-1 rounded-full hover:bg-white/10","aria-label":"Dismiss update notification",children:d.jsx(Xt,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:["ðŸš€ ",d.jsx("strong",{children:"What's New:"})]}),d.jsxs("ul",{className:"text-sm text-gray-600 space-y-1 ml-2",children:[d.jsx("li",{children:"â€¢ Improved performance and stability"}),d.jsx("li",{children:"â€¢ Enhanced user interface"}),d.jsx("li",{children:"â€¢ Bug fixes and optimizations"})]})]}),d.jsxs("div",{className:"flex space-x-3",children:[d.jsxs("button",{onClick:o,className:"flex-[2] bg-teal-600 text-white py-3 px-4 rounded-xl font-semibold text-sm hover:bg-green-700 active:bg-green-800 transition-colors flex items-center justify-center space-x-2 shadow-lg",children:[d.jsx(xo,{className:"w-4 h-4"}),d.jsx("span",{children:"Update Now"})]}),d.jsx("button",{onClick:i,className:"flex-1 py-3 px-4 text-gray-600 hover:text-gray-800 transition-colors text-sm font-medium hover:bg-gray-50 rounded-xl border border-gray-200",children:"Later"})]})]})]})})]})},s_=()=>{const[r,e]=y.useState(!1),[t,n]=y.useState(!1);y.useEffect(()=>{localStorage.getItem("session-start")||localStorage.setItem("session-start",Date.now().toString());const o=()=>{e(!0)},a=f=>{n(!0)},c=()=>{setTimeout(async()=>{const f=localStorage.getItem("user-has-interacted"),p=localStorage.getItem("notification-permission-requested");if(f&&!p){const w=await Se.requestNotificationPermission();localStorage.setItem("notification-permission-requested","true"),w&&await Se.subscribeToPushNotifications()}},15e3)};window.addEventListener("show-ios-install",o),window.addEventListener("pwa-update-available",a);const l=()=>{localStorage.setItem("user-has-interacted","true"),c()},u=["click","scroll","touchstart"];return u.forEach(f=>{document.addEventListener(f,l,{once:!0,passive:!0})}),(()=>{const f=parseInt(localStorage.getItem("visit-count")||"0")+1;localStorage.setItem("visit-count",f.toString()),localStorage.setItem("last-visit",Date.now().toString()),f>1&&localStorage.setItem("is-returning-user","true")})(),()=>{window.removeEventListener("show-ios-install",o),window.removeEventListener("pwa-update-available",a),u.forEach(f=>{document.removeEventListener(f,l)})}},[]);const s=()=>{typeof window<"u"&&"gtag"in window&&typeof window.gtag=="function"&&window.gtag("event","pwa_update_accepted",{event_category:"engagement",event_label:"app_update"}),window.location.reload()},i=()=>{n(!1),typeof window<"u"&&"gtag"in window&&typeof window.gtag=="function"&&window.gtag("event","pwa_update_dismissed",{event_category:"engagement",event_label:"app_update"})};return d.jsxs(d.Fragment,{children:[d.jsx(Xx,{}),d.jsx(r_,{}),d.jsx(e_,{isOpen:r,onClose:()=>e(!1)}),d.jsx(n_,{isVisible:t,onUpdate:s,onDismiss:i})]})};let i_=class extends y.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){console.error("PageWrapper Error Boundary caught an error:",e,t)}render(){return this.state.hasError?d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:d.jsxs("div",{className:"text-center max-w-md",children:[d.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),d.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-gray-600 mb-4",children:this.state.error?.message||"An unexpected error occurred while loading this page."}),d.jsx("button",{onClick:()=>{this.setState({hasError:!1,error:void 0}),this.props.onRetry()},className:"bg-teal-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Try Again"})]})}):this.props.children}};const o_=({title:r="Loading..."})=>d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-teal-500 mx-auto mb-4"}),d.jsx("p",{className:"text-gray-600",children:r})]})}),nn=({children:r,title:e="Loading...",fallback:t})=>{const[n,s]=pr.useState(0),i=()=>{s(o=>o+1)};return d.jsx(i_,{onRetry:i,children:d.jsx(y.Suspense,{fallback:t||d.jsx(o_,{title:e}),children:d.jsx("div",{children:r},n)})})};function a_(r,e){if(r instanceof RegExp)return{keys:!1,pattern:r};var t,n,s,i,o=[],a="",c=r.split("/");for(c[0]||c.shift();s=c.shift();)t=s[0],t==="*"?(o.push(t),a+=s[1]==="?"?"(?:/(.*))?":"/(.*)"):t===":"?(n=s.indexOf("?",1),i=s.indexOf(".",1),o.push(s.substring(1,~n?n:~i?i:s.length)),a+=~n&&!~i?"(?:/([^/]+?))?":"/([^/]+?)",~i&&(a+=(~n?"?":"")+"\\"+s.substring(i))):a+="/"+s;return{keys:o,pattern:new RegExp("^"+a+(e?"(?=$|/)":"/?$"),"i")}}const c_=Sh["useInsertionEffect"],l_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",u_=l_?y.useLayoutEffect:y.useEffect,d_=c_||u_,Qd=r=>{const e=y.useRef([r,(...t)=>e[0](...t)]).current;return d_(()=>{e[0]=r}),e[1]},h_="popstate",fa="pushState",pa="replaceState",f_="hashchange",rl=[h_,fa,pa,f_],p_=r=>{for(const e of rl)addEventListener(e,r);return()=>{for(const e of rl)removeEventListener(e,r)}},Xd=(r,e)=>Th.useSyncExternalStore(p_,r,e),m_=()=>location.search,g_=({ssrSearch:r=""}={})=>Xd(m_,()=>r),nl=()=>location.pathname,y_=({ssrPath:r}={})=>Xd(nl,r?()=>r:nl),w_=(r,{replace:e=!1,state:t=null}={})=>history[e?pa:fa](t,"",r),b_=(r={})=>[y_(r),w_],sl=Symbol.for("wouter_v3");if(typeof history<"u"&&typeof window[sl]>"u"){for(const r of[fa,pa]){const e=history[r];history[r]=function(){const t=e.apply(this,arguments),n=new Event(r);return n.arguments=arguments,dispatchEvent(n),t}}Object.defineProperty(window,sl,{value:!0})}const v_=(r,e)=>e.toLowerCase().indexOf(r.toLowerCase())?"~"+e:e.slice(r.length)||"/",eh=(r="")=>r==="/"?"":r,x_=(r,e)=>r[0]==="~"?r.slice(1):eh(e)+r,__=(r="",e)=>v_(il(eh(r)),il(e)),il=r=>{try{return decodeURI(r)}catch{return r}},E_={hook:b_,searchHook:g_,parser:a_,base:"",ssrPath:void 0,ssrSearch:void 0,ssrContext:void 0,hrefs:r=>r},S_=y.createContext(E_),th=()=>y.useContext(S_),k_={};y.createContext(k_);const rh=r=>{const[e,t]=r.hook(r);return[__(r.base,e),Qd((n,s)=>t(x_(n,r.base),s))]},C_=()=>rh(th());y.forwardRef((r,e)=>{const t=th(),[n,s]=rh(t),{to:i="",href:o=i,onClick:a,asChild:c,children:l,className:u,replace:h,state:f,...p}=r,w=Qd(m=>{m.ctrlKey||m.metaKey||m.altKey||m.shiftKey||m.button!==0||(a?.(m),m.defaultPrevented||(m.preventDefault(),s(o,r)))}),g=t.hrefs(o[0]==="~"?o.slice(1):t.base+o,t);return c&&y.isValidElement(l)?y.cloneElement(l,{onClick:w,href:g}):y.createElement("a",{...p,onClick:w,href:g,className:u?.call?u(n===o):u,children:l,ref:e})});const T_=()=>{const[r,e]=y.useState(()=>{try{const u=localStorage.getItem("fcz_onboarding_state_v3");return u?JSON.parse(u):{isActive:!1,currentStep:0,completed:!1,skipped:!1,userPreferences:{hasSeenOnboarding:!1,preferredTourStyle:"full",completedSteps:[]}}}catch{return{isActive:!1,currentStep:0,completed:!1,skipped:!1,userPreferences:{hasSeenOnboarding:!1,preferredTourStyle:"full",completedSteps:[]}}}}),[t,n]=y.useState(null),s=y.useCallback(u=>{e(h=>{const f=typeof u=="function"?u(h):u,p={...h,...f};try{localStorage.setItem("fcz_onboarding_state_v3",JSON.stringify(p))}catch(w){console.warn("Failed to save onboarding state:",w)}return p})},[]),i=y.useCallback(u=>{n(u),s({isActive:!0,currentStep:0,completed:!1,skipped:!1})},[s]),o=y.useCallback(async()=>{if(!t)return;const u=t.steps[r.currentStep];if(u?.onNext)try{await u.onNext()}catch(h){console.warn("Step onNext handler failed:",h)}s(h=>{const f=h.currentStep>=(t?.steps.length||0)-1,p=u?.id?[...h.userPreferences.completedSteps,u.id]:h.userPreferences.completedSteps;return f?{isActive:!1,completed:!0,userPreferences:{...h.userPreferences,hasSeenOnboarding:!0,completedSteps:p}}:{currentStep:h.currentStep+1,userPreferences:{...h.userPreferences,completedSteps:p}}})},[t,r.currentStep,s]),a=y.useCallback(async()=>{const u=t?.steps[r.currentStep];if(u?.onPrev)try{await u.onPrev()}catch(h){console.warn("Step onPrev handler failed:",h)}r.currentStep>0&&s(h=>({currentStep:Math.max(0,h.currentStep-1)}))},[t,r.currentStep,s]),c=y.useCallback(()=>{s(u=>({isActive:!1,skipped:!0,userPreferences:{...u.userPreferences,hasSeenOnboarding:!0,preferredTourStyle:"minimal"}}))},[s]),l=y.useCallback(()=>{try{localStorage.removeItem("fcz_onboarding_state_v3"),e({isActive:!1,currentStep:0,completed:!1,skipped:!1,userPreferences:{hasSeenOnboarding:!1,preferredTourStyle:"full",completedSteps:[]}})}catch(u){console.warn("Failed to reset onboarding state:",u)}},[]);return{state:r,config:t,startOnboarding:i,nextStep:o,prevStep:a,skipOnboarding:c,resetOnboarding:l}},A_=(r,e,t="auto")=>{const n={width:window.innerWidth,height:window.innerHeight},s={top:44,bottom:100,left:16,right:16},i=16,o={top:{x:Math.max(s.left,Math.min(r.left+(r.width-e.width)/2,n.width-e.width-s.right)),y:Math.max(s.top,r.top-e.height-i)},bottom:{x:Math.max(s.left,Math.min(r.left+(r.width-e.width)/2,n.width-e.width-s.right)),y:Math.min(n.height-e.height-s.bottom,r.bottom+i)},left:{x:Math.max(s.left,r.left-e.width-i),y:Math.max(s.top,Math.min(r.top+(r.height-e.height)/2,n.height-e.height-s.bottom))},right:{x:Math.min(n.width-e.width-s.right,r.right+i),y:Math.max(s.top,Math.min(r.top+(r.height-e.height)/2,n.height-e.height-s.bottom))},center:{x:(n.width-e.width)/2,y:(n.height-e.height)/2}};if(t!=="auto")return o[t]||o.center;const a={top:r.top-s.top,bottom:n.height-r.bottom-s.bottom,left:r.left-s.left,right:n.width-r.right-s.right},c={top:a.top>=e.height+i,bottom:a.bottom>=e.height+i,left:a.left>=e.width+i,right:a.right>=e.width+i};return c.bottom?o.bottom:c.top?o.top:c.right&&e.width<300?o.right:c.left&&e.width<300?o.left:o.center},P_=({step:r,position:e,onNext:t,onPrev:n,onSkip:s,isFirst:i,isLast:o,stepNumber:a,totalSteps:c,canSkip:l})=>{const u=y.useCallback(()=>{console.log("Next button clicked, calling onNext"),t()},[t]),h=y.useCallback(()=>{console.log("Previous button clicked, calling onPrev"),n()},[n]),f=y.useCallback(()=>{console.log("Skip button clicked, calling onSkip"),s()},[s]);return d.jsxs(oe.div,{className:"fixed bg-white rounded-2xl shadow-2xl border border-gray-100 overflow-hidden max-w-sm z-[25000]",style:{left:e.x,top:e.y,width:"min(calc(100vw - 32px), 380px)"},initial:{scale:.8,opacity:0,y:10},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:10},transition:{duration:.2,ease:"easeOut"},children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-500 to-teal-600 p-4 text-white",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[r.icon&&d.jsx("div",{className:"w-6 h-6 flex items-center justify-center",children:r.icon}),d.jsx("h3",{className:"font-semibold text-lg",children:r.title})]}),l&&d.jsx("button",{onClick:f,className:"p-1 rounded-lg hover:bg-white/10 transition-colors","aria-label":"Skip tour",children:d.jsx(Xt,{className:"w-5 h-5"})})]}),d.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[d.jsx("div",{className:"flex-1 bg-white/20 rounded-full h-2",children:d.jsx("div",{className:"bg-white rounded-full h-2 transition-all duration-300",style:{width:`${(a+1)/c*100}%`}})}),d.jsxs("span",{className:"text-xs font-medium",children:[a+1," of ",c]})]})]}),d.jsxs("div",{className:"p-4",children:[d.jsx("p",{className:"text-gray-700 text-sm leading-relaxed mb-4",children:r.description}),d.jsxs("div",{className:"flex items-center justify-between gap-3",children:[d.jsxs("button",{onClick:h,disabled:i,className:"flex items-center gap-1 px-3 py-2 rounded-xl bg-gray-100 text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-200 transition-colors text-sm font-medium min-w-[80px] justify-center",children:[d.jsx(Gv,{className:"w-4 h-4"}),"Previous"]}),d.jsx("div",{className:"flex items-center gap-1",children:Array.from({length:c},(p,w)=>d.jsx("div",{className:`w-2 h-2 rounded-full transition-colors ${w===a?"bg-teal-500":"bg-gray-200"}`},w))}),d.jsx("button",{onClick:u,className:"flex items-center gap-1 px-4 py-2 rounded-xl bg-teal-500 text-white hover:bg-teal-600 transition-colors text-sm font-medium min-w-[80px] justify-center",children:o?d.jsxs(d.Fragment,{children:[d.jsx(Ud,{className:"w-4 h-4"}),"Finish"]}):d.jsxs(d.Fragment,{children:["Next",d.jsx(Kv,{className:"w-4 h-4"})]})})]})]})]})},I_=({targetRect:r})=>{const e=y.useMemo(()=>`spotlight-${Math.random().toString(36).substr(2,9)}`,[]);if(!r)return null;const t=Math.max(r.width,r.height)/2+20,n=r.left+r.width/2,s=r.top+r.height/2;return d.jsx("div",{className:"fixed inset-0 z-[24000] pointer-events-none",children:d.jsxs("svg",{width:"100%",height:"100%",className:"absolute inset-0",children:[d.jsx("defs",{children:d.jsxs("mask",{id:e,children:[d.jsx("rect",{width:"100%",height:"100%",fill:"white"}),d.jsx("circle",{cx:n,cy:s,r:t,fill:"black"})]})}),d.jsx("rect",{width:"100%",height:"100%",fill:"rgba(0,0,0,0.7)",mask:`url(#${e})`})]})})},j_=({isActive:r,config:e,currentStep:t,onNext:n,onPrev:s,onSkip:i})=>{const[o,a]=y.useState(null),[c,l]=y.useState(null),[u,h]=y.useState({x:0,y:0}),f=y.useRef(null),p=y.useRef(null),w=y.useRef(null),g=e?.steps[t];if(y.useEffect(()=>{if(!r||!g?.target){a(null),l(null);return}const x=()=>{try{const E=document.querySelector(`[data-tour-id="${g.target}"]`);if(E){const _=E.getBoundingClientRect();a(E),l(_),E.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}else console.warn(`Onboarding target not found: ${g.target}`),a(null),l(null)}catch(E){console.warn("Error updating target position:",E)}};w.current&&clearTimeout(w.current),w.current=setTimeout(x,g.delay||100);const b=()=>x(),v=()=>x();return window.addEventListener("resize",b),window.addEventListener("scroll",v,!0),window.addEventListener("orientationchange",b),p.current&&p.current.disconnect(),p.current=new ResizeObserver(x),()=>{w.current&&clearTimeout(w.current),window.removeEventListener("resize",b),window.removeEventListener("scroll",v,!0),window.removeEventListener("orientationchange",b),p.current&&p.current.disconnect()}},[r,g,t]),y.useEffect(()=>{if(c&&f.current){const x=new DOMRect(0,0,380,200);let b=A_(c,x,g?.placement||"auto");g?.offset&&(b={x:b.x+(g.offset.x??0),y:b.y+(g.offset.y??0)}),h(b)}},[c,g?.placement]),y.useEffect(()=>{if(r){const x=setTimeout(()=>{const b=document.querySelector("[data-onboarding-tooltip]");b&&b.focus()},100);return()=>clearTimeout(x)}},[r,t]),!r||!e||!g)return null;const m=d.jsx(Yr,{mode:"wait",children:d.jsxs(oe.div,{className:"fixed inset-0 z-[23000]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[g.action==="spotlight"&&c?d.jsx(I_,{targetRect:c}):d.jsx("div",{className:"absolute inset-0 bg-black/40"}),c&&g.target&&d.jsx(oe.div,{className:"absolute border-4 border-teal-400 rounded-xl pointer-events-none shadow-lg",style:{left:Math.max(0,c.left-4),top:Math.max(0,c.top-4),width:Math.min(window.innerWidth,c.width+8),height:c.height+8},initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.3,delay:.1}}),d.jsx("div",{ref:f,"data-onboarding-tooltip":!0,tabIndex:-1,children:d.jsx(P_,{step:g,position:u,onNext:n,onPrev:s,onSkip:i,isFirst:t===0,isLast:t===e.steps.length-1,stepNumber:t,totalSteps:e.steps.length,canSkip:e.allowSkip!==!1})})]},`onboarding-${t}`)});return wl.createPortal(m,document.body)},O_=({isOpen:r,onStartTour:e,onSkip:t,onMinimalTour:n})=>{const s=y.useCallback(()=>{console.log("Welcome modal: Start Tour clicked"),e()},[e]),i=y.useCallback(()=>{console.log("Welcome modal: Quick Overview clicked"),n()},[n]),o=y.useCallback(()=>{console.log("Welcome modal: Skip clicked"),t()},[t]);return d.jsx(Yr,{children:r&&d.jsxs("div",{className:"fixed inset-0 z-[26000] flex items-center justify-center p-4",children:[d.jsx(oe.div,{className:"absolute inset-0 bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}}),d.jsxs(oe.div,{className:"relative bg-white rounded-3xl shadow-2xl overflow-hidden w-full max-w-md",initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},transition:{duration:.3,ease:"easeOut"},children:[d.jsxs("div",{className:"bg-gradient-to-br from-purple-500 via-teal-600 to-teal-600 p-6 text-white text-center relative overflow-hidden",children:[d.jsx(oe.div,{className:"absolute inset-0 bg-white/10",animate:{background:["radial-gradient(circle at 20% 20%, rgba(255,255,255,0.1) 0%, transparent 50%)","radial-gradient(circle at 80% 80%, rgba(255,255,255,0.1) 0%, transparent 50%)","radial-gradient(circle at 20% 20%, rgba(255,255,255,0.1) 0%, transparent 50%)"]},transition:{duration:4,repeat:1/0,ease:"linear"}}),d.jsxs("div",{className:"relative z-10",children:[d.jsx(oe.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,duration:.3},className:"w-16 h-16 bg-white/20 rounded-2xl flex items-center justify-center mx-auto mb-4",children:d.jsx(da,{className:"w-8 h-8"})}),d.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Welcome to Fan Club Z!"}),d.jsx("p",{className:"text-teal-100 text-sm",children:"Ready to discover the future of social predictions?"})]})]}),d.jsxs("div",{className:"p-6",children:[d.jsxs("div",{className:"space-y-4 mb-6",children:[d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-purple-400 to-teal-500 rounded-xl flex items-center justify-center flex-shrink-0",children:d.jsx(Yv,{className:"w-5 h-5 text-teal-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:"Discover Predictions"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Explore trending markets and join the community"})]})]}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-xl flex items-center justify-center flex-shrink-0",children:d.jsx(tx,{className:"w-5 h-5 text-blue-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:"Make Your Predictions"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Put your knowledge to the test and earn rewards"})]})]}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-xl flex items-center justify-center flex-shrink-0",children:d.jsx(Us,{className:"w-5 h-5 text-purple-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold text-gray-900",children:"Manage Everything"}),d.jsx("p",{className:"text-sm text-gray-600",children:"Track your performance and manage your wallet"})]})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("button",{onClick:s,className:"w-full bg-teal-500 hover:bg-teal-600 text-white py-3 px-4 rounded-xl font-semibold transition-colors flex items-center justify-center gap-2",children:[d.jsx(Xv,{className:"w-4 h-4"}),"Take the Tour"]}),d.jsx("button",{onClick:i,className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 py-3 px-4 rounded-xl font-medium transition-colors",children:"Quick Overview"}),d.jsxs("button",{onClick:o,className:"w-full text-gray-500 hover:text-gray-700 py-2 px-4 rounded-xl font-medium transition-colors flex items-center justify-center gap-1",children:[d.jsx(Zv,{className:"w-4 h-4"}),"Skip for now"]})]})]})]})]})})},N_=[{id:"welcome",title:"Welcome to FanClubZ!",description:"Let's take a quick tour to show you around. We'll walk you through discovering predictions, placing bets, and managing your wallet.",placement:"center",icon:d.jsx(ri,{className:"w-6 h-6"}),action:"modal",delay:300},{id:"discover-feed",title:"Discover Predictions",description:"Browse active predictions here. Each card shows the prediction title, category, pool size, and closing date. Tap any card to view details.",target:"discover-list",placement:"top",offset:{y:-40},icon:d.jsx(Zr,{className:"w-5 h-5"}),action:"highlight"},{id:"search-predictions",title:"Search",description:"Looking for something specific? Use the search bar to find predictions by keyword or topic.",target:"search-bar",placement:"bottom",icon:d.jsx(Bd,{className:"w-5 h-5"}),action:"spotlight"},{id:"filter-categories",title:"Filter by Category",description:"Browse by categoryâ€”Sports, Tech, Entertainment, and more. Tap a category chip to filter.",target:"category-filters",placement:"bottom",icon:d.jsx(el,{className:"w-5 h-5"}),action:"spotlight"},{id:"create-prediction-fab",title:"Create Your Own",description:"Got an idea? Tap the plus button to create your own prediction and invite others to participate.",target:"create-fab",placement:"left",offset:{x:-16,y:-80},icon:d.jsx(ni,{className:"w-5 h-5"}),action:"spotlight"},{id:"navigate-to-bets",title:"Track Your Bets",description:"Let's check out the Bets tab where you can track all your active and completed predictions.",target:"tab-bets",placement:"top",offset:{y:-40},icon:d.jsx(rn,{className:"w-5 h-5"}),action:"spotlight",onNext:async()=>{const r=window.__router_navigate;r&&(r("/bets"),await new Promise(e=>setTimeout(e,400)))}},{id:"bets-overview",title:"Your Bets Dashboard",description:"This is where you manage all your predictions. You can view active bets, predictions you've created, and your completed bets.",placement:"center",icon:d.jsx(Zr,{className:"w-6 h-6"}),action:"modal",delay:200},{id:"bets-tabs",title:"Bet Categories",description:"Switch between Active (ongoing bets), Created (predictions you made), and Completed (resolved bets with results).",target:"bets-tabs",placement:"bottom",icon:d.jsx(el,{className:"w-5 h-5"}),action:"highlight"},{id:"navigate-to-wallet",title:"Manage Your Funds",description:"Next, let's visit your Wallet to see how you can manage your balance and transactions.",target:"tab-wallet",placement:"top",offset:{y:-40},icon:d.jsx(Us,{className:"w-5 h-5"}),action:"spotlight",onNext:async()=>{const r=window.__router_navigate;r&&(r("/wallet"),await new Promise(e=>setTimeout(e,400)))}},{id:"wallet-overview",title:"Your Wallet",description:"Here you can view your balance, add funds, withdraw winnings, and track all your financial transactions.",placement:"center",icon:d.jsx(Us,{className:"w-6 h-6"}),action:"modal",delay:200},{id:"wallet-balance",title:"Available Balance",description:"This shows your current available balance. You can use these funds to place bets on any prediction.",target:"wallet-balance",placement:"bottom",icon:d.jsx(Xc,{className:"w-5 h-5"}),action:"spotlight"},{id:"wallet-actions",title:"Add Funds",description:"Tap here to add funds to your wallet using various payment methods like card, bank transfer, or crypto.",target:"add-funds-button",placement:"bottom",icon:d.jsx(Xc,{className:"w-5 h-5"}),action:"spotlight"},{id:"transaction-history",title:"Transaction History",description:"All your deposits, withdrawals, bets, and winnings are tracked here for full transparency.",target:"transaction-history",placement:"top",offset:{y:-20},icon:d.jsx(Zr,{className:"w-5 h-5"}),action:"highlight"},{id:"navigate-to-profile",title:"Your Profile",description:"Finally, let's check out your Profile where you can track your stats and manage account settings.",target:"tab-profile",placement:"top",offset:{y:-40},icon:d.jsx(_o,{className:"w-5 h-5"}),action:"spotlight",onNext:async()=>{const r=window.__router_navigate;r&&(r("/profile"),await new Promise(e=>setTimeout(e,400)))}},{id:"profile-overview",title:"Profile & Stats",description:"View your performance stats, prediction history, and manage your account settings all in one place.",placement:"center",icon:d.jsx(_o,{className:"w-6 h-6"}),action:"modal",delay:200},{id:"profile-stats",title:"Your Performance",description:"Track your win rate, total predictions participated, earnings, and overall performance metrics.",target:"profile-stats",placement:"bottom",icon:d.jsx(rn,{className:"w-5 h-5"}),action:"spotlight"},{id:"profile-predictions",title:"Prediction History",description:"Browse through all your past predictions and see your track record over time.",target:"profile-tabs",placement:"bottom",icon:d.jsx(Zr,{className:"w-5 h-5"}),action:"highlight"},{id:"tour-complete",title:"You're All Set!",description:"That's the tour! You're ready to start discovering predictions and placing bets. Good luck!",placement:"center",icon:d.jsx(rn,{className:"w-6 h-6"}),action:"modal",onNext:async()=>{const r=window.__router_navigate;r&&r("/")}}],R_=[{id:"quick-welcome",title:"Welcome!",description:"Let's quickly show you how to discover and participate in predictions.",placement:"center",icon:d.jsx(ri,{className:"w-6 h-6"}),action:"modal"},{id:"quick-discover",title:"Browse Predictions",description:"Scroll through active predictions. Tap any card to view details and place your bet.",target:"discover-list",placement:"top",offset:{y:-40},icon:d.jsx(Zr,{className:"w-5 h-5"}),action:"highlight"},{id:"quick-search",title:"Search & Filter",description:"Use search and category filters to find predictions that interest you.",target:"search-bar",placement:"bottom",icon:d.jsx(Bd,{className:"w-5 h-5"}),action:"spotlight"},{id:"quick-create",title:"Create Predictions",description:"Tap the plus button anytime to create your own prediction.",target:"create-fab",placement:"left",offset:{x:-16,y:-80},icon:d.jsx(ni,{className:"w-5 h-5"}),action:"spotlight"},{id:"quick-complete",title:"Ready to Go!",description:"That's it! Start exploring predictions and place your first bet.",placement:"center",icon:d.jsx(rn,{className:"w-6 h-6"}),action:"modal"}],ol=y.createContext(void 0),al=N_,$_=R_,L_=()=>{try{const r=localStorage.getItem("fcz_onboarding_state_v3");return r?!JSON.parse(r).userPreferences?.hasSeenOnboarding:!0}catch{return!0}},D_=()=>new URLSearchParams(window.location.search).get("welcome")==="1"||L_(),U_=({children:r})=>{const[e,t]=C_(),{state:n,config:s,startOnboarding:i,nextStep:o,prevStep:a,skipOnboarding:c,resetOnboarding:l}=T_(),[u,h]=y.useState(!1),{user:f,loading:p}=ye(),w=()=>{const _=e.toLowerCase();return _==="/"||_==="/discover"?!!document.querySelector('[data-tour="discover-header"]'):!0},g=f&&!p&&w();y.useEffect(()=>(window.__router_navigate=t,()=>{delete window.__router_navigate}),[t]),y.useEffect(()=>{if(!f||p)return;const _=()=>{(e==="/"||e==="/discover")&&D_()&&(w()?h(!0):setTimeout(_,200))},S=setTimeout(_,300);return()=>clearTimeout(S)},[f,p,e]),y.useEffect(()=>{const S=new URLSearchParams(window.location.search).get("tour");S==="full"?m():S==="quick"&&x()},[e]);const m=y.useCallback(()=>{if(h(!1),e!=="/"&&e!=="/discover"){t("/");const _=()=>{document.querySelector('[data-tour="discover-header"]')?i({steps:al,allowSkip:!0,showProgress:!0,persistent:!0}):setTimeout(_,100)};setTimeout(_,200)}else i({steps:al,allowSkip:!0,showProgress:!0,persistent:!0})},[e,t,i]),x=y.useCallback(()=>{h(!1),i({steps:$_,allowSkip:!0,showProgress:!0,persistent:!1})},[i]),b=y.useCallback(()=>{h(!1),c()},[c]),v=y.useCallback(()=>{l(),h(!0)},[l]),E={isActive:!!(n.isActive&&g),showWelcome:u,startFullTour:m,startQuickTour:x,skipOnboarding:b,resetOnboarding:v,hasSeenOnboarding:n.userPreferences.hasSeenOnboarding,currentStep:n.currentStep,totalSteps:s?.steps.length||0};return!g&&n.isActive?d.jsx(ol.Provider,{value:E,children:r}):d.jsxs(ol.Provider,{value:E,children:[r,g&&d.jsx(O_,{isOpen:u,onStartTour:m,onMinimalTour:x,onSkip:b}),g&&d.jsx(j_,{isActive:n.isActive,config:s,currentStep:n.currentStep,onNext:o,onPrev:a,onSkip:c})]})},ma=(...r)=>{},B_=({children:r,overrideHeader:e,className:t=""})=>{const n=Te(),s=Qt();return ma("[MobileShell] Rendering for route:",n.pathname),(()=>{if(e)return e;const o=n.pathname;switch(!0){case o==="/":case o==="/discover":return{title:"Discover",leftAction:{type:"none"},rightAction:{type:"none"}};case o==="/my-bets":return{title:"My Bets",leftAction:{type:"none"},rightAction:{type:"none"}};case o==="/wallet":return{title:"Wallet",leftAction:{type:"none"},rightAction:{type:"none"}};case o==="/leaderboard":return{title:"Leaderboard",leftAction:{type:"none"},rightAction:{type:"none"}};case o==="/profile":case o.startsWith("/profile/"):return{title:"Profile",leftAction:o==="/profile"?{type:"none"}:{type:"back",onClick:()=>s(-1),"aria-label":"Go back"},rightAction:{type:"none"}};case o.startsWith("/prediction/"):return{title:"Prediction Details",leftAction:{type:"back",onClick:()=>s(-1),"aria-label":"Go back"},rightAction:{type:"none"}};case o==="/create":return{title:"Create Prediction",leftAction:{type:"close",onClick:()=>s("/"),"aria-label":"Close and go to Discover"},rightAction:{type:"none"}};default:return{title:"Fan Club Z",leftAction:{type:"none"},rightAction:{type:"none"}}}})(),d.jsxs("div",{className:`min-h-screen bg-gray-50 ${t}`,children:[null,d.jsx("main",{className:"flex-1",style:{paddingTop:pd?"0":void 0},children:r})]})},M_=()=>d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx(oe.div,{className:"inline-block w-8 h-8 border-4 border-emerald-200 border-t-emerald-600 rounded-full",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}}),d.jsx("p",{className:"mt-4 text-sm text-gray-600",children:"Loading..."})]})});function nh(r){var e,t,n="";if(typeof r=="string"||typeof r=="number")n+=r;else if(typeof r=="object")if(Array.isArray(r)){var s=r.length;for(e=0;e<s;e++)r[e]&&(t=nh(r[e]))&&(n&&(n+=" "),n+=t)}else for(t in r)r[t]&&(n&&(n+=" "),n+=t);return n}function F_(){for(var r,e,t=0,n="",s=arguments.length;t<s;t++)(r=arguments[t])&&(e=nh(r))&&(n&&(n+=" "),n+=e);return n}const ga="-",z_=r=>{const e=q_(r),{conflictingClassGroups:t,conflictingClassGroupModifiers:n}=r;return{getClassGroupId:o=>{const a=o.split(ga);return a[0]===""&&a.length!==1&&a.shift(),sh(a,e)||V_(o)},getConflictingClassGroupIds:(o,a)=>{const c=t[o]||[];return a&&n[o]?[...c,...n[o]]:c}}},sh=(r,e)=>{if(r.length===0)return e.classGroupId;const t=r[0],n=e.nextPart.get(t),s=n?sh(r.slice(1),n):void 0;if(s)return s;if(e.validators.length===0)return;const i=r.join(ga);return e.validators.find(({validator:o})=>o(i))?.classGroupId},cl=/^\[(.+)\]$/,V_=r=>{if(cl.test(r)){const e=cl.exec(r)[1],t=e?.substring(0,e.indexOf(":"));if(t)return"arbitrary.."+t}},q_=r=>{const{theme:e,prefix:t}=r,n={nextPart:new Map,validators:[]};return H_(Object.entries(r.classGroups),t).forEach(([i,o])=>{To(o,n,i,e)}),n},To=(r,e,t,n)=>{r.forEach(s=>{if(typeof s=="string"){const i=s===""?e:ll(e,s);i.classGroupId=t;return}if(typeof s=="function"){if(W_(s)){To(s(n),e,t,n);return}e.validators.push({validator:s,classGroupId:t});return}Object.entries(s).forEach(([i,o])=>{To(o,ll(e,i),t,n)})})},ll=(r,e)=>{let t=r;return e.split(ga).forEach(n=>{t.nextPart.has(n)||t.nextPart.set(n,{nextPart:new Map,validators:[]}),t=t.nextPart.get(n)}),t},W_=r=>r.isThemeGetter,H_=(r,e)=>e?r.map(([t,n])=>{const s=n.map(i=>typeof i=="string"?e+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,a])=>[e+o,a])):i);return[t,s]}):r,G_=r=>{if(r<1)return{get:()=>{},set:()=>{}};let e=0,t=new Map,n=new Map;const s=(i,o)=>{t.set(i,o),e++,e>r&&(e=0,n=t,t=new Map)};return{get(i){let o=t.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return s(i,o),o},set(i,o){t.has(i)?t.set(i,o):s(i,o)}}},ih="!",K_=r=>{const{separator:e,experimentalParseClassName:t}=r,n=e.length===1,s=e[0],i=e.length,o=a=>{const c=[];let l=0,u=0,h;for(let m=0;m<a.length;m++){let x=a[m];if(l===0){if(x===s&&(n||a.slice(m,m+i)===e)){c.push(a.slice(u,m)),u=m+i;continue}if(x==="/"){h=m;continue}}x==="["?l++:x==="]"&&l--}const f=c.length===0?a:a.substring(u),p=f.startsWith(ih),w=p?f.substring(1):f,g=h&&h>u?h-u:void 0;return{modifiers:c,hasImportantModifier:p,baseClassName:w,maybePostfixModifierPosition:g}};return t?a=>t({className:a,parseClassName:o}):o},Z_=r=>{if(r.length<=1)return r;const e=[];let t=[];return r.forEach(n=>{n[0]==="["?(e.push(...t.sort(),n),t=[]):t.push(n)}),e.push(...t.sort()),e},J_=r=>({cache:G_(r.cacheSize),parseClassName:K_(r),...z_(r)}),Y_=/\s+/,Q_=(r,e)=>{const{parseClassName:t,getClassGroupId:n,getConflictingClassGroupIds:s}=e,i=[],o=r.trim().split(Y_);let a="";for(let c=o.length-1;c>=0;c-=1){const l=o[c],{modifiers:u,hasImportantModifier:h,baseClassName:f,maybePostfixModifierPosition:p}=t(l);let w=!!p,g=n(w?f.substring(0,p):f);if(!g){if(!w){a=l+(a.length>0?" "+a:a);continue}if(g=n(f),!g){a=l+(a.length>0?" "+a:a);continue}w=!1}const m=Z_(u).join(":"),x=h?m+ih:m,b=x+g;if(i.includes(b))continue;i.push(b);const v=s(g,w);for(let E=0;E<v.length;++E){const _=v[E];i.push(x+_)}a=l+(a.length>0?" "+a:a)}return a};function X_(){let r=0,e,t,n="";for(;r<arguments.length;)(e=arguments[r++])&&(t=oh(e))&&(n&&(n+=" "),n+=t);return n}const oh=r=>{if(typeof r=="string")return r;let e,t="";for(let n=0;n<r.length;n++)r[n]&&(e=oh(r[n]))&&(t&&(t+=" "),t+=e);return t};function eE(r,...e){let t,n,s,i=o;function o(c){const l=e.reduce((u,h)=>h(u),r());return t=J_(l),n=t.cache.get,s=t.cache.set,i=a,a(c)}function a(c){const l=n(c);if(l)return l;const u=Q_(c,t);return s(c,u),u}return function(){return i(X_.apply(null,arguments))}}const Y=r=>{const e=t=>t[r]||[];return e.isThemeGetter=!0,e},ah=/^\[(?:([a-z-]+):)?(.+)\]$/i,tE=/^\d+\/\d+$/,rE=new Set(["px","full","screen"]),nE=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,sE=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,iE=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,oE=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aE=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Ke=r=>yr(r)||rE.has(r)||tE.test(r),ct=r=>$r(r,"length",mE),yr=r=>!!r&&!Number.isNaN(Number(r)),Ri=r=>$r(r,"number",yr),Fr=r=>!!r&&Number.isInteger(Number(r)),cE=r=>r.endsWith("%")&&yr(r.slice(0,-1)),z=r=>ah.test(r),lt=r=>nE.test(r),lE=new Set(["length","size","percentage"]),uE=r=>$r(r,lE,ch),dE=r=>$r(r,"position",ch),hE=new Set(["image","url"]),fE=r=>$r(r,hE,yE),pE=r=>$r(r,"",gE),zr=()=>!0,$r=(r,e,t)=>{const n=ah.exec(r);return n?n[1]?typeof e=="string"?n[1]===e:e.has(n[1]):t(n[2]):!1},mE=r=>sE.test(r)&&!iE.test(r),ch=()=>!1,gE=r=>oE.test(r),yE=r=>aE.test(r),wE=()=>{const r=Y("colors"),e=Y("spacing"),t=Y("blur"),n=Y("brightness"),s=Y("borderColor"),i=Y("borderRadius"),o=Y("borderSpacing"),a=Y("borderWidth"),c=Y("contrast"),l=Y("grayscale"),u=Y("hueRotate"),h=Y("invert"),f=Y("gap"),p=Y("gradientColorStops"),w=Y("gradientColorStopPositions"),g=Y("inset"),m=Y("margin"),x=Y("opacity"),b=Y("padding"),v=Y("saturate"),E=Y("scale"),_=Y("sepia"),S=Y("skew"),k=Y("space"),A=Y("translate"),C=()=>["auto","contain","none"],F=()=>["auto","hidden","clip","visible","scroll"],H=()=>["auto",z,e],$=()=>[z,e],G=()=>["",Ke,ct],le=()=>["auto",yr,z],Pe=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],er=()=>["solid","dashed","dotted","double","none"],va=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ci=()=>["start","end","center","between","around","evenly","stretch"],Lr=()=>["","0",z],xa=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ve=()=>[yr,z];return{cacheSize:500,separator:":",theme:{colors:[zr],spacing:[Ke,ct],blur:["none","",lt,z],brightness:Ve(),borderColor:[r],borderRadius:["none","","full",lt,z],borderSpacing:$(),borderWidth:G(),contrast:Ve(),grayscale:Lr(),hueRotate:Ve(),invert:Lr(),gap:$(),gradientColorStops:[r],gradientColorStopPositions:[cE,ct],inset:H(),margin:H(),opacity:Ve(),padding:$(),saturate:Ve(),scale:Ve(),sepia:Lr(),skew:Ve(),space:$(),translate:$()},classGroups:{aspect:[{aspect:["auto","square","video",z]}],container:["container"],columns:[{columns:[lt]}],"break-after":[{"break-after":xa()}],"break-before":[{"break-before":xa()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...Pe(),z]}],overflow:[{overflow:F()}],"overflow-x":[{"overflow-x":F()}],"overflow-y":[{"overflow-y":F()}],overscroll:[{overscroll:C()}],"overscroll-x":[{"overscroll-x":C()}],"overscroll-y":[{"overscroll-y":C()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[g]}],"inset-x":[{"inset-x":[g]}],"inset-y":[{"inset-y":[g]}],start:[{start:[g]}],end:[{end:[g]}],top:[{top:[g]}],right:[{right:[g]}],bottom:[{bottom:[g]}],left:[{left:[g]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Fr,z]}],basis:[{basis:H()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",z]}],grow:[{grow:Lr()}],shrink:[{shrink:Lr()}],order:[{order:["first","last","none",Fr,z]}],"grid-cols":[{"grid-cols":[zr]}],"col-start-end":[{col:["auto",{span:["full",Fr,z]},z]}],"col-start":[{"col-start":le()}],"col-end":[{"col-end":le()}],"grid-rows":[{"grid-rows":[zr]}],"row-start-end":[{row:["auto",{span:[Fr,z]},z]}],"row-start":[{"row-start":le()}],"row-end":[{"row-end":le()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",z]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",z]}],gap:[{gap:[f]}],"gap-x":[{"gap-x":[f]}],"gap-y":[{"gap-y":[f]}],"justify-content":[{justify:["normal",...ci()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...ci(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...ci(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[b]}],px:[{px:[b]}],py:[{py:[b]}],ps:[{ps:[b]}],pe:[{pe:[b]}],pt:[{pt:[b]}],pr:[{pr:[b]}],pb:[{pb:[b]}],pl:[{pl:[b]}],m:[{m:[m]}],mx:[{mx:[m]}],my:[{my:[m]}],ms:[{ms:[m]}],me:[{me:[m]}],mt:[{mt:[m]}],mr:[{mr:[m]}],mb:[{mb:[m]}],ml:[{ml:[m]}],"space-x":[{"space-x":[k]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[k]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",z,e]}],"min-w":[{"min-w":[z,e,"min","max","fit"]}],"max-w":[{"max-w":[z,e,"none","full","min","max","fit","prose",{screen:[lt]},lt]}],h:[{h:[z,e,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[z,e,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[z,e,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[z,e,"auto","min","max","fit"]}],"font-size":[{text:["base",lt,ct]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ri]}],"font-family":[{font:[zr]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",z]}],"line-clamp":[{"line-clamp":["none",yr,Ri]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",Ke,z]}],"list-image":[{"list-image":["none",z]}],"list-style-type":[{list:["none","disc","decimal",z]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[r]}],"placeholder-opacity":[{"placeholder-opacity":[x]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[r]}],"text-opacity":[{"text-opacity":[x]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...er(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",Ke,ct]}],"underline-offset":[{"underline-offset":["auto",Ke,z]}],"text-decoration-color":[{decoration:[r]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:$()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",z]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",z]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[x]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...Pe(),dE]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",uE]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},fE]}],"bg-color":[{bg:[r]}],"gradient-from-pos":[{from:[w]}],"gradient-via-pos":[{via:[w]}],"gradient-to-pos":[{to:[w]}],"gradient-from":[{from:[p]}],"gradient-via":[{via:[p]}],"gradient-to":[{to:[p]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[a]}],"border-w-x":[{"border-x":[a]}],"border-w-y":[{"border-y":[a]}],"border-w-s":[{"border-s":[a]}],"border-w-e":[{"border-e":[a]}],"border-w-t":[{"border-t":[a]}],"border-w-r":[{"border-r":[a]}],"border-w-b":[{"border-b":[a]}],"border-w-l":[{"border-l":[a]}],"border-opacity":[{"border-opacity":[x]}],"border-style":[{border:[...er(),"hidden"]}],"divide-x":[{"divide-x":[a]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[a]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[x]}],"divide-style":[{divide:er()}],"border-color":[{border:[s]}],"border-color-x":[{"border-x":[s]}],"border-color-y":[{"border-y":[s]}],"border-color-s":[{"border-s":[s]}],"border-color-e":[{"border-e":[s]}],"border-color-t":[{"border-t":[s]}],"border-color-r":[{"border-r":[s]}],"border-color-b":[{"border-b":[s]}],"border-color-l":[{"border-l":[s]}],"divide-color":[{divide:[s]}],"outline-style":[{outline:["",...er()]}],"outline-offset":[{"outline-offset":[Ke,z]}],"outline-w":[{outline:[Ke,ct]}],"outline-color":[{outline:[r]}],"ring-w":[{ring:G()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[r]}],"ring-opacity":[{"ring-opacity":[x]}],"ring-offset-w":[{"ring-offset":[Ke,ct]}],"ring-offset-color":[{"ring-offset":[r]}],shadow:[{shadow:["","inner","none",lt,pE]}],"shadow-color":[{shadow:[zr]}],opacity:[{opacity:[x]}],"mix-blend":[{"mix-blend":[...va(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":va()}],filter:[{filter:["","none"]}],blur:[{blur:[t]}],brightness:[{brightness:[n]}],contrast:[{contrast:[c]}],"drop-shadow":[{"drop-shadow":["","none",lt,z]}],grayscale:[{grayscale:[l]}],"hue-rotate":[{"hue-rotate":[u]}],invert:[{invert:[h]}],saturate:[{saturate:[v]}],sepia:[{sepia:[_]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[t]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[c]}],"backdrop-grayscale":[{"backdrop-grayscale":[l]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[u]}],"backdrop-invert":[{"backdrop-invert":[h]}],"backdrop-opacity":[{"backdrop-opacity":[x]}],"backdrop-saturate":[{"backdrop-saturate":[v]}],"backdrop-sepia":[{"backdrop-sepia":[_]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",z]}],duration:[{duration:Ve()}],ease:[{ease:["linear","in","out","in-out",z]}],delay:[{delay:Ve()}],animate:[{animate:["none","spin","ping","pulse","bounce",z]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Fr,z]}],"translate-x":[{"translate-x":[A]}],"translate-y":[{"translate-y":[A]}],"skew-x":[{"skew-x":[S]}],"skew-y":[{"skew-y":[S]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",z]}],accent:[{accent:["auto",r]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",z]}],"caret-color":[{caret:[r]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":$()}],"scroll-mx":[{"scroll-mx":$()}],"scroll-my":[{"scroll-my":$()}],"scroll-ms":[{"scroll-ms":$()}],"scroll-me":[{"scroll-me":$()}],"scroll-mt":[{"scroll-mt":$()}],"scroll-mr":[{"scroll-mr":$()}],"scroll-mb":[{"scroll-mb":$()}],"scroll-ml":[{"scroll-ml":$()}],"scroll-p":[{"scroll-p":$()}],"scroll-px":[{"scroll-px":$()}],"scroll-py":[{"scroll-py":$()}],"scroll-ps":[{"scroll-ps":$()}],"scroll-pe":[{"scroll-pe":$()}],"scroll-pt":[{"scroll-pt":$()}],"scroll-pr":[{"scroll-pr":$()}],"scroll-pb":[{"scroll-pb":$()}],"scroll-pl":[{"scroll-pl":$()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",z]}],fill:[{fill:[r,"none"]}],"stroke-w":[{stroke:[Ke,ct,Ri]}],stroke:[{stroke:[r,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},bE=eE(wE);function lr(...r){return bE(F_(r))}const vE=({activeTab:r="discover",onTabChange:e,showFAB:t=!1,onFABClick:n,className:s})=>{const i=[{id:"discover",label:"Discover",icon:ri,path:"/"},{id:"bets",label:"My Bets",icon:rn,path:"/bets",badge:0},{id:"leaderboard",label:"Rankings",icon:rx,path:"/leaderboard"},{id:"wallet",label:"Wallet",icon:Us,path:"/wallet"},{id:"profile",label:"Profile",icon:_o,path:"/profile"}],o=y.useCallback(c=>{typeof window<"u"&&window.scrollTo({top:0,behavior:"smooth"}),e&&e(c)},[e]),a=c=>c>99?"99+":c.toString();return d.jsxs(d.Fragment,{children:[d.jsx(oe.div,{className:lr("fixed bottom-0 left-0 right-0 z-[9999]","bg-white/95 backdrop-blur-xl border-t border-gray-200","shadow-[0_-8px_32px_rgba(0,0,0,0.12)]",s),style:{paddingBottom:"max(env(safe-area-inset-bottom), 0.75rem)",paddingTop:"0.75rem",minHeight:"calc(4rem + env(safe-area-inset-bottom))"},initial:{y:100},animate:{y:0},transition:{type:"spring",stiffness:300,damping:30},children:d.jsx("nav",{className:"px-4",children:d.jsx("div",{className:"flex items-center justify-around max-w-lg mx-auto",children:i.map(c=>{const l=c.icon,u=r===c.id,h=c.badge!==void 0&&c.badge>0;return d.jsxs(oe.button,{onClick:()=>o(c.id),className:lr("relative flex flex-col items-center justify-center","p-2 min-w-0 flex-1 rounded-xl transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-emerald-500/20","active:scale-95"),whileHover:{scale:1.02},whileTap:{scale:.98},"data-testid":`nav-tab-${c.id}`,"aria-label":`Navigate to ${c.label}`,role:"tab","aria-selected":u,children:[d.jsxs("div",{className:"relative mb-1",children:[d.jsx(oe.div,{className:lr("flex items-center justify-center w-6 h-6","transition-colors duration-200"),animate:{scale:u?1.1:1,color:u?"#10b981":"#6b7280"},transition:{type:"spring",stiffness:400,damping:25},children:d.jsx(l,{size:20,strokeWidth:u?2.5:2,className:"drop-shadow-sm"})}),d.jsx(Yr,{children:h&&d.jsx(oe.div,{className:lr("absolute -top-1 -right-1","bg-red-500 text-white text-xs font-semibold","rounded-full min-w-[18px] h-[18px]","flex items-center justify-center","shadow-sm border-2 border-white"),initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:400,damping:25},children:a(c.badge)})}),d.jsx(Yr,{children:u&&d.jsx(oe.div,{className:"absolute -top-1 left-1/2 w-1 h-1 bg-emerald-500 rounded-full shadow-sm",layoutId:"activeTabIndicator",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},transition:{type:"spring",stiffness:400,damping:30},style:{transform:"translateX(-50%)"}})})]}),d.jsx(oe.span,{className:lr("text-xs font-medium text-center leading-tight","transition-colors duration-200"),animate:{color:u?"#10b981":"#6b7280",fontWeight:u?600:500},children:c.label})]},c.id)})})})}),d.jsx(Yr,{children:t&&d.jsxs(oe.button,{className:lr("fixed z-[10000] w-14 h-14 rounded-full","bg-gradient-to-br from-emerald-500 to-emerald-600","shadow-lg shadow-emerald-500/25","flex items-center justify-center","focus:outline-none focus:ring-4 focus:ring-emerald-500/20","active:scale-95 hover:shadow-xl hover:shadow-emerald-500/30","transition-shadow duration-200"),style:{bottom:"calc(5rem + env(safe-area-inset-bottom))",right:"1rem"},initial:{scale:0,opacity:0,rotate:-180},animate:{scale:1,opacity:1,rotate:0},exit:{scale:0,opacity:0,rotate:180},whileHover:{scale:1.05},whileTap:{scale:.95},onClick:n,"data-testid":"create-fab","aria-label":"Create new prediction",transition:{type:"spring",stiffness:300,damping:25},children:[d.jsx(ni,{size:24,className:"text-white drop-shadow-sm",strokeWidth:2.5}),d.jsx(oe.div,{className:"absolute inset-0 rounded-full bg-emerald-400 opacity-0",animate:{scale:[1,1.2,1],opacity:[0,.3,0]},transition:{duration:2,repeat:1/0,repeatType:"reverse"}})]})})]})};function xE(r){const e=_E(r),t=y.forwardRef((n,s)=>{const{children:i,...o}=n,a=y.Children.toArray(i),c=a.find(SE);if(c){const l=c.props.children,u=a.map(h=>h===c?y.Children.count(l)>1?y.Children.only(null):y.isValidElement(l)?l.props.children:null:h);return d.jsx(e,{...o,ref:s,children:y.isValidElement(l)?y.cloneElement(l,void 0,u):null})}return d.jsx(e,{...o,ref:s,children:i})});return t.displayName=`${r}.Slot`,t}function _E(r){const e=y.forwardRef((t,n)=>{const{children:s,...i}=t;if(y.isValidElement(s)){const o=CE(s),a=kE(i,s.props);return s.type!==y.Fragment&&(a.ref=n?ph(n,o):o),y.cloneElement(s,a)}return y.Children.count(s)>1?y.Children.only(null):null});return e.displayName=`${r}.SlotClone`,e}var EE=Symbol("radix.slottable");function SE(r){return y.isValidElement(r)&&typeof r.type=="function"&&"__radixId"in r.type&&r.type.__radixId===EE}function kE(r,e){const t={...e};for(const n in e){const s=r[n],i=e[n];/^on[A-Z]/.test(n)?s&&i?t[n]=(...a)=>{const c=i(...a);return s(...a),c}:s&&(t[n]=s):n==="style"?t[n]={...s,...i}:n==="className"&&(t[n]=[s,i].filter(Boolean).join(" "))}return{...r,...t}}function CE(r){let e=Object.getOwnPropertyDescriptor(r.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?r.ref:(e=Object.getOwnPropertyDescriptor(r,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?r.props.ref:r.props.ref||r.ref)}var TE=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],AE=TE.reduce((r,e)=>{const t=xE(`Primitive.${e}`),n=y.forwardRef((s,i)=>{const{asChild:o,...a}=s,c=o?t:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),d.jsx(c,{...a,ref:i})});return n.displayName=`Primitive.${e}`,{...r,[e]:n}},{}),PE=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),IE="VisuallyHidden",Ao=y.forwardRef((r,e)=>d.jsx(AE.span,{...r,ref:e,style:{...PE,...r.style}}));Ao.displayName=IE;const jE={}.VITE_WC_PROJECT_ID||"a376a3c48ca99bd80c5b30a37652a5ae",Ze=jE.length>=8,OE=()=>/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)||window.innerWidth<=768&&"ontouchstart"in window;function NE({isOpen:r,onClose:e}){const{connect:t,connectors:n,status:s,error:i}=Gg(),[o,a]=y.useState(!!r),c=OE(),l=Ze?n.find(f=>f.id==="walletConnect"):null,u=y.useCallback(async f=>{try{await t({connector:f}),e?e():a(!1)}catch(p){const w=p?.message||"Failed to connect wallet";w.includes("403")||w.includes("Forbidden")?(qt.error("WalletConnect configuration error. Please contact support."),console.error("[WalletConnect] 403 Forbidden - Domain may not be whitelisted at cloud.reown.com")):w.includes("User rejected")?qt.error("Connection cancelled"):qt.error(w)}},[t,e]);y.useEffect(()=>{c&&o&&l&&Ze&&u(l)},[c,o,l,Ze,u]),y.useEffect(()=>{typeof r=="boolean"&&a(r)},[r]),y.useEffect(()=>{if(typeof r=="boolean")return;const f=()=>{c&&l&&Ze?u(l):a(!0)};return window.addEventListener("fcz:wallet:connect",f),()=>window.removeEventListener("fcz:wallet:connect",f)},[r,c,l,Ze,u]);const h=n.find(f=>f.id==="injected");return d.jsx(mh,{open:o,onOpenChange:f=>{typeof r=="boolean"?!f&&e&&e():a(f)},children:d.jsxs(gh,{children:[d.jsx(yh,{className:"fixed inset-0 bg-black/30 z-modal"}),d.jsxs(wh,{className:"z-modal fixed inset-x-0 rounded-t-2xl bg-white shadow-xl bottom-[calc(64px+env(safe-area-inset-bottom,0px))] max-h-[calc(100vh-env(safe-area-inset-top,0px)-64px-env(safe-area-inset-bottom,0px))] focus:outline-none",children:[d.jsx(bh,{asChild:!0,children:d.jsx(Ao,{children:"Connect wallet"})}),d.jsx(vh,{asChild:!0,children:d.jsx(Ao,{children:"Select a wallet provider"})}),d.jsx("div",{className:"mx-auto mt-2 mb-3 h-1.5 w-16 rounded-full bg-gray-200"}),d.jsxs("div",{className:"px-4 pb-3",children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Connect wallet"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Choose a wallet provider to continue."})]}),d.jsxs("div",{className:"overflow-y-auto pb-safe px-4 pt-3",children:[c?d.jsx("div",{className:"rounded-xl border border-gray-100 overflow-hidden",children:d.jsxs("button",{type:"button",disabled:!l||!Ze,onClick:()=>l&&u(l),className:"flex w-full items-center justify-between px-4 py-4 hover:bg-gray-50 disabled:opacity-50",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:"ðŸª¢"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:"WalletConnect"}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Connect your mobile wallet",!Ze&&d.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(add VITE_WC_PROJECT_ID)"})]})]})]}),d.jsx("span",{className:"text-gray-400",children:"â€º"})]})}):d.jsxs("ul",{className:"divide-y divide-gray-100 rounded-xl border border-gray-100 overflow-hidden",children:[d.jsx("li",{children:d.jsxs("button",{type:"button",disabled:!h,onClick:()=>h&&u(h),className:"flex w-full items-center justify-between px-4 py-4 hover:bg-gray-50 disabled:opacity-50",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:"ðŸ¦Š"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:"Browser Wallet"}),d.jsx("div",{className:"text-xs text-gray-500",children:"MetaMask or compatible"})]})]}),d.jsx("span",{className:"text-gray-400",children:"â€º"})]})}),d.jsx("li",{children:d.jsxs("button",{type:"button",disabled:!l||!Ze,onClick:()=>l&&u(l),className:"flex w-full items-center justify-between px-4 py-4 hover:bg-gray-50 disabled:opacity-50",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("span",{className:"text-2xl",children:"ðŸª¢"}),d.jsxs("div",{children:[d.jsx("div",{className:"font-medium",children:"WalletConnect"}),d.jsxs("div",{className:"text-xs text-gray-500",children:["Mobile wallets (QR / deep link)",!Ze&&d.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(add VITE_WC_PROJECT_ID)"})]})]})]}),d.jsx("span",{className:"text-gray-400",children:"â€º"})]})})]}),s==="error"&&d.jsx("p",{className:"px-4 pt-3 text-xs text-red-600",children:String(i?.message??"Failed to connect")}),d.jsx("div",{className:"h-3"})]}),d.jsx(xh,{className:"absolute right-3 top-2 rounded-full p-2 text-gray-500 hover:bg-gray-100","aria-label":"Close",children:"âœ•"})]})]})})}const RE=y.lazy(()=>ue(()=>import("./DiscoverPage-f0ca3360.js"),["assets/DiscoverPage-f0ca3360.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/CreatorByline-a08ae8e5.js","assets/format-ae98e2f4.js","assets/input-89d34c09.js","assets/utils-a40dfe8b.js","assets/utils-17ec81d9.js","assets/AppHeader-78d14113.js"])),$E=y.lazy(()=>ue(()=>import("./PredictionsPage-b98963fa.js"),["assets/PredictionsPage-b98963fa.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/useMerkleClaim-85bb6a08.js","assets/utils-17ec81d9.js","assets/useWriteContract-ab9d8160.js","assets/public-3a03d500.js","assets/input-89d34c09.js","assets/utils-a40dfe8b.js","assets/users-10201f65.js","assets/settings-ffba16fc.js","assets/share-2-7efa6e5d.js","assets/pen-line-d6794a46.js","assets/AppHeader-78d14113.js","assets/useClaimableClaims-c78a938a.js","assets/format-ae98e2f4.js"])),LE=y.lazy(()=>ue(()=>import("./CreatePredictionPage-25668d12.js"),["assets/CreatePredictionPage-25668d12.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/utils-17ec81d9.js","assets/arrow-left-94b37ebf.js","assets/settings-ffba16fc.js","assets/users-10201f65.js"]));y.lazy(()=>ue(()=>import("./ProfilePage-c6c32b6e.js"),["assets/ProfilePage-c6c32b6e.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/UserAvatar-b4225c28.js","assets/utils-a40dfe8b.js","assets/utils-17ec81d9.js","assets/AppHeader-78d14113.js","assets/format-ae98e2f4.js","assets/activity-3ea54dab.js","assets/pen-line-d6794a46.js"]));y.lazy(()=>ue(()=>import("./WalletPage-a9e60ef2.js"),["assets/WalletPage-a9e60ef2.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/AppHeader-78d14113.js","assets/format-ae98e2f4.js","assets/DepositUSDCModal-2048ba50.js","assets/useWriteContract-ab9d8160.js","assets/public-3a03d500.js","assets/utils-17ec81d9.js","assets/WithdrawUSDCModal-153e94d2.js"]));const DE=y.lazy(()=>ue(()=>import("./PredictionDetailsPageV2-d7c08abd.js"),["assets/PredictionDetailsPageV2-d7c08abd.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/utils-17ec81d9.js","assets/useUnifiedBalance-2a41b6ef.js","assets/DepositUSDCModal-2048ba50.js","assets/useWriteContract-ab9d8160.js","assets/public-3a03d500.js","assets/activity-3ea54dab.js","assets/useMerkleClaim-85bb6a08.js","assets/share-2-7efa6e5d.js","assets/CreatorByline-a08ae8e5.js","assets/useActivityFeed-5b825cb0.js","assets/format-ae98e2f4.js","assets/arrow-left-94b37ebf.js","assets/users-10201f65.js"])),ul=y.lazy(()=>ue(()=>import("./ProfilePageV2-206be323.js"),["assets/ProfilePageV2-206be323.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/UserAvatar-b4225c28.js","assets/utils-a40dfe8b.js","assets/utils-17ec81d9.js","assets/AppHeader-78d14113.js","assets/format-ae98e2f4.js","assets/useActivityFeed-5b825cb0.js","assets/activity-3ea54dab.js","assets/pen-line-d6794a46.js"])),UE=y.lazy(()=>ue(()=>import("./DownloadPage-07d8953b.js"),["assets/DownloadPage-07d8953b.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/AppHeader-78d14113.js","assets/utils-17ec81d9.js"])),BE=y.lazy(()=>ue(()=>import("./WalletPageV2-6ab2e3e0.js"),["assets/WalletPageV2-6ab2e3e0.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/utils-17ec81d9.js","assets/format-ae98e2f4.js","assets/AppHeader-78d14113.js","assets/useClaimableClaims-c78a938a.js","assets/useMerkleClaim-85bb6a08.js","assets/useWriteContract-ab9d8160.js","assets/public-3a03d500.js","assets/DepositUSDCModal-2048ba50.js","assets/WithdrawUSDCModal-153e94d2.js","assets/useUnifiedBalance-2a41b6ef.js"])),ME=y.lazy(()=>ue(()=>import("./UnifiedLeaderboardPage-7868ec74.js"),["assets/UnifiedLeaderboardPage-7868ec74.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/UserAvatar-b4225c28.js","assets/utils-a40dfe8b.js","assets/utils-17ec81d9.js","assets/AppHeader-78d14113.js","assets/format-ae98e2f4.js"])),FE=y.lazy(()=>ue(()=>import("./AuthCallback-d10fd560.js"),["assets/AuthCallback-d10fd560.js","assets/ui-6244b3df.js","assets/vendor-499a370b.js","assets/utils-17ec81d9.js"])),lh=({message:r="Loading..."})=>d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-500 mx-auto"}),d.jsx("p",{className:"mt-2 text-gray-600",children:r})]})}),uh=y.memo(({children:r})=>{const e=Te(),t=Qt(),n=y.useCallback(()=>{const a=e.pathname.toLowerCase();return a==="/"||a==="/discover"?"discover":a==="/bets"||a==="/predictions"?"bets":a==="/leaderboard"?"leaderboard":a==="/profile"?"profile":a==="/wallet"?"wallet":"discover"},[e.pathname]),s=y.useCallback(a=>{if(n()!==a){switch(Nn(e.pathname),Fs(),a){case"discover":t("/");break;case"bets":t("/predictions");break;case"leaderboard":t("/leaderboard");break;case"profile":t("/profile");break;case"wallet":t("/wallet");break;default:t("/")}setTimeout(()=>{Zx({behavior:"instant"})},50)}},[t,n,e]),i=y.useCallback(()=>{Nn(e.pathname),Fs(),t("/create")},[t,e.pathname]),o=n()==="discover";return d.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col","data-scroll-container":!0,children:[d.jsx("main",{className:"flex-1 pb-[calc(5rem+env(safe-area-inset-bottom))]",children:d.jsx(y.Suspense,{fallback:d.jsx(lh,{message:"Loading page..."}),children:r})}),d.jsx(vE,{activeTab:n(),onTabChange:s,showFAB:o,onFABClick:i}),d.jsx(Qx,{}),d.jsx(s_,{}),d.jsx(Kx,{position:"top-center",containerStyle:{zIndex:2147483647},toastOptions:{duration:4e3,style:{background:"#363636",color:"#fff",zIndex:2147483647}}})]})});uh.displayName="MainLayout";const zE=()=>{const{user:r,session:e,initialized:t}=Xs(),{initializeAuth:n,isAuthenticated:s,initialized:i,user:o}=ye();return y.useEffect(()=>{if(t)if(r&&e){const a=ye.getState().user;if(!ye.getState().isAuthenticated||!a||a.id!==r.id){console.log("ðŸ”„ Syncing session user to auth store...",r.email);const l={id:r.id,firstName:r.user_metadata?.firstName||r.user_metadata?.first_name||r.user_metadata?.full_name?.split(" ")[0]||"User",lastName:r.user_metadata?.lastName||r.user_metadata?.last_name||r.user_metadata?.full_name?.split(" ").slice(1).join(" ")||"",email:r.email||"",phone:r.phone,avatar:r.user_metadata?.avatar_url||r.user_metadata?.picture,provider:r.app_metadata?.provider||"email",createdAt:r.created_at};ye.setState({isAuthenticated:!0,user:l,token:e.access_token,loading:!1,initialized:!0,lastAuthCheck:Date.now()}),console.log("âœ… Auth store synced with session user:",l.firstName)}}else!r&&s&&(console.log("ðŸ”„ No session user, clearing auth store..."),ye.setState({isAuthenticated:!1,user:null,token:null,lastAuthCheck:0}))},[r,e,t,s]),y.useEffect(()=>{kb()},[]),null},$i=()=>{const r=Te(),e=Qt(),t=y.useCallback(()=>{Nn(r.pathname),e("/profile")},[e,r.pathname]),n=y.useCallback(s=>{Nn(r.pathname),e(`/prediction/${s}`)},[e,r.pathname]);return d.jsx(RE,{onNavigateToProfile:t,onNavigateToPrediction:n})},dl=()=>{const r=Te(),e=Qt(),t=y.useCallback(()=>{Nn(r.pathname),e("/")},[e,r.pathname]);return d.jsx($E,{onNavigateToDiscover:t})},VE=()=>{Te();const r=Qt(),e=y.useCallback(()=>{Fs(),r("/")},[r]);return d.jsx(nn,{title:"Create Prediction",children:d.jsx(LE,{onNavigateBack:e})})},hl=()=>d.jsx(nn,{title:"Leaderboard",children:d.jsx(ME,{})}),fl=()=>{const{id:r}=lf(),e=Qt(),[t,n]=pr.useState(null),[s,i]=pr.useState(!0),o=y.useCallback(()=>{console.log("ðŸ”™ Navigating back from prediction details"),window.history.length>1?window.history.back():(Fs(),e("/"))},[e]);return pr.useEffect(()=>{(async()=>{if(!r){i(!1);return}if(/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(r)){n(r),i(!1);return}try{const l=(await ue(()=>Promise.resolve().then(()=>$v),void 0)).getApiUrl(),u=await fetch(`${l}/api/v2/predictions/resolve/slug/${encodeURIComponent(r)}`,{method:"GET"});if(!u.ok)throw new Error(`resolve failed ${u.status}`);const h=await u.json();h?.id?n(h.id):console.warn("Slug resolve returned no id for",r)}catch(l){console.warn("Slug resolve errored",l)}finally{i(!1)}})()},[r]),r?s?d.jsx(lh,{message:"Loading prediction..."}):t?d.jsx(DE,{predictionId:t}):d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Prediction Not Found"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"The prediction you're looking for doesn't exist."}),d.jsx("button",{onClick:o,className:"px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600",children:"Go Back"})]})}):d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Prediction Not Found"}),d.jsx("p",{className:"text-gray-600 mb-4",children:"The prediction you're looking for doesn't exist."}),d.jsx("button",{onClick:o,className:"px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600",children:"Go Back"})]})})},qE=()=>{const{initializeWallet:r}=ub(),{initializeAuth:e,loading:t,initialized:n}=ye(),{initializeLikes:s}=yb(),{user:i,loading:o,initialized:a}=Xs(),c=o||t,l=!!i;return y.useEffect(()=>{if(!n&&!t&&a)try{console.log("App: Initializing auth store..."),i?console.log("App: Session user exists, sync will handle auth store"):e()}catch(u){console.error("Auth initialization failed:",u)}},[e,n,t,a,i]),y.useEffect(()=>{if(l&&!c&&a)try{console.log("App: Initializing wallet and social features..."),r(),s(),console.log("âœ… All stores initialized successfully")}catch(u){console.error("Store initialization failed:",u)}},[l,c,a,r,s]),y.useEffect(()=>{a&&!ye.getState().initialized&&(console.log("App: Marking auth store as initialized to match session state"),ye.setState({initialized:!0,loading:!1}))},[a]),d.jsxs(U_,{children:[d.jsx(B_,{children:d.jsx(uh,{children:d.jsx(y.Suspense,{fallback:d.jsx(M_,{}),children:d.jsxs(Sf,{children:[d.jsx(fe,{path:"/",element:d.jsx($i,{})}),d.jsx(fe,{path:"/discover",element:d.jsx($i,{})}),d.jsx(fe,{path:"/auth/callback",element:d.jsx(FE,{})}),d.jsx(fe,{path:"/predictions",element:d.jsx(dl,{})}),d.jsx(fe,{path:"/predictions/:id",element:d.jsx(fl,{})}),d.jsx(fe,{path:"/bets",element:d.jsx(dl,{})}),d.jsx(fe,{path:"/leaderboard",element:d.jsx(hl,{})}),d.jsx(fe,{path:"/create",element:d.jsx(VE,{})}),d.jsx(fe,{path:"/profile",element:d.jsx(nn,{title:"Profile",children:d.jsx(ul,{})})}),d.jsx(fe,{path:"/profile/:userId",element:d.jsx(nn,{title:"Profile",children:d.jsx(ul,{})})}),d.jsx(fe,{path:"/wallet",element:d.jsx(nn,{title:"Wallet",children:d.jsx(BE,{})})}),d.jsx(fe,{path:"/rankings",element:d.jsx(hl,{})}),d.jsx(fe,{path:"/prediction/:id",element:d.jsx(fl,{})}),d.jsx(fe,{path:"/download",element:d.jsx(UE,{})}),d.jsx(fe,{path:"*",element:d.jsx($i,{})})]})})})}),d.jsx(ox,{}),d.jsx(zE,{})]})};function WE(){return d.jsx(qd,{children:d.jsx(xd,{children:d.jsx(Ed,{children:d.jsxs(zv,{children:[d.jsx(qE,{}),d.jsx(NE,{})]})})})})}const HE=new Date().getFullYear(),GE=()=>{const r="/downloads/app-latest.apk",e="FanClubZ-v2.0.78.apk",t="2.0.78",n="â‰ˆ4.9MB";return d.jsxs("div",{className:"bg-gradient-to-b from-[#211234] via-[#1b1130] to-[#130c24] text-white min-h-screen",children:[d.jsx("header",{className:"sticky top-0 z-40 backdrop-blur supports-[backdrop-filter]:bg-white/5",children:d.jsx("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-4 py-4",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("img",{src:"/icons/icon-96.png",alt:"FanClubZ",className:"h-8 w-8",style:{objectFit:"contain"}}),d.jsx("span",{className:"text-lg font-semibold tracking-wide",children:"FanClubZ"})]})})}),d.jsxs("main",{children:[d.jsxs("section",{className:"relative overflow-hidden",children:[d.jsx("div",{className:"pointer-events-none absolute inset-0 bg-[radial-gradient(600px_circle_at_20%_20%,rgba(34,197,94,0.15),transparent_60%),radial-gradient(600px_circle_at_80%_0%,rgba(59,130,246,0.12),transparent_60%)]"}),d.jsxs("div",{className:"relative mx-auto grid max-w-6xl grid-cols-1 items-center gap-10 px-4 py-16 md:grid-cols-2 md:py-20",children:[d.jsxs("div",{children:[d.jsxs("h1",{className:"text-balance text-4xl font-extrabold leading-tight sm:text-5xl",children:["Turn insights into"," ",d.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-sky-400 bg-clip-text text-transparent",children:"rewards"})]}),d.jsx("p",{className:"mt-4 max-w-prose text-white/80",children:"Create and join predictions on sports, pop culture, tech and more. Share your point of view, back it with a stake, and win based on real outcomes."}),d.jsxs("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[d.jsxs("a",{href:"https://app.fanclubz.app/",className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-5 py-3 text-sm font-semibold text-black shadow-xl transition hover:brightness-95",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"}),d.jsx("path",{d:"M2 12h20"})]}),"Open Web App"]}),d.jsxs("a",{href:r,download:e,className:"inline-flex items-center gap-2 rounded-xl border border-white/15 px-5 py-3 text-sm font-semibold text-white/90 transition hover:bg-white/10",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[d.jsx("rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2"}),d.jsx("path",{d:"M12 18h.01"})]}),"Android APK (",t,")"]})]}),d.jsxs("div",{className:"mt-6 flex items-center gap-4",children:[d.jsx("a",{href:"https://www.instagram.com/fanclubzapp?utm_source=ig_web_button_share_sheet&igsh=b2xvYmYxdmZiZGQ=","aria-label":"Instagram",className:"group rounded-full border border-white/10 p-2 text-white/70 transition hover:border-white/20 hover:text-white",target:"_blank",rel:"noreferrer",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[d.jsx("rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5"}),d.jsx("path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z"}),d.jsx("line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5"})]})}),d.jsx("a",{href:"https://x.com/fanclubzapp?s=21&t=azQHKJXvTx2oYBcMg4IStg","aria-label":"Twitter",className:"group rounded-full border border-white/10 p-2 text-white/70 transition hover:border-white/20 hover:text-white",target:"_blank",rel:"noreferrer",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:d.jsx("path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z"})})}),d.jsx("a",{href:"https://discord.gg/uTT9zVT9","aria-label":"Discord",className:"group rounded-full border border-white/10 p-2 text-white/70 transition hover:border-white/20 hover:text-white",target:"_blank",rel:"noreferrer",children:d.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:d.jsx("path",{d:"M2.992 16.342a2 2 0 0 1 .094 1.167l-1.065 3.29a1 1 0 0 0 1.236 1.168l3.413-.998a2 2 0 0 1 1.099.092 10 10 0 1 0-4.777-4.719"})})}),d.jsx("a",{href:"https://t.me/Fanclubzapp","aria-label":"Telegram",className:"group rounded-full border border-white/10 p-2 text-white/70 transition hover:border-white/20 hover:text-white",target:"_blank",rel:"noreferrer",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[d.jsx("path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z"}),d.jsx("path",{d:"m21.854 2.147-10.94 10.939"})]})})]})]}),d.jsx("div",{className:"relative mx-auto aspect-[4/3] w-full max-w-xl overflow-hidden rounded-2xl border border-white/10 bg-gradient-to-br from-white/10 to-white/5 shadow-2xl",children:d.jsx("div",{className:"absolute inset-0 grid place-items-center",children:d.jsxs("div",{className:"flex items-center gap-3 rounded-xl bg-black/40 px-4 py-2 backdrop-blur",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 text-emerald-300",children:[d.jsx("path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z"}),d.jsx("path",{d:"M20 2v4"}),d.jsx("path",{d:"M22 4h-4"}),d.jsx("circle",{cx:"4",cy:"20",r:"2"})]}),d.jsx("span",{className:"text-sm text-white/90",children:"Predict trending topics with friends"})]})})})]})]}),d.jsxs("section",{className:"mx-auto max-w-6xl px-4 py-10",children:[d.jsx("h2",{className:"text-center text-2xl font-bold",children:"Why choose FanClubZ?"}),d.jsx("p",{className:"mx-auto mt-2 max-w-2xl text-center text-white/70",children:"The most engaging way to predict what happens next. Join communities, build credibility, and earn when you get it right."}),d.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-4 md:grid-cols-3",children:[d.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[d.jsx("div",{className:"mb-3 inline-flex items-center justify-center rounded-xl bg-white/10 p-2",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 text-emerald-300",children:[d.jsx("path",{d:"M3 3v16a2 2 0 0 0 2 2h16"}),d.jsx("path",{d:"m19 9-5 5-4-4-3 3"})]})}),d.jsx("div",{className:"text-sm font-semibold",children:"Realâ€‘time Markets"}),d.jsx("p",{className:"mt-1 text-sm text-white/70",children:"Make predictions as events unfold with dynamic odds."})]}),d.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[d.jsx("div",{className:"mb-3 inline-flex items-center justify-center rounded-xl bg-white/10 p-2",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 text-emerald-300",children:[d.jsx("path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}),d.jsx("path",{d:"M16 3.128a4 4 0 0 1 0 7.744"}),d.jsx("path",{d:"M22 21v-2a4 4 0 0 0-3-3.87"}),d.jsx("circle",{cx:"9",cy:"7",r:"4"})]})}),d.jsx("div",{className:"text-sm font-semibold",children:"Social Predictions"}),d.jsx("p",{className:"mt-1 text-sm text-white/70",children:"Follow top predictors, share insights, and discover trends."})]}),d.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[d.jsx("div",{className:"mb-3 inline-flex items-center justify-center rounded-xl bg-white/10 p-2",children:d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5 text-emerald-300",children:[d.jsx("path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z"}),d.jsx("path",{d:"m9 12 2 2 4-4"})]})}),d.jsx("div",{className:"text-sm font-semibold",children:"Secure & Fair"}),d.jsx("p",{className:"mt-1 text-sm text-white/70",children:"Transparent rules, verifiable outcomes, and fast payouts."})]})]})]}),d.jsxs("section",{className:"mx-auto max-w-6xl px-4 py-12",children:[d.jsx("h3",{className:"text-xl font-semibold",children:"How it works"}),d.jsxs("ol",{className:"mt-4 grid list-decimal gap-3 pl-6 text-white/80 md:grid-cols-2",children:[d.jsx("li",{children:"Pick a market that matches your interest."}),d.jsx("li",{children:"Choose an outcome you believe will happen."}),d.jsx("li",{children:"Stake an amount you're comfortable with."}),d.jsx("li",{children:"If you're right, you win based on the final odds."})]})]}),d.jsx("section",{id:"download",className:"mx-auto max-w-6xl px-4 pb-12",children:d.jsxs("div",{className:"rounded-2xl border border-white/10 p-6 md:p-8",children:[d.jsxs("div",{className:"flex flex-col items-start justify-between gap-6 md:flex-row md:items-center",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold",children:"Get the Android app"}),d.jsxs("p",{className:"mt-1 text-white/70",children:["Version ",t," â€¢ ",n]})]}),d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsxs("a",{href:r,download:e,className:"inline-flex items-center gap-2 rounded-xl bg-emerald-500 px-5 py-3 text-sm font-semibold text-black shadow-xl transition hover:brightness-95",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4",children:[d.jsx("path",{d:"M12 15V3"}),d.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),d.jsx("path",{d:"m7 10 5 5 5-5"})]}),"Download APK"]}),d.jsx("a",{href:"#install",className:"rounded-xl border border-white/15 px-5 py-3 text-sm font-semibold text-white/90 transition hover:bg-white/10",children:"Install instructions"})]})]}),d.jsxs("div",{id:"install",className:"mt-6 grid gap-4 md:grid-cols-3",children:[d.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-emerald-300",children:"STEP 1"}),d.jsx("div",{className:"text-sm font-semibold",children:"Allow unknown sources"}),d.jsx("p",{className:"mt-1 text-sm text-white/70",children:"Open Settings â†’ Security and enable installation from your browser or file manager."})]}),d.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-emerald-300",children:"STEP 2"}),d.jsx("div",{className:"text-sm font-semibold",children:"Download & open APK"}),d.jsx("p",{className:"mt-1 text-sm text-white/70",children:"Tap the APK link above, then open it from the downloads tray or Files."})]}),d.jsxs("div",{className:"rounded-xl border border-white/10 bg-white/5 p-4",children:[d.jsx("div",{className:"mb-1 text-xs font-semibold text-emerald-300",children:"STEP 3"}),d.jsx("div",{className:"text-sm font-semibold",children:"Install & launch"}),d.jsx("p",{className:"mt-1 text-sm text-white/70",children:"Follow the prompts to install. Next updates will come automatically inside the app."})]})]})]})}),d.jsxs("section",{className:"mx-auto max-w-6xl px-4 pb-16",children:[d.jsxs("h3",{className:"mb-4 flex items-center gap-2 text-xl font-semibold",children:[d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-5 w-5",children:[d.jsx("circle",{cx:"12",cy:"12",r:"10"}),d.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),d.jsx("path",{d:"M12 17h.01"})]}),"FAQ"]}),d.jsx("div",{className:"grid gap-3 md:grid-cols-2",children:[{question:"Is it free to join?",answer:"Yes. Browsing markets is free. You only stake when placing a prediction."},{question:"Where can I use FanClubZ?",answer:"Anywhere the web app loads. Android APK is available; iOS is coming soon."},{question:"How are outcomes decided?",answer:"Each market has clear settlement rules and sources. Winning stakes are paid out accordingly."},{question:"Is my data safe?",answer:"We use modern security practices for auth and data storage. You can delete your data anytime."}].map(s=>d.jsxs("details",{className:"group rounded-xl border border-white/10 p-4 open:bg-white/5",children:[d.jsx("summary",{className:"cursor-pointer list-none select-none font-medium text-white/90",children:d.jsxs("div",{className:"flex items-center justify-between gap-3",children:[d.jsx("span",{children:s.question}),d.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"h-4 w-4 text-white/50 transition group-open:rotate-180",children:[d.jsx("path",{d:"M12 7v14"}),d.jsx("path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z"})]})]})}),d.jsx("p",{className:"mt-2 text-sm text-white/70",children:s.answer})]},s.question))})]})]}),d.jsxs("footer",{className:"border-t border-white/10",children:[d.jsxs("div",{className:"mx-auto grid max-w-6xl grid-cols-1 gap-8 px-4 py-10 md:grid-cols-4",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[d.jsx("img",{src:"/icons/icon-96.png",alt:"FanClubZ",className:"h-6 w-6",style:{objectFit:"contain"}}),d.jsx("span",{className:"font-semibold",children:"FanClubZ"})]}),d.jsx("p",{className:"text-sm text-white/70",children:"Social predictions done right. Turn your opinions into outcomes."})]}),d.jsxs("div",{children:[d.jsx("div",{className:"mb-2 text-sm font-semibold text-white/80",children:"Product"}),d.jsxs("ul",{className:"space-y-2 text-sm text-white/70",children:[d.jsx("li",{children:d.jsx("a",{href:"https://app.fanclubz.app/",className:"hover:text-white",children:"Web App"})}),d.jsx("li",{children:d.jsx("a",{href:"#download",className:"hover:text-white",children:"Android APK"})}),d.jsx("li",{children:d.jsx("a",{href:"#install",className:"hover:text-white",children:"Install guide"})})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"mb-2 text-sm font-semibold text-white/80",children:"Company"}),d.jsxs("ul",{className:"space-y-2 text-sm text-white/70",children:[d.jsx("li",{children:d.jsx("a",{href:"#about",className:"hover:text-white",children:"About"})}),d.jsx("li",{children:d.jsx("a",{href:"#features",className:"hover:text-white",children:"Features"})}),d.jsx("li",{children:d.jsx("a",{href:"#contact",className:"hover:text-white",children:"Contact"})})]})]}),d.jsxs("div",{children:[d.jsx("div",{className:"mb-2 text-sm font-semibold text-white/80",children:"Community"}),d.jsxs("ul",{className:"space-y-2 text-sm text-white/70",children:[d.jsx("li",{children:d.jsx("a",{href:"https://www.instagram.com/fanclubzapp?utm_source=ig_web_button_share_sheet&igsh=b2xvYmYxdmZiZGQ=",target:"_blank",rel:"noreferrer",className:"hover:text-white",children:"Instagram"})}),d.jsx("li",{children:d.jsx("a",{href:"https://x.com/fanclubzapp?s=21&t=azQHKJXvTx2oYBcMg4IStg",target:"_blank",rel:"noreferrer",className:"hover:text-white",children:"Twitter"})}),d.jsx("li",{children:d.jsx("a",{href:"https://discord.gg/uTT9zVT9",target:"_blank",rel:"noreferrer",className:"hover:text-white",children:"Discord"})}),d.jsx("li",{children:d.jsx("a",{href:"https://t.me/Fanclubzapp",target:"_blank",rel:"noreferrer",className:"hover:text-white",children:"Telegram"})})]})]})]}),d.jsxs("div",{className:"border-t border-white/10 py-6 text-center text-xs text-white/50",children:["Â© ",HE," FanClubZ. All rights reserved."]})]})]})};class KE extends pr.Component{constructor(t){super(t);X(this,"resetError",()=>{this.setState({hasError:!1,error:void 0,errorInfo:void 0})});this.state={hasError:!1}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){this.setState({error:t,errorInfo:n}),this.props.onError?.(t,n)}render(){if(this.state.hasError){if(this.props.fallback){const t=this.props.fallback;return d.jsx(t,{error:this.state.error,resetError:this.resetError})}return d.jsx(ZE,{error:this.state.error,resetError:this.resetError})}return this.props.children}}const ZE=({error:r,resetError:e})=>{const t=()=>{e(),window.location.href="/"},n=()=>{e(),window.location.reload()};return d.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:d.jsxs(oe.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"max-w-md w-full bg-white rounded-2xl shadow-lg p-8 text-center",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx(Wv,{className:"w-8 h-8 text-red-600"})}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:"We encountered an unexpected error. This has been logged and our team will investigate."})]}),r&&!1,d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsxs(oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:n,className:"flex items-center justify-center gap-2 w-full bg-teal-600 text-white py-3 px-4 rounded-xl font-semibold hover:bg-green-700 transition-colors",children:[d.jsx(xo,{className:"w-4 h-4"}),"Try Again"]}),d.jsxs(oe.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:t,className:"flex items-center justify-center gap-2 w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-xl font-semibold hover:bg-gray-200 transition-colors",children:[d.jsx(ri,{className:"w-4 h-4"}),"Go to Home"]})]})]})})},pl=new Map,JE=1e4,ml=3,YE=["user_action","validation_error","success","info"],QE=(r,e="info",t={})=>{const{category:n="user_action",duration:s=4e3,throttle:i=!0,dedupe:o=!0}=t;if(!YE.includes(n))return;const a=`${n}:${r}`;if(i){const c=Date.now(),l=pl.get(a);if(l)if(c-l.lastShown<JE){if(l.count++,l.count>ml)return;ma("Toast throttled:",r,`(${l.count}/${ml})`);return}else l.count=1,l.lastShown=c;else pl.set(a,{lastShown:c,count:1})}if(o){const c=document.querySelectorAll('[data-testid="toast"]');for(const l of c){const u=l.textContent;if(u&&u.includes(r))return}}switch(e){case"success":qt.success(r,{duration:s,style:{background:"#10B981",color:"#fff"},iconTheme:{primary:"#fff",secondary:"#10B981"}});break;case"error":qt.error(r,{duration:s,style:{background:"#EF4444",color:"#fff"},iconTheme:{primary:"#fff",secondary:"#EF4444"}});break;case"loading":qt.loading(r,{duration:s,style:{background:"#3B82F6",color:"#fff"}});break;case"info":default:qt(r,{duration:s,style:{background:"#6B7280",color:"#fff"},iconTheme:{primary:"#fff",secondary:"#6B7280"}});break}},XE=(r,e)=>{QE(r,"error",{...e,category:"user_action"})};class Jr extends Error{constructor(t,n={}){super(t);X(this,"code");X(this,"status");X(this,"context");X(this,"userAction");X(this,"timestamp");this.name="AppError",this.code=n.code,this.status=n.status,this.context=n.context,this.userAction=n.userAction,this.timestamp=Date.now()}toErrorInfo(){return{message:this.message,code:this.code,status:this.status,timestamp:this.timestamp,context:this.context,userAction:this.userAction}}}const eS=r=>r instanceof Jr?{type:r.code==="AUTH_REQUIRED"?"auth":r.code==="VALIDATION_ERROR"?"validation":r.status&&r.status>=500?"server":r.status&&r.status>=400?"validation":"unknown",message:r.message,userFriendly:!0,shouldShowToast:r.userAction||!1}:r instanceof Error?r.message.includes("fetch")||r.message.includes("network")||r.message.includes("Failed to fetch")?{type:"network",message:"Connection problem. Please check your internet and try again.",userFriendly:!0,shouldShowToast:!1}:{type:"unknown",message:r.message,userFriendly:!1,shouldShowToast:!1}:{type:"unknown",message:"Something went wrong. Please try again.",userFriendly:!0,shouldShowToast:!1},tS=y.createContext(void 0),rS=({children:r,maxErrors:e=10,showToasts:t=!0})=>{const[n,s]=y.useState([]),i=(c,l)=>{const u=c instanceof Jr?c:new Jr(c.message,{context:l}),h=eS(u);s(f=>[u,...f].slice(0,e)),ma("[ErrorHandlingProvider] Error reported:",u.toErrorInfo()),t&&h.shouldShowToast&&XE(h.message)},o=()=>{s([])};y.useEffect(()=>{const c=u=>{const h=new Jr(u.message,{context:"unhandled_error",code:"UNHANDLED_ERROR"});i(h)},l=u=>{const h=new Jr(u.reason instanceof Error?u.reason.message:"Unhandled promise rejection",{context:"unhandled_rejection",code:"UNHANDLED_REJECTION"});i(h)};return window.addEventListener("error",c),window.addEventListener("unhandledrejection",l),()=>{window.removeEventListener("error",c),window.removeEventListener("unhandledrejection",l)}},[i]);const a={reportError:i,clearErrors:o,errors:n};return d.jsx(tS.Provider,{value:a,children:r})},nS={gasPriceOracle:{address:"0x420000000000000000000000000000000000000F"},l1Block:{address:"0x4200000000000000000000000000000000000015"},l2CrossDomainMessenger:{address:"0x4200000000000000000000000000000000000007"},l2Erc721Bridge:{address:"0x4200000000000000000000000000000000000014"},l2StandardBridge:{address:"0x4200000000000000000000000000000000000010"},l2ToL1MessagePasser:{address:"0x4200000000000000000000000000000000000016"}},sS={block:_m({format(r){return{transactions:r.transactions?.map(t=>{if(typeof t=="string")return t;const n=zo(t);return n.typeHex==="0x7e"&&(n.isSystemTx=t.isSystemTx,n.mint=t.mint?ur(t.mint):void 0,n.sourceHash=t.sourceHash,n.type="deposit"),n}),stateRoot:r.stateRoot}}}),transaction:bm({format(r){const e={};return r.type==="0x7e"&&(e.isSystemTx=r.isSystemTx,e.mint=r.mint?ur(r.mint):void 0,e.sourceHash=r.sourceHash,e.type="deposit"),e}}),transactionReceipt:og({format(r){return{l1GasPrice:r.l1GasPrice?ur(r.l1GasPrice):null,l1GasUsed:r.l1GasUsed?ur(r.l1GasUsed):null,l1Fee:r.l1Fee?ur(r.l1Fee):null,l1FeeScalar:r.l1FeeScalar?Number(r.l1FeeScalar):null}}})};function iS(r,e){return cS(r)?aS(r):Gm(r,e)}const oS={transaction:iS};function aS(r){lS(r);const{sourceHash:e,data:t,from:n,gas:s,isSystemTx:i,mint:o,to:a,value:c}=r,l=[e,n,a??"0x",o?Wt(o):"0x",c?Wt(c):"0x",s?Wt(s):"0x",i?"0x1":"0x",t??"0x"];return Ir(["0x7e",Jt(l)])}function cS(r){return r.type==="deposit"||typeof r.sourceHash<"u"}function lS(r){const{from:e,to:t}=r;if(e&&!_t(e))throw new vt({address:e});if(t&&!_t(t))throw new vt({address:t})}const gl={blockTime:2e3,contracts:nS,formatters:sS,serializers:oS},Vr=11155111,Po=bu({...gl,id:84532,network:"base-sepolia",name:"Base Sepolia",nativeCurrency:{name:"Sepolia Ether",symbol:"ETH",decimals:18},rpcUrls:{default:{http:["https://sepolia.base.org"]}},blockExplorers:{default:{name:"Basescan",url:"https://sepolia.basescan.org",apiUrl:"https://api-sepolia.basescan.org/api"}},contracts:{...gl.contracts,disputeGameFactory:{[Vr]:{address:"0xd6E6dBf4F7EA0ac412fD8b65ED297e64BB7a06E1"}},l2OutputOracle:{[Vr]:{address:"0x84457ca9D0163FbC4bbfe4Dfbb20ba46e48DF254"}},portal:{[Vr]:{address:"0x49f53e41452c74589e85ca1677426ba426459e85",blockCreated:4446677}},l1StandardBridge:{[Vr]:{address:"0xfd0Bf71F60660E2f608ed56e1659C450eB113120",blockCreated:4446677}},multicall3:{address:"0xca11bde05977b3631167028862be2a173976ca11",blockCreated:1059647}},testnet:!0,sourceId:Vr});({...Po});ai.type="coinbaseWallet";function ai(r={}){return r.version==="3"||r.headlessMode?dS(r):uS(r)}function uS(r){let e,t,n,s;return i=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:ai.type,async connect({chainId:o,withCapabilities:a,...c}={}){try{const l=await this.getProvider(),u=(await l.request({method:"eth_requestAccounts",params:"instantOnboarding"in c&&c.instantOnboarding?[{onboarding:"instant"}]:[]})).map(f=>xe(f));t||(t=this.onAccountsChanged.bind(this),l.on("accountsChanged",t)),n||(n=this.onChainChanged.bind(this),l.on("chainChanged",n)),s||(s=this.onDisconnect.bind(this),l.on("disconnect",s));let h=await this.getChainId();return o&&h!==o&&(h=(await this.switchChain({chainId:o}).catch(p=>{if(p.code===Q.code)throw p;return{id:h}}))?.id??h),{accounts:a?u.map(f=>({address:f,capabilities:{}})):u,chainId:h}}catch(l){throw/(user closed modal|accounts received is empty|user denied account|request rejected)/i.test(l.message)?new Q(l):l}},async disconnect(){const o=await this.getProvider();t&&(o.removeListener("accountsChanged",t),t=void 0),n&&(o.removeListener("chainChanged",n),n=void 0),s&&(o.removeListener("disconnect",s),s=void 0),o.disconnect(),o.close?.()},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(a=>xe(a))},async getChainId(){const a=await(await this.getProvider()).request({method:"eth_chainId"});return Number(a)},async getProvider(){if(!e){const o=(()=>typeof r.preference=="string"?{options:r.preference}:{...r.preference,options:r.preference?.options??"all"})(),{createCoinbaseWalletSDK:a}=await ue(()=>import("./index-1545d0f9.js"),["assets/index-1545d0f9.js","assets/hooks.module-50742324.js","assets/public-3a03d500.js","assets/index-accd8060.js","assets/vendor-499a370b.js","assets/ui-6244b3df.js","assets/utils-17ec81d9.js"]);e=a({...r,appChainIds:i.chains.map(l=>l.id),preference:o}).getProvider()}return e},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:o,chainId:a}){const c=i.chains.find(u=>u.id===a);if(!c)throw new Ce(new vr);const l=await this.getProvider();try{return await l.request({method:"wallet_switchEthereumChain",params:[{chainId:M(c.id)}]}),c}catch(u){if(u.code===4902)try{let h;o?.blockExplorerUrls?h=o.blockExplorerUrls:h=c.blockExplorers?.default.url?[c.blockExplorers?.default.url]:[];let f;o?.rpcUrls?.length?f=o.rpcUrls:f=[c.rpcUrls.default?.http[0]??""];const p={blockExplorerUrls:h,chainId:M(a),chainName:o?.chainName??c.name,iconUrls:o?.iconUrls,nativeCurrency:o?.nativeCurrency??c.nativeCurrency,rpcUrls:f};return await l.request({method:"wallet_addEthereumChain",params:[p]}),c}catch(h){throw new Q(h)}throw new Ce(u)}},onAccountsChanged(o){o.length===0?this.onDisconnect():i.emitter.emit("change",{accounts:o.map(a=>xe(a))})},onChainChanged(o){const a=Number(o);i.emitter.emit("change",{chainId:a})},async onDisconnect(o){i.emitter.emit("disconnect");const a=await this.getProvider();t&&(a.removeListener("accountsChanged",t),t=void 0),n&&(a.removeListener("chainChanged",n),n=void 0),s&&(a.removeListener("disconnect",s),s=void 0)}})}function dS(r){let t,n,s,i,o;return a=>({id:"coinbaseWalletSDK",name:"Coinbase Wallet",rdns:"com.coinbase.wallet",type:ai.type,async connect({chainId:c,withCapabilities:l}={}){try{const u=await this.getProvider(),h=(await u.request({method:"eth_requestAccounts"})).map(p=>xe(p));s||(s=this.onAccountsChanged.bind(this),u.on("accountsChanged",s)),i||(i=this.onChainChanged.bind(this),u.on("chainChanged",i)),o||(o=this.onDisconnect.bind(this),u.on("disconnect",o));let f=await this.getChainId();return c&&f!==c&&(f=(await this.switchChain({chainId:c}).catch(w=>{if(w.code===Q.code)throw w;return{id:f}}))?.id??f),{accounts:l?h.map(p=>({address:p,capabilities:{}})):h,chainId:f}}catch(u){throw/(user closed modal|accounts received is empty|user denied account)/i.test(u.message)?new Q(u):u}},async disconnect(){const c=await this.getProvider();s&&(c.removeListener("accountsChanged",s),s=void 0),i&&(c.removeListener("chainChanged",i),i=void 0),o&&(c.removeListener("disconnect",o),o=void 0),c.disconnect(),c.close()},async getAccounts(){return(await(await this.getProvider()).request({method:"eth_accounts"})).map(l=>xe(l))},async getChainId(){const l=await(await this.getProvider()).request({method:"eth_chainId"});return Number(l)},async getProvider(){if(!n){const c=await(async()=>{const{default:p}=await ue(()=>import("./index-0e2356d9.js").then(w=>w.i),["assets/index-0e2356d9.js","assets/vendor-499a370b.js","assets/hooks.module-50742324.js","assets/events-c5734f40.js"]);return typeof p!="function"&&typeof p.default=="function"?p.default:p})();t=new c({...r,reloadOnDisconnect:!1});const l=t.walletExtension?.getChainId(),u=a.chains.find(p=>r.chainId?p.id===r.chainId:p.id===l)||a.chains[0],h=r.chainId||u?.id,f=r.jsonRpcUrl||u?.rpcUrls.default.http[0];n=t.makeWeb3Provider(f,h)}return n},async isAuthorized(){try{return!!(await this.getAccounts()).length}catch{return!1}},async switchChain({addEthereumChainParameter:c,chainId:l}){const u=a.chains.find(f=>f.id===l);if(!u)throw new Ce(new vr);const h=await this.getProvider();try{return await h.request({method:"wallet_switchEthereumChain",params:[{chainId:M(u.id)}]}),u}catch(f){if(f.code===4902)try{let p;c?.blockExplorerUrls?p=c.blockExplorerUrls:p=u.blockExplorers?.default.url?[u.blockExplorers?.default.url]:[];let w;c?.rpcUrls?.length?w=c.rpcUrls:w=[u.rpcUrls.default?.http[0]??""];const g={blockExplorerUrls:p,chainId:M(l),chainName:c?.chainName??u.name,iconUrls:c?.iconUrls,nativeCurrency:c?.nativeCurrency??u.nativeCurrency,rpcUrls:w};return await h.request({method:"wallet_addEthereumChain",params:[g]}),u}catch(p){throw new Q(p)}throw new Ce(f)}},onAccountsChanged(c){c.length===0?this.onDisconnect():a.emitter.emit("change",{accounts:c.map(l=>xe(l))})},onChainChanged(c){const l=Number(c);a.emitter.emit("change",{chainId:l})},async onDisconnect(c){a.emitter.emit("disconnect");const l=await this.getProvider();s&&(l.removeListener("accountsChanged",s),s=void 0),i&&(l.removeListener("chainChanged",i),i=void 0),o&&(l.removeListener("disconnect",o),o=void 0)}})}ya.type="walletConnect";function ya(r){const e=r.isNewChainsStale??!0;let t,n;const s="eip155";let i,o,a,c,l,u;return h=>({id:"walletConnect",name:"WalletConnect",type:ya.type,async setup(){const f=await this.getProvider().catch(()=>null);f&&(a||(a=this.onConnect.bind(this),f.on("connect",a)),l||(l=this.onSessionDelete.bind(this),f.on("session_delete",l)))},async connect({chainId:f,withCapabilities:p,...w}={}){try{const g=await this.getProvider();if(!g)throw new ut;c||(c=this.onDisplayUri,g.on("display_uri",c));let m=f;if(!m){const E=await h.storage?.getItem("state")??{};h.chains.some(S=>S.id===E.chainId)?m=E.chainId:m=h.chains[0]?.id}if(!m)throw new Error("No chains found on connector.");const x=await this.isChainsStale();if(g.session&&x&&await g.disconnect(),!g.session||x){const E=h.chains.filter(_=>_.id!==m).map(_=>_.id);await g.connect({optionalChains:[m,...E],..."pairingTopic"in w?{pairingTopic:w.pairingTopic}:{}}),this.setRequestedChainsIds(h.chains.map(_=>_.id))}const b=(await g.enable()).map(E=>xe(E));let v=await this.getChainId();return f&&v!==f&&(v=(await this.switchChain({chainId:f}).catch(_=>{if(_.code===Q.code&&_.cause?.message!=="Missing or invalid. request() method: wallet_addEthereumChain")throw _;return{id:v}}))?.id??v),c&&(g.removeListener("display_uri",c),c=void 0),a&&(g.removeListener("connect",a),a=void 0),i||(i=this.onAccountsChanged.bind(this),g.on("accountsChanged",i)),o||(o=this.onChainChanged.bind(this),g.on("chainChanged",o)),u||(u=this.onDisconnect.bind(this),g.on("disconnect",u)),l||(l=this.onSessionDelete.bind(this),g.on("session_delete",l)),{accounts:p?b.map(E=>({address:E,capabilities:{}})):b,chainId:v}}catch(g){throw/(user rejected|connection request reset)/i.test(g?.message)?new Q(g):g}},async disconnect(){const f=await this.getProvider();try{await f?.disconnect()}catch(p){if(!/No matching key/i.test(p.message))throw p}finally{o&&(f?.removeListener("chainChanged",o),o=void 0),u&&(f?.removeListener("disconnect",u),u=void 0),a||(a=this.onConnect.bind(this),f?.on("connect",a)),i&&(f?.removeListener("accountsChanged",i),i=void 0),l&&(f?.removeListener("session_delete",l),l=void 0),this.setRequestedChainsIds([])}},async getAccounts(){return(await this.getProvider()).accounts.map(p=>xe(p))},async getProvider({chainId:f}={}){async function p(){const w=h.chains.map(m=>m.id);if(!w.length)return;const{EthereumProvider:g}=await ue(()=>import("./index.es-bd5365c9.js").then(m=>m.X),["assets/index.es-bd5365c9.js","assets/events-c5734f40.js","assets/vendor-499a370b.js","assets/index-accd8060.js"]);return await g.init({...r,disableProviderPing:!0,optionalChains:w,projectId:r.projectId,rpcMap:Object.fromEntries(h.chains.map(m=>{const[x]=Ug({chain:m,transports:h.transports});return[m.id,x]})),showQrModal:r.showQrModal??!0})}return t||(n||(n=p()),t=await n,t?.events.setMaxListeners(Number.POSITIVE_INFINITY)),f&&await this.switchChain?.({chainId:f}),t},async getChainId(){return(await this.getProvider()).chainId},async isAuthorized(){try{const[f,p]=await Promise.all([this.getAccounts(),this.getProvider()]);return f.length?await this.isChainsStale()&&p.session?(await p.disconnect().catch(()=>{}),!1):!0:!1}catch{return!1}},async switchChain({addEthereumChainParameter:f,chainId:p}){const w=await this.getProvider();if(!w)throw new ut;const g=h.chains.find(m=>m.id===p);if(!g)throw new Ce(new vr);try{await Promise.all([new Promise(x=>{const b=({chainId:v})=>{v===p&&(h.emitter.off("change",b),x())};h.emitter.on("change",b)}),w.request({method:"wallet_switchEthereumChain",params:[{chainId:M(p)}]})]);const m=await this.getRequestedChainsIds();return this.setRequestedChainsIds([...m,p]),g}catch(m){const x=m;if(/(user rejected)/i.test(x.message))throw new Q(x);try{let b;f?.blockExplorerUrls?b=f.blockExplorerUrls:b=g.blockExplorers?.default.url?[g.blockExplorers?.default.url]:[];let v;f?.rpcUrls?.length?v=f.rpcUrls:v=[...g.rpcUrls.default.http];const E={blockExplorerUrls:b,chainId:M(p),chainName:f?.chainName??g.name,iconUrls:f?.iconUrls,nativeCurrency:f?.nativeCurrency??g.nativeCurrency,rpcUrls:v};await w.request({method:"wallet_addEthereumChain",params:[E]});const _=await this.getRequestedChainsIds();return this.setRequestedChainsIds([..._,p]),g}catch(b){throw new Q(b)}}},onAccountsChanged(f){f.length===0?this.onDisconnect():h.emitter.emit("change",{accounts:f.map(p=>xe(p))})},onChainChanged(f){const p=Number(f);h.emitter.emit("change",{chainId:p})},async onConnect(f){const p=Number(f.chainId),w=await this.getAccounts();h.emitter.emit("connect",{accounts:w,chainId:p})},async onDisconnect(f){this.setRequestedChainsIds([]),h.emitter.emit("disconnect");const p=await this.getProvider();i&&(p.removeListener("accountsChanged",i),i=void 0),o&&(p.removeListener("chainChanged",o),o=void 0),u&&(p.removeListener("disconnect",u),u=void 0),l&&(p.removeListener("session_delete",l),l=void 0),a||(a=this.onConnect.bind(this),p.on("connect",a))},onDisplayUri(f){h.emitter.emit("message",{type:"display_uri",data:f})},onSessionDelete(){this.onDisconnect()},getNamespaceChainsIds(){return t?t.session?.namespaces[s]?.accounts?.map(p=>Number.parseInt(p.split(":")[1]||"",10))??[]:[]},async getRequestedChainsIds(){return await h.storage?.getItem(this.requestedChainsStorageKey)??[]},async isChainsStale(){if(!e)return!1;const f=h.chains.map(g=>g.id),p=this.getNamespaceChainsIds();if(p.length&&!p.some(g=>f.includes(g)))return!1;const w=await this.getRequestedChainsIds();return!f.every(g=>w.includes(g))},async setRequestedChainsIds(f){await h.storage?.setItem(this.requestedChainsStorageKey,f)},get requestedChainsStorageKey(){return`${this.id}.requestedChains`}})}const yl="a376a3c48ca99bd80c5b30a37652a5ae",wa=[Js({shimDisconnect:!0})];if(yl.length>=8)try{const r=typeof window<"u"?_r?.isNativePlatform?.()?"https://app.fanclubz.app":window.location.origin:"https://app.fanclubz.app";wa.push(ya({projectId:yl,showQrModal:!0,qrModalOptions:{themeMode:"light",enableExplorer:!0},metadata:{name:"Fan Club Z",description:"Prediction Platform",url:r,icons:["https://app.fanclubz.app/icons/icon-192.png"]}}))}catch(r){console.warn("[Wagmi] Failed to initialize WalletConnect connector:",r)}if({}.VITE_ENABLE_COINBASE_CONNECTOR==="1"){const r=ai({appName:"Fan Club Z",preference:"smartWalletOnly",headlessMode:!1});wa.push(r)}const hS=Lg({chains:[Po],connectors:wa,transports:{[Po.id]:mg("https://sepolia.base.org")}});const fS=Dd.version,pS=fS,Mt=class Mt{constructor(){X(this,"currentVersion");this.currentVersion=pS}static getInstance(){return Mt.instance||(Mt.instance=new Mt),Mt.instance}getVersion(){return this.currentVersion}incrementPatch(){const[e=0,t=0,n=0]=this.currentVersion.split(".").map(a=>Number(a)||0),s=Number.isFinite(e)?e:0,i=Number.isFinite(t)?t:0,o=Number.isFinite(n)?n:0;return this.currentVersion=`${s}.${i}.${o+1}`,this.currentVersion}incrementMinor(){const[e=0,t=0]=this.currentVersion.split(".").map(i=>Number(i)||0),n=Number.isFinite(e)?e:0,s=Number.isFinite(t)?t:0;return this.currentVersion=`${n}.${s+1}.0`,this.currentVersion}incrementMajor(){const[e=0]=this.currentVersion.split(".").map(n=>Number(n)||0),t=Number.isFinite(e)?e:0;return this.currentVersion=`${t+1}.0.0`,this.currentVersion}setVersion(e){this.currentVersion=e}getVersionInfo(){return{version:this.currentVersion,buildTime:new Date().toISOString(),cacheBuster:`v${this.currentVersion}-${new Date().toISOString().split("T")[0]}-auto`,environment:Ds,isProduction:jn}}};X(Mt,"instance");let Io=Mt;const mS=Io.getInstance(),ba=mS.getVersion(),gS=new Date().toISOString();`${ba}${new Date().toISOString().split("T")[0]}`;const yS=new Ah({defaultOptions:{queries:{staleTime:1e3*60*5,retry:1}}});console.log(`ðŸš€ Fan Club Z ${ba} - CONSOLIDATED ARCHITECTURE - SINGLE SOURCE OF TRUTH`);const wS={}.VITE_BUILD_TARGET==="landing",bS=wS?GE:WE;window.addEventListener("unhandledrejection",r=>{console.error("Unhandled promise rejection:",r.reason)});window.addEventListener("error",r=>{console.error("Global error:",r.error)});Li.createRoot(document.getElementById("root")).render(d.jsx(pr.StrictMode,{children:d.jsx(Mg,{config:hS,children:d.jsx(Ph,{client:yS,children:d.jsx(KE,{onError:(r,e)=>{},children:d.jsx(rS,{children:d.jsx(qd,{children:d.jsx(xd,{children:d.jsx(Ed,{children:d.jsx(Kf,{children:d.jsx(bS,{})})})})})})})})})}));console.log(`âœ… Fan Club Z ${ba} - Application started successfully`);console.log("ðŸš€ Build timestamp:",gS);export{Uo as $,Wv as A,R as B,Ud as C,Xc as D,ok as E,ma as F,lf as G,aw as H,Md as I,bo as J,Tu as K,Rl as L,tu as M,LS as N,$S as O,ni as P,at as Q,xo as R,Bd as S,rn as T,_o as U,WS as V,Us as W,Xt as X,BS as Y,nx as Z,ue as _,ub as a,Yl as a$,Qp as a0,fg as a1,YS as a2,KS as a3,JS as a4,ZS as a5,hg as a6,QS as a7,vr as a8,Bs as a9,PS as aA,Kt as aB,IS as aC,Cp as aD,jS as aE,Om as aF,Cs as aG,AS as aH,OS as aI,jm as aJ,GS as aK,HS as aL,Tg as aM,bu as aN,mg as aO,Dn as aP,Kp as aQ,Wt as aR,zl as aS,bt as aT,TS as aU,Ct as aV,Tt as aW,kS as aX,sp as aY,op as aZ,Ql as a_,bE as aa,Cb as ab,ak as ac,ck as ad,Ir as ae,_t as af,vt as ag,Pr as ah,Ml as ai,up as aj,M as ak,xt as al,ks as am,ur as an,sg as ao,mt as ap,Jp as aq,Ht as ar,mm as as,wu as at,NS as au,Vp as av,ru as aw,Gt as ax,zm as ay,ig as az,Fv as b,Zp as b0,Fl as b1,RS as b2,qS as b3,tm as b4,wr as b5,nu as b6,su as b7,Ks as b8,am as b9,MS as bA,zo as bB,FS as bC,CS as bD,tg as bE,VS as bF,un as bG,zS as bH,jr as bI,od as bJ,Bo as bK,Qr as bL,hn as bM,Q as bN,ik as bO,cm as ba,lm as bb,um as bc,dm as bd,hm as be,fm as bf,pm as bg,iu as bh,SS as bi,US as bj,Fo as bk,DS as bl,gm as bm,Jt as bn,xm as bo,lu as bp,$m as bq,uu as br,Mm as bs,Fm as bt,Wp as bu,zp as bv,Hl as bw,Lo as bx,Zt as by,Ts as bz,C_ as c,Qt as d,Qv as e,Z as f,me as g,Po as h,sb as i,xe as j,ra as k,rx as l,Zr as m,ae as n,lk as o,Xs as p,tx as q,lr as r,F_ as s,D as t,ye as u,dk as v,Zx as w,da as x,NE as y,qt as z};
