{"version":3,"file":"CreatePredictionPage-03ef9eb0.js","sources":["../../src/store/settlementStore.ts","../../src/components/layout/UnifiedHeader.tsx","../../src/components/prediction/CategorySelector.tsx","../../src/pages/CreatePredictionPage.tsx"],"sourcesContent":["import { create } from 'zustand';\nimport { supabase } from '../lib/supabase';\n\nexport interface ApprovedSource {\n  id: string;\n  name: string;\n  url: string;\n  category: 'sports' | 'music' | 'film' | 'finance' | 'pop_culture';\n  trust_level: 'high' | 'medium' | 'pending';\n  status: 'approved' | 'pending' | 'rejected';\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface SettlementConfig {\n  id: string;\n  prediction_id: string;\n  method: 'api' | 'web' | 'oracle' | 'manual';\n  primary_source_id?: string;\n  backup_source_id?: string;\n  rule_text: string;\n  timezone: string;\n  contingencies: {\n    postponed?: 'auto_void' | 'extend_lock' | 'keep_open';\n    source_down?: 'use_backup' | 'pause_and_escalate';\n  };\n  risk_flags: string[];\n  badges: string[];\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface Settlement {\n  id: string;\n  prediction_id: string;\n  state: 'open' | 'locked' | 'settling' | 'settled' | 'voided' | 'disputed' | 'resolved';\n  outcome?: 'YES' | 'NO';\n  settled_at?: string;\n  proof: {\n    fetched_at?: string;\n    source_url?: string;\n    screenshot_url?: string;\n    content_hash?: string;\n    parser_note?: string;\n  };\n  audit_log: Array<{\n    ts: string;\n    actor: string;\n    event: string;\n    data?: any;\n  }>;\n  acceptance_window_hours: number;\n  acceptance_stats: {\n    accepted?: number;\n    auto_accepted?: number;\n    disputed?: number;\n  };\n  created_at: string;\n  updated_at: string;\n}\n\nexport interface PlayerAcceptance {\n  id: string;\n  prediction_id: string;\n  user_id: string;\n  action: 'accepted' | 'auto_accepted' | 'disputed';\n  timestamp: string;\n}\n\nexport interface Dispute {\n  id: string;\n  prediction_id: string;\n  opened_by: string;\n  opened_at: string;\n  reason: 'source_updated' | 'wrong_source' | 'timing' | 'other';\n  evidence: Array<{\n    type: 'link' | 'image';\n    value: string;\n  }>;\n  state: 'open' | 'under_review' | 'upheld' | 'overturned';\n  resolution_note?: string;\n  resolved_by?: string;\n  resolved_at?: string;\n  updated_at: string;\n}\n\nexport interface AuditEvent {\n  id: string;\n  prediction_id: string;\n  timestamp: string;\n  actor_type: 'system' | 'user' | 'admin' | 'oracle';\n  actor_id?: string;\n  event: string;\n  data?: any;\n  ip_address?: string;\n  user_agent?: string;\n}\n\ninterface SettlementState {\n  // Data\n  approvedSources: ApprovedSource[];\n  settlementConfigs: Record<string, SettlementConfig>;\n  settlements: Record<string, Settlement>;\n  playerAcceptances: Record<string, PlayerAcceptance[]>;\n  disputes: Record<string, Dispute[]>;\n  auditTimeline: Record<string, AuditEvent[]>;\n  \n  // UI State\n  loading: boolean;\n  error: string | null;\n  selectedSource: ApprovedSource | null;\n  settlementModalOpen: boolean;\n  disputeModalOpen: boolean;\n  \n  // Actions\n  fetchApprovedSources: (category?: string) => Promise<void>;\n  createSettlementConfig: (predictionId: string, config: Partial<SettlementConfig>) => Promise<void>;\n  fetchSettlement: (predictionId: string) => Promise<void>;\n  updateSettlementState: (predictionId: string, state: Settlement['state'], outcome?: string, proof?: any) => Promise<void>;\n  acceptOutcome: (predictionId: string) => Promise<void>;\n  createDispute: (predictionId: string, reason: Dispute['reason'], evidence?: any[]) => Promise<void>;\n  fetchPlayerAcceptances: (predictionId: string) => Promise<void>;\n  fetchDisputes: (predictionId: string) => Promise<void>;\n  fetchAuditTimeline: (predictionId: string) => Promise<void>;\n  setSelectedSource: (source: ApprovedSource | null) => void;\n  setSettlementModalOpen: (open: boolean) => void;\n  setDisputeModalOpen: (open: boolean) => void;\n  clearError: () => void;\n}\n\nexport const useSettlementStore = create<SettlementState>((set, get) => ({\n  // Initial state\n  approvedSources: [],\n  settlementConfigs: {},\n  settlements: {},\n  playerAcceptances: {},\n  disputes: {},\n  auditTimeline: {},\n  loading: false,\n  error: null,\n  selectedSource: null,\n  settlementModalOpen: false,\n  disputeModalOpen: false,\n\n  // Fetch approved sources\n  fetchApprovedSources: async (category?: string) => {\n    set({ loading: true, error: null });\n    try {\n      let query = supabase\n        .from('approved_sources')\n        .select('*')\n        .eq('status', 'approved')\n        .order('name');\n\n      if (category) {\n        query = query.eq('category', category);\n      }\n\n      const { data, error } = await query;\n\n      if (error) throw error;\n\n      set({ approvedSources: data || [] });\n    } catch (error) {\n      console.error('Error fetching approved sources:', error);\n      set({ error: 'Failed to fetch approved sources' });\n    } finally {\n      set({ loading: false });\n    }\n  },\n\n  // Create settlement configuration\n  createSettlementConfig: async (predictionId: string, config: Partial<SettlementConfig>) => {\n    set({ loading: true, error: null });\n    try {\n      const { data, error } = await supabase\n        .from('settlement_configs')\n        .insert({\n          prediction_id: predictionId,\n          method: config.method || 'manual',\n          primary_source_id: config.primary_source_id,\n          backup_source_id: config.backup_source_id,\n          rule_text: config.rule_text || '',\n          timezone: config.timezone || 'Africa/Lagos',\n          contingencies: config.contingencies || {},\n          risk_flags: config.risk_flags || [],\n          badges: config.badges || []\n        })\n        .select()\n        .single();\n\n      if (error) throw error;\n\n      set(state => ({\n        settlementConfigs: {\n          ...state.settlementConfigs,\n          [predictionId]: data\n        }\n      }));\n    } catch (error) {\n      console.error('Error creating settlement config:', error);\n      set({ error: 'Failed to create settlement configuration' });\n    } finally {\n      set({ loading: false });\n    }\n  },\n\n  // Fetch settlement data\n  fetchSettlement: async (predictionId: string) => {\n    set({ loading: true, error: null });\n    try {\n      const { data, error } = await supabase\n        .from('settlements')\n        .select('*')\n        .eq('prediction_id', predictionId)\n        .single();\n\n      if (error && error.code !== 'PGRST116') throw error; // PGRST116 = no rows returned\n\n      if (data) {\n        set(state => ({\n          settlements: {\n            ...state.settlements,\n            [predictionId]: data\n          }\n        }));\n      }\n    } catch (error) {\n      console.error('Error fetching settlement:', error);\n      set({ error: 'Failed to fetch settlement data' });\n    } finally {\n      set({ loading: false });\n    }\n  },\n\n  // Update settlement state\n  updateSettlementState: async (predictionId: string, state: Settlement['state'], outcome?: string, proof?: any) => {\n    set({ loading: true, error: null });\n    try {\n      const { data, error } = await supabase\n        .rpc('update_settlement_state', {\n          prediction_uuid: predictionId,\n          new_state: state,\n          outcome_val: outcome,\n          proof_data: proof || {}\n        });\n\n      if (error) throw error;\n\n      // Refresh settlement data\n      await get().fetchSettlement(predictionId);\n    } catch (error) {\n      console.error('Error updating settlement state:', error);\n      set({ error: 'Failed to update settlement state' });\n    } finally {\n      set({ loading: false });\n    }\n  },\n\n  // Accept outcome\n  acceptOutcome: async (predictionId: string) => {\n    set({ loading: true, error: null });\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      const { error } = await supabase\n        .rpc('record_player_acceptance', {\n          prediction_uuid: predictionId,\n          user_uuid: user.id,\n          action_val: 'accepted'\n        });\n\n      if (error) throw error;\n\n      // Refresh acceptance data\n      await get().fetchPlayerAcceptances(predictionId);\n    } catch (error) {\n      console.error('Error accepting outcome:', error);\n      set({ error: 'Failed to accept outcome' });\n    } finally {\n      set({ loading: false });\n    }\n  },\n\n  // Create dispute\n  createDispute: async (predictionId: string, reason: Dispute['reason'], evidence?: any[]) => {\n    set({ loading: true, error: null });\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      const { error } = await supabase\n        .rpc('create_dispute', {\n          prediction_uuid: predictionId,\n          user_uuid: user.id,\n          reason_val: reason,\n          evidence_data: evidence || []\n        });\n\n      if (error) throw error;\n\n      // Refresh disputes\n      await get().fetchDisputes(predictionId);\n    } catch (error) {\n      console.error('Error creating dispute:', error);\n      set({ error: 'Failed to create dispute' });\n    } finally {\n      set({ loading: false });\n    }\n  },\n\n  // Fetch player acceptances\n  fetchPlayerAcceptances: async (predictionId: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('player_acceptances')\n        .select('*')\n        .eq('prediction_id', predictionId)\n        .order('timestamp', { ascending: false });\n\n      if (error) throw error;\n\n      set(state => ({\n        playerAcceptances: {\n          ...state.playerAcceptances,\n          [predictionId]: data || []\n        }\n      }));\n    } catch (error) {\n      console.error('Error fetching player acceptances:', error);\n    }\n  },\n\n  // Fetch disputes\n  fetchDisputes: async (predictionId: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('disputes')\n        .select('*')\n        .eq('prediction_id', predictionId)\n        .order('opened_at', { ascending: false });\n\n      if (error) throw error;\n\n      set(state => ({\n        disputes: {\n          ...state.disputes,\n          [predictionId]: data || []\n        }\n      }));\n    } catch (error) {\n      console.error('Error fetching disputes:', error);\n    }\n  },\n\n  // Fetch audit timeline\n  fetchAuditTimeline: async (predictionId: string) => {\n    try {\n      const { data, error } = await supabase\n        .from('audit_timeline')\n        .select('*')\n        .eq('prediction_id', predictionId)\n        .order('timestamp', { ascending: false });\n\n      if (error) throw error;\n\n      set(state => ({\n        auditTimeline: {\n          ...state.auditTimeline,\n          [predictionId]: data || []\n        }\n      }));\n    } catch (error) {\n      console.error('Error fetching audit timeline:', error);\n    }\n  },\n\n  // UI Actions\n  setSelectedSource: (source) => set({ selectedSource: source }),\n  setSettlementModalOpen: (open) => set({ settlementModalOpen: open }),\n  setDisputeModalOpen: (open) => set({ disputeModalOpen: open }),\n  clearError: () => set({ error: null })\n}));\n","import React from 'react';\nimport { ArrowLeft, Share2, MoreHorizontal, Search, Bell } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { useNavigate } from 'react-router-dom';\nimport { prefersReducedMotion, AriaUtils } from '../../utils/accessibility';\n\ninterface HeaderAction {\n  id: string;\n  icon: React.ComponentType<{ className?: string }>;\n  label: string;\n  onClick: () => void;\n  badge?: number | string;\n  variant?: 'default' | 'primary' | 'ghost';\n}\n\ninterface UnifiedHeaderProps {\n  // Core content\n  title?: string;\n  subtitle?: string;\n  showLogo?: boolean;\n  \n  // Navigation\n  showBack?: boolean;\n  onBack?: () => void;\n  \n  // Actions\n  actions?: HeaderAction[];\n  \n  // Styling\n  sticky?: boolean;\n  transparent?: boolean;\n  className?: string;\n  \n  // Custom content\n  children?: React.ReactNode;\n}\n\nconst UnifiedHeader: React.FC<UnifiedHeaderProps> = ({\n  title,\n  subtitle,\n  showLogo = false,\n  showBack = false,\n  onBack,\n  actions = [],\n  sticky = true,\n  transparent = false,\n  className = '',\n  children\n}) => {\n  const navigate = useNavigate();\n  const reduceMotion = prefersReducedMotion();\n\n  const handleBack = () => {\n    if (onBack) {\n      onBack();\n    } else if (window.history.length > 1) {\n      window.history.back();\n    } else {\n      navigate('/');\n    }\n  };\n\n  const getActionButtonClass = (variant: HeaderAction['variant'] = 'default') => {\n    const base = 'p-2 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2';\n    \n    switch (variant) {\n      case 'primary':\n        return `${base} bg-emerald-500 text-white hover:bg-emerald-600`;\n      case 'ghost':\n        return `${base} text-gray-400 hover:text-gray-600 hover:bg-gray-100`;\n      default:\n        return `${base} text-gray-600 hover:text-gray-900 hover:bg-gray-100`;\n    }\n  };\n\n  return (\n    <motion.header\n      initial={reduceMotion ? {} : { y: -10, opacity: 0 }}\n      animate={{ y: 0, opacity: 1 }}\n      className={`\n        ${sticky ? 'sticky top-0 z-40' : ''} \n        ${transparent ? 'bg-transparent' : 'bg-white border-b border-gray-100'} \n        ${className}\n      `}\n    >\n      <div className=\"px-4 py-3\">\n        <div className=\"flex items-center justify-between\">\n          {/* Left Section */}\n          <div className=\"flex items-center space-x-3 flex-1 min-w-0\">\n            {/* Back Button */}\n            {showBack && (\n              <button\n                onClick={handleBack}\n                className=\"p-2 -ml-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2\"\n                aria-label=\"Go back\"\n              >\n                <ArrowLeft className=\"w-6 h-6\" />\n              </button>\n            )}\n\n            {/* Logo */}\n            {showLogo && (\n              <div className=\"flex items-center space-x-2\">\n                <div className=\"w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center\">\n                  <span className=\"text-white font-bold text-lg\">F</span>\n                </div>\n                <div className=\"flex flex-col min-w-0\">\n                  <span className=\"text-lg font-bold text-gray-900 truncate\">\n                    Fan Club Z\n                  </span>\n                  {subtitle && (\n                    <span className=\"text-sm text-gray-600 truncate\">\n                      {subtitle}\n                    </span>\n                  )}\n                </div>\n              </div>\n            )}\n\n            {/* Title Only */}\n            {!showLogo && (title || subtitle) && (\n              <div className=\"flex flex-col min-w-0\">\n                {title && (\n                  <h1 className=\"text-xl font-bold text-gray-900 truncate\">\n                    {title}\n                  </h1>\n                )}\n                {subtitle && (\n                  <p className=\"text-sm text-gray-600 truncate\">\n                    {subtitle}\n                  </p>\n                )}\n              </div>\n            )}\n\n            {/* Custom Content */}\n            {children && (\n              <div className=\"flex-1 min-w-0\">\n                {children}\n              </div>\n            )}\n          </div>\n\n          {/* Right Section - Actions */}\n          {actions.length > 0 && (\n            <div className=\"flex items-center space-x-2 ml-3\">\n              {actions.map((action) => {\n                const IconComponent = action.icon;\n                return (\n                  <button\n                    key={action.id}\n                    onClick={action.onClick}\n                    className={getActionButtonClass(action.variant)}\n                    aria-label={action.label}\n                  >\n                    <div className=\"relative\">\n                      <IconComponent className=\"w-5 h-5\" />\n                      {action.badge && (\n                        <span className=\"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1\">\n                          {typeof action.badge === 'number' && action.badge > 99 ? '99+' : action.badge}\n                        </span>\n                      )}\n                    </div>\n                  </button>\n                );\n              })}\n            </div>\n          )}\n        </div>\n      </div>\n    </motion.header>\n  );\n};\n\nexport default UnifiedHeader;\n","import React, { useState, useEffect } from 'react';\nimport { Category } from '@/hooks/useCategories';\nimport { ChevronDown, X } from 'lucide-react';\nimport * as Dialog from '@radix-ui/react-dialog';\nimport { cn } from '@/utils/cn';\n\ninterface CategorySelectorProps {\n  value: string | null; // categoryId\n  onChange: (categoryId: string) => void;\n  categories: Category[];\n  isLoading?: boolean;\n}\n\n/**\n * CategorySelector - chip-based selector with \"More\" sheet\n * Matches existing app design language (Discover filter style)\n */\nexport function CategorySelector({\n  value,\n  onChange,\n  categories,\n  isLoading = false,\n}: CategorySelectorProps) {\n  const [showMoreSheet, setShowMoreSheet] = useState(false);\n\n  // Auto-select \"general\" category if value is null\n  useEffect(() => {\n    if (!value && categories.length > 0) {\n      const general = categories.find((c) => c.slug === 'general') || categories[0];\n      if (general) {\n        onChange(general.id);\n      }\n    }\n  }, [value, categories, onChange]);\n\n  if (isLoading) {\n    return (\n      <div className=\"flex gap-2\">\n        {[1, 2, 3, 4].map((i) => (\n          <div key={i} className=\"h-7 w-20 bg-gray-200 rounded-full animate-pulse\" />\n        ))}\n      </div>\n    );\n  }\n\n  // Show top 6 categories as chips, rest in \"More\" sheet\n  const topCategories = categories.slice(0, 6);\n  const moreCategories = categories.slice(6);\n  const selectedCategory = categories.find((c) => c.id === value);\n\n  return (\n    <>\n      <div className=\"flex flex-wrap gap-2\">\n        {topCategories.map((category) => {\n          const isSelected = value === category.id;\n          return (\n            <button\n              key={category.id}\n              type=\"button\"\n              onClick={() => onChange(category.id)}\n              style={{\n                height: '28px',\n                minHeight: '28px',\n                padding: '0 12px',\n                display: 'inline-flex',\n                alignItems: 'center',\n                justifyContent: 'center',\n                fontSize: '13px',\n                fontWeight: 500,\n                lineHeight: 1,\n                borderRadius: '14px',\n                border: 'none',\n                cursor: 'pointer',\n                whiteSpace: 'nowrap',\n                flexShrink: 0,\n                transition: 'all 0.2s',\n                backgroundColor: isSelected ? '#7B2FF7' : '#f1f5f9',\n                color: isSelected ? '#ffffff' : '#475569',\n              }}\n              onMouseEnter={(e) => {\n                if (!isSelected) {\n                  e.currentTarget.style.backgroundColor = '#e2e8f0';\n                }\n              }}\n              onMouseLeave={(e) => {\n                if (!isSelected) {\n                  e.currentTarget.style.backgroundColor = '#f1f5f9';\n                }\n              }}\n            >\n              {category.label}\n            </button>\n          );\n        })}\n\n        {/* \"More\" button if there are additional categories */}\n        {moreCategories.length > 0 && (\n          <button\n            type=\"button\"\n            onClick={() => setShowMoreSheet(true)}\n            style={{\n              height: '28px',\n              minHeight: '28px',\n              padding: '0 12px',\n              display: 'inline-flex',\n              alignItems: 'center',\n              justifyContent: 'center',\n              gap: '4px',\n              fontSize: '13px',\n              fontWeight: 500,\n              lineHeight: 1,\n              borderRadius: '14px',\n              border: 'none',\n              cursor: 'pointer',\n              whiteSpace: 'nowrap',\n              flexShrink: 0,\n              transition: 'all 0.2s',\n              backgroundColor: '#f1f5f9',\n              color: '#475569',\n            }}\n            onMouseEnter={(e) => {\n              e.currentTarget.style.backgroundColor = '#e2e8f0';\n            }}\n            onMouseLeave={(e) => {\n              e.currentTarget.style.backgroundColor = '#f1f5f9';\n            }}\n          >\n            More\n            <ChevronDown className=\"w-3 h-3\" />\n          </button>\n        )}\n      </div>\n\n      {/* More categories sheet */}\n      {moreCategories.length > 0 && (\n        <Dialog.Root open={showMoreSheet} onOpenChange={setShowMoreSheet}>\n          <Dialog.Portal>\n            <Dialog.Overlay className=\"fixed inset-0 bg-black/40 backdrop-blur-sm z-[12000]\" />\n            <Dialog.Content className=\"fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl z-[12001] max-h-[calc(100vh-5rem-env(safe-area-inset-bottom))] overflow-y-auto\">\n              <div className=\"sticky top-0 bg-white border-b border-gray-200 px-4 py-4 flex items-center justify-between z-10\">\n                <Dialog.Title className=\"text-lg font-semibold text-gray-900\">Select Category</Dialog.Title>\n                <Dialog.Close className=\"p-2 rounded-lg hover:bg-gray-100\">\n                  <X className=\"w-5 h-5 text-gray-500\" />\n                </Dialog.Close>\n              </div>\n              <div className=\"px-4 py-4 space-y-2\">\n                {categories.map((category) => {\n                  const isSelected = value === category.id;\n                  return (\n                    <button\n                      key={category.id}\n                      type=\"button\"\n                      onClick={() => {\n                        onChange(category.id);\n                        setShowMoreSheet(false);\n                      }}\n                      className={cn(\n                        'w-full text-left px-4 py-3 rounded-xl transition-colors',\n                        isSelected\n                          ? 'bg-purple-600 text-white'\n                          : 'bg-gray-50 text-gray-900 hover:bg-gray-100'\n                      )}\n                    >\n                      {category.label}\n                    </button>\n                  );\n                })}\n              </div>\n            </Dialog.Content>\n          </Dialog.Portal>\n        </Dialog.Root>\n      )}\n    </>\n  );\n}\n","import React, { useState, useCallback, useEffect } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { ChevronLeft, Plus, X, Calendar, DollarSign, Users, Settings, Sparkles, Check, Globe, Clock, Shield, CheckCircle, AlertCircle } from 'lucide-react';\nimport { usePredictionStore } from '../store/predictionStore';\nimport { useSettlementStore } from '../store/settlementStore';\nimport { useAuthStore } from '../store/authStore';\nimport { useNavigate } from 'react-router-dom';\nimport toast from 'react-hot-toast';\nimport { scrollToTop } from '../utils/scroll';\nimport { SourcePill } from '../components/settlement/SourcePill';\nimport { RulePreview } from '../components/settlement/RulePreview';\nimport UnifiedHeader from '../components/layout/UnifiedHeader';\nimport { openAuthGate } from '../auth/authGateAdapter';\nimport { useAuthSession } from '../providers/AuthSessionProvider';\nimport { useCategories } from '../hooks/useCategories';\nimport { CategorySelector } from '../components/prediction/CategorySelector';\n\ninterface PredictionOption {\n  id: string;\n  label: string;\n}\n\ninterface CreatePredictionPageProps {\n  onNavigateBack?: () => void;\n}\n\nconst CreatePredictionPage: React.FC<CreatePredictionPageProps> = ({ onNavigateBack }) => {\n  const [step, setStep] = useState(1);\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n  const { createPrediction } = usePredictionStore();\n  const { user: storeUser, isAuthenticated: storeIsAuthenticated } = useAuthStore();\n  const { user: sessionUser } = useAuthSession();\n  const currentUser = sessionUser ?? storeUser ?? null;\n  const isAuthenticated = !!sessionUser || storeIsAuthenticated;\n  const navigate = useNavigate();\n  \n  // Draft persistence key\n  const DRAFT_KEY = 'fcz_create_prediction_draft';\n  const [hasDraft, setHasDraft] = useState(false);\n\n  // Scroll to top when component mounts (UI/UX best practice)\n  useEffect(() => {\n    scrollToTop({ delay: 200 });\n  }, []);\n\n  // Use individual state variables instead of one large object to prevent re-renders\n  const { categories, isLoading: categoriesLoading } = useCategories();\n  const [title, setTitle] = useState('');\n  const [description, setDescription] = useState('');\n  const [categoryId, setCategoryId] = useState<string | null>(null); // Changed to categoryId (UUID)\n  const [type, setType] = useState('binary');\n  const [options, setOptions] = useState<PredictionOption[]>([\n    { id: '1', label: 'Yes' },\n    { id: '2', label: 'No' }\n  ]);\n  const [entryDeadline, setEntryDeadline] = useState('');\n  const [stakeMin, setStakeMin] = useState('1');\n  const [stakeMax, setStakeMax] = useState('1000');\n  const [settlementMethod, setSettlementMethod] = useState('manual');\n  const [isPrivate, setIsPrivate] = useState(false);\n  \n  // Settlement configuration state\n  const [primarySource, setPrimarySource] = useState<any>(null);\n  const [backupSource, setBackupSource] = useState<any>(null);\n  const [ruleText, setRuleText] = useState('');\n  const [timezone, setTimezone] = useState('Africa/Lagos');\n  const [contingencies, setContingencies] = useState({\n    postponed: 'auto_void' as 'auto_void' | 'extend_lock' | 'keep_open',\n    source_down: 'use_backup' as 'use_backup' | 'pause_and_escalate'\n  });\n\n  // Check for existing draft on mount\n  useEffect(() => {\n    const draft = sessionStorage.getItem(DRAFT_KEY);\n    if (draft) {\n      setHasDraft(true);\n    }\n  }, []);\n\n  // Restore draft from sessionStorage\n  const restoreDraft = useCallback(() => {\n    const draftStr = sessionStorage.getItem(DRAFT_KEY);\n    if (!draftStr) return false;\n    \n    try {\n      const draft = JSON.parse(draftStr);\n      setTitle(draft.title || '');\n      setDescription(draft.description || '');\n      // Support both legacy category (slug) and new categoryId (UUID)\n      if (draft.categoryId) {\n        setCategoryId(draft.categoryId);\n      } else {\n        setCategoryId(null); // CategorySelector will auto-select general\n      }\n      setType(draft.type || 'binary');\n      setOptions(draft.options || [{ id: '1', label: 'Yes' }, { id: '2', label: 'No' }]);\n      setEntryDeadline(draft.entryDeadline || '');\n      setStakeMin(draft.stakeMin || '1');\n      setStakeMax(draft.stakeMax || '1000');\n      setSettlementMethod(draft.settlementMethod || 'manual');\n      setIsPrivate(draft.isPrivate || false);\n      setPrimarySource(draft.primarySource || null);\n      setBackupSource(draft.backupSource || null);\n      setRuleText(draft.ruleText || '');\n      setTimezone(draft.timezone || 'Africa/Lagos');\n      setContingencies(draft.contingencies || {\n        postponed: 'auto_void',\n        source_down: 'use_backup'\n      });\n      if (draft.step) setStep(draft.step);\n      return true;\n    } catch (error) {\n      console.error('Failed to restore draft:', error);\n      return false;\n    }\n  }, []);\n\n  // Save draft to sessionStorage\n  const saveDraft = useCallback(() => {\n    const draft = {\n      title,\n      description,\n      categoryId, // Save categoryId instead of category slug\n      type,\n      options,\n      entryDeadline,\n      stakeMin,\n      stakeMax,\n      settlementMethod,\n      isPrivate,\n      primarySource,\n      backupSource,\n      ruleText,\n      timezone,\n      contingencies,\n      step\n    };\n    sessionStorage.setItem(DRAFT_KEY, JSON.stringify(draft));\n    setHasDraft(true);\n  }, [title, description, categoryId, type, options, entryDeadline, stakeMin, stakeMax, settlementMethod, isPrivate, primarySource, backupSource, ruleText, timezone, contingencies, step]);\n\n  // Discard draft\n  const discardDraft = useCallback(() => {\n    sessionStorage.removeItem(DRAFT_KEY);\n    setHasDraft(false);\n  }, []);\n\n  // Auto-resume draft after successful auth\n  useEffect(() => {\n    if (isAuthenticated && currentUser && hasDraft) {\n      const draftStr = sessionStorage.getItem(DRAFT_KEY);\n      if (draftStr) {\n        // Small delay to ensure auth state is fully settled\n        const timer = setTimeout(() => {\n          const restored = restoreDraft();\n          if (restored) {\n            toast.success('Draft restored! You can continue creating your prediction.');\n            // If we were on step 4, the user can now submit manually\n            // The form will be pre-filled and ready\n          }\n        }, 300);\n        return () => clearTimeout(timer);\n      }\n    }\n  }, [isAuthenticated, currentUser, hasDraft, restoreDraft]);\n\n\n  const predictionTypes = [\n    {\n      id: 'binary',\n      label: 'Yes/No',\n      description: 'Simple binary outcome prediction',\n      icon: 'ðŸŽ¯'\n    },\n    {\n      id: 'multiple',\n      label: 'Multiple Choice',\n      description: 'Multiple possible outcomes',\n      icon: 'ðŸŽ²'\n    }\n  ];\n\n  const addOption = useCallback(() => {\n    const newId = (options.length + 1).toString();\n    setOptions(prev => [...prev, { id: newId, label: '' }]);\n  }, [options.length]);\n\n  const removeOption = useCallback((id: string) => {\n    setOptions(prev => prev.filter(option => option.id !== id));\n  }, []);\n\n  const updateOption = useCallback((id: string, label: string) => {\n    setOptions(prev => prev.map(option =>\n      option.id === id ? { ...option, label } : option\n    ));\n  }, []);\n\n  const validateStep = useCallback((stepNumber: number): boolean => {\n    switch (stepNumber) {\n      case 1:\n        return !!(title.trim() && categoryId);\n      case 2:\n        return !!(type && options.every(opt => opt.label.trim()));\n      case 3:\n        return !!(entryDeadline && stakeMin);\n      case 4:\n        return true; // Preview step is always valid\n      default:\n        return true;\n    }\n  }, [title, categoryId, type, options, entryDeadline, stakeMin]);\n\n  const handleNext = useCallback(() => {\n    if (validateStep(step) && step < 4) {\n      setStep(step + 1);\n      // Scroll to top when advancing to next step\n      scrollToTop({ delay: 150 });\n    }\n  }, [step, validateStep]);\n\n  const handleBack = useCallback(() => {\n    if (step > 1) {\n      setStep(step - 1);\n      // Scroll to top when going back to previous step\n      scrollToTop({ delay: 150 });\n    } else {\n      // Navigate back to previous page\n      if (onNavigateBack) {\n        onNavigateBack();\n      }\n    }\n  }, [step, onNavigateBack]);\n\n  const handleSubmit = useCallback(async () => {\n    if (!validateStep(4)) {\n      toast.error('Please fill in all required fields');\n      return;\n    }\n    \n    setIsSubmitting(true);\n    try {\n      // Validate form data\n      if (!title.trim()) {\n        throw new Error('Title is required');\n      }\n      if (!categoryId) {\n        throw new Error('Category is required');\n      }\n      if (!entryDeadline) {\n        throw new Error('Entry deadline is required');\n      }\n      \n      // Ensure deadline is in the future\n      const deadline = new Date(entryDeadline);\n      if (deadline <= new Date()) {\n        throw new Error('Entry deadline must be in the future');\n      }\n\n      // Check authentication - if not authenticated, save draft and open auth gate\n      if (!isAuthenticated || !currentUser?.id) {\n        // Save draft to sessionStorage\n        saveDraft();\n        \n        // Open auth gate\n        const result = await openAuthGate({\n          intent: 'create_prediction',\n          payload: { step: 4 }\n        });\n        \n        if (result.status === 'success') {\n          // Auth successful - draft will be restored by useEffect above\n          // and form will auto-submit if on step 4\n          return;\n        } else {\n          // User cancelled or error - don't proceed\n          setIsSubmitting(false);\n          if (result.status === 'cancel') {\n            toast('Sign in cancelled. Your draft has been saved.');\n          }\n          return;\n        }\n      }\n\n      // Prepare prediction data\n      const predictionData = {\n        title: title.trim(),\n        description: description.trim() || undefined,\n        categoryId: categoryId, // Send categoryId (UUID) to server\n        type: type as 'binary' | 'multi_outcome' | 'pool',\n        options: options\n          .filter(opt => opt.label.trim()) // Only include options with labels\n          .map(opt => ({\n            id: opt.id,\n            label: opt.label.trim(),\n            totalStaked: 0,\n            currentOdds: 2.0\n          })),\n        entryDeadline: deadline,\n        stakeMin: Math.max(1, parseFloat(stakeMin) || 100),\n        stakeMax: stakeMax ? Math.max(parseFloat(stakeMin) || 100, parseFloat(stakeMax)) : undefined,\n        settlementMethod: settlementMethod as 'auto' | 'manual',\n        isPrivate: isPrivate,\n        creatorId: currentUser.id // Add the real user ID\n      };\n\n      // Validate options\n      if (predictionData.options.length < 2) {\n        throw new Error('At least 2 prediction options are required');\n      }\n\n      console.log('Creating prediction with data:', predictionData);\n\n      // Create the prediction (this is now async and saves to Supabase)\n      const createdPrediction = await createPrediction(predictionData);\n      \n      console.log('Prediction created successfully!', createdPrediction);\n      \n      // Create settlement configuration if automatic settlement is selected\n      if (settlementMethod === 'auto' && createdPrediction) {\n        try {\n          const { createSettlementConfig } = useSettlementStore.getState();\n          await createSettlementConfig(createdPrediction.id, {\n            method: 'web',\n            primary_source_id: primarySource?.id,\n            backup_source_id: backupSource?.id,\n            rule_text: ruleText || `Check if ${title} by ${entryDeadline}`,\n            timezone: timezone,\n            contingencies: contingencies\n          });\n          console.log('Settlement configuration created successfully!');\n        } catch (error) {\n          console.error('Failed to create settlement configuration:', error);\n          // Don't fail the prediction creation if settlement config fails\n        }\n      }\n      \n      // Clear draft after successful submission\n      sessionStorage.removeItem(DRAFT_KEY);\n      setHasDraft(false);\n      \n      toast.success('ðŸŽ‰ Prediction created successfully!');\n      setSubmitSuccess(true);\n      \n      // Navigate to My Stakes after success\n      setTimeout(() => {\n        // Reset form\n        setStep(1);\n        setTitle('');\n        setDescription('');\n        setCategoryId(null);\n        setType('binary');\n        setOptions([\n          { id: '1', label: 'Yes' },\n          { id: '2', label: 'No' }\n        ]);\n        setEntryDeadline('');\n        setStakeMin('100');\n        setStakeMax('10000');\n        setSettlementMethod('manual');\n        setIsPrivate(false);\n        setSubmitSuccess(false);\n        setIsSubmitting(false);\n        \n        // Navigate to My Stakes to show created prediction using react-router-dom\n        // Use replace: true to prevent going back to the success screen\n        navigate('/predictions', { replace: true });\n      }, 2000);\n    } catch (error) {\n      console.error('Failed to create prediction:', error);\n      const errorMessage = error instanceof Error ? error.message : 'Failed to create prediction. Please try again.';\n      toast.error(errorMessage);\n      setIsSubmitting(false);\n    }\n  }, [validateStep, title, categoryId, entryDeadline, description, type, options, stakeMin, stakeMax, settlementMethod, isPrivate, isAuthenticated, currentUser, createPrediction, navigate, saveDraft]);\n\n  // Success View\n  if (submitSuccess) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-purple-50 via-white to-teal-100 flex items-center justify-center px-6\">\n        <motion.div\n          initial={{ opacity: 0, scale: 0.8 }}\n          animate={{ opacity: 1, scale: 1 }}\n          transition={{ duration: 0.5 }}\n          className=\"bg-white rounded-3xl p-8 text-center shadow-2xl border border-teal-200\"\n        >\n          <motion.div\n            initial={{ scale: 0 }}\n            animate={{ scale: 1 }}\n            transition={{ delay: 0.2, type: \"spring\", stiffness: 200, damping: 10 }}\n            className=\"w-16 h-16 bg-teal-500 rounded-full flex items-center justify-center mx-auto mb-6\"\n          >\n            <Check size={32} className=\"text-white\" />\n          </motion.div>\n          \n          <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">Prediction Created!</h2>\n          <p className=\"text-gray-600 mb-4\">Your prediction has been successfully created and is now live.</p>\n          <div className=\"text-sm text-teal-600 font-medium\">Redirecting to My Predictions...</div>\n        </motion.div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 pb-20 create-prediction-page\">\n      {/* Unified Header */}\n      <UnifiedHeader\n        title=\"Create Prediction\"\n        subtitle={`Step ${step} of 4`}\n        showLogo={false}\n        showBack={true}\n        onBack={handleBack}\n        className=\"bg-gradient-to-r from-emerald-500 to-teal-600 text-white border-b-0\"\n      />\n\n      {/* Progress bar */}\n      <div className=\"bg-gradient-to-r from-emerald-500 to-teal-600 px-4 pb-4\">\n        <div className=\"bg-white/20 rounded-full h-2\">\n          <motion.div\n            initial={{ width: 0 }}\n            animate={{ width: `${(step / 4) * 100}%` }}\n            transition={{ duration: 0.5 }}\n            className=\"h-full bg-white rounded-full\"\n          />\n        </div>\n      </div>\n\n      {/* Resume Draft Banner */}\n      {hasDraft && !isAuthenticated && (\n        <div className=\"px-6 pt-4 pb-2\">\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center justify-between gap-4\"\n          >\n            <div className=\"flex items-center gap-3 flex-1\">\n              <AlertCircle className=\"w-5 h-5 text-amber-600 flex-shrink-0\" />\n              <div>\n                <p className=\"text-sm font-medium text-amber-900\">Resume draft?</p>\n                <p className=\"text-xs text-amber-700\">You have a saved draft from a previous session.</p>\n              </div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              <button\n                onClick={restoreDraft}\n                className=\"px-4 py-2 text-sm font-semibold text-amber-900 bg-amber-100 rounded-lg hover:bg-amber-200 transition-colors\"\n              >\n                Resume\n              </button>\n              <button\n                onClick={discardDraft}\n                className=\"px-4 py-2 text-sm font-medium text-amber-700 hover:text-amber-900 transition-colors\"\n              >\n                Discard\n              </button>\n            </div>\n          </motion.div>\n        </div>\n      )}\n\n      {/* Content */}\n      <div className=\"px-6 -mt-4 pb-8 relative z-20\">\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          className=\"bg-white/90 backdrop-blur-xl rounded-3xl border border-gray-200/50 shadow-2xl p-6\"\n        >\n          <AnimatePresence mode=\"wait\" initial={false}>\n            {/* Step 1: Basic Information */}\n            {step === 1 && (\n              <motion.div\n                key=\"step1\"\n                initial={{ opacity: 0, x: 50 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -50 }}\n                transition={{ duration: 0.3 }}\n              >\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-teal-600 rounded-2xl flex items-center justify-center\">\n                    <Sparkles size={24} className=\"text-white\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Basic Information</h2>\n                    <p className=\"text-gray-600\">Tell us about your prediction</p>\n                  </div>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {/* Title */}\n                  <div className=\"input-container\">\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      Prediction Title *\n                    </label>\n                    <input\n                      type=\"text\"\n                      value={title}\n                      onChange={(e) => setTitle(e.target.value)}\n                      placeholder=\"Will Bitcoin reach $100,000 by end of 2024?\"\n                      className=\"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder-gray-500\"\n                    />\n                  </div>\n\n                  {/* Description */}\n                  <div className=\"textarea-container\">\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      Description (Optional)\n                    </label>\n                    <textarea\n                      value={description}\n                      onChange={(e) => setDescription(e.target.value)}\n                      placeholder=\"Provide additional context and rules for your prediction...\"\n                      rows={4}\n                      className=\"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder-gray-500 resize-none\"\n                    />\n                  </div>\n\n                  {/* Category - Chip selector (consistent with DiscoverPage) */}\n                  <div className=\"form-section\">\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                      Category *\n                    </label>\n                    <CategorySelector\n                      value={categoryId}\n                      onChange={setCategoryId}\n                      categories={categories}\n                      isLoading={categoriesLoading}\n                    />\n                  </div>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Step 2: Prediction Setup */}\n            {step === 2 && (\n              <motion.div\n                key=\"step2\"\n                initial={{ opacity: 0, x: 50 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -50 }}\n                transition={{ duration: 0.3 }}\n              >\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center\">\n                    <Settings size={24} className=\"text-white\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Prediction Setup</h2>\n                    <p className=\"text-gray-600\">Configure your prediction options</p>\n                  </div>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {/* Prediction Type */}\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                      Prediction Type *\n                    </label>\n                    <div className=\"space-y-3\">\n                      {predictionTypes.map((predType) => (\n                        <motion.button\n                          key={predType.id}\n                          whileHover={{ scale: 1.01 }}\n                          whileTap={{ scale: 0.99 }}\n                          onClick={() => {\n                            setType(predType.id);\n                            if (predType.id === 'binary') {\n                              setOptions([\n                                { id: '1', label: 'Yes' },\n                                { id: '2', label: 'No' }\n                              ]);\n                            } else if (predType.id === 'multiple') {\n                              setOptions([\n                                { id: '1', label: '' },\n                                { id: '2', label: '' },\n                                { id: '3', label: '' }\n                              ]);\n                            }\n                          }}\n                          className={`motion-button w-full p-4 rounded-2xl border-2 text-left transition-all duration-200 ${\n                            type === predType.id\n                              ? 'border-blue-500 bg-blue-50'\n                              : 'border-gray-200 bg-white hover:border-blue-300'\n                          }`}\n                        >\n                          <div className=\"flex items-center gap-4\">\n                            <div className=\"text-2xl\">{predType.icon}</div>\n                            <div>\n                              <h3 className=\"font-semibold text-gray-900\">{predType.label}</h3>\n                              <p className=\"text-sm text-gray-600\">{predType.description}</p>\n                            </div>\n                          </div>\n                        </motion.button>\n                      ))}\n                    </div>\n                  </div>\n\n                  {/* Options */}\n                  {(type === 'binary' || type === 'multiple') && (\n                    <div>\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                        Prediction Options *\n                      </label>\n                      <div className=\"space-y-3\">\n                        {options.map((option, index) => (\n                          <div key={option.id} className=\"flex items-center gap-3\">\n                            <div className=\"input-container flex-1\">\n                              <input\n                                type=\"text\"\n                                value={option.label}\n                                onChange={(e) => updateOption(option.id, e.target.value)}\n                                placeholder={`Option ${index + 1}`}\n                                className=\"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all duration-200\"\n                              />\n                            </div>\n                            {type === 'multiple' && options.length > 2 && (\n                              <motion.button\n                                whileHover={{ scale: 1.1 }}\n                                whileTap={{ scale: 0.9 }}\n                                onClick={() => removeOption(option.id)}\n                                className=\"motion-button w-10 h-10 bg-red-100 text-red-600 rounded-xl flex items-center justify-center hover:bg-red-200 transition-colors\"\n                              >\n                                <X size={18} />\n                              </motion.button>\n                            )}\n                          </div>\n                        ))}\n                        \n                        {type === 'multiple' && options.length < 6 && (\n                          <motion.button\n                            whileHover={{ scale: 1.02 }}\n                            whileTap={{ scale: 0.98 }}\n                            onClick={addOption}\n                            className=\"motion-button w-full p-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-all duration-200 flex items-center justify-center gap-2\"\n                          >\n                            <Plus size={18} />\n                            <span>Add Option</span>\n                          </motion.button>\n                        )}\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </motion.div>\n            )}\n\n            {/* Step 3: Settings & Launch */}\n            {step === 3 && (\n              <motion.div\n                key=\"step3\"\n                initial={{ opacity: 0, x: 50 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -50 }}\n                transition={{ duration: 0.3 }}\n              >\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center\">\n                    <DollarSign size={24} className=\"text-white\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Settings & Launch</h2>\n                    <p className=\"text-gray-600\">Final configuration details</p>\n                  </div>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {/* Entry Deadline */}\n                  <div className=\"input-container\">\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                      Entry Deadline *\n                    </label>\n                    <input\n                      type=\"datetime-local\"\n                      value={entryDeadline}\n                      onChange={(e) => setEntryDeadline(e.target.value)}\n                      min={new Date().toISOString().slice(0, 16)}\n                      className=\"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200\"\n                    />\n                  </div>\n\n                  {/* Stake Limits */}\n                  <div className=\"grid grid-cols-2 gap-4\">\n                    <div className=\"input-container\">\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                        Minimum Stake ($)\n                      </label>\n                      <input\n                        type=\"number\"\n                        value={stakeMin}\n                        onChange={(e) => setStakeMin(e.target.value)}\n                        placeholder=\"100\"\n                        min=\"1\"\n                        className=\"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200\"\n                      />\n                    </div>\n                    <div className=\"input-container\">\n                      <label className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                        Maximum Stake ($)\n                      </label>\n                      <input\n                        type=\"number\"\n                        value={stakeMax}\n                        onChange={(e) => setStakeMax(e.target.value)}\n                        placeholder=\"100000\"\n                        min={stakeMin || \"1\"}\n                        className=\"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200\"\n                      />\n                    </div>\n                  </div>\n\n                  {/* Settlement Method */}\n                  <div>\n                    <label className=\"block text-sm font-semibold text-gray-700 mb-3\">\n                      Settlement Method\n                    </label>\n                    <div className=\"space-y-3\">\n                      <motion.button\n                        whileHover={{ scale: 1.01 }}\n                        whileTap={{ scale: 0.99 }}\n                        onClick={() => setSettlementMethod('manual')}\n                        className={`w-full p-4 rounded-2xl border-2 text-left transition-all duration-200 ${\n                          settlementMethod === 'manual'\n                            ? 'border-teal-500 bg-teal-50'\n                            : 'border-gray-200 bg-white hover:border-teal-300'\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-8 h-8 bg-teal-100 rounded-lg flex items-center justify-center\">\n                            <Users size={16} className=\"text-teal-600\" />\n                          </div>\n                          <div>\n                            <h3 className=\"font-semibold text-gray-900\">Manual Settlement</h3>\n                            <p className=\"text-sm text-gray-600\">You resolve the prediction manually</p>\n                          </div>\n                        </div>\n                      </motion.button>\n                      \n                      <motion.button\n                        whileHover={{ scale: 1.01 }}\n                        whileTap={{ scale: 0.99 }}\n                        onClick={() => setSettlementMethod('auto')}\n                        className={`w-full p-4 rounded-2xl border-2 text-left transition-all duration-200 ${\n                          settlementMethod === 'auto'\n                            ? 'border-teal-500 bg-teal-50'\n                            : 'border-gray-200 bg-white hover:border-teal-300'\n                        }`}\n                      >\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center\">\n                            <Settings size={16} className=\"text-blue-600\" />\n                          </div>\n                          <div>\n                            <h3 className=\"font-semibold text-gray-900\">Automatic Settlement</h3>\n                            <p className=\"text-sm text-gray-600\">Resolved automatically when possible</p>\n                          </div>\n                        </div>\n                      </motion.button>\n                    </div>\n                  </div>\n\n                  {/* Privacy Settings */}\n                  <div className=\"bg-gray-50 rounded-2xl p-4\">\n                    <div className=\"flex items-center justify-between\">\n                      <div>\n                        <h3 className=\"font-semibold text-gray-900\">Private Prediction</h3>\n                        <p className=\"text-sm text-gray-600\">Only people with link can participate</p>\n                      </div>\n                      <motion.button\n                        whileTap={{ scale: 0.95 }}\n                        onClick={() => setIsPrivate(!isPrivate)}\n                        className={`relative w-12 h-6 rounded-full transition-all duration-200 ${\n                          isPrivate ? 'bg-teal-500' : 'bg-gray-300'\n                        }`}\n                      >\n                        <motion.div\n                          animate={{ x: isPrivate ? 24 : 2 }}\n                          transition={{ type: \"spring\", stiffness: 500, damping: 30 }}\n                          className=\"absolute top-1 w-4 h-4 bg-white rounded-full shadow\"\n                        />\n                      </motion.button>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            )}\n\n            {/* Step 4: Preview & Confirmation */}\n            {step === 4 && (\n              <motion.div\n                key=\"step4\"\n                initial={{ opacity: 0, x: 50 }}\n                animate={{ opacity: 1, x: 0 }}\n                exit={{ opacity: 0, x: -50 }}\n                transition={{ duration: 0.3 }}\n              >\n                <div className=\"flex items-center gap-3 mb-6\">\n                  <div className=\"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center\">\n                    <Check size={24} className=\"text-white\" />\n                  </div>\n                  <div>\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Preview & Confirm</h2>\n                    <p className=\"text-gray-600\">Review your prediction before publishing</p>\n                  </div>\n                </div>\n\n                <div className=\"space-y-6\">\n                  {/* Prediction Preview Card */}\n                  <div className=\"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm\">\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-4\">Prediction Preview</h3>\n                    \n                    {/* Title */}\n                    <div className=\"mb-4\">\n                      <label className=\"block text-sm font-medium text-gray-600 mb-1\">Title</label>\n                      <p className=\"text-lg font-semibold text-gray-900\">{title}</p>\n                    </div>\n\n                    {/* Description */}\n                    {description && (\n                      <div className=\"mb-4\">\n                        <label className=\"block text-sm font-medium text-gray-600 mb-1\">Description</label>\n                        <p className=\"text-gray-700\">{description}</p>\n                      </div>\n                    )}\n\n                    {/* Category */}\n                    <div className=\"mb-4\">\n                      <label className=\"block text-sm font-medium text-gray-600 mb-1\">Category</label>\n                      <span className=\"inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\">\n                        {categoryId ? categories.find(cat => cat.id === categoryId)?.label || 'Unknown' : 'Not selected'}\n                      </span>\n                    </div>\n\n                    {/* Options */}\n                    <div className=\"mb-4\">\n                      <label className=\"block text-sm font-medium text-gray-600 mb-2\">Options</label>\n                      <div className=\"space-y-2\">\n                        {options.map((option, index) => (\n                          <div key={option.id} className=\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg\">\n                            <span className=\"text-sm font-medium text-gray-600\">Option {index + 1}:</span>\n                            <span className=\"font-semibold text-gray-900\">{option.label}</span>\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n\n                    {/* Settings */}\n                    <div className=\"grid grid-cols-2 gap-4\">\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-600 mb-1\">Stake Limits</label>\n                        <p className=\"text-gray-900\">${stakeMin} - ${stakeMax}</p>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-600 mb-1\">Deadline</label>\n                        <p className=\"text-gray-900\">{new Date(entryDeadline).toLocaleString()}</p>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-600 mb-1\">Settlement</label>\n                        <p className=\"text-gray-900 capitalize\">{settlementMethod}</p>\n                      </div>\n                      <div>\n                        <label className=\"block text-sm font-medium text-gray-600 mb-1\">Privacy</label>\n                        <p className=\"text-gray-900\">{isPrivate ? 'Private' : 'Public'}</p>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Confirmation Message */}\n                  <div className=\"bg-teal-50 border border-teal-200 rounded-2xl p-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <CheckCircle size={20} className=\"text-teal-600\" />\n                      <div>\n                        <h4 className=\"font-semibold text-teal-800\">Ready to Publish</h4>\n                        <p className=\"text-sm text-teal-700\">Your prediction looks good! Click \"Create Prediction\" to publish it.</p>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </motion.div>\n            )}\n          </AnimatePresence>\n\n          {/* Navigation Buttons */}\n          <div className=\"flex items-center justify-between mt-8 pt-6 border-t border-gray-200\">\n            <motion.button\n              whileHover={{ scale: 1.05 }}\n              whileTap={{ scale: 0.95 }}\n              onClick={handleBack}\n              className=\"px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-xl hover:bg-gray-200 transition-all duration-200\"\n            >\n              {step === 1 ? 'Cancel' : 'Back'}\n            </motion.button>\n\n            {step < 4 ? (\n              <motion.button\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={handleNext}\n                disabled={!validateStep(step)}\n                className={`px-8 py-3 font-semibold rounded-xl shadow-lg transition-all duration-200 ${\n                  validateStep(step)\n                    ? 'bg-gradient-to-r from-purple-500 to-teal-600 text-white shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30'\n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                }`}\n              >\n                {step === 3 ? 'Preview' : 'Continue'}\n              </motion.button>\n            ) : (\n              <motion.button\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n                onClick={handleSubmit}\n                disabled={!validateStep(4) || isSubmitting}\n                className={`px-8 py-3 font-semibold rounded-xl shadow-lg transition-all duration-200 flex items-center gap-2 ${\n                  validateStep(4) && !isSubmitting\n                    ? 'bg-gradient-to-r from-purple-500 to-teal-600 text-white shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30'\n                    : 'bg-gray-300 text-gray-500 cursor-not-allowed'\n                }`}\n              >\n                {isSubmitting ? (\n                  <>\n                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin\" />\n                    Creating...\n                  </>\n                ) : (\n                  'Create Prediction'\n                )}\n              </motion.button>\n            )}\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n};\n\nexport default CreatePredictionPage;"],"names":["useSettlementStore","create","set","get","category","query","supabase","data","error","predictionId","config","state","outcome","proof","user","reason","evidence","source","open","UnifiedHeader","title","subtitle","showLogo","showBack","onBack","actions","sticky","transparent","className","children","navigate","useNavigate","reduceMotion","prefersReducedMotion","handleBack","getActionButtonClass","variant","base","jsx","motion","jsxs","ArrowLeft","action","IconComponent","UnifiedHeader$1","CategorySelector","value","onChange","categories","isLoading","showMoreSheet","setShowMoreSheet","useState","useEffect","general","c","i","topCategories","moreCategories","Fragment","isSelected","e","ChevronDown","Dialog.Root","Dialog.Portal","Dialog.Overlay","Dialog.Content","Dialog.Title","Dialog.Close","X","cn","CreatePredictionPage","onNavigateBack","step","setStep","isSubmitting","setIsSubmitting","submitSuccess","setSubmitSuccess","createPrediction","usePredictionStore","storeUser","storeIsAuthenticated","useAuthStore","sessionUser","useAuthSession","currentUser","isAuthenticated","DRAFT_KEY","hasDraft","setHasDraft","scrollToTop","categoriesLoading","useCategories","setTitle","description","setDescription","categoryId","setCategoryId","type","setType","options","setOptions","entryDeadline","setEntryDeadline","stakeMin","setStakeMin","stakeMax","setStakeMax","settlementMethod","setSettlementMethod","isPrivate","setIsPrivate","primarySource","setPrimarySource","backupSource","setBackupSource","ruleText","setRuleText","timezone","setTimezone","contingencies","setContingencies","restoreDraft","useCallback","draftStr","draft","saveDraft","discardDraft","timer","toast","predictionTypes","addOption","newId","prev","removeOption","id","option","updateOption","label","validateStep","stepNumber","opt","handleNext","handleSubmit","deadline","result","openAuthGate","predictionData","createdPrediction","createSettlementConfig","errorMessage","Check","AlertCircle","AnimatePresence","Sparkles","Settings","predType","index","Plus","DollarSign","Users","cat","CheckCircle"],"mappings":"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"}