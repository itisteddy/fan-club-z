import{j as e,m,R as je,P as ve,O as we,C as Ne,T as Se,b as ke,A as Ce}from"./ui-c369d1f3.js";import{r as o}from"./vendor-c36eaa8e.js";import{N as g,j as le,O as _e,R as Pe,C as Me,X as ie,M as Te,b as De,a as ze,I as Oe,V as Q,z as $,o as Ae,w as ae,B as $e,Y as Ee,F as re,P as Fe,D as Re,U as He,y as Ie}from"./index-78beacc5.js";import{c as Ye}from"./utils-617af415.js";import{u as qe}from"./useCategories-dd2ff1dd.js";import"./wagmi-c444efa6.js";const Le=Ye((a,i)=>({approvedSources:[],settlementConfigs:{},settlements:{},playerAcceptances:{},disputes:{},auditTimeline:{},loading:!1,error:null,selectedSource:null,settlementModalOpen:!1,disputeModalOpen:!1,fetchApprovedSources:async t=>{a({loading:!0,error:null});try{let r=g.from("approved_sources").select("*").eq("status","approved").order("name");t&&(r=r.eq("category",t));const{data:n,error:c}=await r;if(c)throw c;a({approvedSources:n||[]})}catch{a({error:"Failed to fetch approved sources"})}finally{a({loading:!1})}},createSettlementConfig:async(t,r)=>{a({loading:!0,error:null});try{const{data:n,error:c}=await g.from("settlement_configs").insert({prediction_id:t,method:r.method||"manual",primary_source_id:r.primary_source_id,backup_source_id:r.backup_source_id,rule_text:r.rule_text||"",timezone:r.timezone||"Africa/Lagos",contingencies:r.contingencies||{},risk_flags:r.risk_flags||[],badges:r.badges||[]}).select().single();if(c)throw c;a(h=>({settlementConfigs:{...h.settlementConfigs,[t]:n}}))}catch{a({error:"Failed to create settlement configuration"})}finally{a({loading:!1})}},fetchSettlement:async t=>{a({loading:!0,error:null});try{const{data:r,error:n}=await g.from("settlements").select("*").eq("prediction_id",t).single();if(n&&n.code!=="PGRST116")throw n;r&&a(c=>({settlements:{...c.settlements,[t]:r}}))}catch{a({error:"Failed to fetch settlement data"})}finally{a({loading:!1})}},updateSettlementState:async(t,r,n,c)=>{a({loading:!0,error:null});try{const{data:h,error:y}=await g.rpc("update_settlement_state",{prediction_uuid:t,new_state:r,outcome_val:n,proof_data:c||{}});if(y)throw y;await i().fetchSettlement(t)}catch{a({error:"Failed to update settlement state"})}finally{a({loading:!1})}},acceptOutcome:async t=>{a({loading:!0,error:null});try{const{data:{user:r}}=await g.auth.getUser();if(!r)throw new Error("User not authenticated");const{error:n}=await g.rpc("record_player_acceptance",{prediction_uuid:t,user_uuid:r.id,action_val:"accepted"});if(n)throw n;await i().fetchPlayerAcceptances(t)}catch{a({error:"Failed to accept outcome"})}finally{a({loading:!1})}},createDispute:async(t,r,n)=>{a({loading:!0,error:null});try{const{data:{user:c}}=await g.auth.getUser();if(!c)throw new Error("User not authenticated");const{error:h}=await g.rpc("create_dispute",{prediction_uuid:t,user_uuid:c.id,reason_val:r,evidence_data:n||[]});if(h)throw h;await i().fetchDisputes(t)}catch{a({error:"Failed to create dispute"})}finally{a({loading:!1})}},fetchPlayerAcceptances:async t=>{try{const{data:r,error:n}=await g.from("player_acceptances").select("*").eq("prediction_id",t).order("timestamp",{ascending:!1});if(n)throw n;a(c=>({playerAcceptances:{...c.playerAcceptances,[t]:r||[]}}))}catch{}},fetchDisputes:async t=>{try{const{data:r,error:n}=await g.from("disputes").select("*").eq("prediction_id",t).order("opened_at",{ascending:!1});if(n)throw n;a(c=>({disputes:{...c.disputes,[t]:r||[]}}))}catch{}},fetchAuditTimeline:async t=>{try{const{data:r,error:n}=await g.from("audit_timeline").select("*").eq("prediction_id",t).order("timestamp",{ascending:!1});if(n)throw n;a(c=>({auditTimeline:{...c.auditTimeline,[t]:r||[]}}))}catch{}},setSelectedSource:t=>a({selectedSource:t}),setSettlementModalOpen:t=>a({settlementModalOpen:t}),setDisputeModalOpen:t=>a({disputeModalOpen:t}),clearError:()=>a({error:null})})),Ue=({title:a,subtitle:i,showLogo:t=!1,showBack:r=!1,onBack:n,actions:c=[],sticky:h=!0,transparent:y=!1,className:d="",children:p})=>{const C=le(),T=_e(),D=()=>{n?n():window.history.length>1?window.history.back():C("/")},E=(u="default")=>{const S="p-2 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2";switch(u){case"primary":return`${S} bg-emerald-500 text-white hover:bg-emerald-600`;case"ghost":return`${S} text-gray-400 hover:text-gray-600 hover:bg-gray-100`;default:return`${S} text-gray-600 hover:text-gray-900 hover:bg-gray-100`}};return e.jsx(m.header,{initial:T?{}:{y:-10,opacity:0},animate:{y:0,opacity:1},className:`
        ${h?"sticky top-0 z-40":""} 
        ${y?"bg-transparent":"bg-white border-b border-gray-100"} 
        ${d}
      `,children:e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r&&e.jsx("button",{onClick:D,className:"p-2 -ml-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-emerald-500 focus:ring-offset-2","aria-label":"Go back",children:e.jsx(Pe,{className:"w-6 h-6"})}),t&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-emerald-500 to-teal-600 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"F"})}),e.jsxs("div",{className:"flex flex-col min-w-0",children:[e.jsx("span",{className:"text-lg font-bold text-gray-900 truncate",children:"Fan Club Z"}),i&&e.jsx("span",{className:"text-sm text-gray-600 truncate",children:i})]})]}),!t&&(a||i)&&e.jsxs("div",{className:"flex flex-col min-w-0",children:[a&&e.jsx("h1",{className:"text-xl font-bold text-gray-900 truncate",children:a}),i&&e.jsx("p",{className:"text-sm text-gray-600 truncate",children:i})]}),p&&e.jsx("div",{className:"flex-1 min-w-0",children:p})]}),c.length>0&&e.jsx("div",{className:"flex items-center space-x-2 ml-3",children:c.map(u=>{const S=u.icon;return e.jsx("button",{onClick:u.onClick,className:E(u.variant),"aria-label":u.label,children:e.jsxs("div",{className:"relative",children:[e.jsx(S,{className:"w-5 h-5"}),u.badge&&e.jsx("span",{className:"absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full min-w-[18px] h-[18px] flex items-center justify-center px-1",children:typeof u.badge=="number"&&u.badge>99?"99+":u.badge})]})},u.id)})})]})})})},Be=Ue;function Ge({value:a,onChange:i,categories:t,isLoading:r=!1}){const[n,c]=o.useState(!1);if(o.useEffect(()=>{if(!a&&t.length>0){const d=t.find(p=>p.slug==="general")||t[0];d&&i(d.id)}},[a,t,i]),r)return e.jsx("div",{className:"flex gap-2",children:[1,2,3,4].map(d=>e.jsx("div",{className:"h-7 w-20 bg-gray-200 rounded-full animate-pulse"},d))});const h=t.slice(0,6),y=t.slice(6);return t.find(d=>d.id===a),e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[h.map(d=>{const p=a===d.id;return e.jsx("button",{type:"button",onClick:()=>i(d.id),style:{height:"28px",minHeight:"28px",padding:"0 12px",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:500,lineHeight:1,borderRadius:"14px",border:"none",cursor:"pointer",whiteSpace:"nowrap",flexShrink:0,transition:"all 0.2s",backgroundColor:p?"#7B2FF7":"#f1f5f9",color:p?"#ffffff":"#475569"},onMouseEnter:C=>{p||(C.currentTarget.style.backgroundColor="#e2e8f0")},onMouseLeave:C=>{p||(C.currentTarget.style.backgroundColor="#f1f5f9")},children:d.label},d.id)}),y.length>0&&e.jsxs("button",{type:"button",onClick:()=>c(!0),style:{height:"28px",minHeight:"28px",padding:"0 12px",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"4px",fontSize:"13px",fontWeight:500,lineHeight:1,borderRadius:"14px",border:"none",cursor:"pointer",whiteSpace:"nowrap",flexShrink:0,transition:"all 0.2s",backgroundColor:"#f1f5f9",color:"#475569"},onMouseEnter:d=>{d.currentTarget.style.backgroundColor="#e2e8f0"},onMouseLeave:d=>{d.currentTarget.style.backgroundColor="#f1f5f9"},children:["More",e.jsx(Me,{className:"w-3 h-3"})]})]}),y.length>0&&e.jsx(je,{open:n,onOpenChange:c,children:e.jsxs(ve,{children:[e.jsx(we,{className:"fixed inset-0 bg-black/40 backdrop-blur-sm z-[12000]"}),e.jsxs(Ne,{className:"fixed bottom-0 left-0 right-0 bg-white rounded-t-2xl shadow-2xl z-[12001] max-h-[calc(100vh-5rem-env(safe-area-inset-bottom))] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 py-4 flex items-center justify-between z-10",children:[e.jsx(Se,{className:"text-lg font-semibold text-gray-900",children:"Select Category"}),e.jsx(ke,{className:"p-2 rounded-lg hover:bg-gray-100",children:e.jsx(ie,{className:"w-5 h-5 text-gray-500"})})]}),e.jsx("div",{className:"px-4 py-4 space-y-2",children:t.map(d=>{const p=a===d.id;return e.jsx("button",{type:"button",onClick:()=>{i(d.id),c(!1)},className:Te("w-full text-left px-4 py-3 rounded-xl transition-colors",p?"bg-purple-600 text-white":"bg-gray-50 text-gray-900 hover:bg-gray-100"),children:d.label},d.id)})})]})]})})]})}const Qe=({onNavigateBack:a})=>{const[i,t]=o.useState(1),[r,n]=o.useState(!1),[c,h]=o.useState(!1),{createPrediction:y}=De(),{user:d,isAuthenticated:p}=ze(),{user:C}=Oe(),T=C??d??null,D=!!C||p,E=le(),u="fcz_create_prediction_draft",[S,F]=o.useState(!1);o.useEffect(()=>{Q({delay:200})},[]);const{categories:ee,isLoading:ne}=qe(),[j,I]=o.useState(""),[z,Y]=o.useState(""),[v,R]=o.useState(null),[b,q]=o.useState("binary"),[f,O]=o.useState([{id:"1",label:"Yes"},{id:"2",label:"No"}]),[w,L]=o.useState(""),[N,U]=o.useState("1"),[A,B]=o.useState("1000"),[_,H]=o.useState("manual"),[P,G]=o.useState(!1),[W,oe]=o.useState(null),[J,ce]=o.useState(null),[K,de]=o.useState(""),[V,me]=o.useState("Africa/Lagos"),[X,ue]=o.useState({postponed:"auto_void",source_down:"use_backup"});o.useEffect(()=>{sessionStorage.getItem(u)&&F(!0)},[]);const Z=o.useCallback(()=>{const s=sessionStorage.getItem(u);if(!s)return!1;try{const l=JSON.parse(s);return I(l.title||""),Y(l.description||""),l.categoryId?R(l.categoryId):R(null),q(l.type||"binary"),O(l.options||[{id:"1",label:"Yes"},{id:"2",label:"No"}]),L(l.entryDeadline||""),U(l.stakeMin||"1"),B(l.stakeMax||"1000"),H(l.settlementMethod||"manual"),G(l.isPrivate||!1),oe(l.primarySource||null),ce(l.backupSource||null),de(l.ruleText||""),me(l.timezone||"Africa/Lagos"),ue(l.contingencies||{postponed:"auto_void",source_down:"use_backup"}),l.step&&t(l.step),!0}catch{return!1}},[]),te=o.useCallback(()=>{const s={title:j,description:z,categoryId:v,type:b,options:f,entryDeadline:w,stakeMin:N,stakeMax:A,settlementMethod:_,isPrivate:P,primarySource:W,backupSource:J,ruleText:K,timezone:V,contingencies:X,step:i};sessionStorage.setItem(u,JSON.stringify(s)),F(!0)},[j,z,v,b,f,w,N,A,_,P,W,J,K,V,X,i]),xe=o.useCallback(()=>{sessionStorage.removeItem(u),F(!1)},[]);o.useEffect(()=>{if(D&&T&&S&&sessionStorage.getItem(u)){const l=setTimeout(()=>{Z()&&$.success("Draft restored! You can continue creating your prediction.")},300);return()=>clearTimeout(l)}},[D,T,S,Z]);const he=[{id:"binary",label:"Yes/No",description:"Simple binary outcome prediction",icon:"ðŸŽ¯"},{id:"multiple",label:"Multiple Choice",description:"Multiple possible outcomes",icon:"ðŸŽ²"}],pe=o.useCallback(()=>{const s=(f.length+1).toString();O(l=>[...l,{id:s,label:""}])},[f.length]),fe=o.useCallback(s=>{O(l=>l.filter(k=>k.id!==s))},[]),be=o.useCallback((s,l)=>{O(k=>k.map(x=>x.id===s?{...x,label:l}:x))},[]),M=o.useCallback(s=>{switch(s){case 1:return!!(j.trim()&&v);case 2:return!!(b&&f.every(l=>l.label.trim()));case 3:return!!(w&&N);case 4:return!0;default:return!0}},[j,v,b,f,w,N]),ge=o.useCallback(()=>{M(i)&&i<4&&(t(i+1),Q({delay:150}))},[i,M]),se=o.useCallback(()=>{i>1?(t(i-1),Q({delay:150})):a&&a()},[i,a]),ye=o.useCallback(async()=>{if(!M(4)){$.error("Please fill in all required fields");return}n(!0);try{if(!j.trim())throw new Error("Title is required");if(!v)throw new Error("Category is required");if(!w)throw new Error("Entry deadline is required");const s=new Date(w);if(s<=new Date)throw new Error("Entry deadline must be in the future");if(!D||!T?.id){te();const x=await Ae({intent:"create_prediction",payload:{step:4}});if(x.status==="success")return;n(!1),x.status==="cancel"&&$("Sign in cancelled. Your draft has been saved.");return}const l={title:j.trim(),description:z.trim()||void 0,categoryId:v,type:b,options:f.filter(x=>x.label.trim()).map(x=>({id:x.id,label:x.label.trim(),totalStaked:0,currentOdds:2})),entryDeadline:s,stakeMin:Math.max(1,parseFloat(N)||100),stakeMax:A?Math.max(parseFloat(N)||100,parseFloat(A)):void 0,settlementMethod:_,isPrivate:P,creatorId:T.id};if(l.options.length<2)throw new Error("At least 2 prediction options are required");const k=await y(l);if(_==="auto"&&k)try{const{createSettlementConfig:x}=Le.getState();await x(k.id,{method:"web",primary_source_id:W?.id,backup_source_id:J?.id,rule_text:K||`Check if ${j} by ${w}`,timezone:V,contingencies:X})}catch{}sessionStorage.removeItem(u),F(!1),$.success("ðŸŽ‰ Prediction created successfully!"),h(!0),setTimeout(()=>{t(1),I(""),Y(""),R(null),q("binary"),O([{id:"1",label:"Yes"},{id:"2",label:"No"}]),L(""),U("100"),B("10000"),H("manual"),G(!1),h(!1),n(!1),E("/predictions",{replace:!0})},2e3)}catch(s){const l=s instanceof Error?s.message:"Failed to create prediction. Please try again.";$.error(l),n(!1)}},[M,j,v,w,z,b,f,N,A,_,P,D,T,y,E,te]);return c?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-teal-100 flex items-center justify-center px-6",children:e.jsxs(m.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},className:"bg-white rounded-3xl p-8 text-center shadow-2xl border border-teal-200",children:[e.jsx(m.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:200,damping:10},className:"w-16 h-16 bg-teal-500 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(ae,{size:32,className:"text-white"})}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Prediction Created!"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Your prediction has been successfully created and is now live."}),e.jsx("div",{className:"text-sm text-teal-600 font-medium",children:"Redirecting to My Predictions..."})]})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 pb-20 create-prediction-page",children:[e.jsx(Be,{title:"Create Prediction",subtitle:`Step ${i} of 4`,showLogo:!1,showBack:!0,onBack:se,className:"bg-gradient-to-r from-emerald-500 to-teal-600 text-white border-b-0"}),e.jsx("div",{className:"bg-gradient-to-r from-emerald-500 to-teal-600 px-4 pb-4",children:e.jsx("div",{className:"bg-white/20 rounded-full h-2",children:e.jsx(m.div,{initial:{width:0},animate:{width:`${i/4*100}%`},transition:{duration:.5},className:"h-full bg-white rounded-full"})})}),S&&!D&&e.jsx("div",{className:"px-6 pt-4 pb-2",children:e.jsxs(m.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"bg-amber-50 border border-amber-200 rounded-xl p-4 flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx($e,{className:"w-5 h-5 text-amber-600 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Resume draft?"}),e.jsx("p",{className:"text-xs text-amber-700",children:"You have a saved draft from a previous session."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Z,className:"px-4 py-2 text-sm font-semibold text-amber-900 bg-amber-100 rounded-lg hover:bg-amber-200 transition-colors",children:"Resume"}),e.jsx("button",{onClick:xe,className:"px-4 py-2 text-sm font-medium text-amber-700 hover:text-amber-900 transition-colors",children:"Discard"})]})]})}),e.jsx("div",{className:"px-6 -mt-4 pb-8 relative z-20",children:e.jsxs(m.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/90 backdrop-blur-xl rounded-3xl border border-gray-200/50 shadow-2xl p-6",children:[e.jsxs(Ce,{mode:"wait",initial:!1,children:[i===1&&e.jsxs(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-teal-600 rounded-2xl flex items-center justify-center",children:e.jsx(Ee,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Basic Information"}),e.jsx("p",{className:"text-gray-600",children:"Tell us about your prediction"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Prediction Title *"}),e.jsx("input",{type:"text",value:j,onChange:s=>I(s.target.value),placeholder:"Will Bitcoin reach $100,000 by end of 2024?",className:"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder-gray-500"})]}),e.jsxs("div",{className:"textarea-container",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:z,onChange:s=>Y(s.target.value),placeholder:"Provide additional context and rules for your prediction...",rows:4,className:"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200 text-gray-900 placeholder-gray-500 resize-none"})]}),e.jsxs("div",{className:"form-section",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Category *"}),e.jsx(Ge,{value:v,onChange:R,categories:ee,isLoading:ne})]})]})]},"step1"),i===2&&e.jsxs(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl flex items-center justify-center",children:e.jsx(re,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Prediction Setup"}),e.jsx("p",{className:"text-gray-600",children:"Configure your prediction options"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Prediction Type *"}),e.jsx("div",{className:"space-y-3",children:he.map(s=>e.jsx(m.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>{q(s.id),s.id==="binary"?O([{id:"1",label:"Yes"},{id:"2",label:"No"}]):s.id==="multiple"&&O([{id:"1",label:""},{id:"2",label:""},{id:"3",label:""}])},className:`motion-button w-full p-4 rounded-2xl border-2 text-left transition-all duration-200 ${b===s.id?"border-blue-500 bg-blue-50":"border-gray-200 bg-white hover:border-blue-300"}`,children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"text-2xl",children:s.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:s.label}),e.jsx("p",{className:"text-sm text-gray-600",children:s.description})]})]})},s.id))})]}),(b==="binary"||b==="multiple")&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Prediction Options *"}),e.jsxs("div",{className:"space-y-3",children:[f.map((s,l)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"input-container flex-1",children:e.jsx("input",{type:"text",value:s.label,onChange:k=>be(s.id,k.target.value),placeholder:`Option ${l+1}`,className:"w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-500 focus:outline-none transition-all duration-200"})}),b==="multiple"&&f.length>2&&e.jsx(m.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>fe(s.id),className:"motion-button w-10 h-10 bg-red-100 text-red-600 rounded-xl flex items-center justify-center hover:bg-red-200 transition-colors",children:e.jsx(ie,{size:18})})]},s.id)),b==="multiple"&&f.length<6&&e.jsxs(m.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:pe,className:"motion-button w-full p-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-blue-400 hover:text-blue-600 transition-all duration-200 flex items-center justify-center gap-2",children:[e.jsx(Fe,{size:18}),e.jsx("span",{children:"Add Option"})]})]})]})]})]},"step2"),i===3&&e.jsxs(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(Re,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Settings & Launch"}),e.jsx("p",{className:"text-gray-600",children:"Final configuration details"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Entry Deadline *"}),e.jsx("input",{type:"datetime-local",value:w,onChange:s=>L(s.target.value),min:new Date().toISOString().slice(0,16),className:"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Minimum Stake ($)"}),e.jsx("input",{type:"number",value:N,onChange:s=>U(s.target.value),placeholder:"100",min:"1",className:"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200"})]}),e.jsxs("div",{className:"input-container",children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Maximum Stake ($)"}),e.jsx("input",{type:"number",value:A,onChange:s=>B(s.target.value),placeholder:"100000",min:N||"1",className:"w-full p-4 border-2 border-gray-200 rounded-2xl focus:border-teal-500 focus:outline-none transition-all duration-200"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Settlement Method"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(m.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>H("manual"),className:`w-full p-4 rounded-2xl border-2 text-left transition-all duration-200 ${_==="manual"?"border-teal-500 bg-teal-50":"border-gray-200 bg-white hover:border-teal-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-teal-100 rounded-lg flex items-center justify-center",children:e.jsx(He,{size:16,className:"text-teal-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Manual Settlement"}),e.jsx("p",{className:"text-sm text-gray-600",children:"You resolve the prediction manually"})]})]})}),e.jsx(m.button,{whileHover:{scale:1.01},whileTap:{scale:.99},onClick:()=>H("auto"),className:`w-full p-4 rounded-2xl border-2 text-left transition-all duration-200 ${_==="auto"?"border-teal-500 bg-teal-50":"border-gray-200 bg-white hover:border-teal-300"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsx(re,{size:16,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Automatic Settlement"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Resolved automatically when possible"})]})]})})]})]}),e.jsx("div",{className:"bg-gray-50 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:"Private Prediction"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Only people with link can participate"})]}),e.jsx(m.button,{whileTap:{scale:.95},onClick:()=>G(!P),className:`relative w-12 h-6 rounded-full transition-all duration-200 ${P?"bg-teal-500":"bg-gray-300"}`,children:e.jsx(m.div,{animate:{x:P?24:2},transition:{type:"spring",stiffness:500,damping:30},className:"absolute top-1 w-4 h-4 bg-white rounded-full shadow"})})]})})]})]},"step3"),i===4&&e.jsxs(m.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},exit:{opacity:0,x:-50},transition:{duration:.3},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl flex items-center justify-center",children:e.jsx(ae,{size:24,className:"text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Preview & Confirm"}),e.jsx("p",{className:"text-gray-600",children:"Review your prediction before publishing"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-2xl border border-gray-200 p-6 shadow-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Prediction Preview"}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Title"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:j})]}),z&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Description"}),e.jsx("p",{className:"text-gray-700",children:z})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Category"}),e.jsx("span",{className:"inline-block px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium",children:v?ee.find(s=>s.id===v)?.label||"Unknown":"Not selected"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-2",children:"Options"}),e.jsx("div",{className:"space-y-2",children:f.map((s,l)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-600",children:["Option ",l+1,":"]}),e.jsx("span",{className:"font-semibold text-gray-900",children:s.label})]},s.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Stake Limits"}),e.jsxs("p",{className:"text-gray-900",children:["$",N," - $",A]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Deadline"}),e.jsx("p",{className:"text-gray-900",children:new Date(w).toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Settlement"}),e.jsx("p",{className:"text-gray-900 capitalize",children:_})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Privacy"}),e.jsx("p",{className:"text-gray-900",children:P?"Private":"Public"})]})]})]}),e.jsx("div",{className:"bg-teal-50 border border-teal-200 rounded-2xl p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ie,{size:20,className:"text-teal-600"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-teal-800",children:"Ready to Publish"}),e.jsx("p",{className:"text-sm text-teal-700",children:'Your prediction looks good! Click "Create Prediction" to publish it.'})]})]})})]})]},"step4")]}),e.jsxs("div",{className:"flex items-center justify-between mt-8 pt-6 border-t border-gray-200",children:[e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:se,className:"px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-xl hover:bg-gray-200 transition-all duration-200",children:i===1?"Cancel":"Back"}),i<4?e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ge,disabled:!M(i),className:`px-8 py-3 font-semibold rounded-xl shadow-lg transition-all duration-200 ${M(i)?"bg-gradient-to-r from-purple-500 to-teal-600 text-white shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:i===3?"Preview":"Continue"}):e.jsx(m.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:ye,disabled:!M(4)||r,className:`px-8 py-3 font-semibold rounded-xl shadow-lg transition-all duration-200 flex items-center gap-2 ${M(4)&&!r?"bg-gradient-to-r from-purple-500 to-teal-600 text-white shadow-purple-500/25 hover:shadow-xl hover:shadow-purple-500/30":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:r?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):"Create Prediction"})]})]})})]})};export{Qe as default};
