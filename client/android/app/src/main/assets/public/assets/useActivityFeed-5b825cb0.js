import{r as e}from"./vendor-499a370b.js";function $({predictionId:s,userId:r,limit:f=25,autoLoad:w=!0}){const[A,h]=e.useState([]),[n,S]=e.useState(!1),[E,v]=e.useState(null),[y,d]=e.useState(),[g,m]=e.useState(!0),i=e.useRef(!1),b=e.useCallback(u=>{const l="/api/v2/activity",t=new URLSearchParams;if(f&&t.set("limit",f.toString()),u&&t.set("cursor",u),s)return`${l}/predictions/${s}?${t.toString()}`;if(r)return`${l}/user/${r}?${t.toString()}`;throw new Error("Either predictionId or userId must be provided")},[s,r,f]),c=e.useCallback(async(u,l=!1)=>{if(!n){S(!0),v(null);try{const t=b(u);console.log("ðŸ” Fetching activity feed:",t);const o=await fetch(t);if(!o.ok)throw new Error(`HTTP ${o.status}: ${o.statusText}`);const a=await o.json();h(l?p=>[...p,...a.items]:a.items),d(a.nextCursor),m(a.hasMore),console.log("âœ… Activity feed loaded:",{itemsCount:a.items.length,hasMore:a.hasMore,nextCursor:a.nextCursor})}catch(t){const o=t instanceof Error?t.message:"Failed to fetch activity feed";console.error("âŒ Activity feed error:",o),v(o)}finally{S(!1)}}},[n,b]),M=e.useCallback(async()=>{!g||n||!y||await c(y,!0)},[g,n,y,c]),k=e.useCallback(async()=>{d(void 0),m(!0),i.current=!1,await c(void 0,!1)},[c]),C=e.useCallback(()=>{h([]),d(void 0),m(!0),v(null),i.current=!1},[]);return e.useEffect(()=>{w&&(s||r)&&!i.current&&(i.current=!0,C(),c(void 0,!1))},[s,r,w,C]),{items:A,loading:n,error:E,hasMore:g,loadMore:M,refresh:k,clear:C}}function U(s,r){return $({predictionId:s,...r})}function F(s,r){return $({userId:s,...r})}export{U as a,F as b,$ as u};
