import{r as f}from"./vendor-499a370b.js";import{f as _,H as C}from"./index-6112b649.js";import{j as d}from"./ui-6244b3df.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N=_("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),j=new Set(["the","a","an","of","and","or","to","by","with","for","on","in","at","is","are","be","will"]),x={btc:"bitcoin",eth:"ethereum",nfl:"american football",futbol:"soccer",coin:"cryptocurrency"},A=[{match:e=>/\bapple\b/.test(e)&&/\b(i(phone|os|pad|watch)|mac|iphone|ios|ipad|macbook|apple inc)\b/.test(e),query:e=>"iPhone smartphone product shot modern "+(/\biphone\b/.test(e)?"apple":"")},{match:e=>/\bapple\b/.test(e),query:e=>"Apple Inc logo brand minimal dark"},{match:e=>/\bbitcoin|btc\b/.test(e),query:e=>"bitcoin logo coin cryptocurrency"},{match:e=>/\beth(ereum)?\b/.test(e),query:e=>"ethereum logo coin cryptocurrency"},{match:e=>/\b(nba|basketball)\b/.test(e),query:e=>"basketball game court action"},{match:e=>/\b(nfl|american football)\b/.test(e),query:e=>"american football game stadium action"},{match:e=>/\bsoccer|footballer|premier league|la liga|fifa\b/.test(e),query:e=>"soccer football player action stadium"},{match:e=>/\bcentral bank|interest rate|inflation|fed|ecb|boj\b/.test(e),query:e=>"central bank building finance macro"}],P={tech:"technology smartphone gadget product render",crypto:"cryptocurrency blockchain finance digital asset",sports:"sports action stadium crowd",politics:"government politics podium flag press",finance:"stock market finance trading charts",custom:"illustration minimal abstract"};function I(e){return e.toLowerCase().replace(/[$€£#@.,/!?()"'`]/g," ").replace(/\s+/g," ").trim()}function z(e){return I(e).split(" ").filter(a=>a&&!j.has(a)).map(a=>x[a]??a)}function L(e,t){const a=I(e);for(const n of A)if(n.match(a))return n.query(a);const r=z(e).filter((n,c)=>c<6).join(" "),s=t?P[t]??"":"";return[r,s,"landscape modern"].filter(Boolean).join(" ")}const M="KoLAbON534ZA8GNcNdZGTEoDtNBarlgJArGSokyuGkI",U="MNVZGjhI06B65Il9QFX2GVU9D3nHftQzMZhMcWVNICUQtrKYbf4JoSKf",v="https://ihtnsyhknvltgrksffun.supabase.co",E="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlodG5zeWhrbnZsdGdya3NmZnVuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTM2NzA2MzYsImV4cCI6MjA2OTI0NjYzNn0.ZmoZ5cGVHfhDwTvkmaw9LSVHm_awoyMOTyQKewr7rYo",b=C(v,E,{auth:{persistSession:!1,detectSessionInUrl:!1,storageKey:"prediction-media-cache"}}),u=new Map,w={tech:["https://images.unsplash.com/photo-1518770660439-4636190af475","https://images.unsplash.com/photo-1510552776732-03e61cf4b144"],crypto:["https://images.unsplash.com/photo-1621416894569-0f39d71dbe8f","https://images.unsplash.com/photo-1518544801976-3e4e4474c1ee"],sports:["https://images.unsplash.com/photo-1459865264687-595d652de67e","https://images.unsplash.com/photo-1521417531630-0a222dda9bda"],politics:["https://images.unsplash.com/photo-1530036723598-68bd9f06e1d2"],finance:["https://images.unsplash.com/photo-1526304640581-d334cdbbf45e"],entertainment:["https://images.unsplash.com/photo-1515165562835-c3b8c0b0b0d6"],general:["https://images.unsplash.com/photo-1500530855697-b586d89ba3ee"]};function q(e){let t=2166136261;for(let a=0;a<e.length;a++)t^=e.charCodeAt(a),t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24);return t>>>0}async function T(e){try{const t=new URL("https://api.unsplash.com/search/photos");t.searchParams.set("query",e),t.searchParams.set("per_page","1"),t.searchParams.set("orientation","landscape");const a=await fetch(t.toString(),{headers:{Authorization:`Client-ID ${M}`}});return a.ok&&(await a.json())?.results?.[0]?.urls?.regular||null}catch(t){return console.warn("[Unsplash] Search error:",t),null}}async function Z(e){try{const t=new URL("https://api.pexels.com/v1/search");t.searchParams.set("query",e),t.searchParams.set("per_page","1"),t.searchParams.set("orientation","landscape");const a=await fetch(t.toString(),{headers:{Authorization:U}});return a.ok&&(await a.json())?.photos?.[0]?.src?.large||null}catch(t){return console.warn("[Pexels] Search error:",t),null}}async function G(e){if(!b)return null;try{const{data:t,error:a}=await b.from("prediction_media").select("image_url").eq("prediction_id",e).maybeSingle();return a?(console.warn("[Cache] Read error:",a.message),null):t?.image_url??null}catch(t){return console.warn("[Cache] Read exception:",t),null}}async function Y(e,t,a){if(b)try{const{error:r}=await b.from("prediction_media").upsert({prediction_id:e,image_url:t,query:a,source:t?"api":"fallback"});r&&console.warn("[Cache] Write error:",r.message)}catch(r){console.warn("[Cache] Write exception:",r)}}function p(e,t){const a=q(e||"default"),r=t?t.toLowerCase():"general",s=w.general,n=w[r]||s,c=(n&&n.length>0?n:s)||[];if(c.length===0)return"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee";const i=Math.abs(a)%c.length;return c[i]??c[0]??"https://images.unsplash.com/photo-1500530855697-b586d89ba3ee"}function F(e){const[t,a]=f.useState(()=>{if(!e)return p("","general");if(u.has(e.id)){const i=u.get(e.id);if(i)return i}return p(e.id,e.category)}),[r,s]=f.useState("loading"),[n,c]=f.useState(!1);return f.useEffect(()=>{let i=!1;if(!e){a(p("","general")),s("ready"),c(!0);return}const{id:o,title:y,category:k}=e;if(!o||!y){a(p(o,k)),s("ready"),c(!0);return}const S=setTimeout(()=>{c(!0)},100);return(async()=>{if(u.has(o)){const h=u.get(o);!i&&h&&!n&&h!==t?(a(h),s("ready")):i||s("ready");return}const m=await G(o);if(i)return;if(m&&!n){u.set(o,m),(!t||t.includes("photo-1500530855697-b586d89ba3ee")||t.includes("photo-"))&&m!==t&&a(m),s("ready");return}else if(m){u.set(o,m),s("ready");return}if(n){s("ready");return}const g=L(y,k);let l=await T(g);l||(l=await Z(g)),!i&&(l&&!n?(!t||t.includes("photo-1500530855697-b586d89ba3ee"))&&l!==t?(u.set(o,l),a(l)):u.set(o,l):l&&u.set(o,l),s("ready"),Y(o,l,g))})(),()=>{i=!0,clearTimeout(S)}},[e?.id,e?.title,e?.category]),{url:t||p(e?.id||"",e?.category),alt:e?.title||"",provider:t?"api":"fallback",status:r}}function R(e,t){const a=t??{id:e||"",title:"",category:void 0},r=F(a);return{media:{id:a.id,url:r.url,alt:r.alt,provider:r.provider},status:r.status}}const B=e=>e?e.full_name&&e.full_name.trim()?e.full_name.trim():e.displayName&&e.displayName.trim()?e.displayName.trim():e.username&&e.username.trim()?`@${e.username.trim()}`:e.handle&&e.handle.trim()?`@${e.handle.trim()}`:"Anonymous":"Anonymous";function V({creator:e,className:t=""}){const a=e?.avatar_url||e?.avatarUrl,r=B(e);return d.jsxs("div",{className:`flex items-center gap-2 text-sm text-muted-foreground ${t}`,children:[a&&d.jsx("img",{src:a,alt:"",className:"size-5 rounded-full object-cover bg-muted",loading:"lazy",referrerPolicy:"no-referrer",onError:s=>{s.target.style.display="none"}}),d.jsx("span",{children:"Created by"}),d.jsxs("span",{className:"font-medium text-foreground flex items-center gap-1",children:[r,e?.is_verified&&d.jsx(N,{className:"size-4 text-primary","aria-label":"Verified"})]})]})}export{V as C,R as u};
